<!-- 点对点应答功能区域 -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0">
                    <i class="bi bi-chat-dots"></i> 点对点智能应答
                </h6>
            </div>
            <div class="card-body">
                <form id="uploadForm">
                    <!-- 公司选择 -->
                    <div class="row mb-4">
                        <div class="col-md-8">
                            <label for="companySelect" class="form-label">
                                <i class="bi bi-building"></i> 选择公司
                            </label>
                            <select class="form-select" id="companySelect" name="companyId">
                                <option value="">请选择公司...</option>
                                <!-- 公司选项将通过JavaScript动态加载 -->
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">&nbsp;</label>
                            <div>
                                <button type="button" class="btn btn-outline-primary" id="refreshCompaniesBtn">
                                    <i class="bi bi-arrow-clockwise"></i> 刷新
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 文件上传区域 -->
                    <div class="mb-4">
                        <label class="form-label">
                            <i class="bi bi-file-earmark-text"></i> 招标文档上传
                        </label>
                        <div class="upload-area" id="uploadArea">
                            <i class="bi bi-cloud-upload-fill text-primary display-1"></i>
                            <h5 class="mt-3">拖放文档到此处</h5>
                            <p class="text-muted mb-3">或点击选择文件</p>
                            <p class="text-muted small">
                                支持格式：Word文档 (.docx, .doc) 和 PDF文件 (.pdf)<br>
                                最大文件大小：50MB
                            </p>
                            <input type="file" class="d-none" id="fileInput" name="file"
                                   accept=".docx,.doc,.pdf">
                        </div>

                        <!-- 文件信息显示 -->
                        <div class="mt-3 d-none" id="fileInfo">
                            <div class="alert alert-info d-flex align-items-center">
                                <i class="bi bi-file-earmark-text me-2"></i>
                                <div>
                                    已选择文件：<strong id="fileName"></strong>
                                    <span class="text-muted" id="fileSize"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 处理配置 -->
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <label for="responseFrequency" class="form-label">
                                <i class="bi bi-gear"></i> 应答频率
                            </label>
                            <select class="form-select" id="responseFrequency" name="responseFrequency">
                                <option value="every_paragraph">每段应答</option>
                                <option value="every_page">每页应答</option>
                                <option value="every_section">每章节应答</option>
                                <option value="end_of_document">文档末尾统一应答</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="responseMode" class="form-label">
                                <i class="bi bi-cpu"></i> 应答方式
                            </label>
                            <select class="form-select" id="responseMode" name="responseMode">
                                <option value="ai" selected>AI智能应答</option>
                                <option value="simple">简单应答</option>
                            </select>
                        </div>
                    </div>

                    <!-- AI模型选择 -->
                    <div class="mb-4" id="aiModelSelection">
                        <label for="aiModel" class="form-label">
                            <strong>选择AI模型：</strong>
                            <button type="button" class="btn btn-sm btn-outline-info ms-2" onclick="refreshModels()">
                                <i class="bi bi-arrow-clockwise"></i> 刷新
                            </button>
                        </label>
                        <select class="form-select" name="aiModel" id="aiModel" onchange="onModelChange()">
                            <optgroup label="始皇API">
                                <option value="shihuang-gpt4o-mini" selected>始皇-GPT4o迷你版（快速高效）</option>
                                <option value="shihuang-gpt4">始皇-GPT4专业版（深度分析）</option>
                            </optgroup>
                            <optgroup label="联通元景">
                                <option value="unicom-yuanjing">联通元景模型</option>
                            </optgroup>
                            <optgroup label="OpenAI">
                                <option value="gpt-4o-mini">GPT-4O Mini (推荐)</option>
                                <option value="gpt-4o">GPT-4O (高质量)</option>
                                <option value="gpt-3.5-turbo">GPT-3.5 Turbo (快速)</option>
                            </optgroup>
                        </select>

                        <!-- 模型状态显示 -->
                        <div class="mt-2" id="modelStatus" style="display: none;">
                            <small class="d-flex align-items-center">
                                <span id="modelStatusIcon" class="me-1"></span>
                                <span id="modelStatusText"></span>
                            </small>
                        </div>
                    </div>

                    <!-- 处理按钮 -->
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg" id="processBtn" disabled>
                            <i class="bi bi-play-circle"></i> 开始处理
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- 进度条 -->
<div class="progress mb-3 d-none" id="progressBar">
    <div class="progress-bar progress-bar-striped progress-bar-animated"
         role="progressbar" style="width: 0%"></div>
</div>

<!-- 处理结果区域 -->
<div class="row d-none" id="resultArea">
    <div class="col-12">
        <div class="card border-success">
            <div class="card-header bg-success text-white">
                <h6 class="mb-0">
                    <i class="bi bi-check-circle"></i> 处理完成
                </h6>
            </div>
            <div class="card-body">
                <div id="resultMessage" class="mb-3">
                    <!-- 处理结果信息将在这里显示 -->
                </div>
                <div class="text-center">
                    <button class="btn btn-success" id="downloadBtn">
                        <i class="bi bi-download"></i> 下载结果文件
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 错误显示区域 -->
<div class="row d-none" id="errorArea">
    <div class="col-12">
        <div class="card border-danger">
            <div class="card-header bg-danger text-white">
                <h6 class="mb-0">
                    <i class="bi bi-x-circle"></i> 处理失败
                </h6>
            </div>
            <div class="card-body">
                <div class="alert alert-danger" id="errorMessage">
                    <!-- 错误信息将在这里显示 -->
                </div>
                <div class="text-center">
                    <button class="btn btn-outline-danger me-2" id="retryBtn">
                        <i class="bi bi-arrow-clockwise"></i> 重试
                    </button>
                    <button class="btn btn-outline-secondary" id="resetBtn">
                        <i class="bi bi-x-circle"></i> 重置
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>