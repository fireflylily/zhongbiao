<!-- 项目总览Tab面板 -->
<div class="tab-pane fade" id="project-overview" role="tabpanel" aria-labelledby="project-overview-nav">
    <div class="container-fluid p-0">
        <!-- 页面标题 -->
        <div class="page-header mb-4" data-css-loaded="false">
            <h3 class="mb-2">
                <i class="bi bi-list-task text-primary me-2"></i>项目总览
            </h3>
            <p class="text-muted">管理所有标书项目，查看各阶段进展情况</p>
        </div>

        <!-- 工具栏 -->
        <div class="card mb-3">
            <div class="card-body">
                <div class="row align-items-center g-3">
                    <div class="col-md-4">
                        <div class="btn-group" role="group">
                            <button class="btn btn-primary btn-sm" onclick="projectOverviewManager.createNewProject()">
                                <i class="bi bi-plus-circle me-2"></i>新建项目
                            </button>
                            <button class="btn btn-success btn-sm" onclick="projectOverviewManager.refreshList()">
                                <i class="bi bi-arrow-clockwise me-2"></i>刷新
                            </button>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <select class="form-select form-select-sm" id="projectStatusFilter" onchange="projectOverviewManager.applyFilters()">
                            <option value="">全部状态</option>
                            <option value="not_started">未开始</option>
                            <option value="in_progress">进行中</option>
                            <option value="completed">已完成</option>
                        </select>
                    </div>
                    <div class="col-md-5">
                        <div class="input-group input-group-sm">
                            <input type="text" class="form-control" placeholder="搜索项目名称或公司..."
                                   id="projectSearchInput">
                            <button class="btn btn-outline-secondary" onclick="projectOverviewManager.searchProjects()">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 项目列表表格 -->
        <div class="card">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead class="table-light">
                            <tr>
                                <th width="30" class="ps-3">
                                    <input type="checkbox" class="form-check-input" id="selectAllProjects"
                                           onchange="projectOverviewManager.toggleSelectAll(this)">
                                </th>
                                <th>项目名称</th>
                                <th>公司名称</th>
                                <th>被授权人</th>
                                <th width="120">商务应答</th>
                                <th width="120">技术点对点</th>
                                <th width="120">技术方案</th>
                                <th width="120">最后融合</th>
                                <th width="100">操作</th>
                            </tr>
                        </thead>
                        <tbody id="projectOverviewListBody">
                            <!-- 初始加载状态 -->
                            <tr>
                                <td colspan="9" class="text-center">
                                    <div class="py-5">
                                        <div class="spinner-border text-primary" role="status">
                                            <span class="visually-hidden">加载中...</span>
                                        </div>
                                        <p class="mt-3 text-muted">正在加载项目列表...</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- 分页 -->
                <div class="d-flex justify-content-center p-3" id="projectPaginationContainer"></div>
            </div>
        </div>
    </div>
</div>

<script>
// 项目总览Tab的CSS动态加载
(function() {
    const projectOverviewTab = document.getElementById('project-overview-nav');
    if (projectOverviewTab) {
        projectOverviewTab.addEventListener('shown.bs.tab', async function() {
            const pageHeader = document.querySelector('#project-overview .page-header');

            // 检查是否已加载CSS
            if (pageHeader && pageHeader.dataset.cssLoaded === 'false') {
                console.log('[ProjectOverview] 加载项目总览CSS...');

                // 加载CSS (如果CSSLoader可用)
                if (window.loadCSSForTab) {
                    try {
                        await window.loadCSSForTab('project-overview');
                        pageHeader.dataset.cssLoaded = 'true';
                        console.log('[ProjectOverview] CSS加载完成');
                    } catch (error) {
                        console.error('[ProjectOverview] CSS加载失败:', error);
                    }
                }
            }
        });
    }
})();
</script>