import{_ as e}from"./_plugin-vue_export-helper-BZqs1yfm.js";import{E as a,a as t}from"./el-tab-pane-CeYgwqkk.js";import{E as l}from"./el-space-CySvm7XR.js";import{E as n}from"./el-divider-Dr_mtr9k.js";import{E as i,a as s,b as o}from"./el-date-picker-panel-DBQUi6KU.js";/* empty css                 *//* empty css                *//* empty css                 */import"./el-scrollbar-CxZt4BCk.js";/* empty css                   */import{E as d}from"./el-input-number-Bd1Iq8-1.js";/* empty css                             */import{a as r,E as c}from"./el-form-item-B_TvUsZB.js";import{E as u,a as p}from"./el-col-DR3qk7qZ.js";/* empty css               */import{s as h,E as f,a as _}from"./el-select-bIavA1Zf.js";import{aR as m,aS as v,am as y,aq as g,ag as b,b as k,aT as C,y as x,aU as N,an as w,av as z,W as E,_ as j,d as D,v as K,N as S,C as V,ah as I,M as A,r as q,ac as T,aa as B,X as U,ai as $,aj as L,c as O,o as F,e as M,g as P,B as R,a0 as H,w as W,G as Y,I as J,h as G,D as Q,a6 as X,aB as Z,aQ as ee,H as ae,A as te,aV as le,O as ne,L as ie,aW as se,V as oe,R as de,$ as re,t as ce,p as ue,n as pe,K as he,x as fe,aH as _e,aX as me,J as ve,i as ye,k as ge,l as be,aA as ke,E as Ce,aY as xe,F as Ne,aD as we,ay as ze,az as Ee}from"./index.js";import{L as je}from"./Loading-DdI__2QU.js";import"./DocumentPreview.vue_vue_type_style_index_0_scoped_c8a3e4c1_lang-CvTZjc9R.js";import{E as De}from"./index-_IbxD8AI.js";import"./el-alert-CXP7XODY.js";import{E as Ke}from"./el-checkbox-D7AoGZX-.js";import{E as Se}from"./index-Dc6VZPfZ.js";import{E as Ve,a as Ie}from"./el-collapse-item-CDndSUQr.js";/* empty css                        */import{t as Ae}from"./tender-OU9NbYj0.js";import{E as qe}from"./index--8zZ-JUF.js";import{E as Te}from"./index-IN6Zpv5z.js";import{c as Be}from"./company-DNfURC7c.js";import{u as Ue}from"./project-CBLXNrR9.js";import{E as $e}from"./index-ELBiC1Q4.js";import{E as Le,a as Oe}from"./index-Co1ZqTs4.js";import"./raf-Bx50Y2cR.js";import"./strings-DTuDRpJG.js";import"./omit-Czoq2i9Z.js";import"./_baseClone-DZAH0W8r.js";import"./dayjs.min-62TF2vD4.js";import"./castArray-pal66jBx.js";import"./index-DzZX4pf4.js";const Fe="$treeNodeId",Me=function(e,a){a&&!a[Fe]&&Object.defineProperty(a,Fe,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},Pe=(e,a)=>null==a?void 0:a[e||Fe],Re=(e,a,t)=>{const l=e.value.currentNode;t();const n=e.value.currentNode;l!==n&&a("current-change",n?n.data:null,n)},He=e=>{let a=!0,t=!0,l=!0;for(let n=0,i=e.length;n<i;n++){const i=e[n];(!0!==i.checked||i.indeterminate)&&(a=!1,i.disabled||(l=!1)),(!1!==i.checked||i.indeterminate)&&(t=!1)}return{all:a,none:t,allWithoutDisable:l,half:!a&&!t}},We=function(e){if(0===e.childNodes.length||e.loading)return;const{all:a,none:t,half:l}=He(e.childNodes);a?(e.checked=!0,e.indeterminate=!1):l?(e.checked=!1,e.indeterminate=!0):t&&(e.checked=!1,e.indeterminate=!1);const n=e.parent;n&&0!==n.level&&(e.store.checkStrictly||We(n))},Ye=function(e,a){const t=e.store.props,l=e.data||{},n=t[a];if(C(n))return n(l,e);if(x(n))return l[n];if(b(n)){const e=l[a];return b(e)?"":e}},Je=function(e,a){e.forEach(e=>{e.canFocus=a,Je(e.childNodes,a)})};let Ge=0;class Qe{constructor(e){this.isLeafByUser=void 0,this.isLeaf=void 0,this.id=Ge++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const a in e)m(e,a)&&(this[a]=e[a]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){var e;const a=this.store;if(!a)throw new Error("[Node]store is required!");a.registerNode(this);const t=a.props;if(t&&void 0!==t.isLeaf){const e=Ye(this,"isLeaf");v(e)&&(this.isLeafByUser=e)}if(!0!==a.lazy&&this.data?(this.setData(this.data),a.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&a.lazy&&a.defaultExpandAll&&!this.isLeafByUser&&this.expand(),y(this.data)||Me(this,this.data),!this.data)return;const l=a.defaultExpandedKeys,n=a.key;n&&!g(this.key)&&l&&l.includes(this.key)&&this.expand(null,a.autoExpandParent),n&&void 0!==a.currentNodeKey&&this.key===a.currentNodeKey&&(a.currentNode=this,a.currentNode.isCurrent=!0),a.lazy&&a._initDefaultCheckedNode(this),this.updateLeafState(),1!==this.level&&!0!==(null==(e=this.parent)?void 0:e.expanded)||(this.canFocus=!0)}setData(e){let a;y(e)||Me(this,e),this.data=e,this.childNodes=[],a=0===this.level&&y(this.data)?this.data:Ye(this,"children")||[];for(let t=0,l=a.length;t<l;t++)this.insertChild({data:a[t]})}get label(){return Ye(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return Ye(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const a=e.childNodes.indexOf(this);if(a>-1)return e.childNodes[a+1]}return null}get previousSibling(){const e=this.parent;if(e){const a=e.childNodes.indexOf(this);if(a>-1)return a>0?e.childNodes[a-1]:null}return null}contains(e,a=!0){return(this.childNodes||[]).some(t=>t===e||a&&t.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,a,t){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof Qe)){if(!t){const t=this.getChildren(!0);(null==t?void 0:t.includes(e.data))||(b(a)||a<0?null==t||t.push(e.data):null==t||t.splice(a,0,e.data))}Object.assign(e,{parent:this,store:this.store}),(e=k(new Qe(e)))instanceof Qe&&e.initialize()}e.level=this.level+1,b(a)||a<0?this.childNodes.push(e):this.childNodes.splice(a,0,e),this.updateLeafState()}insertBefore(e,a){let t;a&&(t=this.childNodes.indexOf(a)),this.insertChild(e,t)}insertAfter(e,a){let t;a&&(t=this.childNodes.indexOf(a),-1!==t&&(t+=1)),this.insertChild(e,t)}removeChild(e){const a=this.getChildren()||[],t=a.indexOf(e.data);t>-1&&a.splice(t,1);const l=this.childNodes.indexOf(e);l>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(l,1)),this.updateLeafState()}removeChildByData(e){let a=null;for(let t=0;t<this.childNodes.length;t++)if(this.childNodes[t].data===e){a=this.childNodes[t];break}a&&this.removeChild(a)}expand(e,a){const t=()=>{if(a){let e=this.parent;for(;e&&e.level>0;)e.expanded=!0,e=e.parent}this.expanded=!0,e&&e(),Je(this.childNodes,!0)};this.shouldLoadData()?this.loadData(e=>{y(e)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||We(this),t())}):t()}doCreateChildren(e,a={}){e.forEach(e=>{this.insertChild(Object.assign({data:e},a),void 0,!0)})}collapse(){this.expanded=!1,Je(this.childNodes,!1)}shouldLoadData(){return Boolean(!0===this.store.lazy&&this.store.load&&!this.loaded)}updateLeafState(){if(!0===this.store.lazy&&!0!==this.loaded&&void 0!==this.isLeafByUser)return void(this.isLeaf=this.isLeafByUser);const e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}setChecked(e,a,t,l){if(this.indeterminate="half"===e,this.checked=!0===e,this.store.checkStrictly)return;if(!this.shouldLoadData()||this.store.checkDescendants){const{all:t,allWithoutDisable:n}=He(this.childNodes);this.isLeaf||t||!n||(this.checked=!1,e=!1);const i=()=>{if(a){const t=this.childNodes;for(let s=0,o=t.length;s<o;s++){const n=t[s];l=l||!1!==e;const i=n.disabled?n.checked:l;n.setChecked(i,a,!0,l)}const{half:n,all:i}=He(t);i||(this.checked=i,this.indeterminate=n)}};if(this.shouldLoadData())return void this.loadData(()=>{i(),We(this)},{checked:!1!==e});i()}const n=this.parent;n&&0!==n.level&&(t||We(n))}getChildren(e=!1){if(0===this.level)return this.data;const a=this.data;if(!a)return null;const t=this.store.props;let l="children";return t&&(l=t.children||"children"),b(a[l])&&(a[l]=null),e&&!a[l]&&(a[l]=[]),a[l]}updateChildren(){const e=this.getChildren()||[],a=this.childNodes.map(e=>e.data),t={},l=[];e.forEach((e,n)=>{const i=e[Fe];!!i&&a.some(e=>(null==e?void 0:e[Fe])===i)?t[i]={index:n,data:e}:l.push({index:n,data:e})}),this.store.lazy||a.forEach(e=>{t[null==e?void 0:e[Fe]]||this.removeChildByData(e)}),l.forEach(({index:e,data:a})=>{this.insertChild({data:a},e)}),this.updateLeafState()}loadData(e,a={}){if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(a).length)e&&e.call(this);else{this.loading=!0;const t=t=>{this.childNodes=[],this.doCreateChildren(t,a),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,t)},l=()=>{this.loading=!1};this.store.load(this,t,l)}}eachNode(e){const a=[this];for(;a.length;){const t=a.shift();a.unshift(...t.childNodes),e(t)}}reInitChecked(){this.store.checkStrictly||We(this)}}class Xe{constructor(e){this.lazy=!1,this.checkStrictly=!1,this.autoExpandParent=!1,this.defaultExpandAll=!1,this.checkDescendants=!1,this.currentNode=null,this.currentNodeKey=null;for(const a in e)m(e,a)&&(this[a]=e[a]);this.nodesMap={}}initialize(){if(this.root=new Qe({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){(0,this.load)(this.root,e=>{this.root.doCreateChildren(e),this._initDefaultCheckedNodes()},N)}else this._initDefaultCheckedNodes()}filter(e){const a=this.filterNodeMethod,t=this.lazy,l=async function(n){const i=n.root?n.root.childNodes:n.childNodes;for(const[t,s]of i.entries())s.visible=!!(null==a?void 0:a.call(s,e,s.data,s)),t%80==0&&t>0&&await E(),await l(s);if(!n.visible&&i.length){let e=!0;e=!i.some(e=>e.visible),n.root?n.root.visible=!1===e:n.visible=!1===e}e&&n.visible&&!n.isLeaf&&(t&&!n.loaded||n.expand())};l(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof Qe)return e;const a=w(e)?Pe(this.key,e):e;return this.nodesMap[a]||null}insertBefore(e,a){var t;const l=this.getNode(a);null==(t=l.parent)||t.insertBefore({data:e},l)}insertAfter(e,a){var t;const l=this.getNode(a);null==(t=l.parent)||t.insertAfter({data:e},l)}remove(e){const a=this.getNode(e);a&&a.parent&&(a===this.currentNode&&(this.currentNode=null),a.parent.removeChild(a))}append(e,a){const t=z(a)?this.root:this.getNode(a);t&&t.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],a=this.nodesMap;e.forEach(e=>{const t=a[e];t&&t.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){const a=this.defaultCheckedKeys||[];!g(e.key)&&a.includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const a=this.key;if(e&&e.data)if(a){const a=e.key;g(a)||(this.nodesMap[a]=e)}else this.nodesMap[e.id]=e}deregisterNode(e){this.key&&e&&e.data&&(e.childNodes.forEach(e=>{this.deregisterNode(e)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,a=!1){const t=[],l=function(n){(n.root?n.root.childNodes:n.childNodes).forEach(n=>{(n.checked||a&&n.indeterminate)&&(!e||e&&n.isLeaf)&&t.push(n.data),l(n)})};return l(this),t}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(e=>(e||{})[this.key])}getHalfCheckedNodes(){const e=[],a=function(t){(t.root?t.root.childNodes:t.childNodes).forEach(t=>{t.indeterminate&&e.push(t.data),a(t)})};return a(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],a=this.nodesMap;for(const t in a)m(a,t)&&e.push(a[t]);return e}updateChildren(e,a){const t=this.nodesMap[e];if(!t)return;const l=t.childNodes;for(let n=l.length-1;n>=0;n--){const e=l[n];this.remove(e.data)}for(let n=0,i=a.length;n<i;n++){const e=a[n];this.append(e,t.data)}}_setCheckedKeys(e,a=!1,t){const l=this._getAllNodes().sort((e,a)=>e.level-a.level),n=Object.create(null),i=Object.keys(t);l.forEach(e=>e.setChecked(!1,!1));const s=a=>{a.childNodes.forEach(a=>{var t;n[a.data[e]]=!0,(null==(t=a.childNodes)?void 0:t.length)&&s(a)})};for(let o=0,d=l.length;o<d;o++){const t=l[o],d=t.data[e].toString();if(i.includes(d)){if(t.childNodes.length&&s(t),t.isLeaf||this.checkStrictly)t.setChecked(!0,!1);else if(t.setChecked(!0,!0),a){t.setChecked(!1,!1);const e=function(a){a.childNodes.forEach(a=>{a.isLeaf||a.setChecked(!1,!1),e(a)})};e(t)}}else t.checked&&!n[d]&&t.setChecked(!1,!1)}}setCheckedNodes(e,a=!1){const t=this.key,l={};e.forEach(e=>{l[(e||{})[t]]=!0}),this._setCheckedKeys(t,a,l)}setCheckedKeys(e,a=!1){this.defaultCheckedKeys=e;const t=this.key,l={};e.forEach(e=>{l[e]=!0}),this._setCheckedKeys(t,a,l)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(e=>{const a=this.getNode(e);a&&a.expand(null,this.autoExpandParent)})}setChecked(e,a,t){const l=this.getNode(e);l&&l.setChecked(!!a,t)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const a=this.currentNode;a&&(a.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,a=!0){var t;const l=e[this.key],n=this.nodesMap[l];this.setCurrentNode(n),a&&this.currentNode&&this.currentNode.level>1&&(null==(t=this.currentNode.parent)||t.expand(null,!0))}setCurrentNodeKey(e,a=!0){var t;if(this.currentNodeKey=e,z(e))return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);const l=this.getNode(e);l&&(this.setCurrentNode(l),a&&this.currentNode&&this.currentNode.level>1&&(null==(t=this.currentNode.parent)||t.expand(null,!0)))}}const Ze="RootTree",ea="NodeInstance",aa="TreeNodeMap";var ta=j(D({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const a=K("tree"),t=S(ea),l=S(Ze);return()=>{const n=e.node,{data:s,store:o}=n;return e.renderContent?e.renderContent(I,{_self:t,node:n,data:s,store:o}):V(l.ctx.slots,"default",{node:n,data:s},()=>[I(i,{tag:"span",truncated:!0,class:a.be("node","label")},()=>[n.label])])}}}),[["__file","tree-node-content.vue"]]);function la(e){const a=S(aa,null),t={treeNodeExpand:a=>{var t;e.node!==a&&(null==(t=e.node)||t.collapse())},children:[]};return a&&a.children.push(t),A(aa,t),{broadcastExpanded:a=>{if(e.accordion)for(const e of t.children)e.treeNodeExpand(a)}}}const na=Symbol("dragEvents");const ia=D({name:"ElTreeNode",components:{ElCollapseTransition:Se,ElCheckbox:Ke,NodeContent:ta,ElIcon:ae,Loading:ee},props:{node:{type:Qe,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:Boolean},emits:["node-expand"],setup(e,a){const t=K("tree"),{broadcastExpanded:l}=la(e),n=S(Ze),i=q(!1),s=q(!1),o=q(),d=q(),r=q(),c=S(na),u=ne();A(ea,u),e.node.expanded&&(i.value=!0,s.value=!0);const p=n.props.props.children||"children";te(()=>{var a;const t=null==(a=e.node.data)?void 0:a[p];return t&&[...t]},()=>{e.node.updateChildren()}),te(()=>e.node.indeterminate,a=>{f(e.node.checked,a)}),te(()=>e.node.checked,a=>{f(a,e.node.indeterminate)}),te(()=>e.node.childNodes.length,()=>e.node.reInitChecked()),te(()=>e.node.expanded,e=>{E(()=>i.value=e),e&&(s.value=!0)});const h=e=>Pe(n.props.nodeKey,e.data),f=(a,t)=>{o.value===a&&d.value===t||n.ctx.emit("check-change",e.node.data,a,t),o.value=a,d.value=t},_=()=>{e.node.isLeaf||(i.value?(n.ctx.emit("node-collapse",e.node.data,e.node,u),e.node.collapse()):e.node.expand(()=>{a.emit("node-expand",e.node.data,e.node,u)}))},m=a=>{e.node.setChecked(a,!(null==n?void 0:n.props.checkStrictly)),E(()=>{const a=n.store.value;n.ctx.emit("check",e.node.data,{checkedNodes:a.getCheckedNodes(),checkedKeys:a.getCheckedKeys(),halfCheckedNodes:a.getHalfCheckedNodes(),halfCheckedKeys:a.getHalfCheckedKeys()})})};return{ns:t,node$:r,tree:n,expanded:i,childNodeRendered:s,oldChecked:o,oldIndeterminate:d,getNodeKey:h,getNodeClass:a=>{const t=e.props.class;if(!t)return{};let l;if(C(t)){const{data:e}=a;l=t(e,a)}else l=t;return x(l)?{[l]:!0}:l},handleSelectChange:f,handleClick:a=>{Re(n.store,n.ctx.emit,()=>{var a;if(null==(a=null==n?void 0:n.props)?void 0:a.nodeKey){const a=h(e.node);n.store.value.setCurrentNodeKey(a)}else n.store.value.setCurrentNode(e.node)}),n.currentNode.value=e.node,n.props.expandOnClickNode&&_(),(n.props.checkOnClickNode||e.node.isLeaf&&n.props.checkOnClickLeaf&&e.showCheckbox)&&!e.node.disabled&&m(!e.node.checked),n.ctx.emit("node-click",e.node.data,e.node,u,a)},handleContextMenu:a=>{var t;(null==(t=n.instance.vnode.props)?void 0:t.onNodeContextmenu)&&(a.stopPropagation(),a.preventDefault()),n.ctx.emit("node-contextmenu",a,e.node.data,e.node,u)},handleExpandIconClick:_,handleCheckChange:m,handleChildNodeExpand:(e,a,t)=>{l(a),n.ctx.emit("node-expand",e,a,t)},handleDragStart:a=>{n.props.draggable&&c.treeNodeDragStart({event:a,treeNode:e})},handleDragOver:a=>{a.preventDefault(),n.props.draggable&&c.treeNodeDragOver({event:a,treeNode:{$el:r.value,node:e.node}})},handleDrop:e=>{e.preventDefault()},handleDragEnd:e=>{n.props.draggable&&c.treeNodeDragEnd(e)},CaretRight:le}}});const sa=ve(j(D({name:"ElTree",components:{ElTreeNode:j(ia,[["render",function(e,a,t,l,n,i){const s=U("el-icon"),o=U("el-checkbox"),d=U("loading"),r=U("node-content"),c=U("el-tree-node"),u=U("el-collapse-transition");return $((F(),O("div",{ref:"node$",class:J([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:G(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:G(e.handleDragStart,["stop"]),onDragover:G(e.handleDragOver,["stop"]),onDragend:G(e.handleDragEnd,["stop"]),onDrop:G(e.handleDrop,["stop"])},[M("div",{class:J(e.ns.be("node","content")),style:Q({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(F(),R(s,{key:0,class:J([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:G(e.handleExpandIconClick,["stop"])},{default:W(()=>[(F(),R(Y(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):H("v-if",!0),e.showCheckbox?(F(),R(o,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:G(()=>{},["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):H("v-if",!0),e.node.loading?(F(),R(s,{key:2,class:J([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:W(()=>[P(d)]),_:1},8,["class"])):H("v-if",!0),P(r,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),P(u,null,{default:W(()=>[!e.renderAfterExpand||e.childNodeRendered?$((F(),O("div",{key:0,class:J(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded,onClick:G(()=>{},["stop"])},[(F(!0),O(X,null,Z(e.node.childNodes,a=>(F(),R(c,{key:e.getNodeKey(a),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:a,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded","onClick"])),[[L,e.expanded]]):H("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[L,e.node.visible]])}],["__file","tree-node.vue"]])},props:{data:{type:pe(Array),default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkOnClickLeaf:{type:Boolean,default:!0},checkDescendants:Boolean,autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:{type:pe(Function)},showCheckbox:Boolean,draggable:Boolean,allowDrag:{type:pe(Function)},allowDrop:{type:pe(Function)},props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:Boolean,highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:ue}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,a){const{t:t}=he(),l=K("tree"),n=S(h,null),i=q(new Xe({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));i.value.initialize();const s=q(i.value.root),o=q(null),d=q(null),r=q(null),{broadcastExpanded:c}=la(e),{dragState:u}=function({props:e,ctx:a,el$:t,dropIndicator$:l,store:n}){const i=K("tree"),s=q({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return A(na,{treeNodeDragStart:({event:t,treeNode:l})=>{if(t.dataTransfer){if(C(e.allowDrag)&&!e.allowDrag(l.node))return t.preventDefault(),!1;t.dataTransfer.effectAllowed="move";try{t.dataTransfer.setData("text/plain","")}catch(n){}s.value.draggingNode=l,a.emit("node-drag-start",l.node,t)}},treeNodeDragOver:({event:n,treeNode:o})=>{if(!n.dataTransfer)return;const d=o,r=s.value.dropNode;r&&r.node.id!==d.node.id&&T(r.$el,i.is("drop-inner"));const c=s.value.draggingNode;if(!c||!d)return;let u=!0,p=!0,h=!0,f=!0;C(e.allowDrop)&&(u=e.allowDrop(c.node,d.node,"prev"),f=p=e.allowDrop(c.node,d.node,"inner"),h=e.allowDrop(c.node,d.node,"next")),n.dataTransfer.dropEffect=p||u||h?"move":"none",(u||p||h)&&(null==r?void 0:r.node.id)!==d.node.id&&(r&&a.emit("node-drag-leave",c.node,r.node,n),a.emit("node-drag-enter",c.node,d.node,n)),s.value.dropNode=u||p||h?d:null,d.node.nextSibling===c.node&&(h=!1),d.node.previousSibling===c.node&&(u=!1),d.node.contains(c.node,!1)&&(p=!1),(c.node===d.node||c.node.contains(d.node))&&(u=!1,p=!1,h=!1);const _=d.$el,m=_.querySelector(`.${i.be("node","content")}`).getBoundingClientRect(),v=t.value.getBoundingClientRect(),y=t.value.scrollTop;let g;const b=u?p?.25:h?.45:1:Number.NEGATIVE_INFINITY,k=h?p?.75:u?.55:0:Number.POSITIVE_INFINITY;let x=-9999;const N=n.clientY-m.top;g=N<m.height*b?"before":N>m.height*k?"after":p?"inner":"none";const w=_.querySelector(`.${i.be("node","expand-icon")}`).getBoundingClientRect(),z=l.value;"before"===g?x=w.top-v.top+y:"after"===g&&(x=w.bottom-v.top+y),z.style.top=`${x}px`,z.style.left=w.right-v.left+"px","inner"===g?B(_,i.is("drop-inner")):T(_,i.is("drop-inner")),s.value.showDropIndicator="before"===g||"after"===g,s.value.allowDrop=s.value.showDropIndicator||f,s.value.dropType=g,a.emit("node-drag-over",c.node,d.node,n)},treeNodeDragEnd:e=>{var t,l;const{draggingNode:o,dropType:d,dropNode:r}=s.value;if(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),(null==o?void 0:o.node.data)&&r){const s={data:o.node.data};"none"!==d&&o.node.remove(),"before"===d?null==(t=r.node.parent)||t.insertBefore(s,r.node):"after"===d?null==(l=r.node.parent)||l.insertAfter(s,r.node):"inner"===d&&r.node.insertChild(s),"none"!==d&&(n.value.registerNode(s),n.value.key&&o.node.eachNode(e=>{var a;null==(a=n.value.nodesMap[e.data[n.value.key]])||a.setChecked(e.checked,!n.value.checkStrictly)})),T(r.$el,i.is("drop-inner")),a.emit("node-drag-end",o.node,r.node,d,e),"none"!==d&&a.emit("node-drop",o.node,r.node,d,e)}o&&!r&&a.emit("node-drag-end",o.node,null,d,e),s.value.showDropIndicator=!1,s.value.draggingNode=null,s.value.dropNode=null,s.value.allowDrop=!0}}),{dragState:s}}({props:e,ctx:a,el$:d,dropIndicator$:r,store:i});!function({el$:e},a){const t=K("tree");function l(e,t){var l,n;const i=a.value.getNode(e[t].dataset.key);return i.canFocus&&i.visible&&((null==(l=i.parent)?void 0:l.expanded)||0===(null==(n=i.parent)?void 0:n.level))}ie(()=>{n()}),se(()=>{Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(e=>{e.setAttribute("tabindex","-1")})}),oe(e,"keydown",a=>{const n=a.target;if(!n.className.includes(t.b("node")))return;const i=de(a),s=Array.from(e.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`)),o=s.indexOf(n);let d;if([re.up,re.down].includes(i)){if(a.preventDefault(),i===re.up){d=-1===o?0:0!==o?o-1:s.length-1;const e=d;for(;!l(s,d);){if(d--,d===e){d=-1;break}d<0&&(d=s.length-1)}}else{d=-1===o?0:o<s.length-1?o+1:0;const e=d;for(;!l(s,d);){if(d++,d===e){d=-1;break}d>=s.length&&(d=0)}}-1!==d&&s[d].focus()}[re.left,re.right].includes(i)&&(a.preventDefault(),n.click());const r=n.querySelector('[type="checkbox"]');[re.enter,re.numpadEnter,re.space].includes(i)&&r&&(a.preventDefault(),r.click())});const n=()=>{var a;if(!e.value)return;const l=Array.from(e.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`));Array.from(e.value.querySelectorAll("input[type=checkbox]")).forEach(e=>{e.setAttribute("tabindex","-1")});const n=e.value.querySelectorAll(`.${t.is("checked")}[role=treeitem]`);n.length?n[0].setAttribute("tabindex","0"):null==(a=l[0])||a.setAttribute("tabindex","0")}}({el$:d},i);const p=fe(()=>{const{childNodes:e}=s.value,a=!!n&&0!==n.hasFilteredOptions;return(!e||0===e.length||e.every(({visible:e})=>!e))&&!a});te(()=>e.currentNodeKey,e=>{i.value.setCurrentNodeKey(null!=e?e:null)}),te(()=>e.defaultCheckedKeys,(e,a)=>{_e(e,a)||i.value.setDefaultCheckedKey(null!=e?e:[])}),te(()=>e.defaultExpandedKeys,e=>{i.value.setDefaultExpandedKeys(null!=e?e:[])}),te(()=>e.data,e=>{i.value.setData(e)},{deep:!0}),te(()=>e.checkStrictly,e=>{i.value.checkStrictly=e});const f=()=>{const e=i.value.getCurrentNode();return e?e.data:null};return A(Ze,{ctx:a,props:e,store:i,root:s,currentNode:o,instance:ne()}),A(me,void 0),{ns:l,store:i,root:s,currentNode:o,dragState:u,el$:d,dropIndicator$:r,isEmpty:p,filter:a=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");i.value.filter(a)},getNodeKey:a=>Pe(e.nodeKey,a.data),getNodePath:a=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const t=i.value.getNode(a);if(!t)return[];const l=[t.data];let n=t.parent;for(;n&&n!==s.value;)l.push(n.data),n=n.parent;return l.reverse()},getCheckedNodes:(e,a)=>i.value.getCheckedNodes(e,a),getCheckedKeys:e=>i.value.getCheckedKeys(e),getCurrentNode:f,getCurrentKey:()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const a=f();return a?a[e.nodeKey]:null},setCheckedNodes:(a,t)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");i.value.setCheckedNodes(a,t)},setCheckedKeys:(a,t)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");i.value.setCheckedKeys(a,t)},setChecked:(e,a,t)=>{i.value.setChecked(e,a,t)},getHalfCheckedNodes:()=>i.value.getHalfCheckedNodes(),getHalfCheckedKeys:()=>i.value.getHalfCheckedKeys(),setCurrentNode:(t,l=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Re(i,a.emit,()=>{c(t),i.value.setUserCurrentNode(t,l)})},setCurrentKey:(t,l=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Re(i,a.emit,()=>{c(),i.value.setCurrentNodeKey(null!=t?t:null,l)})},t:t,getNode:e=>i.value.getNode(e),remove:e=>{i.value.remove(e)},append:(e,a)=>{i.value.append(e,a)},insertBefore:(e,a)=>{i.value.insertBefore(e,a)},insertAfter:(e,a)=>{i.value.insertAfter(e,a)},handleNodeExpand:(e,t,l)=>{c(t),a.emit("node-expand",e,t,l)},updateKeyChildren:(a,t)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");i.value.updateChildren(a,t)}}}}),[["render",function(e,a,t,l,n,i){const s=U("el-tree-node");return F(),O("div",{ref:"el$",class:J([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner","inner"===e.dragState.dropType),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(F(!0),O(X,null,Z(e.root.childNodes,a=>(F(),R(s,{key:e.getNodeKey(a),node:a,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(F(),O("div",{key:0,class:J(e.ns.e("empty-block"))},[V(e.$slots,"empty",{},()=>{var a;return[M("span",{class:J(e.ns.e("empty-text"))},ce(null!=(a=e.emptyText)?a:e.t("el.tree.emptyText")),3)]})],2)):H("v-if",!0),$(M("div",{ref:"dropIndicator$",class:J(e.ns.e("drop-indicator"))},null,2),[[L,e.dragState.showDropIndicator]])],2)}],["__file","tree.vue"]])),oa={class:"back-text"},da={class:"page-header-main"},ra={class:"page-header-heading"},ca={class:"heading-title"},ua={class:"title-text"},pa={key:0,class:"heading-tags"},ha={key:0,class:"heading-description"},fa={class:"description-text"},_a={key:1,class:"heading-extra"},ma={key:0,class:"page-header-actions"},va={key:1,class:"page-header-footer"},ya=e(D({__name:"PageHeader",props:{title:{default:""},description:{default:""},showBack:{type:Boolean,default:!1},backText:{default:"è¿”å›ž"},ghost:{type:Boolean,default:!1},tags:{default:()=>[]}},emits:["back"],setup(e,{emit:a}){const t=a,l=ye();function n(){t("back"),t("back")||l.back()}return(a,t)=>{const l=De;return F(),O("div",{class:J(["page-header",{"page-header--ghost":e.ghost}])},[e.showBack?(F(),O("div",{key:0,class:"page-header-back",onClick:n},[t[0]||(t[0]=M("i",{class:"bi bi-arrow-left back-icon"},null,-1)),M("span",oa,ce(e.backText),1)])):H("",!0),M("div",da,[M("div",ra,[M("div",ca,[V(a.$slots,"title",{},()=>[M("h1",ua,ce(e.title),1)],!0),a.$slots.tags||e.tags?(F(),O("div",pa,[V(a.$slots,"tags",{},()=>[(F(!0),O(X,null,Z(e.tags,(e,a)=>(F(),R(l,{key:a,type:e.type,size:e.size||"default"},{default:W(()=>[ge(ce(e.text),1)]),_:2},1032,["type","size"]))),128))],!0)])):H("",!0)]),a.$slots.description||e.description?(F(),O("div",ha,[V(a.$slots,"description",{},()=>[M("p",fa,ce(e.description),1)],!0)])):H("",!0),a.$slots.extra?(F(),O("div",_a,[V(a.$slots,"extra",{},void 0,!0)])):H("",!0)]),a.$slots.actions?(F(),O("div",ma,[V(a.$slots,"actions",{},void 0,!0)])):H("",!0)]),a.$slots.footer?(F(),O("div",va,[V(a.$slots,"footer",{},void 0,!0)])):H("",!0)],2)}}}),[["__scopeId","data-v-57518d3e"]]),ga={class:"file-card__icon"},ba={class:"file-card__info"},ka={class:"file-card__name"},Ca={class:"file-card__meta"},xa={key:0,class:"meta-item"},Na={key:1,class:"meta-item"},wa={key:0,class:"file-card__actions"},za=e(D({__name:"FileCard",props:{fileUrl:{},fileName:{},fileSize:{},uploadTime:{},type:{default:"default"},showActions:{type:Boolean,default:!0}},setup(e){const a=e,t=fe(()=>{if(a.fileName)return a.fileName;const e=a.fileUrl.split("/");return e[e.length-1]||""}),l=fe(()=>{var e;return{pdf:"bi-file-pdf",doc:"bi-file-word",docx:"bi-file-word",xls:"bi-file-excel",xlsx:"bi-file-excel",zip:"bi-file-zip",rar:"bi-file-zip"}[(null==(e=t.value.split(".").pop())?void 0:e.toLowerCase())||""]||"bi-file-earmark-text"}),n=fe(()=>a.fileSize||0),i=fe(()=>{if(!n.value)return"";const e=n.value/1024;if(e<1024)return`${e.toFixed(2)} KB`;return`${(e/1024).toFixed(2)} MB`}),s=fe(()=>a.uploadTime?a.uploadTime.split(" ")[0]||a.uploadTime:""),o=()=>{const e=document.createElement("a");e.href=a.fileUrl,e.download=t.value,document.body.appendChild(e),e.click(),document.body.removeChild(e),ke.success("æ–‡ä»¶ä¸‹è½½å·²å¼€å§‹")},d=()=>{window.open(a.fileUrl,"_blank")};return(a,r)=>{const c=be;return F(),O("div",{class:J(["file-card",[`file-card--${e.type}`]])},[M("div",ga,[M("i",{class:J(l.value)},null,2)]),M("div",ba,[M("div",ka,ce(t.value),1),M("div",Ca,[n.value?(F(),O("span",xa,[r[0]||(r[0]=M("i",{class:"bi bi-hdd"},null,-1)),ge(" "+ce(i.value),1)])):H("",!0),s.value?(F(),O("span",Na,[r[1]||(r[1]=M("i",{class:"bi bi-calendar"},null,-1)),ge(" "+ce(s.value),1)])):H("",!0)])]),e.showActions?(F(),O("div",wa,[P(c,{size:"small",onClick:o},{default:W(()=>[...r[2]||(r[2]=[M("i",{class:"bi bi-download"},null,-1),ge(" ä¸‹è½½ ",-1)])]),_:1}),P(c,{size:"small",onClick:d},{default:W(()=>[...r[3]||(r[3]=[M("i",{class:"bi bi-eye"},null,-1),ge(" é¢„è§ˆ ",-1)])]),_:1})])):H("",!0)],2)}}}),[["__scopeId","data-v-99d2031a"]]),Ea={class:"chapter-tree"},ja={key:0,class:"chapter-search mb-3"},Da={class:"chapter-tree-container"},Ka={class:"chapter-tree-node"},Sa={class:"chapter-title"},Va={class:"chapter-meta"},Ia={key:1,class:"word-count text-muted ms-2"},Aa=e(D({__name:"ChapterTree",props:{chapters:{},showCheckbox:{type:Boolean,default:!0},showSearch:{type:Boolean,default:!0},defaultCheckedKeys:{default:()=>[]}},emits:["check","select"],setup(e,{expose:a,emit:t}){const l=e,n=t,i=q(),o=q(""),d=q([]),r={children:"children",label:"title"};d.value=l.chapters,te(()=>l.chapters,e=>{d.value=e,l.defaultCheckedKeys.length>0&&i.value&&i.value.setCheckedKeys(l.defaultCheckedKeys)},{immediate:!0});const c=()=>{if(!o.value.trim())return void(d.value=l.chapters);const e=o.value.toLowerCase();d.value=u(l.chapters,e)},u=(e,a)=>{const t=[];for(const l of e)if(l.title.toLowerCase().includes(a))t.push(l);else if(l.children&&l.children.length>0){const e=u(l.children,a);e.length>0&&t.push({...l,children:e})}return t},p=()=>{if(!i.value)return;const e=i.value.getCheckedKeys(),a=i.value.getCheckedNodes();n("check",e,a)};return a({setCheckedKeys:e=>{var a;null==(a=i.value)||a.setCheckedKeys(e)},getCheckedKeys:()=>{var e;return null==(e=i.value)?void 0:e.getCheckedKeys()},getCheckedNodes:()=>{var e;return null==(e=i.value)?void 0:e.getCheckedNodes()}}),(a,t)=>{const l=Ce,n=De,u=sa,h=s;return F(),O("div",Ea,[e.showSearch?(F(),O("div",ja,[P(l,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),placeholder:"ðŸ” æœç´¢ç« èŠ‚...",clearable:"",onInput:c},{prefix:W(()=>[...t[1]||(t[1]=[M("i",{class:"bi bi-search"},null,-1)])]),_:1},8,["modelValue"])])):H("",!0),M("div",Da,[P(u,{ref_key:"treeRef",ref:i,data:d.value,props:r,"show-checkbox":e.showCheckbox,"check-strictly":!1,"default-expand-all":!1,"expand-on-click-node":!1,"node-key":"id",onCheck:p},{default:W(({node:e,data:a})=>{return[M("div",Ka,[M("span",Sa,[M("i",{class:J([(l=a,l.children&&l.children.length>0?"bi bi-folder":"bi bi-file-earmark-text"),"me-1"])},null,2),ge(" "+ce(a.title),1)]),M("span",Va,[a.level?(F(),R(n,{key:0,size:"small",type:"info"},{default:W(()=>{return[ge(ce((e=a.level,{1:"ä¸€çº§",2:"äºŒçº§",3:"ä¸‰çº§",4:"å››çº§",5:"äº”çº§"}[e]||`${e}çº§`)),1)];var e}),_:2},1024)):H("",!0),a.word_count?(F(),O("span",Ia,ce((t=a.word_count,t>=1e4?`${(t/1e4).toFixed(1)}ä¸‡`:t.toLocaleString()))+"å­— ",1)):H("",!0)])])];var t,l}),_:1},8,["data","show-checkbox"]),d.value&&0!==d.value.length?H("",!0):(F(),R(h,{key:0,description:"æš‚æ— ç« èŠ‚æ•°æ®","image-size":80}))])])}}}),[["__scopeId","data-v-af38204c"]]),qa={class:"tender-document-processor"},Ta={class:"collapse-title"},Ba={class:"upload-section"},Ua={key:0,class:"existing-document"},$a={class:"d-flex align-items-center justify-content-between"},La={class:"me-3"},Oa={key:1},Fa={key:0,class:"mt-3"},Ma={class:"d-flex align-items-center justify-content-between"},Pa={key:0,class:"bi bi-file-earmark-code me-1"},Ra={class:"collapse-title"},Ha={class:"chapter-section"},Wa={class:"stats-grid mb-3"},Ya={class:"stat-card"},Ja={class:"stat-value"},Ga={class:"stat-card"},Qa={class:"stat-value text-success"},Xa={class:"stat-card"},Za={class:"stat-value text-info"},et={class:"batch-operations mb-3"},at={class:"save-actions mt-4"},tt={key:0,class:"parsing-progress mt-3"},lt={class:"d-flex align-items-center"},nt=e(D({__name:"TenderDocumentProcessor",props:{projectId:{},companyId:{},projectDetail:{}},emits:["success","refresh","taskIdUpdate"],setup(e,{emit:a}){const t=e,n=a,i=q(),s=q(),o=q(["upload"]),d=q([]),r=q(null),c=q(!1),u=q("æ­£åœ¨è§£æžæ–‡æ¡£ç»“æž„..."),p=q([]),h=q([]),f=q([]),_=q(!1),m=q(!1),v=q(null),y=q(null),g=fe(()=>{const e=a=>{let t=a.length;return a.forEach(a=>{a.children&&a.children.length>0&&(t+=e(a.children))}),t};return e(p.value)}),b=fe(()=>h.value.length),k=fe(()=>f.value.reduce((e,a)=>e+(a.word_count||0),0)),C=fe(()=>null!==y.value),x=e=>{e.raw&&(r.value=e.raw,d.value=[e])},N=()=>{r.value=null,d.value=[],p.value=[],h.value=[]},w=()=>{y.value=null,p.value=[],h.value=[],v.value=null,o.value=["upload"]},z=async()=>{if(r.value){c.value=!0,u.value="æ­£åœ¨è§£æžæ–‡æ¡£ç»“æž„...";try{const e=new FormData;e.append("file",r.value),e.append("company_id",t.companyId.toString()),e.append("project_id",t.projectId.toString());const a=await Ae.parseDocumentStructure(e);if(!a.success)throw new Error(a.message||a.error||"è§£æžå¤±è´¥");{p.value=a.chapters||[];const e=a.task_id;e&&(v.value=e,n("taskIdUpdate",e)),ke.success("æ–‡æ¡£è§£æžæˆåŠŸ"),o.value=["chapters"]}}catch(e){ke.error(`è§£æžå¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{c.value=!1}}else ke.warning("è¯·å…ˆä¸Šä¼ æ–‡æ¡£")},E=(e,a)=>{h.value=e,f.value=a},j=()=>{var e;const a=V(p.value);null==(e=s.value)||e.setCheckedKeys(a)},D=()=>{var e;null==(e=s.value)||e.setCheckedKeys([])},K=()=>{var e;const a=I(p.value,["æŠ€æœ¯","æ–¹æ¡ˆ","å®žæ–½","ç³»ç»Ÿ"]);null==(e=s.value)||e.setCheckedKeys(a)},S=()=>{var e;const a=V(p.value),t=I(p.value,["åˆåŒ","æ¡æ¬¾","åè®®"]),l=a.filter(e=>!t.includes(e));null==(e=s.value)||e.setCheckedKeys(l)},V=e=>{const a=[];return e.forEach(e=>{a.push(e.id),e.children&&e.children.length>0&&a.push(...V(e.children))}),a},I=(e,a)=>{const t=[];return e.forEach(e=>{a.some(a=>e.title.includes(a))&&t.push(e.id),e.children&&e.children.length>0&&t.push(...I(e.children,a))}),t},A=async()=>{if(0!==b.value)if(v.value){_.value=!0;try{await Ae.saveResponseFile(v.value,h.value),ke.success("åº”ç­”æ–‡ä»¶ä¿å­˜æˆåŠŸ"),n("success","response"),n("refresh")}catch(e){ke.error(`ä¿å­˜å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{_.value=!1}}else ke.warning("ç¼ºå°‘ä»»åŠ¡IDï¼Œè¯·é‡æ–°è§£æžæ–‡æ¡£");else ke.warning("è¯·å…ˆé€‰æ‹©ç« èŠ‚")},T=async()=>{if(0!==b.value)if(v.value){m.value=!0;try{await Ae.saveTechnicalChapters(v.value,h.value),ke.success("æŠ€æœ¯éœ€æ±‚ä¿å­˜æˆåŠŸ"),n("success","technical"),n("refresh")}catch(e){ke.error(`ä¿å­˜å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{m.value=!1}}else ke.warning("ç¼ºå°‘ä»»åŠ¡IDï¼Œè¯·é‡æ–°è§£æžæ–‡æ¡£");else ke.warning("è¯·å…ˆé€‰æ‹©ç« èŠ‚")},B=e=>{if(!e)return"æ‹›æ ‡æ–‡æ¡£";try{const a=e.replace(/\\/g,"/").split("/"),t=a[a.length-1];return decodeURIComponent(t)}catch(a){return"æ‹›æ ‡æ–‡æ¡£"}},U=()=>{if(!t.projectDetail)return;let e=t.projectDetail.step1_data;if("string"==typeof e)try{e=JSON.parse(e)}catch(a){e=null}if(t.projectDetail.tender_document_path){const e=t.projectDetail.original_filename||B(t.projectDetail.tender_document_path);y.value={path:t.projectDetail.tender_document_path,name:e,uploadedAt:t.projectDetail.created_at}}else if(null==e?void 0:e.file_path){const a=e.file_name||B(e.file_path);y.value={path:e.file_path,name:a,uploadedAt:t.projectDetail.created_at}}(null==e?void 0:e.task_id)&&(v.value=e.task_id,n("taskIdUpdate",e.task_id)),(null==e?void 0:e.chapters)&&Array.isArray(e.chapters)&&e.chapters.length>0&&(p.value=e.chapters,o.value=["chapters"])};return te(()=>t.projectDetail,()=>{U()},{immediate:!0}),ie(()=>{U()}),(e,a)=>{const t=De,n=be,h=qe,f=Te,v=Ie,V=xe,I=l,q=Ve,B=ae;return F(),O("div",qa,[P(q,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),accordion:""},{default:W(()=>[P(v,{name:"upload"},{title:W(()=>[M("div",Ta,[a[2]||(a[2]=M("i",{class:"bi bi-upload me-2 text-primary"},null,-1)),a[3]||(a[3]=M("span",null,"æ­¥éª¤1: ä¸Šä¼ æ‹›æ ‡æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰",-1)),r.value?(F(),R(t,{key:0,type:"success",size:"small",class:"ms-2"},{default:W(()=>[...a[1]||(a[1]=[ge(" å·²ä¸Šä¼  ",-1)])]),_:1})):H("",!0)])]),default:W(()=>[M("div",Ba,[C.value?(F(),O("div",Ua,[P(h,{type:"success",closable:!1},{title:W(()=>[M("div",$a,[M("div",null,[a[5]||(a[5]=M("i",{class:"bi bi-file-earmark-check-fill me-2"},null,-1)),M("span",La,ce(y.value.name),1),P(t,{size:"small",type:"success"},{default:W(()=>[...a[4]||(a[4]=[ge("å·²ä¸Šä¼ ",-1)])]),_:1})]),M("div",null,[P(n,{size:"small",onClick:w},{default:W(()=>[...a[6]||(a[6]=[M("i",{class:"bi bi-arrow-repeat me-1"},null,-1),ge(" é‡æ–°ä¸Šä¼  ",-1)])]),_:1})])])]),_:1})])):(F(),O("div",Oa,[P(f,{ref_key:"uploadRef",ref:i,drag:"","auto-upload":!1,limit:1,accept:".doc,.docx","on-change":x,"on-remove":N,"file-list":d.value},{tip:W(()=>[...a[7]||(a[7]=[M("div",{class:"el-upload__tip"}," æ”¯æŒ .doc å’Œ .docx æ ¼å¼ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 50MBï¼ˆå¯é€‰ä¸Šä¼ ï¼Œç”¨äºŽè¾…åŠ©è§£æžï¼‰ ",-1)])]),default:W(()=>[a[8]||(a[8]=M("i",{class:"bi bi-cloud-upload",style:{"font-size":"48px",color:"var(--el-color-primary)"}},null,-1)),a[9]||(a[9]=M("div",{class:"el-upload__text"},[ge(" æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„æˆ– "),M("em",null,"ç‚¹å‡»ä¸Šä¼ ")],-1))]),_:1},8,["file-list"]),r.value?(F(),O("div",Fa,[P(h,{type:"success",closable:!1},{title:W(()=>[M("div",Ma,[M("span",null,[a[10]||(a[10]=M("i",{class:"bi bi-check-circle-fill me-2"},null,-1)),ge(" å·²é€‰æ‹©æ–‡ä»¶: "+ce(r.value.name),1)]),P(n,{type:"primary",size:"small",loading:c.value,onClick:z},{default:W(()=>[c.value?H("",!0):(F(),O("i",Pa)),ge(" "+ce(c.value?"è§£æžä¸­...":"è§£æžæ–‡æ¡£ç»“æž„"),1)]),_:1},8,["loading"])])]),_:1})])):H("",!0)]))])]),_:1}),p.value.length>0?(F(),R(v,{key:0,name:"chapters"},{title:W(()=>[M("div",Ra,[a[11]||(a[11]=M("i",{class:"bi bi-list-nested me-2 text-success"},null,-1)),a[12]||(a[12]=M("span",null,"æ­¥éª¤2: é€‰æ‹©ç« èŠ‚",-1)),b.value>0?(F(),R(t,{key:0,type:"success",size:"small",class:"ms-2"},{default:W(()=>[ge(" å·²é€‰ "+ce(b.value)+" ä¸ª ",1)]),_:1})):H("",!0)])]),default:W(()=>{return[M("div",Ha,[M("div",Wa,[M("div",Ya,[a[13]||(a[13]=M("div",{class:"stat-label"},"æ€»ç« èŠ‚æ•°",-1)),M("div",Ja,ce(g.value),1)]),M("div",Ga,[a[14]||(a[14]=M("div",{class:"stat-label"},"å·²é€‰æ‹©",-1)),M("div",Qa,ce(b.value),1)]),M("div",Xa,[a[15]||(a[15]=M("div",{class:"stat-label"},"é€‰ä¸­å­—æ•°",-1)),M("div",Za,ce((e=k.value,e>=1e4?`${(e/1e4).toFixed(1)}ä¸‡`:e.toLocaleString())),1)])]),M("div",et,[P(V,null,{default:W(()=>[P(n,{size:"small",onClick:j},{default:W(()=>[...a[16]||(a[16]=[M("i",{class:"bi bi-check-all me-1"},null,-1),ge(" å…¨é€‰ ",-1)])]),_:1}),P(n,{size:"small",onClick:D},{default:W(()=>[...a[17]||(a[17]=[M("i",{class:"bi bi-x me-1"},null,-1),ge(" å…¨ä¸é€‰ ",-1)])]),_:1}),P(n,{size:"small",type:"success",onClick:K},{default:W(()=>[...a[18]||(a[18]=[M("i",{class:"bi bi-cpu me-1"},null,-1),ge(" ä»…é€‰æŠ€æœ¯ç« èŠ‚ ",-1)])]),_:1}),P(n,{size:"small",type:"warning",onClick:S},{default:W(()=>[...a[19]||(a[19]=[M("i",{class:"bi bi-file-x me-1"},null,-1),ge(" æŽ’é™¤åˆåŒæ¡æ¬¾ ",-1)])]),_:1})]),_:1})]),P(Aa,{ref_key:"chapterTreeRef",ref:s,chapters:p.value,onCheck:E},null,8,["chapters"]),M("div",at,[P(I,{size:16},{default:W(()=>[P(n,{type:"info",size:"large",disabled:0===b.value,loading:_.value,onClick:A},{default:W(()=>[...a[20]||(a[20]=[M("i",{class:"bi bi-file-earmark-arrow-down me-1"},null,-1),ge(" å¦å­˜ä¸ºåº”ç­”æ–‡ä»¶ ",-1)])]),_:1},8,["disabled","loading"]),P(n,{type:"success",size:"large",disabled:0===b.value,loading:m.value,onClick:T},{default:W(()=>[...a[21]||(a[21]=[M("i",{class:"bi bi-file-code me-1"},null,-1),ge(" å¦å­˜ä¸ºæŠ€æœ¯éœ€æ±‚ ",-1)])]),_:1},8,["disabled","loading"])]),_:1})])])];var e}),_:1})):H("",!0)]),_:1},8,["modelValue"]),c.value?(F(),O("div",tt,[P(h,{type:"info",closable:!1},{title:W(()=>[M("div",lt,[P(B,{class:"is-loading me-2"},{default:W(()=>[P(Ne(ee))]),_:1}),M("span",null,ce(u.value),1)])]),_:1})])):H("",!0)])}}}),[["__scopeId","data-v-79ff8496"]]),it={class:"tender-management-detail"},st={class:"tab-content"},ot={class:"info-section"},dt={class:"section-header"},rt={class:"info-section"},ct={class:"section-header"},ut={key:0,class:"bi bi-magic me-1"},pt={key:0,class:"amount"},ht={key:1},ft={key:0,class:"deadline"},_t={key:1},mt={key:0,class:"deadline"},vt={key:1},yt={key:0,class:"deadline"},gt={key:1},bt={class:"info-section"},kt={class:"tab-content"},Ct={class:"info-section"},xt={class:"section-header"},Nt={key:0,class:"bi bi-magic me-1"},wt={key:0,class:"requirements-list"},zt={class:"requirement-content"},Et={class:"requirement-text"},jt={key:0},Dt={key:1},Kt={class:"requirement-status"},St={class:"info-section"},Vt={key:0,class:"requirements-list"},It={class:"requirement-content"},At={class:"requirement-text"},qt={key:0},Tt={key:1},Bt={key:2},Ut={class:"requirement-status"},$t={class:"info-section"},Lt={key:0,class:"requirements-list"},Ot={class:"requirement-content"},Ft={class:"requirement-text"},Mt={key:0},Pt={key:1},Rt={key:2},Ht={class:"requirement-status"},Wt={class:"info-section"},Yt={key:0,class:"financial-requirements"},Jt={class:"requirement-content"},Gt={class:"requirement-text"},Qt={class:"tab-label"},Xt={class:"tab-content"},Zt={class:"file-section"},el={class:"section-header"},al={class:"file-section"},tl={class:"section-header"},ll={class:"action-area"},nl={class:"tab-label"},il={class:"tab-content"},sl={class:"info-section"},ol={class:"section-header"},dl={key:0,class:"documents-grid"},rl={key:1,class:"info-section"},cl={class:"section-header"},ul={class:"tab-label"},pl={class:"tab-content"},hl={class:"file-section"},fl={class:"section-header"},_l={class:"file-section"},ml={class:"section-header"},vl={class:"file-section"},yl={class:"section-header"},gl={class:"action-area"},bl=e(D({__name:"ManagementDetail",setup(e){const h=we(),m=ye(),v=Ue(),y=q(!1),g=q(!1),b=q(!1),C=q(null),x=q("basic"),N=q([]),w=q(null),z=q(!1),E=q(!1),j=q([]),D=q([]),K=k({name:"",number:"",company_id:null,description:"",tender_unit:"",tender_agency:"",budget_amount:null,project_type:"",registration_deadline:"",bid_deadline:"",bid_opening_time:"",bid_opening_location:"",project_manager_name:"",project_manager_phone:"",tech_lead_name:"",tech_lead_phone:"",business_contact_name:"",business_contact_phone:"",authorized_person_name:"",authorized_person_id:""}),S={name:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}],number:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®ç¼–å·",trigger:"blur"}],company_id:[{required:!0,message:"è¯·é€‰æ‹©å…¬å¸",trigger:"change"}]},V=fe(()=>Number(h.params.id)),I=fe(()=>{var e;return(null==(e=C.value)?void 0:e.name)||"é¡¹ç›®è¯¦æƒ…"}),A=fe(()=>{const e=a=>{let t=a.length;return a.forEach(a=>{a.children&&a.children.length>0&&(t+=e(a.children))}),t};return e(D.value)}),T=e=>e?"string"==typeof e?{fileUrl:e,fileName:void 0,fileSize:void 0}:{fileUrl:e.file_url||e.file_path||"",fileName:e.filename||e.file_name,fileSize:e.file_size}:null,B=fe(()=>{var e,a;return T(null==(a=null==(e=C.value)?void 0:e.step1_data)?void 0:a.response_file_path)}),U=fe(()=>{var e,a;return T(null==(a=null==(e=C.value)?void 0:e.step1_data)?void 0:a.business_response_file)}),$=fe(()=>{var e,a;return T(null==(a=null==(e=C.value)?void 0:e.step1_data)?void 0:a.technical_file_path)}),L=fe(()=>{var e,a;return T(null==(a=null==(e=C.value)?void 0:e.step1_data)?void 0:a.technical_point_to_point_file)}),Y=fe(()=>{var e,a;return T(null==(a=null==(e=C.value)?void 0:e.step1_data)?void 0:a.technical_proposal_file)}),J=fe(()=>{var e;const a=null==(e=C.value)?void 0:e.qualifications_data;return a&&"object"==typeof a&&Object.keys(a).length>0?(e=>{const a=[],t=[],l=[];let n=null;const i=["ISO","è®¤è¯","èµ„è´¨","è®¸å¯è¯","è¯ä¹¦","ç­‰ä¿","è‘—ä½œæƒ","ä¸“åˆ©","ä¿¡ç”¨"],s=["ä¸šç»©","é¡¹ç›®","æ¡ˆä¾‹","åˆåŒ"],o=["äººå‘˜","é¡¹ç›®ç»ç†","æŠ€æœ¯è´Ÿè´£äºº","å·¥ç¨‹å¸ˆ"],d=["è´¢åŠ¡","èµ„æœ¬","èµ„äº§","å®¡è®¡","é“¶è¡Œ","æ³¨å†Œèµ„é‡‘","è¥ä¸šé¢"];return Object.entries(e).forEach(([e,r])=>{const c="mandatory"===r.constraint_type,u=r.detail||"",p=r.summary||e;d.some(a=>e.includes(a))?(n||(n={description:[]}),n.description.push(`${p}: ${u}`)):s.some(a=>e.includes(a))?t.push({description:p,detail:u,required:c}):o.some(a=>e.includes(a))?l.push({position:p,detail:u,required:c}):(i.some(a=>e.includes(a)),a.push({name:p,note:u,required:c}))}),n&&n.description&&(n.description=n.description.join("ï¼›")),{certifications:a,performance:t,personnel:l,financial:n}})(a):{certifications:[],performance:[],personnel:[],financial:null}}),G=async()=>{if(V.value){y.value=!0;try{const a=(await Ae.getProject(V.value)).data;if(C.value={id:a.project_id,name:a.project_name,number:a.project_number,company_id:a.company_id,company_name:a.company_name,status:a.status,created_at:a.created_at,updated_at:a.updated_at,authorized_person_name:a.authorized_person_name,authorized_person_id:a.authorized_person_id,tender_unit:a.tender_unit,tender_agency:a.tender_agency,budget_amount:a.budget_amount,project_type:a.project_type,registration_deadline:a.registration_deadline,bid_deadline:a.bid_deadline,bid_opening_time:a.bid_opening_time,bid_opening_location:a.bid_opening_location,project_manager_name:a.project_manager_name,project_manager_phone:a.project_manager_phone,tech_lead_name:a.tech_lead_name,tech_lead_phone:a.tech_lead_phone,business_contact_name:a.business_contact_name,business_contact_phone:a.business_contact_phone,description:a.description,step1_data:a.step1_data,...a},K.name=C.value.name||"",K.number=C.value.number||"",K.company_id=C.value.company_id||null,K.description=C.value.description||"",K.tender_unit=C.value.tender_unit||"",K.tender_agency=C.value.tender_agency||"",K.budget_amount=C.value.budget_amount||null,K.project_type=C.value.project_type||"",K.registration_deadline=C.value.registration_deadline||"",K.bid_deadline=C.value.bid_deadline||"",K.bid_opening_time=C.value.bid_opening_time||"",K.bid_opening_location=C.value.bid_opening_location||"",K.project_manager_name=C.value.project_manager_name||"",K.project_manager_phone=C.value.project_manager_phone||"",K.tech_lead_name=C.value.tech_lead_name||"",K.tech_lead_phone=C.value.tech_lead_phone||"",K.business_contact_name=C.value.business_contact_name||"",K.business_contact_phone=C.value.business_contact_phone||"",K.authorized_person_name=C.value.authorized_person_name||"",K.authorized_person_id=C.value.authorized_person_id||"",a.step1_data)try{const e="string"==typeof a.step1_data?JSON.parse(a.step1_data):a.step1_data;e.chapters&&Array.isArray(e.chapters)&&(D.value=e.chapters);const t=[];let l=1;if(a.tender_document_path&&t.push({id:l++,file_path:a.tender_document_path,file_url:a.tender_document_path,original_filename:"æ‹›æ ‡æ–‡æ¡£",document_type:"tender",uploaded_at:a.created_at}),e.response_file_path&&t.push({id:l++,file_path:e.response_file_path,file_url:e.response_file_path,original_filename:e.response_filename||"åº”ç­”æ–‡ä»¶æ¨¡æ¿",document_type:"response_template",file_size:e.response_file_size,uploaded_at:a.updated_at}),e.technical_file_path&&t.push({id:l++,file_path:e.technical_file_path,file_url:e.technical_file_path,original_filename:e.technical_filename||"æŠ€æœ¯éœ€æ±‚æ–‡ä»¶",document_type:"technical",file_size:e.technical_file_size,uploaded_at:a.updated_at}),e.business_response_file){const n="string"==typeof e.business_response_file?{file_path:e.business_response_file}:e.business_response_file;t.push({id:l++,file_path:n.file_path||n.file_url,file_url:n.file_url||n.file_path,original_filename:n.file_name||"å•†åŠ¡åº”ç­”å®Œæˆæ–‡ä»¶",document_type:"business_response",file_size:n.file_size,uploaded_at:a.updated_at})}if(e.technical_point_to_point_file){const n="string"==typeof e.technical_point_to_point_file?{file_path:e.technical_point_to_point_file}:e.technical_point_to_point_file;t.push({id:l++,file_path:n.file_path||n.file_url,file_url:n.file_url||n.file_path,original_filename:n.file_name||"æŠ€æœ¯ç‚¹å¯¹ç‚¹åº”ç­”æ–‡ä»¶",document_type:"technical_p2p",file_size:n.file_size,uploaded_at:a.updated_at})}if(e.technical_proposal_file){const n="string"==typeof e.technical_proposal_file?{file_path:e.technical_proposal_file}:e.technical_proposal_file;t.push({id:l++,file_path:n.file_path||n.file_url,file_url:n.file_url||n.file_path,original_filename:n.file_name||"æŠ€æœ¯æ–¹æ¡ˆæ–‡ä»¶",document_type:"technical_proposal",file_size:n.file_size,uploaded_at:a.updated_at})}j.value=t}catch(e){}"æ–°é¡¹ç›®"!==C.value.name&&"draft"!==C.value.status||(b.value=!0)}catch(a){ke.error("åŠ è½½é¡¹ç›®è¯¦æƒ…å¤±è´¥")}finally{y.value=!1}}},Q=e=>e.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}),ee=e=>({active:"è¿›è¡Œä¸­",completed:"å·²å®Œæˆ",draft:"è‰ç¨¿"}[e]||e),ae=()=>{G()},le=()=>{b.value=!0},ne=()=>{Ee.confirm("ç¡®å®šè¦å–æ¶ˆç¼–è¾‘å—ï¼Ÿæœªä¿å­˜çš„æ›´æ”¹å°†ä¸¢å¤±","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(()=>{G(),b.value=!1}).catch(()=>{})},se=async()=>{g.value=!0;try{const e={project_name:K.name,project_number:K.number,company_id:K.company_id,description:K.description,tender_unit:K.tender_unit,tender_agency:K.tender_agency,budget_amount:K.budget_amount,project_type:K.project_type,registration_deadline:K.registration_deadline,bid_deadline:K.bid_deadline,bid_opening_time:K.bid_opening_time,bid_opening_location:K.bid_opening_location,project_manager_name:K.project_manager_name,project_manager_phone:K.project_manager_phone,tech_lead_name:K.tech_lead_name,tech_lead_phone:K.tech_lead_phone,business_contact_name:K.business_contact_name,business_contact_phone:K.business_contact_phone,authorized_person_name:K.authorized_person_name,authorized_person_id:K.authorized_person_id,status:"active"};await Ae.updateProject(V.value,e),ke.success("ä¿å­˜æˆåŠŸ"),b.value=!1,await G()}catch(e){ke.error("ä¿å­˜å¤±è´¥")}finally{g.value=!1}},oe=async()=>{var e;if(!C.value)return;(null==(e=C.value.step1_data)?void 0:e.response_file_path)?(v.setCurrentProject(C.value),await m.push({name:"BusinessResponse"})):ke.warning("æœªæ‰¾åˆ°åº”ç­”æ–‡ä»¶æ¨¡æ¿")},de=async()=>{var e;if(!C.value)return;const a=null==(e=C.value.step1_data)?void 0:e.technical_file_path;a?await m.push({name:"PointToPoint",query:{projectId:V.value.toString(),hitlTaskId:V.value.toString(),technicalFileUrl:a,fromHitl:"true"}}):ke.warning("æœªæ‰¾åˆ°æŠ€æœ¯éœ€æ±‚æ–‡ä»¶")},re=async()=>{var e;if(!C.value)return;const a=null==(e=C.value.step1_data)?void 0:e.technical_file_path;a?await m.push({name:"TechProposal",query:{projectId:V.value.toString(),hitlTaskId:V.value.toString(),technicalFileUrl:a,fromHitl:"true"}}):ke.warning("æœªæ‰¾åˆ°æŠ€æœ¯éœ€æ±‚æ–‡ä»¶")},ue=async e=>{await G(),"response"===e?(ke.success("åº”ç­”æ–‡ä»¶å·²ä¿å­˜ï¼Œå¯ä»¥å¼€å§‹å•†åŠ¡åº”ç­”å¤„ç†"),x.value="business"):"technical"===e&&(ke.success("æŠ€æœ¯éœ€æ±‚å·²ä¿å­˜ï¼Œå¯ä»¥å¼€å§‹æŠ€æœ¯æ–¹æ¡ˆç¼–å†™"),x.value="technical")},pe=e=>{w.value=e},he=async()=>{if(w.value){z.value=!0;try{const e=await Ae.extractBasicInfo(w.value);if(!e.success||!e.data)throw new Error(e.error||"AIæå–å¤±è´¥");{const a=e.data;a.project_name&&(K.name=a.project_name),a.project_number&&(K.number=a.project_number),a.tender_party&&(K.tender_unit=a.tender_party),a.tender_agent&&(K.tender_agency=a.tender_agent),a.tender_location&&(K.bid_opening_location=a.tender_location),a.tender_deadline&&(K.bid_deadline=a.tender_deadline),ke.success("AIæå–åŸºæœ¬ä¿¡æ¯æˆåŠŸ"),b.value||(b.value=!0)}}catch(e){ke.error(`AIæå–å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{z.value=!1}}else ke.warning("è¯·å…ˆä¸Šä¼ å¹¶è§£æžæ‹›æ ‡æ–‡æ¡£")},_e=async()=>{if(w.value){E.value=!0;try{const e=await Ae.extractQualifications(w.value);if(!e.success)throw new Error(e.error||"AIæå–å¤±è´¥");ke.success("AIæå–èµ„æ ¼è¦æ±‚æˆåŠŸï¼Œæ­£åœ¨åˆ·æ–°æ•°æ®..."),await G(),ke.success("èµ„æ ¼è¦æ±‚å·²æ›´æ–°")}catch(e){ke.error(`AIæå–å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{E.value=!1}}else ke.warning("è¯·å…ˆä¸Šä¼ å¹¶è§£æžæ‹›æ ‡æ–‡æ¡£")};return te(()=>h.params.id,()=>{G()}),ie(()=>{(async()=>{try{const e=await Be.getCompanies();N.value=e.data||[]}catch(e){}})(),G()}),(e,h)=>{const m=be,v=De,k=Ce,q=r,T=p,te=_,ie=f,fe=u,me=c,ve=Le,ye=Oe,ke=d,xe=o,we=t,Ee=$e,Ke=s,Se=ze,Ve=i,Ie=n,Ae=l,qe=a;return F(),O("div",it,[P(Ne(ya),{title:I.value,"show-back":!0},{actions:W(()=>[b.value?(F(),O(X,{key:1},[P(m,{onClick:ne},{default:W(()=>[...h[23]||(h[23]=[M("i",{class:"bi bi-x-lg"},null,-1),ge(" å–æ¶ˆ ",-1)])]),_:1}),P(m,{type:"primary",loading:g.value,onClick:se},{default:W(()=>[...h[24]||(h[24]=[M("i",{class:"bi bi-check-lg"},null,-1),ge(" ä¿å­˜ ",-1)])]),_:1},8,["loading"])],64)):(F(),O(X,{key:0},[P(m,{onClick:ae},{default:W(()=>[...h[21]||(h[21]=[M("i",{class:"bi bi-arrow-clockwise"},null,-1),ge(" åˆ·æ–° ",-1)])]),_:1}),P(m,{type:"primary",onClick:le},{default:W(()=>[...h[22]||(h[22]=[M("i",{class:"bi bi-pencil"},null,-1),ge(" ç¼–è¾‘é¡¹ç›® ",-1)])]),_:1})],64))]),_:1},8,["title"]),y.value?(F(),R(Ne(je),{key:0,text:"åŠ è½½é¡¹ç›®è¯¦æƒ…..."})):C.value?(F(),O(X,{key:1},[P(nt,{"project-id":V.value,"company-id":C.value.company_id,"project-detail":C.value,onSuccess:ue,onRefresh:G,onTaskIdUpdate:pe},null,8,["project-id","company-id","project-detail"]),P(Ee,{class:"tabs-card",shadow:"never"},{default:W(()=>[P(qe,{modelValue:x.value,"onUpdate:modelValue":h[20]||(h[20]=e=>x.value=e),class:"detail-tabs"},{default:W(()=>[P(we,{name:"basic"},{label:W(()=>[...h[25]||(h[25]=[M("span",{class:"tab-label"},[M("i",{class:"bi bi-info-circle"}),ge(" åŸºæœ¬ä¿¡æ¯ ")],-1)])]),default:W(()=>{return[M("div",st,[M("section",ot,[M("div",dt,[h[26]||(h[26]=M("h3",null,[M("i",{class:"bi bi-folder"}),ge(" é¡¹ç›®åŸºæœ¬ä¿¡æ¯")],-1)),P(v,{type:(e=C.value.status,{active:"success",completed:"primary",draft:"info"}[e]||"info")},{default:W(()=>[ge(ce(ee(C.value.status)),1)]),_:1},8,["type"])]),b.value?(F(),R(me,{key:0,model:K,rules:S,"label-width":"120px",class:"edit-form"},{default:W(()=>[P(fe,{gutter:20},{default:W(()=>[P(T,{span:24},{default:W(()=>[P(q,{label:"é¡¹ç›®åç§°",prop:"name"},{default:W(()=>[P(k,{modelValue:K.name,"onUpdate:modelValue":h[0]||(h[0]=e=>K.name=e),placeholder:"è¯·è¾“å…¥é¡¹ç›®åç§°"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"é¡¹ç›®ç¼–å·",prop:"number"},{default:W(()=>[P(k,{modelValue:K.number,"onUpdate:modelValue":h[1]||(h[1]=e=>K.number=e),placeholder:"è¯·è¾“å…¥é¡¹ç›®ç¼–å·"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"å…¬å¸åç§°",prop:"company_id"},{default:W(()=>[P(ie,{modelValue:K.company_id,"onUpdate:modelValue":h[2]||(h[2]=e=>K.company_id=e),placeholder:"è¯·é€‰æ‹©å…¬å¸",style:{width:"100%"}},{default:W(()=>[(F(!0),O(X,null,Z(N.value,e=>(F(),R(te,{key:e.company_id,label:e.name,value:e.company_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"è¢«æŽˆæƒäºº"},{default:W(()=>[P(k,{modelValue:K.authorized_person_name,"onUpdate:modelValue":h[3]||(h[3]=e=>K.authorized_person_name=e),placeholder:"è¯·è¾“å…¥è¢«æŽˆæƒäººå§“å"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"æŽˆæƒäººèº«ä»½è¯"},{default:W(()=>[P(k,{modelValue:K.authorized_person_id,"onUpdate:modelValue":h[4]||(h[4]=e=>K.authorized_person_id=e),placeholder:"è¯·è¾“å…¥èº«ä»½è¯å·"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:24},{default:W(()=>[P(q,{label:"é¡¹ç›®æè¿°"},{default:W(()=>[P(k,{modelValue:K.description,"onUpdate:modelValue":h[5]||(h[5]=e=>K.description=e),type:"textarea",rows:4,placeholder:"è¯·è¾“å…¥é¡¹ç›®æè¿°"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):(F(),R(ye,{key:1,column:2,border:"",size:"large"},{default:W(()=>[P(ve,{label:"é¡¹ç›®åç§°",span:2},{default:W(()=>[M("strong",null,ce(C.value.name),1)]),_:1}),P(ve,{label:"é¡¹ç›®ç¼–å·"},{default:W(()=>[ge(ce(C.value.number||"-"),1)]),_:1}),P(ve,{label:"å…¬å¸åç§°"},{default:W(()=>[ge(ce(C.value.company_name),1)]),_:1}),P(ve,{label:"åˆ›å»ºæ—¶é—´"},{default:W(()=>[ge(ce(C.value.created_at),1)]),_:1}),P(ve,{label:"æœ€åŽæ›´æ–°"},{default:W(()=>[ge(ce(C.value.updated_at||"-"),1)]),_:1}),P(ve,{label:"è¢«æŽˆæƒäºº"},{default:W(()=>[ge(ce(C.value.authorized_person_name||"-"),1)]),_:1}),P(ve,{label:"æŽˆæƒäººèº«ä»½è¯"},{default:W(()=>[ge(ce(C.value.authorized_person_id||"-"),1)]),_:1})]),_:1}))]),M("section",rt,[M("div",ct,[h[27]||(h[27]=M("h3",null,[M("i",{class:"bi bi-megaphone"}),ge(" æ‹›æ ‡ä¿¡æ¯")],-1)),P(m,{size:"small",type:"primary",loading:z.value,disabled:!w.value,onClick:he},{default:W(()=>[z.value?H("",!0):(F(),O("i",ut)),ge(" "+ce(z.value?"AIæå–ä¸­...":"AIæå–åŸºæœ¬ä¿¡æ¯"),1)]),_:1},8,["loading","disabled"])]),b.value?(F(),R(me,{key:0,model:K,"label-width":"120px",class:"edit-form"},{default:W(()=>[P(fe,{gutter:20},{default:W(()=>[P(T,{span:12},{default:W(()=>[P(q,{label:"æ‹›æ ‡å•ä½"},{default:W(()=>[P(k,{modelValue:K.tender_unit,"onUpdate:modelValue":h[6]||(h[6]=e=>K.tender_unit=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡å•ä½"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"æ‹›æ ‡ä»£ç†"},{default:W(()=>[P(k,{modelValue:K.tender_agency,"onUpdate:modelValue":h[7]||(h[7]=e=>K.tender_agency=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡ä»£ç†"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"é¢„ç®—é‡‘é¢"},{default:W(()=>[P(ke,{modelValue:K.budget_amount,"onUpdate:modelValue":h[8]||(h[8]=e=>K.budget_amount=e),controls:!1,precision:2,placeholder:"è¯·è¾“å…¥é¢„ç®—é‡‘é¢",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"é¡¹ç›®ç±»åž‹"},{default:W(()=>[P(k,{modelValue:K.project_type,"onUpdate:modelValue":h[9]||(h[9]=e=>K.project_type=e),placeholder:"è¯·è¾“å…¥é¡¹ç›®ç±»åž‹"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"æŠ¥åæˆªæ­¢æ—¶é—´"},{default:W(()=>[P(xe,{modelValue:K.registration_deadline,"onUpdate:modelValue":h[10]||(h[10]=e=>K.registration_deadline=e),type:"datetime",placeholder:"é€‰æ‹©æŠ¥åæˆªæ­¢æ—¶é—´",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"æŠ•æ ‡æˆªæ­¢æ—¶é—´"},{default:W(()=>[P(xe,{modelValue:K.bid_deadline,"onUpdate:modelValue":h[11]||(h[11]=e=>K.bid_deadline=e),type:"datetime",placeholder:"é€‰æ‹©æŠ•æ ‡æˆªæ­¢æ—¶é—´",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"å¼€æ ‡æ—¶é—´"},{default:W(()=>[P(xe,{modelValue:K.bid_opening_time,"onUpdate:modelValue":h[12]||(h[12]=e=>K.bid_opening_time=e),type:"datetime",placeholder:"é€‰æ‹©å¼€æ ‡æ—¶é—´",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"å¼€æ ‡åœ°ç‚¹"},{default:W(()=>[P(k,{modelValue:K.bid_opening_location,"onUpdate:modelValue":h[13]||(h[13]=e=>K.bid_opening_location=e),placeholder:"è¯·è¾“å…¥å¼€æ ‡åœ°ç‚¹"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):(F(),R(ye,{key:1,column:2,border:"",size:"large"},{default:W(()=>[P(ve,{label:"æ‹›æ ‡å•ä½"},{default:W(()=>[ge(ce(C.value.tender_unit||"-"),1)]),_:1}),P(ve,{label:"æ‹›æ ‡ä»£ç†"},{default:W(()=>[ge(ce(C.value.tender_agency||"-"),1)]),_:1}),P(ve,{label:"é¢„ç®—é‡‘é¢"},{default:W(()=>[C.value.budget_amount?(F(),O("span",pt," Â¥ "+ce(Q(C.value.budget_amount)),1)):(F(),O("span",ht,"-"))]),_:1}),P(ve,{label:"é¡¹ç›®ç±»åž‹"},{default:W(()=>[ge(ce(C.value.project_type||"-"),1)]),_:1}),P(ve,{label:"æŠ¥åæˆªæ­¢æ—¶é—´"},{default:W(()=>[C.value.registration_deadline?(F(),O("span",ft,[h[28]||(h[28]=M("i",{class:"bi bi-calendar-event"},null,-1)),ge(" "+ce(C.value.registration_deadline),1)])):(F(),O("span",_t,"-"))]),_:1}),P(ve,{label:"æŠ•æ ‡æˆªæ­¢æ—¶é—´"},{default:W(()=>[C.value.bid_deadline?(F(),O("span",mt,[h[29]||(h[29]=M("i",{class:"bi bi-calendar-event"},null,-1)),ge(" "+ce(C.value.bid_deadline),1)])):(F(),O("span",vt,"-"))]),_:1}),P(ve,{label:"å¼€æ ‡æ—¶é—´"},{default:W(()=>[C.value.bid_opening_time?(F(),O("span",yt,[h[30]||(h[30]=M("i",{class:"bi bi-calendar-event"},null,-1)),ge(" "+ce(C.value.bid_opening_time),1)])):(F(),O("span",gt,"-"))]),_:1}),P(ve,{label:"å¼€æ ‡åœ°ç‚¹"},{default:W(()=>[ge(ce(C.value.bid_opening_location||"-"),1)]),_:1})]),_:1}))]),M("section",bt,[h[31]||(h[31]=M("div",{class:"section-header"},[M("h3",null,[M("i",{class:"bi bi-person-lines-fill"}),ge(" è”ç³»äººä¿¡æ¯")])],-1)),b.value?(F(),R(me,{key:0,model:K,"label-width":"120px",class:"edit-form"},{default:W(()=>[P(fe,{gutter:20},{default:W(()=>[P(T,{span:12},{default:W(()=>[P(q,{label:"é¡¹ç›®ç»ç†"},{default:W(()=>[P(k,{modelValue:K.project_manager_name,"onUpdate:modelValue":h[14]||(h[14]=e=>K.project_manager_name=e),placeholder:"è¯·è¾“å…¥é¡¹ç›®ç»ç†å§“å"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"è”ç³»ç”µè¯"},{default:W(()=>[P(k,{modelValue:K.project_manager_phone,"onUpdate:modelValue":h[15]||(h[15]=e=>K.project_manager_phone=e),placeholder:"è¯·è¾“å…¥è”ç³»ç”µè¯"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"æŠ€æœ¯è´Ÿè´£äºº"},{default:W(()=>[P(k,{modelValue:K.tech_lead_name,"onUpdate:modelValue":h[16]||(h[16]=e=>K.tech_lead_name=e),placeholder:"è¯·è¾“å…¥æŠ€æœ¯è´Ÿè´£äººå§“å"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"è”ç³»ç”µè¯"},{default:W(()=>[P(k,{modelValue:K.tech_lead_phone,"onUpdate:modelValue":h[17]||(h[17]=e=>K.tech_lead_phone=e),placeholder:"è¯·è¾“å…¥è”ç³»ç”µè¯"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"å•†åŠ¡è”ç³»äºº"},{default:W(()=>[P(k,{modelValue:K.business_contact_name,"onUpdate:modelValue":h[18]||(h[18]=e=>K.business_contact_name=e),placeholder:"è¯·è¾“å…¥å•†åŠ¡è”ç³»äººå§“å"},null,8,["modelValue"])]),_:1})]),_:1}),P(T,{span:12},{default:W(()=>[P(q,{label:"è”ç³»ç”µè¯"},{default:W(()=>[P(k,{modelValue:K.business_contact_phone,"onUpdate:modelValue":h[19]||(h[19]=e=>K.business_contact_phone=e),placeholder:"è¯·è¾“å…¥è”ç³»ç”µè¯"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):(F(),R(ye,{key:1,column:2,border:"",size:"large"},{default:W(()=>[P(ve,{label:"é¡¹ç›®ç»ç†"},{default:W(()=>[ge(ce(C.value.project_manager_name||"-"),1)]),_:1}),P(ve,{label:"è”ç³»ç”µè¯"},{default:W(()=>[ge(ce(C.value.project_manager_phone||"-"),1)]),_:1}),P(ve,{label:"æŠ€æœ¯è´Ÿè´£äºº"},{default:W(()=>[ge(ce(C.value.tech_lead_name||"-"),1)]),_:1}),P(ve,{label:"è”ç³»ç”µè¯"},{default:W(()=>[ge(ce(C.value.tech_lead_phone||"-"),1)]),_:1}),P(ve,{label:"å•†åŠ¡è”ç³»äºº"},{default:W(()=>[ge(ce(C.value.business_contact_name||"-"),1)]),_:1}),P(ve,{label:"è”ç³»ç”µè¯"},{default:W(()=>[ge(ce(C.value.business_contact_phone||"-"),1)]),_:1})]),_:1}))])])];var e}),_:1}),P(we,{name:"qualifications"},{label:W(()=>[...h[32]||(h[32]=[M("span",{class:"tab-label"},[M("i",{class:"bi bi-award"}),ge(" èµ„æ ¼è¦æ±‚ ")],-1)])]),default:W(()=>[M("div",kt,[M("section",Ct,[M("div",xt,[h[33]||(h[33]=M("h3",null,[M("i",{class:"bi bi-patch-check"}),ge(" èµ„è´¨è¦æ±‚")],-1)),P(m,{size:"small",type:"primary",loading:E.value,disabled:!w.value,onClick:_e},{default:W(()=>[E.value?H("",!0):(F(),O("i",Nt)),ge(" "+ce(E.value?"AIæå–ä¸­...":"AIæå–èµ„æ ¼è¦æ±‚"),1)]),_:1},8,["loading","disabled"])]),J.value.certifications.length>0?(F(),O("div",wt,[(F(!0),O(X,null,Z(J.value.certifications,(e,a)=>(F(),R(Ee,{key:a,shadow:"never",class:"requirement-item"},{default:W(()=>[M("div",zt,[h[36]||(h[36]=M("div",{class:"requirement-icon"},[M("i",{class:"bi bi-shield-check"})],-1)),M("div",Et,[M("h4",null,ce(e.name),1),e.level?(F(),O("p",jt,"ç­‰çº§è¦æ±‚: "+ce(e.level),1)):H("",!0),e.note?(F(),O("p",Dt,ce(e.note),1)):H("",!0)]),M("div",Kt,[e.required?(F(),R(v,{key:0,type:"danger",size:"small"},{default:W(()=>[...h[34]||(h[34]=[ge(" å¿…éœ€ ",-1)])]),_:1})):(F(),R(v,{key:1,type:"info",size:"small"},{default:W(()=>[...h[35]||(h[35]=[ge("å¯é€‰",-1)])]),_:1}))])])]),_:2},1024))),128))])):(F(),R(Ke,{key:1,description:"æš‚æ— èµ„è´¨è¦æ±‚","image-size":80}))]),M("section",St,[h[40]||(h[40]=M("div",{class:"section-header"},[M("h3",null,[M("i",{class:"bi bi-graph-up-arrow"}),ge(" ä¸šç»©è¦æ±‚")])],-1)),J.value.performance.length>0?(F(),O("div",Vt,[(F(!0),O(X,null,Z(J.value.performance,(e,a)=>(F(),R(Ee,{key:a,shadow:"never",class:"requirement-item"},{default:W(()=>[M("div",It,[h[39]||(h[39]=M("div",{class:"requirement-icon"},[M("i",{class:"bi bi-briefcase"})],-1)),M("div",At,[M("h4",null,ce(e.description),1),e.amount?(F(),O("p",qt,"é‡‘é¢è¦æ±‚: â‰¥ Â¥"+ce(Q(e.amount)),1)):H("",!0),e.time_range?(F(),O("p",Tt,"æ—¶é—´èŒƒå›´: "+ce(e.time_range),1)):H("",!0),e.count?(F(),O("p",Bt,"æ•°é‡è¦æ±‚: "+ce(e.count)+" ä¸ª",1)):H("",!0)]),M("div",Ut,[e.required?(F(),R(v,{key:0,type:"danger",size:"small"},{default:W(()=>[...h[37]||(h[37]=[ge(" å¿…éœ€ ",-1)])]),_:1})):(F(),R(v,{key:1,type:"info",size:"small"},{default:W(()=>[...h[38]||(h[38]=[ge("å¯é€‰",-1)])]),_:1}))])])]),_:2},1024))),128))])):(F(),R(Ke,{key:1,description:"æš‚æ— ä¸šç»©è¦æ±‚","image-size":80}))]),M("section",$t,[h[44]||(h[44]=M("div",{class:"section-header"},[M("h3",null,[M("i",{class:"bi bi-people"}),ge(" äººå‘˜é…ç½®è¦æ±‚")])],-1)),J.value.personnel.length>0?(F(),O("div",Lt,[(F(!0),O(X,null,Z(J.value.personnel,(e,a)=>(F(),R(Ee,{key:a,shadow:"never",class:"requirement-item"},{default:W(()=>[M("div",Ot,[h[43]||(h[43]=M("div",{class:"requirement-icon"},[M("i",{class:"bi bi-person-badge"})],-1)),M("div",Ft,[M("h4",null,ce(e.position),1),e.count?(F(),O("p",Mt,"äººæ•°: "+ce(e.count)+" äºº",1)):H("",!0),e.qualification?(F(),O("p",Pt,"èµ„æ ¼è¦æ±‚: "+ce(e.qualification),1)):H("",!0),e.experience?(F(),O("p",Rt,"ç»éªŒè¦æ±‚: "+ce(e.experience),1)):H("",!0)]),M("div",Ht,[e.required?(F(),R(v,{key:0,type:"danger",size:"small"},{default:W(()=>[...h[41]||(h[41]=[ge(" å¿…éœ€ ",-1)])]),_:1})):(F(),R(v,{key:1,type:"info",size:"small"},{default:W(()=>[...h[42]||(h[42]=[ge("å¯é€‰",-1)])]),_:1}))])])]),_:2},1024))),128))])):(F(),R(Ke,{key:1,description:"æš‚æ— äººå‘˜é…ç½®è¦æ±‚","image-size":80}))]),M("section",Wt,[h[47]||(h[47]=M("div",{class:"section-header"},[M("h3",null,[M("i",{class:"bi bi-cash-stack"}),ge(" è´¢åŠ¡è¦æ±‚")])],-1)),J.value.financial?(F(),O("div",Yt,[P(Ee,{shadow:"never",class:"requirement-item"},{default:W(()=>[M("div",Jt,[h[46]||(h[46]=M("div",{class:"requirement-icon"},[M("i",{class:"bi bi-cash-stack"})],-1)),M("div",Gt,[h[45]||(h[45]=M("h4",null,"è´¢åŠ¡ç›¸å…³è¦æ±‚",-1)),M("p",null,ce(J.value.financial.description),1)])])]),_:1})])):(F(),R(Ke,{key:1,description:"æš‚æ— è´¢åŠ¡è¦æ±‚","image-size":80}))])])]),_:1}),P(we,{name:"business"},{label:W(()=>{var e;return[M("span",Qt,[h[48]||(h[48]=M("i",{class:"bi bi-briefcase"},null,-1)),h[49]||(h[49]=ge(" å•†åŠ¡åº”ç­” ",-1)),(null==(e=C.value.step1_data)?void 0:e.business_response_file)?(F(),R(Se,{key:0,"is-dot":"",type:"success"})):H("",!0)])]}),default:W(()=>[M("div",Xt,[M("section",Zt,[M("div",el,[h[51]||(h[51]=M("h3",null,[M("i",{class:"bi bi-file-earmark-text"}),ge(" åº”ç­”æ–‡ä»¶æ¨¡æ¿")],-1)),P(v,{type:"info",size:"small"},{default:W(()=>[...h[50]||(h[50]=[ge("AI è‡ªåŠ¨æå–",-1)])]),_:1})]),B.value?(F(),R(za,{key:0,"file-url":B.value.fileUrl,"file-name":B.value.fileName,"file-size":B.value.fileSize,"show-actions":!0},null,8,["file-url","file-name","file-size"])):(F(),R(Ke,{key:1,description:"æš‚æœªæå–åˆ°åº”ç­”æ–‡ä»¶æ¨¡æ¿","image-size":80},{extra:W(()=>[P(Ve,{type:"info",size:"small"},{default:W(()=>[...h[52]||(h[52]=[ge(" è¯·å…ˆä¸Šä¼ æ‹›æ ‡æ–‡ä»¶å¹¶è¿›è¡Œ AI è§£æž ",-1)])]),_:1})]),_:1}))]),P(Ie),M("section",al,[M("div",tl,[h[55]||(h[55]=M("h3",null,[M("i",{class:"bi bi-file-earmark-check"}),ge(" å•†åŠ¡åº”ç­”å®Œæˆæ–‡ä»¶")],-1)),U.value?(F(),R(v,{key:0,type:"success",size:"small"},{default:W(()=>[...h[53]||(h[53]=[M("i",{class:"bi bi-check-circle-fill"},null,-1),ge(" å·²ç”Ÿæˆ ",-1)])]),_:1})):(F(),R(v,{key:1,type:"info",size:"small"},{default:W(()=>[...h[54]||(h[54]=[ge("æœªç”Ÿæˆ",-1)])]),_:1}))]),U.value?(F(),R(za,{key:0,"file-url":U.value.fileUrl,"file-name":U.value.fileName,"file-size":U.value.fileSize,"show-actions":!0,type:"success"},null,8,["file-url","file-name","file-size"])):(F(),R(Ke,{key:1,description:"æš‚æœªç”Ÿæˆå•†åŠ¡åº”ç­”æ–‡ä»¶","image-size":80},{extra:W(()=>[P(Ve,{type:"info",size:"small"},{default:W(()=>[...h[56]||(h[56]=[ge(" ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹ç”Ÿæˆå•†åŠ¡åº”ç­” ",-1)])]),_:1})]),_:1}))]),M("div",ll,[P(m,{type:"primary",size:"large",disabled:!B.value,onClick:oe},{default:W(()=>[h[57]||(h[57]=M("i",{class:"bi bi-rocket-takeoff"},null,-1)),ge(" "+ce(U.value?"é‡æ–°ç”Ÿæˆ":"å¼€å§‹")+"å•†åŠ¡åº”ç­” ",1)]),_:1},8,["disabled"]),B.value?H("",!0):(F(),R(Ve,{key:0,type:"warning",size:"small"},{default:W(()=>[...h[58]||(h[58]=[M("i",{class:"bi bi-exclamation-triangle"},null,-1),ge(" è¯·å…ˆä¸Šä¼ æ‹›æ ‡æ–‡ä»¶å¹¶è¿›è¡Œ AI è§£æž ",-1)])]),_:1}))])])]),_:1}),P(we,{name:"documents"},{label:W(()=>[M("span",nl,[h[59]||(h[59]=M("i",{class:"bi bi-files"},null,-1)),h[60]||(h[60]=ge(" æ–‡æ¡£ä¸Žç« èŠ‚ ",-1)),j.value.length>0||D.value.length>0?(F(),R(Se,{key:0,value:j.value.length,type:"success"},null,8,["value"])):H("",!0)])]),default:W(()=>[M("div",il,[M("section",sl,[M("div",ol,[h[61]||(h[61]=M("h3",null,[M("i",{class:"bi bi-file-earmark-text"}),ge(" é¡¹ç›®æ–‡æ¡£")],-1)),j.value.length>0?(F(),R(v,{key:0,type:"success",size:"small"},{default:W(()=>[ge(" å…± "+ce(j.value.length)+" ä¸ªæ–‡ä»¶ ",1)]),_:1})):H("",!0)]),j.value.length>0?(F(),O("div",dl,[(F(!0),O(X,null,Z(j.value,e=>(F(),R(za,{key:e.id,"file-url":e.file_url||e.file_path,"file-name":e.original_filename,"file-size":e.file_size,"upload-time":e.uploaded_at,"show-actions":!0},null,8,["file-url","file-name","file-size","upload-time"]))),128))])):(F(),R(Ke,{key:1,description:"æš‚æ— æ–‡æ¡£","image-size":80},{extra:W(()=>[P(Ve,{type:"info",size:"small"},{default:W(()=>[...h[62]||(h[62]=[ge(" è¯·åœ¨é¡µé¢é¡¶éƒ¨ä¸Šä¼ æ‹›æ ‡æ–‡æ¡£ ",-1)])]),_:1})]),_:1}))]),D.value.length>0?(F(),R(Ie,{key:0})):H("",!0),D.value.length>0?(F(),O("section",rl,[M("div",cl,[h[63]||(h[63]=M("h3",null,[M("i",{class:"bi bi-list-nested"}),ge(" å·²è¯†åˆ«ç« èŠ‚")],-1)),P(v,{type:"success",size:"small"},{default:W(()=>[ge(" å…± "+ce(A.value)+" ä¸ªç« èŠ‚ ",1)]),_:1})]),P(Aa,{chapters:D.value,"show-checkbox":!1,"show-search":!0},null,8,["chapters"])])):H("",!0)])]),_:1}),P(we,{name:"technical"},{label:W(()=>{var e,a;return[M("span",ul,[h[64]||(h[64]=M("i",{class:"bi bi-cpu"},null,-1)),h[65]||(h[65]=ge(" æŠ€æœ¯éœ€æ±‚ ",-1)),(null==(e=C.value.step1_data)?void 0:e.technical_point_to_point_file)||(null==(a=C.value.step1_data)?void 0:a.technical_proposal_file)?(F(),R(Se,{key:0,"is-dot":"",type:"success"})):H("",!0)])]}),default:W(()=>[M("div",pl,[M("section",hl,[M("div",fl,[h[67]||(h[67]=M("h3",null,[M("i",{class:"bi bi-file-earmark-text"}),ge(" æŠ€æœ¯éœ€æ±‚æ–‡ä»¶")],-1)),P(v,{type:"info",size:"small"},{default:W(()=>[...h[66]||(h[66]=[ge("AI è‡ªåŠ¨æå–",-1)])]),_:1})]),$.value?(F(),R(za,{key:0,"file-url":$.value.fileUrl,"file-name":$.value.fileName,"file-size":$.value.fileSize,"show-actions":!0},null,8,["file-url","file-name","file-size"])):(F(),R(Ke,{key:1,description:"æš‚æœªæå–åˆ°æŠ€æœ¯éœ€æ±‚æ–‡ä»¶","image-size":80}))]),P(Ie),M("section",_l,[M("div",ml,[h[70]||(h[70]=M("h3",null,[M("i",{class:"bi bi-arrow-left-right"}),ge(" ç‚¹å¯¹ç‚¹åº”ç­”å®Œæˆæ–‡ä»¶")],-1)),L.value?(F(),R(v,{key:0,type:"success",size:"small"},{default:W(()=>[...h[68]||(h[68]=[M("i",{class:"bi bi-check-circle-fill"},null,-1),ge(" å·²ç”Ÿæˆ ",-1)])]),_:1})):(F(),R(v,{key:1,type:"info",size:"small"},{default:W(()=>[...h[69]||(h[69]=[ge("æœªç”Ÿæˆ",-1)])]),_:1}))]),L.value?(F(),R(za,{key:0,"file-url":L.value.fileUrl,"file-name":L.value.fileName,"file-size":L.value.fileSize,"show-actions":!0,type:"success"},null,8,["file-url","file-name","file-size"])):(F(),R(Ke,{key:1,description:"æš‚æœªç”Ÿæˆç‚¹å¯¹ç‚¹åº”ç­”æ–‡ä»¶","image-size":80}))]),P(Ie),M("section",vl,[M("div",yl,[h[73]||(h[73]=M("h3",null,[M("i",{class:"bi bi-file-code"}),ge(" æŠ€æœ¯æ–¹æ¡ˆå®Œæˆæ–‡ä»¶")],-1)),Y.value?(F(),R(v,{key:0,type:"success",size:"small"},{default:W(()=>[...h[71]||(h[71]=[M("i",{class:"bi bi-check-circle-fill"},null,-1),ge(" å·²ç”Ÿæˆ ",-1)])]),_:1})):(F(),R(v,{key:1,type:"info",size:"small"},{default:W(()=>[...h[72]||(h[72]=[ge("æœªç”Ÿæˆ",-1)])]),_:1}))]),Y.value?(F(),R(za,{key:0,"file-url":Y.value.fileUrl,"file-name":Y.value.fileName,"file-size":Y.value.fileSize,"show-actions":!0,type:"success"},null,8,["file-url","file-name","file-size"])):(F(),R(Ke,{key:1,description:"æš‚æœªç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆæ–‡ä»¶","image-size":80}))]),M("div",gl,[P(Ae,{size:16},{default:W(()=>[P(m,{type:"primary",size:"large",disabled:!$.value,onClick:de},{default:W(()=>[h[74]||(h[74]=M("i",{class:"bi bi-arrow-left-right"},null,-1)),ge(" "+ce(L.value?"é‡æ–°ç”Ÿæˆ":"å¼€å§‹")+"ç‚¹å¯¹ç‚¹åº”ç­” ",1)]),_:1},8,["disabled"]),P(m,{type:"primary",size:"large",disabled:!$.value,onClick:re},{default:W(()=>[h[75]||(h[75]=M("i",{class:"bi bi-file-code"},null,-1)),ge(" "+ce(Y.value?"é‡æ–°ç”Ÿæˆ":"å¼€å§‹")+"æŠ€æœ¯æ–¹æ¡ˆç¼–å†™ ",1)]),_:1},8,["disabled"])]),_:1}),$.value?H("",!0):(F(),R(Ve,{key:0,type:"warning",size:"small"},{default:W(()=>[...h[76]||(h[76]=[M("i",{class:"bi bi-exclamation-triangle"},null,-1),ge(" è¯·å…ˆä¸Šä¼ æ‹›æ ‡æ–‡ä»¶å¹¶è¿›è¡Œ AI è§£æž ",-1)])]),_:1}))])])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):(F(),R(Ke,{key:2,description:"é¡¹ç›®ä¸å­˜åœ¨æˆ–åŠ è½½å¤±è´¥"}))])}}}),[["__scopeId","data-v-ca50def9"]]);export{bl as default};
