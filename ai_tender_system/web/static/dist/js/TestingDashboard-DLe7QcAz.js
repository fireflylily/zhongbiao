import{n as e,q as a,o as s,E as l,_ as t,S as i,av as n,l as o,at as c,F as r,I as u}from"./index.js";/* empty css                *//* empty css                                                                          */import{E as d}from"./el-text-Cbr1aI-6.js";import{E as v}from"./el-pagination-LFcVXgzv.js";/* empty css               */import{E as p,a as f}from"./el-select-BRmwHaPV.js";/* empty css                     *//* empty css                             *//* empty css                    */import{t as m}from"./test-runner-D0GJXmij.js";/* empty css                */import{E as _,a as g}from"./el-tab-pane-CrT1S_Zl.js";import{C as h}from"./Card-BYlt77WN.js";/* empty css                                                                        */import{aq as y,am as b,an as w,aV as k,aw as j,as as x,aK as C,au as z,at as V,av as S,aX as T,aY as E,aR as I,aS as F,ar as $,aA as D,bI as U,ay as O,aM as P}from"./editor-B2OO2pov.js";/* empty css                   *//* empty css                */import{E as H}from"./el-skeleton-item-JBW1JKrq.js";import{E as A}from"./index-DOF8wyI3.js";import{E as M}from"./index-nzMCCPZ_.js";import{E as q}from"./index-CVQCSiPO.js";import{E as L}from"./index-DxEuAmkt.js";import{E as N,a as R}from"./index-DV_tRJ6B.js";import{E as B}from"./index-2BvDutB9.js";import"./index-C2wRk8Ho.js";import"./strings-AttvWK4d.js";import"./index-C3Wd-RFA.js";import"./toNumber-BHhAPexX.js";import"./_baseFindIndex-BTqrMG7V.js";import"./_baseIteratee-C8pVAKYE.js";import"./raf-B6jWGkGX.js";import"./clamp-DmrTTiq0.js";import"./flatMap-IaJ8K9rw.js";import"./map-DjkI9_xQ.js";import"./_baseEach-CJbh0AmI.js";const J={class:"test-checklist"},Q={key:0,class:"loading-state"},Y={key:1,class:"error-state"},G={key:2,class:"checklist-content"},K={class:"section-header"},W={class:"header-left"},X={class:"section-title"},Z={class:"header-right"},ee={class:"test-count"},ae={class:"test-list"},se={class:"test-info"},le={class:"test-details"},te={class:"test-name"},ie={class:"test-path"},ne={class:"test-actions"},oe={class:"section-header"},ce={class:"header-left"},re={class:"section-title"},ue={class:"test-list"},de={class:"test-info"},ve={class:"test-details"},pe={class:"test-name"},fe={class:"test-path"},me={key:0,class:"test-actions"},_e={class:"test-output"},ge={key:0,class:"output-content"},he=t(y({__name:"TestChecklist",setup(t){const i=b(!0),n=b(null),o=b(null),c=b({}),r=b({}),u=b({}),d=b(!1),v=b(!1),p=b(""),f=w(()=>{if(!o.value)return{total:0,passed:0};return{total:o.value.core_tests.tests.length,passed:o.value.core_tests.tests.filter(e=>{var a;return"passed"===(null==(a=c.value[e.full_path])?void 0:a.status)}).length}}),_=async()=>{try{const e=await m.getChecklistStatus();e.success&&(c.value=e.test_status)}catch(e){}},g=async e=>{try{r.value[e]=!0;const a=await m.runSingleTest(e);a.success&&a.passed?(l.success(`æµ‹è¯•é€šè¿‡: ${e.split("::")[1]||e}`),c.value[e]={available:!0,status:"passed",last_run:(new Date).toISOString()}):(l.error(`æµ‹è¯•å¤±è´¥: ${e.split("::")[1]||e}`),c.value[e]={available:!0,status:"failed",last_run:(new Date).toISOString()}),p.value=a.output||"",v.value=!0}catch(a){l.error(`è¿è¡Œå¤±è´¥: ${a.message}`)}finally{r.value[e]=!1}},h=async()=>{if(o.value){d.value=!0;for(const e of o.value.core_tests.tests)await g(e.full_path);d.value=!1,l.success("æ‰€æœ‰æ ¸å¿ƒæµ‹è¯•å·²å®Œæˆ")}},y=e=>{var a;const s=null==(a=c.value[e])?void 0:a.status;return"passed"===s?"bi-check-circle-fill":"failed"===s?"bi-x-circle-fill":"bi-circle"},U=e=>{var a;const s=null==(a=c.value[e])?void 0:a.status;return"passed"===s?"test-passed":"failed"===s?"test-failed":"test-unknown"},O=()=>{p.value&&navigator.clipboard.writeText(p.value).then(()=>{l.success("è¾“å‡ºå·²å¤åˆ¶åˆ°å‰ªè´´æ¿")})};return k(async()=>{await(async()=>{try{i.value=!0,n.value=null;const e=await m.getChecklist();e.success?o.value=e.checklist:n.value="åŠ è½½æµ‹è¯•æ¸…å•å¤±è´¥"}catch(e){n.value=e.message||"ç½‘ç»œé”™è¯¯"}finally{i.value=!1}})(),await _()}),(t,m)=>{const b=H,w=e,k=M,P=a,L=A,N=q,R=s;return x(),j("div",J,[i.value?(x(),j("div",Q,[z(b,{rows:5,animated:""})])):n.value?(x(),j("div",Y,[z(w,{title:n.value,type:"error","show-icon":"",closable:!1},null,8,["title"])])):o.value?(x(),j("div",G,[z(L,{class:"checklist-section",shadow:"never"},{header:V(()=>[S("div",K,[S("div",W,[m[3]||(m[3]=S("i",{class:"bi-shield-check section-icon"},null,-1)),S("span",X,I(o.value.core_tests.name),1),z(k,{type:"danger",size:"small",effect:"dark"},{default:V(()=>[...m[2]||(m[2]=[F("æ ¸å¿ƒ",-1)])]),_:1})]),S("div",Z,[S("span",ee,I(f.value.passed)+"/"+I(f.value.total),1),z(P,{size:"small",type:"primary",onClick:h,loading:d.value,disabled:d.value},{default:V(()=>[...m[4]||(m[4]=[S("i",{class:"bi-play-fill"},null,-1),F(" å…¨éƒ¨è¿è¡Œ ",-1)])]),_:1},8,["loading","disabled"])])])]),default:V(()=>[S("div",ae,[(x(!0),j(T,null,E(o.value.core_tests.tests,e=>{var a,s;return x(),j("div",{key:e.id,class:D(["test-item",U(e.full_path)])},[S("div",se,[S("i",{class:D([y(e.full_path),"test-status-icon"])},null,2),S("div",le,[S("div",te,I(e.name),1),S("div",ie,I(e.file),1)])]),S("div",ne,["passed"===(null==(a=c.value[e.full_path])?void 0:a.status)?(x(),$(k,{key:0,type:"success",size:"small",effect:"plain"},{default:V(()=>[...m[5]||(m[5]=[F(" âœ“ é€šè¿‡ ",-1)])]),_:1})):"failed"===(null==(s=c.value[e.full_path])?void 0:s.status)?(x(),$(k,{key:1,type:"danger",size:"small",effect:"plain"},{default:V(()=>[...m[6]||(m[6]=[F(" âœ— å¤±è´¥ ",-1)])]),_:1})):(x(),$(k,{key:2,type:"info",size:"small",effect:"plain"},{default:V(()=>[...m[7]||(m[7]=[F(" æœªè¿è¡Œ ",-1)])]),_:1})),z(P,{size:"small",onClick:a=>g(e.full_path),loading:r.value[e.full_path],disabled:r.value[e.full_path]},{default:V(()=>[...m[8]||(m[8]=[F(" è¿è¡Œ ",-1)])]),_:1},8,["onClick","loading","disabled"])])],2)}),128))])]),_:1}),(x(!0),j(T,null,E(o.value.test_suites,(e,a)=>(x(),j("div",{key:a,class:"suite-section"},[z(L,{shadow:"never"},{header:V(()=>[S("div",oe,[S("div",ce,[m[9]||(m[9]=S("i",{class:"bi-folder-check section-icon"},null,-1)),S("span",re,I(e.description),1),z(k,{size:"small",effect:"plain"},{default:V(()=>[F(I(e.tests.length)+" ä¸ªæµ‹è¯•",1)]),_:2},1024)]),z(P,{size:"small",type:"primary",plain:"",onClick:e=>(async e=>{l.info(`è¿è¡Œæµ‹è¯•å¥—ä»¶: ${e}`),u.value[e]=!0;try{const a=await fetch("/api/testing/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:"backend",test_path:"tests/"})}),s=await a.json();s.success?(l.success(`å¥—ä»¶ ${e} æµ‹è¯•å®Œæˆ`),await _()):l.error(`å¥—ä»¶è¿è¡Œå¤±è´¥: ${s.error}`)}catch(a){l.error(`è¿è¡Œå¤±è´¥: ${a.message}`)}finally{u.value[e]=!1}})(a),loading:u.value[a],disabled:u.value[a]},{default:V(()=>[...m[10]||(m[10]=[S("i",{class:"bi-play-fill"},null,-1),F(" è¿è¡Œå¥—ä»¶ ",-1)])]),_:1},8,["onClick","loading","disabled"])])]),default:V(()=>[S("div",ue,[(x(!0),j(T,null,E(e.tests,e=>(x(),j("div",{key:e.id,class:D(["test-item",{"is-directory":e.is_directory}])},[S("div",de,[S("i",{class:D([e.is_directory?"bi-folder":"bi-file-earmark-code","test-icon"])},null,2),S("div",ve,[S("div",pe,I(e.name),1),S("div",fe,I(e.file),1)])]),e.is_directory?C("",!0):(x(),j("div",me,[z(P,{size:"small",onClick:a=>g(e.full_path),loading:r.value[e.full_path],disabled:r.value[e.full_path]},{default:V(()=>[...m[11]||(m[11]=[F(" è¿è¡Œ ",-1)])]),_:1},8,["onClick","loading","disabled"])]))],2))),128))])]),_:2},1024)]))),128))])):C("",!0),z(R,{modelValue:v.value,"onUpdate:modelValue":m[1]||(m[1]=e=>v.value=e),title:"æµ‹è¯•è¾“å‡º",width:"70%","close-on-click-modal":!1},{footer:V(()=>[z(P,{onClick:m[0]||(m[0]=e=>v.value=!1)},{default:V(()=>[...m[12]||(m[12]=[F("å…³é—­",-1)])]),_:1}),z(P,{type:"primary",onClick:O},{default:V(()=>[...m[13]||(m[13]=[F("å¤åˆ¶è¾“å‡º",-1)])]),_:1})]),default:V(()=>[S("div",_e,[p.value?(x(),j("pre",ge,I(p.value),1)):(x(),$(N,{key:1,description:"æ— è¾“å‡º"}))])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-558d203b"]]),ye={class:"automated-test"},be={class:"runner-content"},we={class:"quick-info-grid"},ke={class:"info-content"},je={class:"info-text"},xe={class:"info-value"},Ce={class:"info-content"},ze={class:"info-text"},Ve={class:"info-value"},Se={class:"info-content"},Te={class:"info-text"},Ee={class:"info-content"},Ie={class:"info-text"},Fe={class:"info-value small"},$e={class:"control-panel"},De={class:"run-options"},Ue={class:"test-env-selector"},Oe={key:0,class:"test-options"},Pe={key:1,class:"test-options"},He={key:0,class:"results-panel"},Ae={class:"stats-header"},Me={class:"test-stats"},qe={class:"stat-item success"},Le={class:"stat-content"},Ne={class:"stat-value"},Re={class:"stat-item danger"},Be={class:"stat-content"},Je={class:"stat-value"},Qe={class:"stat-item warning"},Ye={class:"stat-content"},Ge={class:"stat-value"},Ke={class:"stat-item info"},We={class:"stat-content"},Xe={class:"stat-value"},Ze={class:"stat-item"},ea={class:"stat-content"},aa={class:"stat-value"},sa={key:1,class:"coverage-section"},la={class:"coverage-header"},ta={class:"coverage-actions"},ia={class:"coverage-summary"},na={class:"summary-item"},oa={class:"summary-value"},ca={class:"summary-item"},ra={class:"summary-value success"},ua={class:"summary-item"},da={class:"summary-value danger"},va={class:"pagination-wrapper"},pa={class:"history-section"},fa={class:"history-header"},ma={class:"header-actions"},_a={key:0,class:"result-summary"},ga={class:"result-item success"},ha={class:"result-item danger"},ya={class:"result-item warning"},ba={key:1,class:"text-muted"},wa={key:0},ka={key:1,class:"text-muted"},ja={key:0,class:"empty-state"},xa={key:2,class:"logs-section"},Ca={class:"logs-header"},za={class:"header-actions"},Va={key:0,class:"logs-content"},Sa={key:1,class:"empty-logs"},Ta=t(y({__name:"TestingDashboard",setup(e){const s=b("checklist"),t=b(null),y=b("backend"),T=b("unit"),E=b(""),H=b(!0),J=b(!1),Q=b(null),Y=b(null),G=b(null),K=b(null),W=b([]),X=b(null),Z=b(1),ee=b(20),ae=w(()=>{if(!K.value)return[];const e=(Z.value-1)*ee.value,a=e+ee.value;return K.value.files.slice(e,a)}),se=async()=>{try{const e=await m.getQuickInfo();e.success&&(t.value=e.info)}catch(e){}},le=async()=>{var e,a;if(!J.value)try{let e;if("frontend"===y.value){l.info("æ­£åœ¨è¿è¡Œå‰ç«¯Vitestæµ‹è¯•..."),e=await fetch("/api/testing/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:"frontend",test_module:E.value})});const a=await e.json();a.success?(l.success(`å‰ç«¯æµ‹è¯•å®Œæˆï¼é€šè¿‡: ${a.passed}, å¤±è´¥: ${a.failed}`),Q.value={task_id:`frontend_${Date.now()}`,status:"completed",result:{passed:a.passed||0,failed:a.failed||0,skipped:a.skipped||0,errors:0,duration:0,total:a.total_tests||0},logs:a.output?a.output.split("\n"):[],test_type:"frontend",created_time:(new Date).toISOString()},await se()):l.error("å‰ç«¯æµ‹è¯•è¿è¡Œå¤±è´¥: "+(a.error||"æœªçŸ¥é”™è¯¯"))}else e=await m.runTests(T.value,H.value,!0),e.success&&(Y.value=e.task_id,J.value=!0,l.success("æµ‹è¯•å·²å¼€å§‹è¿è¡Œ"),te())}catch(s){l.error((null==(a=null==(e=s.response)?void 0:e.data)?void 0:a.error)||"å¯åŠ¨æµ‹è¯•å¤±è´¥")}},te=()=>{G.value&&clearInterval(G.value),G.value=window.setInterval(async()=>{if(Y.value)try{const e=await m.getTestStatus(Y.value);e.success&&(Q.value=e.task,await P(),X.value&&(X.value.scrollTop=X.value.scrollHeight),"completed"!==Q.value.status&&"failed"!==Q.value.status||(ie(),J.value=!1,H.value&&"completed"===Q.value.status&&await ne(),await se(),await oe(),"completed"===Q.value.status?l.success("æµ‹è¯•è¿è¡Œå®Œæˆ"):l.error("æµ‹è¯•è¿è¡Œå¤±è´¥")))}catch(e){}},1e3)},ie=()=>{G.value&&(clearInterval(G.value),G.value=null)},ne=async()=>{try{const e=await m.getCoverageData();e.success&&(K.value=e.coverage)}catch(e){}},oe=async()=>{try{const e=await m.getTestHistory(20);e.success&&(W.value=e.history)}catch(e){}},ce=async()=>{try{await u.confirm("ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æµ‹è¯•åŽ†å²è®°å½•å—ï¼Ÿ","ç¡®è®¤æ¸…é™¤",{type:"warning"}),await m.clearHistory(),W.value=[],l.success("åŽ†å²è®°å½•å·²æ¸…é™¤")}catch(e){}},re=()=>{var e;if(!(null==(e=Q.value)?void 0:e.logs))return;const a=Q.value.logs.join("\n");navigator.clipboard.writeText(a).then(()=>{l.success("æ—¥å¿—å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")})},ue=e=>e>=80?"coverage-excellent":e>=50?"coverage-good":e>=30?"coverage-fair":"coverage-poor",de=e=>e>=80?"#67C23A":e>=50?"#409EFF":e>=30?"#E6A23C":"#F56C6C",ve=e=>({pending:"ç­‰å¾…ä¸­",running:"è¿è¡Œä¸­",completed:"å·²å®Œæˆ",failed:"å¤±è´¥"}[e]||e),pe=e=>{const a="test"===e?"/api/testing/view/report":"/api/testing/view/coverage";window.open(a,"_blank")},fe=e=>{ee.value=e,Z.value=1},me=e=>{Z.value=e};return k(async()=>{await se(),await oe(),await ne()}),U(()=>{ie()}),(e,u)=>{const m=a,b=g,w=A,k=n,U=i,P=L,Y=f,G=p,te=M,ie=B,ne=R,_e=N,ge=v,Ta=d,Ea=q,Ia=_;return x(),j("div",ye,[z(O(h),{title:"ðŸ§ª è‡ªåŠ¨åŒ–æµ‹è¯•è¿è¡Œå™¨"},{extra:V(()=>[z(m,{onClick:se,icon:O(r),circle:"",size:"small",title:"åˆ·æ–°"},null,8,["icon"])]),default:V(()=>[z(Ia,{modelValue:s.value,"onUpdate:modelValue":u[8]||(u[8]=e=>s.value=e),class:"test-tabs"},{default:V(()=>[z(b,{label:"æµ‹è¯•æ¸…å•",name:"checklist"},{default:V(()=>[z(he)]),_:1}),z(b,{label:"æµ‹è¯•è¿è¡Œå™¨",name:"runner"},{default:V(()=>{var e;return[S("div",be,[S("div",we,[z(w,{class:"info-card",shadow:"hover"},{default:V(()=>{var e;return[S("div",ke,[u[10]||(u[10]=S("i",{class:"bi-list-check info-icon"},null,-1)),S("div",je,[u[9]||(u[9]=S("div",{class:"info-label"},"æ€»æµ‹è¯•æ•°",-1)),S("div",xe,I((null==(e=t.value)?void 0:e.total_tests)||0),1)])])]}),_:1}),z(w,{class:"info-card",shadow:"hover"},{default:V(()=>{var e;return[S("div",Ce,[u[12]||(u[12]=S("i",{class:"bi-file-earmark-code info-icon"},null,-1)),S("div",ze,[u[11]||(u[11]=S("div",{class:"info-label"},"æµ‹è¯•æ–‡ä»¶",-1)),S("div",Ve,I((null==(e=t.value)?void 0:e.test_files)||0),1)])])]}),_:1}),z(w,{class:"info-card",shadow:"hover"},{default:V(()=>{var e,a;return[S("div",Se,[u[14]||(u[14]=S("i",{class:"bi-pie-chart info-icon"},null,-1)),S("div",Te,[u[13]||(u[13]=S("div",{class:"info-label"},"æµ‹è¯•è¦†ç›–çŽ‡",-1)),S("div",{class:D(["info-value",ue((null==(e=t.value)?void 0:e.coverage_percent)||0)])},I(((null==(a=t.value)?void 0:a.coverage_percent)||0).toFixed(2))+"% ",3)])])]}),_:1}),z(w,{class:"info-card",shadow:"hover"},{default:V(()=>{var e;return[S("div",Ee,[u[16]||(u[16]=S("i",{class:"bi-clock-history info-icon"},null,-1)),S("div",Ie,[u[15]||(u[15]=S("div",{class:"info-label"},"æœ€åŽè¿è¡Œ",-1)),S("div",Fe,I((null==(e=t.value)?void 0:e.last_run)||"æœªè¿è¡Œ"),1)])])]}),_:1})]),S("div",$e,[z(w,{shadow:"never"},{header:V(()=>[...u[17]||(u[17]=[S("span",null,"è¿è¡Œæµ‹è¯•",-1)])]),default:V(()=>[S("div",De,[S("div",Ue,[u[20]||(u[20]=S("span",{class:"selector-label"},"æµ‹è¯•çŽ¯å¢ƒ:",-1)),z(U,{modelValue:y.value,"onUpdate:modelValue":u[0]||(u[0]=e=>y.value=e),disabled:J.value,size:"default"},{default:V(()=>[z(k,{value:"backend"},{default:V(()=>[...u[18]||(u[18]=[F("ðŸ åŽç«¯æµ‹è¯•",-1)])]),_:1}),z(k,{value:"frontend"},{default:V(()=>[...u[19]||(u[19]=[F("ðŸŽ¨ å‰ç«¯æµ‹è¯•",-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),"backend"===y.value?(x(),j("div",Oe,[z(U,{modelValue:T.value,"onUpdate:modelValue":u[1]||(u[1]=e=>T.value=e),disabled:J.value},{default:V(()=>[z(k,{value:"unit"},{default:V(()=>[...u[21]||(u[21]=[F("å•å…ƒæµ‹è¯•",-1)])]),_:1}),z(k,{value:"integration"},{default:V(()=>[...u[22]||(u[22]=[F("é›†æˆæµ‹è¯•",-1)])]),_:1}),z(k,{value:"all"},{default:V(()=>[...u[23]||(u[23]=[F("å…¨éƒ¨æµ‹è¯•",-1)])]),_:1})]),_:1},8,["modelValue","disabled"]),z(P,{modelValue:H.value,"onUpdate:modelValue":u[2]||(u[2]=e=>H.value=e),disabled:J.value},{default:V(()=>[...u[24]||(u[24]=[F(" ç”Ÿæˆè¦†ç›–çŽ‡æŠ¥å‘Š ",-1)])]),_:1},8,["modelValue","disabled"])])):C("",!0),"frontend"===y.value?(x(),j("div",Pe,[z(G,{modelValue:E.value,"onUpdate:modelValue":u[3]||(u[3]=e=>E.value=e),placeholder:"é€‰æ‹©æ¨¡å—ï¼ˆç•™ç©º=å…¨éƒ¨ï¼‰",clearable:"",disabled:J.value,style:{width:"300px"}},{default:V(()=>[z(Y,{label:"å…¨éƒ¨å‰ç«¯æµ‹è¯•",value:""}),z(Y,{label:"å•†åŠ¡åº”ç­”æ¨¡å—",value:"Business/Response"}),z(Y,{label:"æŠ€æœ¯æ–¹æ¡ˆæ¨¡å—",value:"Business/TechProposal"}),z(Y,{label:"å·¥å…·å‡½æ•°",value:"utils"}),z(Y,{label:"APIè°ƒç”¨",value:"api"})]),_:1},8,["modelValue","disabled"])])):C("",!0),z(m,{type:"primary",icon:J.value?O(o):O(c),loading:J.value,onClick:le,size:"large"},{default:V(()=>[F(I(J.value?"æµ‹è¯•è¿è¡Œä¸­...":"frontend"===y.value?"è¿è¡Œå‰ç«¯æµ‹è¯•":"è¿è¡ŒåŽç«¯æµ‹è¯•"),1)]),_:1},8,["icon","loading"])])]),_:1})]),(null==(e=Q.value)?void 0:e.result)?(x(),j("div",He,[z(w,{shadow:"never",class:"stats-card"},{header:V(()=>[S("div",Ae,[u[25]||(u[25]=S("span",null,"æµ‹è¯•ç»“æžœ",-1)),z(te,{type:Q.value.result.passed?"success":"danger",effect:"dark"},{default:V(()=>[F(I(Q.value.result.passed?"âœ… é€šè¿‡":"âŒ å¤±è´¥"),1)]),_:1},8,["type"])])]),default:V(()=>{var e;return[S("div",Me,[S("div",qe,[u[27]||(u[27]=S("i",{class:"bi-check-circle"},null,-1)),S("div",Le,[u[26]||(u[26]=S("div",{class:"stat-label"},"é€šè¿‡",-1)),S("div",Ne,I(Q.value.result.passed),1)])]),S("div",Re,[u[29]||(u[29]=S("i",{class:"bi-x-circle"},null,-1)),S("div",Be,[u[28]||(u[28]=S("div",{class:"stat-label"},"å¤±è´¥",-1)),S("div",Je,I(Q.value.result.failed),1)])]),S("div",Qe,[u[31]||(u[31]=S("i",{class:"bi-skip-forward-circle"},null,-1)),S("div",Ye,[u[30]||(u[30]=S("div",{class:"stat-label"},"è·³è¿‡",-1)),S("div",Ge,I(Q.value.result.skipped),1)])]),S("div",Ke,[u[33]||(u[33]=S("i",{class:"bi-exclamation-circle"},null,-1)),S("div",We,[u[32]||(u[32]=S("div",{class:"stat-label"},"é”™è¯¯",-1)),S("div",Xe,I(Q.value.result.errors),1)])]),S("div",Ze,[u[35]||(u[35]=S("i",{class:"bi-stopwatch"},null,-1)),S("div",ea,[u[34]||(u[34]=S("div",{class:"stat-label"},"è€—æ—¶",-1)),S("div",aa,I(null==(e=Q.value.result.duration)?void 0:e.toFixed(2))+"s",1)])])])]}),_:1})])):C("",!0),K.value?(x(),j("div",sa,[z(w,{shadow:"never"},{header:V(()=>[S("div",la,[u[37]||(u[37]=S("span",null,"æµ‹è¯•è¦†ç›–çŽ‡",-1)),S("div",ta,[z(m,{size:"small",onClick:u[4]||(u[4]=e=>pe("coverage")),type:"primary",plain:""},{default:V(()=>[...u[36]||(u[36]=[F(" ðŸ“Š æŸ¥çœ‹å®Œæ•´HTMLæŠ¥å‘Š ",-1)])]),_:1}),z(ie,{percentage:K.value.coverage_percent,color:de(K.value.coverage_percent),"stroke-width":20,"text-inside":"",style:{flex:"1","max-width":"300px"}},null,8,["percentage","color"])])])]),default:V(()=>[S("div",ia,[S("div",na,[u[38]||(u[38]=S("span",{class:"summary-label"},"æ€»ä»£ç è¡Œæ•°:",-1)),S("span",oa,I(K.value.total_statements),1)]),S("div",ca,[u[39]||(u[39]=S("span",{class:"summary-label"},"å·²è¦†ç›–:",-1)),S("span",ra,I(K.value.covered_statements),1)]),S("div",ua,[u[40]||(u[40]=S("span",{class:"summary-label"},"æœªè¦†ç›–:",-1)),S("span",da,I(K.value.missing_statements),1)])]),z(_e,{data:ae.value,border:"",stripe:"","max-height":"400"},{default:V(()=>[z(ne,{prop:"file",label:"æ–‡ä»¶","min-width":"300","show-overflow-tooltip":""}),z(ne,{prop:"statements",label:"æ€»è¡Œæ•°",width:"100",align:"center"}),z(ne,{prop:"covered",label:"å·²è¦†ç›–",width:"100",align:"center"}),z(ne,{prop:"missing",label:"æœªè¦†ç›–",width:"100",align:"center"}),z(ne,{label:"è¦†ç›–çŽ‡",width:"150",align:"center"},{default:V(({row:e})=>[z(ie,{percentage:e.coverage,color:de(e.coverage),"stroke-width":6,"show-text":!1},null,8,["percentage","color"]),S("span",{class:D(ue(e.coverage)),style:{"margin-left":"8px"}},I(e.coverage.toFixed(1))+"% ",3)]),_:1})]),_:1},8,["data"]),S("div",va,[z(ge,{"current-page":Z.value,"onUpdate:currentPage":u[5]||(u[5]=e=>Z.value=e),"page-size":ee.value,"onUpdate:pageSize":u[6]||(u[6]=e=>ee.value=e),"page-sizes":[10,20,50,100],total:K.value.files.length,layout:"total, sizes, prev, pager, next",onSizeChange:fe,onCurrentChange:me},null,8,["current-page","page-size","total"])])]),_:1})])):C("",!0),S("div",pa,[z(w,{shadow:"never"},{header:V(()=>[S("div",fa,[u[43]||(u[43]=S("span",null,"æµ‹è¯•åŽ†å²",-1)),S("div",ma,[z(m,{size:"small",onClick:oe},{default:V(()=>[...u[41]||(u[41]=[F("åˆ·æ–°",-1)])]),_:1}),z(m,{size:"small",type:"danger",onClick:ce},{default:V(()=>[...u[42]||(u[42]=[F("æ¸…é™¤",-1)])]),_:1})])])]),default:V(()=>[z(_e,{data:W.value,border:"",stripe:""},{default:V(()=>[z(ne,{label:"ä»»åŠ¡ID",width:"200","show-overflow-tooltip":""},{default:V(({row:e})=>[z(Ta,{size:"small",type:"info"},{default:V(()=>[F(I(e.task_id),1)]),_:2},1024)]),_:1}),z(ne,{prop:"test_type",label:"æµ‹è¯•ç±»åž‹",width:"120",align:"center"},{default:V(({row:e})=>[z(te,{size:"small",effect:"plain"},{default:V(()=>{return[F(I((a=e.test_type,{unit:"å•å…ƒæµ‹è¯•",integration:"é›†æˆæµ‹è¯•",all:"å…¨éƒ¨æµ‹è¯•"}[a]||a)),1)];var a}),_:2},1024)]),_:1}),z(ne,{label:"çŠ¶æ€",width:"100",align:"center"},{default:V(({row:e})=>{return[z(te,{type:(a=e.status,{pending:"info",running:"warning",completed:"success",failed:"danger"}[a]||"info"),size:"small"},{default:V(()=>[F(I(ve(e.status)),1)]),_:2},1032,["type"])];var a}),_:1}),z(ne,{label:"ç»“æžœ",width:"200",align:"center"},{default:V(({row:e})=>[e.result?(x(),j("div",_a,[S("span",ga,"âœ“ "+I(e.result.passed),1),S("span",ha,"âœ— "+I(e.result.failed),1),S("span",ya,"âŠ™ "+I(e.result.skipped),1)])):(x(),j("span",ba,"-"))]),_:1}),z(ne,{prop:"created_time",label:"åˆ›å»ºæ—¶é—´",width:"180"}),z(ne,{label:"è€—æ—¶",width:"100",align:"center"},{default:V(({row:e})=>{var a;return[e.result?(x(),j("span",wa,I(null==(a=e.result.duration)?void 0:a.toFixed(2))+"s",1)):(x(),j("span",ka,"-"))]}),_:1}),z(ne,{label:"æ“ä½œ",width:"120",fixed:"right",align:"center"},{default:V(({row:e})=>[z(m,{size:"small",onClick:a=>{return s=e,Q.value=s,void l.info("å·²åŠ è½½æµ‹è¯•è¯¦æƒ…");var s}},{default:V(()=>[...u[44]||(u[44]=[F("æŸ¥çœ‹",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),0===W.value.length?(x(),j("div",ja,[z(Ea,{description:"æš‚æ— æµ‹è¯•åŽ†å²"})])):C("",!0)]),_:1})]),Q.value?(x(),j("div",xa,[z(w,{shadow:"never",class:"logs-card"},{header:V(()=>[S("div",Ca,[u[48]||(u[48]=S("span",null,"ðŸ“ æµ‹è¯•æ—¥å¿—",-1)),S("div",za,[J.value?(x(),$(te,{key:0,type:"info",effect:"plain"},{default:V(()=>[...u[45]||(u[45]=[S("i",{class:"bi-arrow-clockwise rotating"},null,-1),F(" è¿è¡Œä¸­... ",-1)])]),_:1})):C("",!0),z(m,{size:"small",onClick:u[7]||(u[7]=e=>pe("test")),type:"success",plain:""},{default:V(()=>[...u[46]||(u[46]=[F(" ðŸ“„ æŸ¥çœ‹HTMLæµ‹è¯•æŠ¥å‘Š ",-1)])]),_:1}),z(m,{size:"small",onClick:re},{default:V(()=>[...u[47]||(u[47]=[F("å¤åˆ¶æ—¥å¿—",-1)])]),_:1})])])]),default:V(()=>[S("div",{class:"logs-container",ref_key:"logsContainer",ref:X},[Q.value.logs&&Q.value.logs.length>0?(x(),j("pre",Va,I(Q.value.logs.join("\n")),1)):(x(),j("div",Sa,[...u[49]||(u[49]=[S("i",{class:"bi-terminal"},null,-1),S("p",null,"ç­‰å¾…æµ‹è¯•å¼€å§‹...",-1)])]))],512)]),_:1})])):C("",!0)])]}),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),[["__scopeId","data-v-3c56158f"]]);export{Ta as default};
