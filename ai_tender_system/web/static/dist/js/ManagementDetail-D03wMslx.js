import{c as e,k as a,j as l,N as t,v as i,O as s,I as n,G as c,P as o,d as r,Q as d,R as u,S as _,D as p,M as m,b as f,T as v,U as h,g as b,t as y,V as g,W as k,X as z,A as w,f as x,Y as j,o as C,u as V}from"./element-plus-ZLeSHaWT.js";import{v as q,c as I,x as U,H as S,B as A,I as P,L as D,K as N,O as T,F as E,y as K,r as $,w as L,E as O,j as B,u as F,W as R,aJ as M,M as W,aa as H,aP as J}from"./vue-core-CiAVTOOY.js";import{L as G}from"./Loading-BvtdKuLc.js";/* empty css                                                                          */import{P as Q}from"./PageHeader-C8PosvJu.js";import"./vendor-ZqVwfHSb.js";import{D as X}from"./DocumentPreview-C2RSkj1M.js";import"./umo-editor-zkeZL3VF.js";import"./utils-CTJnFPw-.js";import{_ as Y}from"./index.js";import{t as Z}from"./tender-ZYcn_VXM.js";import{c as ee}from"./company-DX6fQVXW.js";import{u as ae}from"./project-DAr3RjR2.js";/* empty css                                                                        */const le={class:"file-card__icon"},te={class:"file-card__info"},ie={class:"file-card__name"},se={class:"file-card__meta"},ne={key:0,class:"meta-item"},ce={key:0,class:"file-card__actions"},oe=Y(q({__name:"FileCard",props:{fileUrl:{},fileName:{},fileSize:{},uploadTime:{},type:{default:"default"},showActions:{type:Boolean,default:!0}},emits:["preview"],setup(l,{emit:t}){const i=l,s=t,n=I(()=>{if(i.fileName)return i.fileName;const e=i.fileUrl.split("/");return e[e.length-1]||""}),c=I(()=>{var e;return{pdf:"bi-file-pdf",doc:"bi-file-word",docx:"bi-file-word",xls:"bi-file-excel",xlsx:"bi-file-excel",zip:"bi-file-zip",rar:"bi-file-zip"}[(null==(e=n.value.split(".").pop())?void 0:e.toLowerCase())||""]||"bi-file-earmark-text"}),o=I(()=>i.uploadTime?i.uploadTime.split(" ")[0]||i.uploadTime:""),r=e=>{if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/api/"))return e;let a=e;return a.startsWith("ai_tender_system/data/")&&(a=a.substring(22)),a.startsWith("outputs/")&&(a="download/"+a.substring(8)),`/api/files/serve/${a}`},d=()=>{const e=r(i.fileUrl),l=document.createElement("a");l.href=e+"?download=true",l.download=n.value,document.body.appendChild(l),l.click(),document.body.removeChild(l),a.success("æ–‡ä»¶ä¸‹è½½å·²å¼€å§‹")},u=()=>{let e="";if(n.value){const a=n.value.split(".");a.length>1&&(e=a[a.length-1].toLowerCase())}if(!e&&i.fileUrl){const a=i.fileUrl.split("?")[0].split(".");a.length>1&&(e=a[a.length-1].toLowerCase())}if("doc"===e||"docx"===e)s("preview",i.fileUrl,n.value);else{const e=r(i.fileUrl);window.open(e,"_blank")}};return(a,t)=>{const i=e;return K(),U("div",{class:S(["file-card",[`file-card--${l.type}`]])},[A("div",le,[A("i",{class:S(c.value)},null,2)]),A("div",te,[A("div",ie,D(n.value),1),A("div",se,[o.value?(K(),U("span",ne,[t[0]||(t[0]=A("i",{class:"bi bi-calendar"},null,-1)),N(" "+D(o.value),1)])):P("",!0)])]),l.showActions?(K(),U("div",ce,[T(i,{size:"small",onClick:d},{default:E(()=>[...t[1]||(t[1]=[A("i",{class:"bi bi-download"},null,-1),N(" ä¸‹è½½ ",-1)])]),_:1}),T(i,{size:"small",onClick:u},{default:E(()=>[...t[2]||(t[2]=[A("i",{class:"bi bi-eye"},null,-1),N(" é¢„è§ˆ ",-1)])]),_:1})])):P("",!0)],2)}}}),[["__scopeId","data-v-010a89f5"]]),re={class:"chapter-tree"},de={key:0,class:"chapter-search mb-3"},ue={class:"chapter-tree-container"},_e={class:"chapter-tree-node"},pe={class:"chapter-title"},me={class:"chapter-meta"},fe={key:1,class:"word-count text-muted ms-2"},ve=Y(q({__name:"ChapterTree",props:{chapters:{},showCheckbox:{type:Boolean,default:!0},showSearch:{type:Boolean,default:!0},defaultCheckedKeys:{default:()=>[]}},emits:["check","select"],setup(e,{expose:a,emit:n}){const c=e,o=n,r=$(),d=$(""),u=$([]),_={children:"children",label:"title"};u.value=c.chapters,L(()=>c.chapters,e=>{u.value=e,c.defaultCheckedKeys.length>0&&r.value&&r.value.setCheckedKeys(c.defaultCheckedKeys)},{immediate:!0});const p=()=>{if(!d.value.trim())return void(u.value=c.chapters);const e=d.value.toLowerCase();u.value=m(c.chapters,e)},m=(e,a)=>{const l=[];for(const t of e)if(t.title.toLowerCase().includes(a))l.push(t);else if(t.children&&t.children.length>0){const e=m(t.children,a);e.length>0&&l.push({...t,children:e})}return l},f=()=>{if(!r.value)return;const e=r.value.getCheckedKeys(),a=r.value.getCheckedNodes();o("check",e,a)};return a({setCheckedKeys:e=>{var a;null==(a=r.value)||a.setCheckedKeys(e)},getCheckedKeys:()=>{var e;return null==(e=r.value)?void 0:e.getCheckedKeys()},getCheckedNodes:()=>{var e;return null==(e=r.value)?void 0:e.getCheckedNodes()}}),(a,n)=>{const c=l,o=i,m=t,v=s;return K(),U("div",re,[e.showSearch?(K(),U("div",de,[T(c,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=e=>d.value=e),placeholder:"ðŸ” æœç´¢ç« èŠ‚...",clearable:"",onInput:p},{prefix:E(()=>[...n[1]||(n[1]=[A("i",{class:"bi bi-search"},null,-1)])]),_:1},8,["modelValue"])])):P("",!0),A("div",ue,[T(m,{ref_key:"treeRef",ref:r,data:u.value,props:_,"show-checkbox":e.showCheckbox,"check-strictly":!1,"default-expand-all":!1,"expand-on-click-node":!1,"node-key":"id",onCheck:f},{default:E(({node:e,data:a})=>{return[A("div",_e,[A("span",pe,[A("i",{class:S([(t=a,t.children&&t.children.length>0?"bi bi-folder":"bi bi-file-earmark-text"),"me-1"])},null,2),N(" "+D(a.title),1)]),A("span",me,[a.level?(K(),O(o,{key:0,size:"small",type:"info"},{default:E(()=>{return[N(D((e=a.level,{1:"ä¸€çº§",2:"äºŒçº§",3:"ä¸‰çº§",4:"å››çº§",5:"äº”çº§"}[e]||`${e}çº§`)),1)];var e}),_:2},1024)):P("",!0),a.word_count?(K(),U("span",fe,D((l=a.word_count,l>=1e4?`${(l/1e4).toFixed(1)}ä¸‡`:l.toLocaleString()))+"å­— ",1)):P("",!0)])])];var l,t}),_:1},8,["data","show-checkbox"]),u.value&&0!==u.value.length?P("",!0):(K(),O(v,{key:0,description:"æš‚æ— ç« èŠ‚æ•°æ®","image-size":80}))])])}}}),[["__scopeId","data-v-af38204c"]]),he={class:"tender-document-processor"},be={class:"card-header"},ye={class:"upload-section"},ge={key:0,class:"existing-document"},ke={class:"d-flex align-items-center justify-content-between"},ze={class:"me-3"},we={key:1},xe={key:0,class:"mt-3"},je={class:"d-flex align-items-center justify-content-between"},Ce={key:0,class:"bi bi-file-earmark-code me-1"},Ve={class:"card-header"},qe={class:"chapter-section"},Ie={class:"stats-grid mb-3"},Ue={class:"stat-card"},Se={class:"stat-value"},Ae={class:"stat-card"},Pe={class:"stat-value text-success"},De={class:"stat-card"},Ne={class:"stat-value text-info"},Te={class:"batch-operations mb-3"},Ee={class:"save-actions mt-4"},Ke={key:0,class:"parsing-progress mt-3"},$e={class:"d-flex align-items-center"},Le=Y(q({__name:"TenderDocumentProcessor",props:{projectId:{},companyId:{},projectDetail:{}},emits:["success","refresh","preview"],setup(l,{emit:t}){const s=l,v=t,h=$(),b=$(),y=$([]),g=$(null),k=$(!1),z=$("æ­£åœ¨è§£æžæ–‡æ¡£ç»“æž„..."),w=$([]),x=$([]),j=$([]),C=$(!1),V=$(!1),q=$(null),S=I(()=>{const e=a=>{let l=a.length;return a.forEach(a=>{a.children&&a.children.length>0&&(l+=e(a.children))}),l};return e(w.value)}),R=I(()=>x.value.length),M=I(()=>j.value.reduce((e,a)=>e+(a.word_count||0),0)),W=I(()=>null!==q.value),H=e=>{e.raw&&(g.value=e.raw,y.value=[e])},J=()=>{g.value=null,y.value=[],w.value=[],x.value=[]},G=()=>{q.value&&v("preview",q.value.path,q.value.name)},Q=()=>{q.value=null,w.value=[],x.value=[]},X=async()=>{if(g.value){k.value=!0,z.value="æ­£åœ¨è§£æžæ–‡æ¡£ç»“æž„...";try{const e=new FormData;e.append("file",g.value),e.append("company_id",s.companyId.toString()),e.append("project_id",s.projectId.toString());const l=await Z.parseDocumentStructure(e);if(!l.success)throw new Error(l.message||l.error||"è§£æžå¤±è´¥");w.value=l.chapters||[],a.success("æ–‡æ¡£è§£æžæˆåŠŸï¼Œè¯·é€‰æ‹©ç« èŠ‚")}catch(e){const l=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";l.includes(".doc")||l.includes("å¦å­˜ä¸º")||l.includes("docx")?f.alert(l,"ä¸æ”¯æŒ .doc æ ¼å¼",{confirmButtonText:"æˆ‘çŸ¥é“äº†",type:"warning",dangerouslyUseHTMLString:!1,customStyle:{width:"500px"}}):a.error(`è§£æžå¤±è´¥: ${l}`)}finally{k.value=!1}}else a.warning("è¯·å…ˆä¸Šä¼ æ–‡æ¡£")},Y=(e,a)=>{x.value=e,j.value=a},ee=()=>{var e;const a=ie(w.value);null==(e=b.value)||e.setCheckedKeys(a)},ae=()=>{var e;null==(e=b.value)||e.setCheckedKeys([])},le=()=>{var e;const a=se(w.value,["æŠ€æœ¯","æ–¹æ¡ˆ","å®žæ–½","ç³»ç»Ÿ"]);null==(e=b.value)||e.setCheckedKeys(a)},te=()=>{var e;const a=ie(w.value),l=se(w.value,["åˆåŒ","æ¡æ¬¾","åè®®"]),t=a.filter(e=>!l.includes(e));null==(e=b.value)||e.setCheckedKeys(t)},ie=e=>{const a=[];return e.forEach(e=>{a.push(e.id),e.children&&e.children.length>0&&a.push(...ie(e.children))}),a},se=(e,a)=>{const l=[];return e.forEach(e=>{a.some(a=>e.title.includes(a))&&l.push(e.id),e.children&&e.children.length>0&&l.push(...se(e.children,a))}),l},ne=async()=>{if(0!==R.value){C.value=!0;try{await Z.saveResponseFile(s.projectId,x.value),v("success","response"),v("refresh")}catch(e){a.error(`ä¿å­˜å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{C.value=!1}}else a.warning("è¯·å…ˆé€‰æ‹©ç« èŠ‚")},ce=async()=>{if(0!==R.value){V.value=!0;try{await Z.saveTechnicalChapters(s.projectId,x.value),v("success","technical"),v("refresh")}catch(e){a.error(`ä¿å­˜å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{V.value=!1}}else a.warning("è¯·å…ˆé€‰æ‹©ç« èŠ‚")},oe=e=>{if(!e)return"æ‹›æ ‡æ–‡æ¡£";try{const a=e.replace(/\\/g,"/").split("/"),l=a[a.length-1];return decodeURIComponent(l)}catch(a){return"æ‹›æ ‡æ–‡æ¡£"}},re=()=>{if(!s.projectDetail)return;let e=s.projectDetail.step1_data;if("string"==typeof e)try{e=JSON.parse(e)}catch(a){e=null}if(s.projectDetail.tender_document_path){const e=s.projectDetail.original_filename||oe(s.projectDetail.tender_document_path);q.value={path:s.projectDetail.tender_document_path,name:e,uploadedAt:s.projectDetail.created_at}}else if(null==e?void 0:e.file_path){const a=e.file_name||oe(e.file_path);q.value={path:e.file_path,name:a,uploadedAt:s.projectDetail.created_at}}(null==e?void 0:e.chapters)&&Array.isArray(e.chapters)&&e.chapters.length>0&&(w.value=e.chapters)};return L(()=>s.projectDetail,()=>{re()},{immediate:!0}),B(()=>{re()}),(a,l)=>{const t=i,s=e,f=r,v=d,x=o,j=c,I=u,$=_,L=n,B=p;return K(),U("div",he,[T(L,{gutter:20},{default:E(()=>[T(j,{xs:24,sm:24,md:10,lg:10},{default:E(()=>[T(x,{shadow:"hover",class:"step-card"},{header:E(()=>[A("div",be,[l[1]||(l[1]=A("i",{class:"bi bi-upload me-2 text-primary"},null,-1)),l[2]||(l[2]=A("span",{class:"step-title"},"æ­¥éª¤1: ä¸Šä¼ æ‹›æ ‡æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰",-1)),g.value||W.value?(K(),O(t,{key:0,type:"success",size:"small",class:"ms-2"},{default:E(()=>[...l[0]||(l[0]=[N(" å·²ä¸Šä¼  ",-1)])]),_:1})):P("",!0)])]),default:E(()=>[A("div",ye,[W.value?(K(),U("div",ge,[T(f,{type:"success",closable:!1},{title:E(()=>[A("div",ke,[A("div",null,[l[4]||(l[4]=A("i",{class:"bi bi-file-earmark-check-fill me-2"},null,-1)),A("span",ze,D(q.value.name),1),T(t,{size:"small",type:"success"},{default:E(()=>[...l[3]||(l[3]=[N("å·²ä¸Šä¼ ",-1)])]),_:1})]),A("div",null,[T(s,{size:"small",onClick:G},{default:E(()=>[...l[5]||(l[5]=[A("i",{class:"bi bi-eye me-1"},null,-1),N(" é¢„è§ˆ ",-1)])]),_:1}),T(s,{size:"small",onClick:Q},{default:E(()=>[...l[6]||(l[6]=[A("i",{class:"bi bi-arrow-repeat me-1"},null,-1),N(" é‡æ–°ä¸Šä¼  ",-1)])]),_:1})])])]),_:1})])):(K(),U("div",we,[T(v,{ref_key:"uploadRef",ref:h,drag:"","auto-upload":!1,limit:1,accept:".docx","on-change":H,"on-remove":J,"file-list":y.value},{tip:E(()=>[...l[7]||(l[7]=[A("div",{class:"el-upload__tip"},[A("div",null,[N("æŽ¨èä½¿ç”¨ "),A("strong",null,".docx"),N(" æ ¼å¼ï¼ˆå…¼å®¹æ€§æ›´å¥½ï¼‰ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 50MB")]),A("div",{class:"text-warning",style:{"font-size":"12px","margin-top":"4px"}},[A("i",{class:"bi bi-exclamation-triangle-fill me-1"}),N(" æ³¨æ„ï¼šæ—§ç‰ˆ .doc æ ¼å¼æš‚ä¸æ”¯æŒç« èŠ‚è§£æžï¼Œè¯·å…ˆè½¬æ¢ä¸º .docx ")])],-1)])]),default:E(()=>[l[8]||(l[8]=A("i",{class:"bi bi-cloud-upload",style:{"font-size":"36px",color:"var(--el-color-primary)"}},null,-1)),l[9]||(l[9]=A("div",{class:"el-upload__text"},[N(" æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„æˆ– "),A("em",null,"ç‚¹å‡»ä¸Šä¼ ")],-1))]),_:1},8,["file-list"]),g.value?(K(),U("div",xe,[T(f,{type:"success",closable:!1},{title:E(()=>[A("div",je,[A("span",null,[l[10]||(l[10]=A("i",{class:"bi bi-check-circle-fill me-2"},null,-1)),N(" å·²é€‰æ‹©æ–‡ä»¶: "+D(g.value.name),1)]),T(s,{type:"primary",size:"small",loading:k.value,onClick:X},{default:E(()=>[k.value?P("",!0):(K(),U("i",Ce)),N(" "+D(k.value?"è§£æžä¸­...":"è§£æžæ–‡æ¡£ç»“æž„"),1)]),_:1},8,["loading"])])]),_:1})])):P("",!0)]))])]),_:1})]),_:1}),T(j,{xs:24,sm:24,md:14,lg:14},{default:E(()=>[w.value.length>0?(K(),O(x,{key:0,shadow:"hover",class:"step-card"},{header:E(()=>[A("div",Ve,[l[11]||(l[11]=A("i",{class:"bi bi-list-nested me-2 text-success"},null,-1)),l[12]||(l[12]=A("span",{class:"step-title"},"æ­¥éª¤2: é€‰æ‹©ç« èŠ‚",-1)),R.value>0?(K(),O(t,{key:0,type:"success",size:"small",class:"ms-2"},{default:E(()=>[N(" å·²é€‰ "+D(R.value)+" ä¸ª ",1)]),_:1})):P("",!0)])]),default:E(()=>{return[A("div",qe,[A("div",Ie,[A("div",Ue,[l[13]||(l[13]=A("div",{class:"stat-label"},"æ€»ç« èŠ‚æ•°",-1)),A("div",Se,D(S.value),1)]),A("div",Ae,[l[14]||(l[14]=A("div",{class:"stat-label"},"å·²é€‰æ‹©",-1)),A("div",Pe,D(R.value),1)]),A("div",De,[l[15]||(l[15]=A("div",{class:"stat-label"},"é€‰ä¸­å­—æ•°",-1)),A("div",Ne,D((e=M.value,e>=1e4?`${(e/1e4).toFixed(1)}ä¸‡`:e.toLocaleString())),1)])]),A("div",Te,[T(I,null,{default:E(()=>[T(s,{size:"small",onClick:ee},{default:E(()=>[...l[16]||(l[16]=[A("i",{class:"bi bi-check-all me-1"},null,-1),N(" å…¨é€‰ ",-1)])]),_:1}),T(s,{size:"small",onClick:ae},{default:E(()=>[...l[17]||(l[17]=[A("i",{class:"bi bi-x me-1"},null,-1),N(" å…¨ä¸é€‰ ",-1)])]),_:1}),T(s,{size:"small",type:"success",onClick:le},{default:E(()=>[...l[18]||(l[18]=[A("i",{class:"bi bi-cpu me-1"},null,-1),N(" ä»…é€‰æŠ€æœ¯ç« èŠ‚ ",-1)])]),_:1}),T(s,{size:"small",type:"warning",onClick:te},{default:E(()=>[...l[19]||(l[19]=[A("i",{class:"bi bi-file-x me-1"},null,-1),N(" æŽ’é™¤åˆåŒæ¡æ¬¾ ",-1)])]),_:1})]),_:1})]),T(ve,{ref_key:"chapterTreeRef",ref:b,chapters:w.value,onCheck:Y},null,8,["chapters"]),A("div",Ee,[T($,{size:16},{default:E(()=>[T(s,{type:"info",size:"large",disabled:0===R.value,loading:C.value,onClick:ne},{default:E(()=>[...l[20]||(l[20]=[A("i",{class:"bi bi-file-earmark-arrow-down me-1"},null,-1),N(" å¦å­˜ä¸ºåº”ç­”æ–‡ä»¶ ",-1)])]),_:1},8,["disabled","loading"]),T(s,{type:"success",size:"large",disabled:0===R.value,loading:V.value,onClick:ce},{default:E(()=>[...l[21]||(l[21]=[A("i",{class:"bi bi-file-code me-1"},null,-1),N(" å¦å­˜ä¸ºæŠ€æœ¯éœ€æ±‚ ",-1)])]),_:1},8,["disabled","loading"])]),_:1})])])];var e}),_:1})):P("",!0)]),_:1})]),_:1}),k.value?(K(),U("div",Ke,[T(f,{type:"info",closable:!1},{title:E(()=>[A("div",$e,[T(B,{class:"is-loading me-2"},{default:E(()=>[T(F(m))]),_:1}),A("span",null,D(z.value),1)])]),_:1})])):P("",!0)])}}}),[["__scopeId","data-v-e1144ac8"]]),Oe={class:"tender-management-detail"},Be={class:"tab-content"},Fe={class:"info-section"},Re={class:"section-header"},Me={class:"info-section"},We={class:"section-header"},He={key:0,class:"bi bi-magic me-1"},Je={key:0,class:"amount"},Ge={key:1},Qe={class:"tab-content"},Xe={class:"info-section"},Ye={class:"section-header"},Ze={key:0,class:"bi bi-magic me-1"},ea={key:0,class:"requirements-list"},aa={class:"requirement-content"},la={class:"requirement-text"},ta={key:0},ia={key:1},sa={class:"requirement-status"},na={class:"info-section"},ca={key:0,class:"requirements-list"},oa={class:"requirement-content"},ra={class:"requirement-text"},da={key:0},ua={key:1},_a={key:2},pa={class:"requirement-status"},ma={class:"info-section"},fa={key:0,class:"requirements-list"},va={class:"requirement-content"},ha={class:"requirement-text"},ba={key:0},ya={key:1},ga={key:2},ka={class:"requirement-status"},za={class:"info-section"},wa={key:0,class:"financial-requirements"},xa={class:"requirement-content"},ja={class:"requirement-text"},Ca={class:"tab-label"},Va={class:"tab-content"},qa={class:"file-section"},Ia={class:"section-header"},Ua={class:"file-section"},Sa={class:"section-header"},Aa={class:"action-area"},Pa={class:"tab-label"},Da={class:"tab-content"},Na={class:"info-section"},Ta={class:"section-header"},Ea={key:0,class:"documents-grid"},Ka={key:1,class:"info-section"},$a={class:"section-header"},La={class:"tab-label"},Oa={class:"tab-content"},Ba={class:"file-section"},Fa={class:"section-header"},Ra={class:"file-section"},Ma={class:"section-header"},Wa={class:"file-section"},Ha={class:"section-header"},Ja={class:"action-area"},Ga=Y(q({__name:"ManagementDetail",setup(t){const r=M(),d=J(),u=ae(),p=$(!1),m=$(!1),q=$(!1),S=$(null),Y=$("basic"),le=$([]),te=$(!1),ie=$(!1),se=$([]),ne=$([]),ce=$(!1),re=$(!1),de=$(""),ue=$(""),_e=R({name:"",number:"",company_id:null,tenderer:"",agency:"",bidding_method:"",bidding_location:"",bidding_time:"",budget_amount:null,business_contact_name:"",business_contact_phone:"",tenderer_contact_person:"",tenderer_contact_method:"",agency_contact_person:"",agency_contact_method:"",authorized_person_name:"",authorized_person_id:""}),pe={name:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}],number:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®ç¼–å·",trigger:"blur"}],company_id:[{required:!0,message:"è¯·é€‰æ‹©å…¬å¸",trigger:"change"}]},me=I(()=>Number(r.params.id)),fe=I(()=>{var e;return(null==(e=S.value)?void 0:e.name)||"é¡¹ç›®è¯¦æƒ…"}),he=I(()=>{const e=a=>{let l=a.length;return a.forEach(a=>{a.children&&a.children.length>0&&(l+=e(a.children))}),l};return e(ne.value)}),be=e=>e?"string"==typeof e?{fileUrl:e,fileName:void 0,fileSize:void 0}:{fileUrl:e.file_url||e.download_url||e.file_path||"",fileName:e.filename||e.file_name,fileSize:e.file_size}:null,ye=I(()=>{var e,a;return be(null==(a=null==(e=S.value)?void 0:e.step1_data)?void 0:a.response_file_path)}),ge=I(()=>{var e,a;return be(null==(a=null==(e=S.value)?void 0:e.step1_data)?void 0:a.business_response_file)}),ke=I(()=>{var e,a;return be(null==(a=null==(e=S.value)?void 0:e.step1_data)?void 0:a.technical_file_path)}),ze=I(()=>{var e,a;return be(null==(a=null==(e=S.value)?void 0:e.step1_data)?void 0:a.technical_point_to_point_file)}),we=I(()=>{var e,a;return be(null==(a=null==(e=S.value)?void 0:e.step1_data)?void 0:a.technical_proposal_file)}),xe={business_license:"è¥ä¸šæ‰§ç…§ä¿¡æ¯",legal_id_front:"æ³•äººèº«ä»½è¯æ­£é¢",legal_id_back:"æ³•äººèº«ä»½è¯åé¢",auth_id_front:"è¢«æŽˆæƒäººèº«ä»½è¯æ­£é¢",auth_id_back:"è¢«æŽˆæƒäººèº«ä»½è¯åé¢",authorization_letter:"æ³•äººæŽˆæƒå§”æ‰˜ä¹¦",iso9001:"ISO9001è´¨é‡ç®¡ç†ä½“ç³»è®¤è¯",iso20000:"ISO20000ä¿¡æ¯æŠ€æœ¯æœåŠ¡ç®¡ç†ä½“ç³»è®¤è¯",iso27001:"ISO27001ä¿¡æ¯å®‰å…¨ç®¡ç†ä½“ç³»è®¤è¯",cmmi:"CMMIèƒ½åŠ›æˆç†Ÿåº¦è®¤è¯",itss:"ITSSä¿¡æ¯æŠ€æœ¯æœåŠ¡æ ‡å‡†è®¤è¯",telecom_license:"ç”µä¿¡ä¸šåŠ¡è®¸å¯è¯",value_added_telecom_license:"å¢žå€¼ç”µä¿¡ä¸šåŠ¡è®¸å¯è¯",basic_telecom_license:"åŸºç¡€ç”µä¿¡ä¸šåŠ¡è®¸å¯è¯",level_protection:"ç­‰çº§ä¿æŠ¤è®¤è¯",software_copyright:"è½¯ä»¶è‘—ä½œæƒ",patent_certificate:"ä¸“åˆ©è¯ä¹¦",audit_report:"è´¢åŠ¡è¦æ±‚",project_performance:"é¡¹ç›®ä¸šç»©è¦æ±‚",social_security:"ç¤¾ä¼šä¿é™©è¯æ˜Ž",dishonest_executor:"å¤±ä¿¡è¢«æ‰§è¡Œäºº",tax_violation_check:"é‡å¤§ç¨Žæ”¶è¿æ³•",gov_procurement_creditchina:"æ”¿åºœé‡‡è´­ä¸¥é‡è¿æ³•å¤±ä¿¡è®°å½•ï¼ˆä¿¡ç”¨ä¸­å›½ï¼‰",gov_procurement_ccgp:"æ”¿åºœé‡‡è´­ä¸¥é‡è¿æ³•å¤±ä¿¡è®°å½•ï¼ˆæ”¿åºœé‡‡è´­ç½‘ï¼‰",tax_compliance:"ä¾æ³•çº³ç¨Ž",commitment_letter:"æ‰¿è¯ºå‡½",property_certificate:"è¥ä¸šåŠžå…¬åœºæ‰€æˆ¿äº§è¯æ˜Ž",deposit_requirement:"ä¿è¯é‡‘è¦æ±‚",purchaser_blacklist:"é‡‡è´­äººé»‘åå•"},je=I(()=>{var e;const a=null==(e=S.value)?void 0:e.qualifications_data;return a&&"object"==typeof a&&Object.keys(a).length>0?(e=>{const a=[],l=[],t=[];let i=null;const s=["ISO","è®¤è¯","èµ„è´¨","è®¸å¯è¯","è¯ä¹¦","ç­‰ä¿","è‘—ä½œæƒ","ä¸“åˆ©","ä¿¡ç”¨"],n=["ä¸šç»©","é¡¹ç›®","æ¡ˆä¾‹","åˆåŒ"],c=["äººå‘˜","é¡¹ç›®ç»ç†","æŠ€æœ¯è´Ÿè´£äºº","å·¥ç¨‹å¸ˆ"],o=["è´¢åŠ¡","èµ„æœ¬","èµ„äº§","å®¡è®¡","é“¶è¡Œ","æ³¨å†Œèµ„é‡‘","è¥ä¸šé¢"];return Object.entries(e).forEach(([e,r])=>{const d="mandatory"===r.constraint_type,u=r.detail||"",_=r.summary||e;o.some(a=>e.includes(a))?(i||(i={description:[]}),i.description.push(`${_}: ${u}`)):n.some(a=>e.includes(a))?l.push({description:_,detail:u,required:d}):c.some(a=>e.includes(a))?t.push({position:_,detail:u,required:d}):(s.some(a=>e.includes(a)),a.push({name:_,note:u,required:d}))}),i&&i.description&&(i.description=i.description.join("ï¼›")),{certifications:a,performance:l,personnel:t,financial:i}})(a):{certifications:[],performance:[],personnel:[],financial:null}}),Ce=async()=>{if(me.value){p.value=!0;try{const a=(await Z.getProject(me.value)).data;if(S.value={id:a.project_id,name:a.project_name,number:a.project_number,company_id:a.company_id,company_name:a.company_name,status:a.status,created_at:a.created_at,updated_at:a.updated_at,authorized_person_name:a.authorized_person_name,authorized_person_id:a.authorized_person_id,tenderer:a.tenderer,agency:a.agency,bidding_method:a.bidding_method,bidding_location:a.bidding_location,bidding_time:a.bidding_time,budget_amount:a.budget_amount,business_contact_name:a.business_contact_name,business_contact_phone:a.business_contact_phone,tenderer_contact_person:a.tenderer_contact_person,tenderer_contact_method:a.tenderer_contact_method,agency_contact_person:a.agency_contact_person,agency_contact_method:a.agency_contact_method,step1_data:a.step1_data,...a},_e.name=S.value.name||"",_e.number=S.value.number||"",_e.company_id=S.value.company_id||null,_e.tenderer=S.value.tenderer||"",_e.agency=S.value.agency||"",_e.bidding_method=S.value.bidding_method||"",_e.bidding_location=S.value.bidding_location||"",_e.bidding_time=S.value.bidding_time||"",_e.budget_amount=S.value.budget_amount||null,_e.business_contact_name=S.value.business_contact_name||"",_e.business_contact_phone=S.value.business_contact_phone||"",_e.tenderer_contact_person=S.value.tenderer_contact_person||"",_e.tenderer_contact_method=S.value.tenderer_contact_method||"",_e.agency_contact_person=S.value.agency_contact_person||"",_e.agency_contact_method=S.value.agency_contact_method||"",_e.authorized_person_name=S.value.authorized_person_name||"",_e.authorized_person_id=S.value.authorized_person_id||"",a.step1_data)try{const e="string"==typeof a.step1_data?JSON.parse(a.step1_data):a.step1_data;if(e.chapters&&Array.isArray(e.chapters)){const a=e=>e.filter(e=>!(e.para_start_idx>=e.para_end_idx)&&(0!==e.word_count&&(e.children&&Array.isArray(e.children)&&(e.children=a(e.children)),!0)));ne.value=a(e.chapters),ne.value.length,e.chapters.length}const l=[];let t=1;if(a.tender_document_path&&l.push({id:t++,file_path:a.tender_document_path,file_url:a.tender_document_path,original_filename:"æ‹›æ ‡æ–‡æ¡£",document_type:"tender",uploaded_at:a.created_at}),e.response_file_path&&l.push({id:t++,file_path:e.response_file_path,file_url:e.response_file_path,original_filename:e.response_filename||"åº”ç­”æ–‡ä»¶æ¨¡æ¿",document_type:"response_template",file_size:e.response_file_size,uploaded_at:a.updated_at}),e.technical_file_path&&l.push({id:t++,file_path:e.technical_file_path,file_url:e.technical_file_path,original_filename:e.technical_filename||"æŠ€æœ¯éœ€æ±‚æ–‡ä»¶",document_type:"technical",file_size:e.technical_file_size,uploaded_at:a.updated_at}),e.business_response_file){const i="string"==typeof e.business_response_file?{file_path:e.business_response_file}:e.business_response_file;l.push({id:t++,file_path:i.file_path||i.file_url,file_url:i.file_url||i.file_path,original_filename:i.file_name||"å•†åŠ¡åº”ç­”å®Œæˆæ–‡ä»¶",document_type:"business_response",file_size:i.file_size,uploaded_at:a.updated_at})}if(e.technical_point_to_point_file){const i="string"==typeof e.technical_point_to_point_file?{file_path:e.technical_point_to_point_file}:e.technical_point_to_point_file;l.push({id:t++,file_path:i.file_path||i.file_url,file_url:i.file_url||i.file_path,original_filename:i.file_name||"æŠ€æœ¯ç‚¹å¯¹ç‚¹åº”ç­”æ–‡ä»¶",document_type:"technical_p2p",file_size:i.file_size,uploaded_at:a.updated_at})}if(e.technical_proposal_file){const i="string"==typeof e.technical_proposal_file?{file_path:e.technical_proposal_file}:e.technical_proposal_file;l.push({id:t++,file_path:i.file_path||i.file_url,file_url:i.file_url||i.file_path,original_filename:i.file_name||"æŠ€æœ¯æ–¹æ¡ˆæ–‡ä»¶",document_type:"technical_proposal",file_size:i.file_size,uploaded_at:a.updated_at})}se.value=l}catch(e){}"æ–°é¡¹ç›®"!==S.value.name&&"draft"!==S.value.status||(q.value=!0),S.value&&u.setCurrentProject(S.value)}catch(l){a.error("åŠ è½½é¡¹ç›®è¯¦æƒ…å¤±è´¥")}finally{p.value=!1}}},Ve=e=>e.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}),qe=e=>({active:"è¿›è¡Œä¸­",completed:"å·²å®Œæˆ",draft:"è‰ç¨¿"}[e]||e),Ie=()=>{Ce()},Ue=()=>{q.value=!0},Se=()=>{f.confirm("ç¡®å®šè¦å–æ¶ˆç¼–è¾‘å—ï¼Ÿæœªä¿å­˜çš„æ›´æ”¹å°†ä¸¢å¤±","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(()=>{Ce(),q.value=!1}).catch(()=>{})},Ae=async()=>{var e,l;m.value=!0;try{const e={project_name:_e.name,project_number:_e.number,company_id:_e.company_id,tenderer:_e.tenderer,agency:_e.agency,bidding_method:_e.bidding_method,bidding_location:_e.bidding_location,bidding_time:_e.bidding_time,budget_amount:_e.budget_amount,business_contact_name:_e.business_contact_name,business_contact_phone:_e.business_contact_phone,tenderer_contact_person:_e.tenderer_contact_person,tenderer_contact_method:_e.tenderer_contact_method,agency_contact_person:_e.agency_contact_person,agency_contact_method:_e.agency_contact_method,authorized_person_name:_e.authorized_person_name,authorized_person_id:_e.authorized_person_id,status:"active"};await Z.updateProject(me.value,e),a.success("ä¿å­˜æˆåŠŸ"),q.value=!1,ce.value=!1,await Ce()}catch(t){const i=(null==(l=null==(e=null==t?void 0:t.response)?void 0:e.data)?void 0:l.message)||(null==t?void 0:t.message)||"ä¿å­˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥é¡¹ç›®åç§°å’Œç¼–å·æ˜¯å¦ä¸Žå…¶ä»–é¡¹ç›®é‡å¤";a.error({message:i,duration:5e3,showClose:!0})}finally{m.value=!1}},Pe=async()=>{var e;if(!S.value)return;(null==(e=S.value.step1_data)?void 0:e.response_file_path)?(u.setCurrentProject(S.value),await d.push({name:"BusinessResponse"})):a.warning("æœªæ‰¾åˆ°åº”ç­”æ–‡ä»¶æ¨¡æ¿")},De=async()=>{var e;if(!S.value)return;(null==(e=S.value.step1_data)?void 0:e.technical_file_path)?(u.setCurrentProject(S.value),await d.push({name:"PointToPoint"})):a.warning("æœªæ‰¾åˆ°æŠ€æœ¯éœ€æ±‚æ–‡ä»¶")},Ne=async()=>{var e;if(!S.value)return;(null==(e=S.value.step1_data)?void 0:e.technical_file_path)?(u.setCurrentProject(S.value),await d.push({name:"TechProposal"})):a.warning("æœªæ‰¾åˆ°æŠ€æœ¯éœ€æ±‚æ–‡ä»¶")},Te=async e=>{await Ce(),"response"===e?(a.success("åº”ç­”æ–‡ä»¶å·²ä¿å­˜ï¼Œå¯ä»¥å¼€å§‹å•†åŠ¡åº”ç­”å¤„ç†"),Y.value="business"):"technical"===e&&(a.success("æŠ€æœ¯éœ€æ±‚å·²ä¿å­˜ï¼Œå¯ä»¥å¼€å§‹æŠ€æœ¯æ–¹æ¡ˆç¼–å†™"),Y.value="technical")},Ee=async()=>{if(me.value){te.value=!0;try{const e=await Z.extractBasicInfo(me.value);if(!e.success||!e.data)throw new Error(e.error||"AIæå–å¤±è´¥");{const l=e.data;Object.assign(_e,{name:l.project_name||_e.name,number:l.project_number||_e.number,tenderer:l.tender_party||_e.tenderer,agency:l.tender_agent||_e.agency,bidding_method:l.tender_method||_e.bidding_method,bidding_location:l.tender_location||_e.bidding_location,bidding_time:l.tender_deadline||_e.bidding_time,tenderer_contact_person:l.tenderer_contact_person||_e.tenderer_contact_person,tenderer_contact_method:l.tenderer_contact_method||_e.tenderer_contact_method,agency_contact_person:l.agency_contact_person||_e.agency_contact_person,agency_contact_method:l.agency_contact_method||_e.agency_contact_method}),S.value&&Object.assign(S.value,{name:l.project_name||S.value.name,number:l.project_number||S.value.number,tenderer:l.tender_party||S.value.tenderer,agency:l.tender_agent||S.value.agency,bidding_method:l.tender_method||S.value.bidding_method,bidding_location:l.tender_location||S.value.bidding_location,bidding_time:l.tender_deadline||S.value.bidding_time,tenderer_contact_person:l.tenderer_contact_person||S.value.tenderer_contact_person,tenderer_contact_method:l.tenderer_contact_method||S.value.tenderer_contact_method,agency_contact_person:l.agency_contact_person||S.value.agency_contact_person,agency_contact_method:l.agency_contact_method||S.value.agency_contact_method}),q.value||(q.value=!0),ce.value=!0,a.success({message:"AIæå–åŸºæœ¬ä¿¡æ¯æˆåŠŸï¼Œå·²è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œè¯·æ£€æŸ¥ä¿¡æ¯åŽæ‰‹åŠ¨ä¿å­˜",duration:5e3,showClose:!0}),setTimeout(()=>{const e=document.querySelector(".info-section");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},300)}}catch(e){a.error(`AIæå–å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{te.value=!1}}else a.warning("è¯·å…ˆä¸Šä¼ å¹¶è§£æžæ‹›æ ‡æ–‡æ¡£")},Ke=async()=>{if(me.value){ie.value=!0;try{const e=await Z.extractQualifications(me.value);if(!e.success)throw new Error(e.error||"AIæå–å¤±è´¥");a.success("AIæå–èµ„æ ¼è¦æ±‚æˆåŠŸï¼Œæ­£åœ¨åˆ·æ–°æ•°æ®..."),await Ce(),a.success("èµ„æ ¼è¦æ±‚å·²æ›´æ–°")}catch(e){a.error(`AIæå–å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{ie.value=!1}}else a.warning("è¯·å…ˆä¸Šä¼ å¹¶è§£æžæ‹›æ ‡æ–‡æ¡£")},$e=(e,a)=>{de.value=e,ue.value=a,re.value=!0};return L(()=>_e.company_id,e=>{if(e&&le.value.length>0){const l=le.value.find(a=>a.company_id===e);l&&(_e.authorized_person_name=l.authorized_person_name||"",_e.authorized_person_id=l.authorized_person_id||"",S.value&&(S.value.authorized_person_name=l.authorized_person_name||"",S.value.authorized_person_id=l.authorized_person_id||""),l.authorized_person_name&&a.success(`å·²è‡ªåŠ¨å¡«å……è¢«æŽˆæƒäººä¿¡æ¯: ${l.authorized_person_name}`))}}),L(()=>r.params.id,()=>{Ce()}),B(()=>{(async()=>{try{const e=await ee.getCompanies();le.value=e.data||[]}catch(e){}})(),Ce()}),(a,t)=>{const r=e,d=i,u=l,f=b,I=c,$=V,L=y,B=n,R=x,M=g,J=j,Z=k,ee=h,ae=o,be=s,Ga=C,Qa=z,Xa=w,Ya=_,Za=v;return K(),U("div",Oe,[T(F(Q),{title:fe.value,"show-back":!0},{actions:E(()=>[q.value?(K(),U(W,{key:1},[T(r,{onClick:Se},{default:E(()=>[...t[19]||(t[19]=[A("i",{class:"bi bi-x-lg"},null,-1),N(" å–æ¶ˆ ",-1)])]),_:1}),T(r,{type:"primary",loading:m.value,onClick:Ae},{default:E(()=>[...t[20]||(t[20]=[A("i",{class:"bi bi-check-lg"},null,-1),N(" ä¿å­˜ ",-1)])]),_:1},8,["loading"])],64)):(K(),U(W,{key:0},[T(r,{onClick:Ie},{default:E(()=>[...t[17]||(t[17]=[A("i",{class:"bi bi-arrow-clockwise"},null,-1),N(" åˆ·æ–° ",-1)])]),_:1}),T(r,{type:"primary",onClick:Ue},{default:E(()=>[...t[18]||(t[18]=[A("i",{class:"bi bi-pencil"},null,-1),N(" ç¼–è¾‘é¡¹ç›® ",-1)])]),_:1})],64))]),_:1},8,["title"]),p.value?(K(),O(F(G),{key:0,text:"åŠ è½½é¡¹ç›®è¯¦æƒ…..."})):S.value?(K(),U(W,{key:1},[T(Le,{"project-id":me.value,"company-id":S.value.company_id,"project-detail":S.value,onSuccess:Te,onRefresh:Ce,onPreview:$e},null,8,["project-id","company-id","project-detail"]),T(ae,{class:"tabs-card",shadow:"never"},{default:E(()=>[T(Za,{modelValue:Y.value,"onUpdate:modelValue":t[15]||(t[15]=e=>Y.value=e),class:"detail-tabs"},{default:E(()=>[T(ee,{name:"basic"},{label:E(()=>[...t[21]||(t[21]=[A("span",{class:"tab-label"},[A("i",{class:"bi bi-info-circle"}),N(" åŸºæœ¬ä¿¡æ¯ ")],-1)])]),default:E(()=>{return[A("div",Be,[A("section",Fe,[A("div",Re,[t[22]||(t[22]=A("h3",null,[A("i",{class:"bi bi-folder"}),N(" é¡¹ç›®åŸºæœ¬ä¿¡æ¯")],-1)),T(d,{type:(e=S.value.status,{active:"success",completed:"primary",draft:"info"}[e]||"info")},{default:E(()=>[N(D(qe(S.value.status)),1)]),_:1},8,["type"])]),q.value?(K(),O(R,{key:0,model:_e,rules:pe,"label-width":"120px",class:"edit-form"},{default:E(()=>[T(B,{gutter:20},{default:E(()=>[T(I,{span:24},{default:E(()=>[T(f,{label:"é¡¹ç›®åç§°",prop:"name"},{default:E(()=>[T(u,{modelValue:_e.name,"onUpdate:modelValue":t[0]||(t[0]=e=>_e.name=e),placeholder:"è¯·è¾“å…¥é¡¹ç›®åç§°"},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"é¡¹ç›®ç¼–å·",prop:"number"},{default:E(()=>[T(u,{modelValue:_e.number,"onUpdate:modelValue":t[1]||(t[1]=e=>_e.number=e),placeholder:"è¯·è¾“å…¥é¡¹ç›®ç¼–å·"},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"å…¬å¸åç§°",prop:"company_id"},{default:E(()=>[T(L,{modelValue:_e.company_id,"onUpdate:modelValue":t[2]||(t[2]=e=>_e.company_id=e),placeholder:"è¯·é€‰æ‹©å…¬å¸",style:{width:"100%"}},{default:E(()=>[(K(!0),U(W,null,H(le.value,e=>(K(),O($,{key:e.company_id,label:e.name,value:e.company_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"è¢«æŽˆæƒäºº"},{default:E(()=>[T(u,{modelValue:_e.authorized_person_name,"onUpdate:modelValue":t[3]||(t[3]=e=>_e.authorized_person_name=e),placeholder:"è¯·è¾“å…¥è¢«æŽˆæƒäººå§“å"},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"æŽˆæƒäººèº«ä»½è¯"},{default:E(()=>[T(u,{modelValue:_e.authorized_person_id,"onUpdate:modelValue":t[4]||(t[4]=e=>_e.authorized_person_id=e),placeholder:"è¯·è¾“å…¥èº«ä»½è¯å·"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):(K(),O(J,{key:1,column:2,border:"",size:"large"},{default:E(()=>[T(M,{label:"é¡¹ç›®åç§°",span:2},{default:E(()=>[A("strong",null,D(S.value.name),1)]),_:1}),T(M,{label:"é¡¹ç›®ç¼–å·"},{default:E(()=>[N(D(S.value.number||"-"),1)]),_:1}),T(M,{label:"å…¬å¸åç§°"},{default:E(()=>[N(D(S.value.company_name),1)]),_:1}),T(M,{label:"åˆ›å»ºæ—¶é—´"},{default:E(()=>[N(D(S.value.created_at),1)]),_:1}),T(M,{label:"æœ€åŽæ›´æ–°"},{default:E(()=>[N(D(S.value.updated_at||"-"),1)]),_:1}),T(M,{label:"è¢«æŽˆæƒäºº"},{default:E(()=>[N(D(S.value.authorized_person_name||"-"),1)]),_:1}),T(M,{label:"æŽˆæƒäººèº«ä»½è¯"},{default:E(()=>[N(D(S.value.authorized_person_id||"-"),1)]),_:1})]),_:1}))]),A("section",Me,[A("div",We,[A("h3",null,[t[24]||(t[24]=A("i",{class:"bi bi-megaphone"},null,-1)),t[25]||(t[25]=N(" æ‹›æ ‡ä¿¡æ¯ ",-1)),ce.value&&q.value?(K(),O(d,{key:0,type:"warning",size:"small",style:{"margin-left":"10px"}},{default:E(()=>[...t[23]||(t[23]=[A("i",{class:"bi bi-exclamation-triangle-fill"},null,-1),N(" æœ‰æœªä¿å­˜çš„æ›´æ”¹ ",-1)])]),_:1})):P("",!0)]),T(r,{size:"small",type:"primary",loading:te.value,disabled:!me.value||te.value,onClick:Ee},{default:E(()=>[te.value?P("",!0):(K(),U("i",He)),N(" "+D(te.value?"AIæå–ä¸­...":"AIæå–åŸºæœ¬ä¿¡æ¯"),1)]),_:1},8,["loading","disabled"])]),q.value?(K(),O(R,{key:0,model:_e,"label-width":"120px",class:"edit-form"},{default:E(()=>[T(B,{gutter:20},{default:E(()=>[T(I,{span:12},{default:E(()=>[T(f,{label:"æ‹›æ ‡å•ä½"},{default:E(()=>[T(u,{modelValue:_e.tenderer,"onUpdate:modelValue":t[5]||(t[5]=e=>_e.tenderer=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡å•ä½"},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"æ‹›æ ‡ä»£ç†"},{default:E(()=>[T(u,{modelValue:_e.agency,"onUpdate:modelValue":t[6]||(t[6]=e=>_e.agency=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡ä»£ç†"},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"æ‹›æ ‡æ–¹å¼"},{default:E(()=>[T(u,{modelValue:_e.bidding_method,"onUpdate:modelValue":t[7]||(t[7]=e=>_e.bidding_method=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡æ–¹å¼"},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"å¼€æ ‡åœ°ç‚¹"},{default:E(()=>[T(u,{modelValue:_e.bidding_location,"onUpdate:modelValue":t[8]||(t[8]=e=>_e.bidding_location=e),placeholder:"è¯·è¾“å…¥å¼€æ ‡åœ°ç‚¹"},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"å¼€æ ‡æ—¶é—´"},{default:E(()=>[T(u,{modelValue:_e.bidding_time,"onUpdate:modelValue":t[9]||(t[9]=e=>_e.bidding_time=e),placeholder:"è¯·è¾“å…¥å¼€æ ‡æ—¶é—´"},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"é¢„ç®—é‡‘é¢"},{default:E(()=>[T(Z,{modelValue:_e.budget_amount,"onUpdate:modelValue":t[10]||(t[10]=e=>_e.budget_amount=e),controls:!1,precision:2,placeholder:"è¯·è¾“å…¥é¢„ç®—é‡‘é¢",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"æ‹›æ ‡æ–¹è”ç³»äºº"},{default:E(()=>[T(u,{modelValue:_e.tenderer_contact_person,"onUpdate:modelValue":t[11]||(t[11]=e=>_e.tenderer_contact_person=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡æ–¹è”ç³»äºº"},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"æ‹›æ ‡æ–¹è”ç³»ç”µè¯"},{default:E(()=>[T(u,{modelValue:_e.tenderer_contact_method,"onUpdate:modelValue":t[12]||(t[12]=e=>_e.tenderer_contact_method=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡æ–¹è”ç³»ç”µè¯"},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"ä»£ç†æœºæž„è”ç³»äºº"},{default:E(()=>[T(u,{modelValue:_e.agency_contact_person,"onUpdate:modelValue":t[13]||(t[13]=e=>_e.agency_contact_person=e),placeholder:"è¯·è¾“å…¥ä»£ç†æœºæž„è”ç³»äºº"},null,8,["modelValue"])]),_:1})]),_:1}),T(I,{span:12},{default:E(()=>[T(f,{label:"ä»£ç†æœºæž„è”ç³»ç”µè¯"},{default:E(()=>[T(u,{modelValue:_e.agency_contact_method,"onUpdate:modelValue":t[14]||(t[14]=e=>_e.agency_contact_method=e),placeholder:"è¯·è¾“å…¥ä»£ç†æœºæž„è”ç³»ç”µè¯"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):(K(),O(J,{key:1,column:2,border:"",size:"large"},{default:E(()=>[T(M,{label:"æ‹›æ ‡å•ä½"},{default:E(()=>[N(D(S.value.tenderer||"-"),1)]),_:1}),T(M,{label:"æ‹›æ ‡ä»£ç†"},{default:E(()=>[N(D(S.value.agency||"-"),1)]),_:1}),T(M,{label:"æ‹›æ ‡æ–¹å¼"},{default:E(()=>[N(D(S.value.bidding_method||"-"),1)]),_:1}),T(M,{label:"å¼€æ ‡åœ°ç‚¹"},{default:E(()=>[N(D(S.value.bidding_location||"-"),1)]),_:1}),T(M,{label:"å¼€æ ‡æ—¶é—´"},{default:E(()=>[N(D(S.value.bidding_time||"-"),1)]),_:1}),T(M,{label:"é¢„ç®—é‡‘é¢"},{default:E(()=>[S.value.budget_amount?(K(),U("span",Je," Â¥ "+D(Ve(S.value.budget_amount)),1)):(K(),U("span",Ge,"-"))]),_:1}),T(M,{label:"æ‹›æ ‡æ–¹è”ç³»äºº"},{default:E(()=>[N(D(S.value.tenderer_contact_person||"-"),1)]),_:1}),T(M,{label:"æ‹›æ ‡æ–¹è”ç³»ç”µè¯"},{default:E(()=>[N(D(S.value.tenderer_contact_method||"-"),1)]),_:1}),T(M,{label:"ä»£ç†æœºæž„è”ç³»äºº"},{default:E(()=>[N(D(S.value.agency_contact_person||"-"),1)]),_:1}),T(M,{label:"ä»£ç†æœºæž„è”ç³»ç”µè¯"},{default:E(()=>[N(D(S.value.agency_contact_method||"-"),1)]),_:1})]),_:1}))])])];var e}),_:1}),T(ee,{name:"qualifications"},{label:E(()=>[...t[26]||(t[26]=[A("span",{class:"tab-label"},[A("i",{class:"bi bi-award"}),N(" èµ„æ ¼è¦æ±‚ ")],-1)])]),default:E(()=>[A("div",Qe,[A("section",Xe,[A("div",Ye,[t[27]||(t[27]=A("h3",null,[A("i",{class:"bi bi-patch-check"}),N(" èµ„è´¨è¦æ±‚")],-1)),T(r,{size:"small",type:"primary",loading:ie.value,disabled:!me.value||ie.value,onClick:Ke},{default:E(()=>[ie.value?P("",!0):(K(),U("i",Ze)),N(" "+D(ie.value?"AIæå–ä¸­...":"AIæå–èµ„æ ¼è¦æ±‚"),1)]),_:1},8,["loading","disabled"])]),je.value.certifications.length>0?(K(),U("div",ea,[(K(!0),U(W,null,H(je.value.certifications,(e,a)=>(K(),O(ae,{key:a,shadow:"never",class:"requirement-item"},{default:E(()=>{return[A("div",aa,[t[30]||(t[30]=A("div",{class:"requirement-icon"},[A("i",{class:"bi bi-shield-check"})],-1)),A("div",la,[A("h4",null,D((a=e.name,xe[a]?xe[a]:a)),1),e.level?(K(),U("p",ta,"ç­‰çº§è¦æ±‚: "+D(e.level),1)):P("",!0),e.note?(K(),U("p",ia,D(e.note),1)):P("",!0)]),A("div",sa,[e.required?(K(),O(d,{key:0,type:"danger",size:"small"},{default:E(()=>[...t[28]||(t[28]=[N(" å¿…éœ€ ",-1)])]),_:1})):(K(),O(d,{key:1,type:"info",size:"small"},{default:E(()=>[...t[29]||(t[29]=[N("å¯é€‰",-1)])]),_:1}))])])];var a}),_:2},1024))),128))])):(K(),O(be,{key:1,description:"æš‚æ— èµ„è´¨è¦æ±‚","image-size":80}))]),A("section",na,[t[34]||(t[34]=A("div",{class:"section-header"},[A("h3",null,[A("i",{class:"bi bi-graph-up-arrow"}),N(" ä¸šç»©è¦æ±‚")])],-1)),je.value.performance.length>0?(K(),U("div",ca,[(K(!0),U(W,null,H(je.value.performance,(e,a)=>(K(),O(ae,{key:a,shadow:"never",class:"requirement-item"},{default:E(()=>[A("div",oa,[t[33]||(t[33]=A("div",{class:"requirement-icon"},[A("i",{class:"bi bi-briefcase"})],-1)),A("div",ra,[A("h4",null,D(e.description),1),e.amount?(K(),U("p",da,"é‡‘é¢è¦æ±‚: â‰¥ Â¥"+D(Ve(e.amount)),1)):P("",!0),e.time_range?(K(),U("p",ua,"æ—¶é—´èŒƒå›´: "+D(e.time_range),1)):P("",!0),e.count?(K(),U("p",_a,"æ•°é‡è¦æ±‚: "+D(e.count)+" ä¸ª",1)):P("",!0)]),A("div",pa,[e.required?(K(),O(d,{key:0,type:"danger",size:"small"},{default:E(()=>[...t[31]||(t[31]=[N(" å¿…éœ€ ",-1)])]),_:1})):(K(),O(d,{key:1,type:"info",size:"small"},{default:E(()=>[...t[32]||(t[32]=[N("å¯é€‰",-1)])]),_:1}))])])]),_:2},1024))),128))])):(K(),O(be,{key:1,description:"æš‚æ— ä¸šç»©è¦æ±‚","image-size":80}))]),A("section",ma,[t[38]||(t[38]=A("div",{class:"section-header"},[A("h3",null,[A("i",{class:"bi bi-people"}),N(" äººå‘˜é…ç½®è¦æ±‚")])],-1)),je.value.personnel.length>0?(K(),U("div",fa,[(K(!0),U(W,null,H(je.value.personnel,(e,a)=>(K(),O(ae,{key:a,shadow:"never",class:"requirement-item"},{default:E(()=>[A("div",va,[t[37]||(t[37]=A("div",{class:"requirement-icon"},[A("i",{class:"bi bi-person-badge"})],-1)),A("div",ha,[A("h4",null,D(e.position),1),e.count?(K(),U("p",ba,"äººæ•°: "+D(e.count)+" äºº",1)):P("",!0),e.qualification?(K(),U("p",ya,"èµ„æ ¼è¦æ±‚: "+D(e.qualification),1)):P("",!0),e.experience?(K(),U("p",ga,"ç»éªŒè¦æ±‚: "+D(e.experience),1)):P("",!0)]),A("div",ka,[e.required?(K(),O(d,{key:0,type:"danger",size:"small"},{default:E(()=>[...t[35]||(t[35]=[N(" å¿…éœ€ ",-1)])]),_:1})):(K(),O(d,{key:1,type:"info",size:"small"},{default:E(()=>[...t[36]||(t[36]=[N("å¯é€‰",-1)])]),_:1}))])])]),_:2},1024))),128))])):(K(),O(be,{key:1,description:"æš‚æ— äººå‘˜é…ç½®è¦æ±‚","image-size":80}))]),A("section",za,[t[41]||(t[41]=A("div",{class:"section-header"},[A("h3",null,[A("i",{class:"bi bi-cash-stack"}),N(" è´¢åŠ¡è¦æ±‚")])],-1)),je.value.financial?(K(),U("div",wa,[T(ae,{shadow:"never",class:"requirement-item"},{default:E(()=>[A("div",xa,[t[40]||(t[40]=A("div",{class:"requirement-icon"},[A("i",{class:"bi bi-cash-stack"})],-1)),A("div",ja,[t[39]||(t[39]=A("h4",null,"è´¢åŠ¡ç›¸å…³è¦æ±‚",-1)),A("p",null,D(je.value.financial.description),1)])])]),_:1})])):(K(),O(be,{key:1,description:"æš‚æ— è´¢åŠ¡è¦æ±‚","image-size":80}))])])]),_:1}),T(ee,{name:"business"},{label:E(()=>{var e;return[A("span",Ca,[t[42]||(t[42]=A("i",{class:"bi bi-briefcase"},null,-1)),t[43]||(t[43]=N(" å•†åŠ¡åº”ç­” ",-1)),(null==(e=S.value.step1_data)?void 0:e.business_response_file)?(K(),O(Ga,{key:0,"is-dot":"",type:"success"})):P("",!0)])]}),default:E(()=>[A("div",Va,[A("section",qa,[A("div",Ia,[t[45]||(t[45]=A("h3",null,[A("i",{class:"bi bi-file-earmark-text"}),N(" åº”ç­”æ–‡ä»¶æ¨¡æ¿")],-1)),T(d,{type:"info",size:"small"},{default:E(()=>[...t[44]||(t[44]=[N("AI è‡ªåŠ¨æå–",-1)])]),_:1})]),ye.value?(K(),O(oe,{key:0,"file-url":ye.value.fileUrl,"file-name":ye.value.fileName,"file-size":ye.value.fileSize,"show-actions":!0,onPreview:$e},null,8,["file-url","file-name","file-size"])):(K(),O(be,{key:1,description:"æš‚æœªæå–åˆ°åº”ç­”æ–‡ä»¶æ¨¡æ¿","image-size":80},{extra:E(()=>[T(Qa,{type:"info",size:"small"},{default:E(()=>[...t[46]||(t[46]=[N(" è¯·å…ˆä¸Šä¼ æ‹›æ ‡æ–‡ä»¶å¹¶è¿›è¡Œ AI è§£æž ",-1)])]),_:1})]),_:1}))]),T(Xa),A("section",Ua,[A("div",Sa,[t[49]||(t[49]=A("h3",null,[A("i",{class:"bi bi-file-earmark-check"}),N(" å•†åŠ¡åº”ç­”å®Œæˆæ–‡ä»¶")],-1)),ge.value?(K(),O(d,{key:0,type:"success",size:"small"},{default:E(()=>[...t[47]||(t[47]=[A("i",{class:"bi bi-check-circle-fill"},null,-1),N(" å·²ç”Ÿæˆ ",-1)])]),_:1})):(K(),O(d,{key:1,type:"info",size:"small"},{default:E(()=>[...t[48]||(t[48]=[N("æœªç”Ÿæˆ",-1)])]),_:1}))]),ge.value?(K(),O(oe,{key:0,"file-url":ge.value.fileUrl,"file-name":ge.value.fileName,"file-size":ge.value.fileSize,"show-actions":!0,type:"success",onPreview:$e},null,8,["file-url","file-name","file-size"])):(K(),O(be,{key:1,description:"æš‚æœªç”Ÿæˆå•†åŠ¡åº”ç­”æ–‡ä»¶","image-size":80},{extra:E(()=>[T(Qa,{type:"info",size:"small"},{default:E(()=>[...t[50]||(t[50]=[N(" ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹ç”Ÿæˆå•†åŠ¡åº”ç­” ",-1)])]),_:1})]),_:1}))]),A("div",Aa,[T(r,{type:"primary",size:"large",disabled:!ye.value,onClick:Pe},{default:E(()=>[t[51]||(t[51]=A("i",{class:"bi bi-rocket-takeoff"},null,-1)),N(" "+D(ge.value?"é‡æ–°ç”Ÿæˆ":"å¼€å§‹")+"å•†åŠ¡åº”ç­” ",1)]),_:1},8,["disabled"]),ye.value?P("",!0):(K(),O(Qa,{key:0,type:"warning",size:"small"},{default:E(()=>[...t[52]||(t[52]=[A("i",{class:"bi bi-exclamation-triangle"},null,-1),N(" è¯·å…ˆä¸Šä¼ æ‹›æ ‡æ–‡ä»¶å¹¶è¿›è¡Œ AI è§£æž ",-1)])]),_:1}))])])]),_:1}),T(ee,{name:"documents"},{label:E(()=>[A("span",Pa,[t[53]||(t[53]=A("i",{class:"bi bi-files"},null,-1)),t[54]||(t[54]=N(" æ–‡æ¡£ä¸Žç« èŠ‚ ",-1)),se.value.length>0||ne.value.length>0?(K(),O(Ga,{key:0,value:se.value.length,type:"success"},null,8,["value"])):P("",!0)])]),default:E(()=>[A("div",Da,[A("section",Na,[A("div",Ta,[t[55]||(t[55]=A("h3",null,[A("i",{class:"bi bi-file-earmark-text"}),N(" é¡¹ç›®æ–‡æ¡£")],-1)),se.value.length>0?(K(),O(d,{key:0,type:"success",size:"small"},{default:E(()=>[N(" å…± "+D(se.value.length)+" ä¸ªæ–‡ä»¶ ",1)]),_:1})):P("",!0)]),se.value.length>0?(K(),U("div",Ea,[(K(!0),U(W,null,H(se.value,e=>(K(),O(oe,{key:e.id,"file-url":e.file_url||e.file_path,"file-name":e.original_filename,"file-size":e.file_size,"upload-time":e.uploaded_at,"show-actions":!0,onPreview:$e},null,8,["file-url","file-name","file-size","upload-time"]))),128))])):(K(),O(be,{key:1,description:"æš‚æ— æ–‡æ¡£","image-size":80},{extra:E(()=>[T(Qa,{type:"info",size:"small"},{default:E(()=>[...t[56]||(t[56]=[N(" è¯·åœ¨é¡µé¢é¡¶éƒ¨ä¸Šä¼ æ‹›æ ‡æ–‡æ¡£ ",-1)])]),_:1})]),_:1}))]),ne.value.length>0?(K(),O(Xa,{key:0})):P("",!0),ne.value.length>0?(K(),U("section",Ka,[A("div",$a,[t[57]||(t[57]=A("h3",null,[A("i",{class:"bi bi-list-nested"}),N(" å·²è¯†åˆ«ç« èŠ‚")],-1)),T(d,{type:"success",size:"small"},{default:E(()=>[N(" å…± "+D(he.value)+" ä¸ªç« èŠ‚ ",1)]),_:1})]),T(ve,{chapters:ne.value,"show-checkbox":!1,"show-search":!0},null,8,["chapters"])])):P("",!0)])]),_:1}),T(ee,{name:"technical"},{label:E(()=>{var e,a;return[A("span",La,[t[58]||(t[58]=A("i",{class:"bi bi-cpu"},null,-1)),t[59]||(t[59]=N(" æŠ€æœ¯éœ€æ±‚ ",-1)),(null==(e=S.value.step1_data)?void 0:e.technical_point_to_point_file)||(null==(a=S.value.step1_data)?void 0:a.technical_proposal_file)?(K(),O(Ga,{key:0,"is-dot":"",type:"success"})):P("",!0)])]}),default:E(()=>[A("div",Oa,[A("section",Ba,[A("div",Fa,[t[61]||(t[61]=A("h3",null,[A("i",{class:"bi bi-file-earmark-text"}),N(" æŠ€æœ¯éœ€æ±‚æ–‡ä»¶")],-1)),T(d,{type:"info",size:"small"},{default:E(()=>[...t[60]||(t[60]=[N("AI è‡ªåŠ¨æå–",-1)])]),_:1})]),ke.value?(K(),O(oe,{key:0,"file-url":ke.value.fileUrl,"file-name":ke.value.fileName,"file-size":ke.value.fileSize,"show-actions":!0,onPreview:$e},null,8,["file-url","file-name","file-size"])):(K(),O(be,{key:1,description:"æš‚æœªæå–åˆ°æŠ€æœ¯éœ€æ±‚æ–‡ä»¶","image-size":80}))]),T(Xa),A("section",Ra,[A("div",Ma,[t[64]||(t[64]=A("h3",null,[A("i",{class:"bi bi-arrow-left-right"}),N(" ç‚¹å¯¹ç‚¹åº”ç­”å®Œæˆæ–‡ä»¶")],-1)),ze.value?(K(),O(d,{key:0,type:"success",size:"small"},{default:E(()=>[...t[62]||(t[62]=[A("i",{class:"bi bi-check-circle-fill"},null,-1),N(" å·²ç”Ÿæˆ ",-1)])]),_:1})):(K(),O(d,{key:1,type:"info",size:"small"},{default:E(()=>[...t[63]||(t[63]=[N("æœªç”Ÿæˆ",-1)])]),_:1}))]),ze.value?(K(),O(oe,{key:0,"file-url":ze.value.fileUrl,"file-name":ze.value.fileName,"file-size":ze.value.fileSize,"show-actions":!0,type:"success",onPreview:$e},null,8,["file-url","file-name","file-size"])):(K(),O(be,{key:1,description:"æš‚æœªç”Ÿæˆç‚¹å¯¹ç‚¹åº”ç­”æ–‡ä»¶","image-size":80}))]),T(Xa),A("section",Wa,[A("div",Ha,[t[67]||(t[67]=A("h3",null,[A("i",{class:"bi bi-file-code"}),N(" æŠ€æœ¯æ–¹æ¡ˆå®Œæˆæ–‡ä»¶")],-1)),we.value?(K(),O(d,{key:0,type:"success",size:"small"},{default:E(()=>[...t[65]||(t[65]=[A("i",{class:"bi bi-check-circle-fill"},null,-1),N(" å·²ç”Ÿæˆ ",-1)])]),_:1})):(K(),O(d,{key:1,type:"info",size:"small"},{default:E(()=>[...t[66]||(t[66]=[N("æœªç”Ÿæˆ",-1)])]),_:1}))]),we.value?(K(),O(oe,{key:0,"file-url":we.value.fileUrl,"file-name":we.value.fileName,"file-size":we.value.fileSize,"show-actions":!0,type:"success",onPreview:$e},null,8,["file-url","file-name","file-size"])):(K(),O(be,{key:1,description:"æš‚æœªç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆæ–‡ä»¶","image-size":80}))]),A("div",Ja,[T(Ya,{size:16},{default:E(()=>[T(r,{type:"primary",size:"large",disabled:!ke.value,onClick:De},{default:E(()=>[t[68]||(t[68]=A("i",{class:"bi bi-arrow-left-right"},null,-1)),N(" "+D(ze.value?"é‡æ–°ç”Ÿæˆ":"å¼€å§‹")+"ç‚¹å¯¹ç‚¹åº”ç­” ",1)]),_:1},8,["disabled"]),T(r,{type:"primary",size:"large",disabled:!ke.value,onClick:Ne},{default:E(()=>[t[69]||(t[69]=A("i",{class:"bi bi-file-code"},null,-1)),N(" "+D(we.value?"é‡æ–°ç”Ÿæˆ":"å¼€å§‹")+"æŠ€æœ¯æ–¹æ¡ˆç¼–å†™ ",1)]),_:1},8,["disabled"])]),_:1}),ke.value?P("",!0):(K(),O(Qa,{key:0,type:"warning",size:"small"},{default:E(()=>[...t[70]||(t[70]=[A("i",{class:"bi bi-exclamation-triangle"},null,-1),N(" è¯·å…ˆä¸Šä¼ æ‹›æ ‡æ–‡ä»¶å¹¶è¿›è¡Œ AI è§£æž ",-1)])]),_:1}))])])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):(K(),O(be,{key:2,description:"é¡¹ç›®ä¸å­˜åœ¨æˆ–åŠ è½½å¤±è´¥"})),T(F(X),{modelValue:re.value,"onUpdate:modelValue":t[16]||(t[16]=e=>re.value=e),"file-url":de.value,"file-name":ue.value},null,8,["modelValue","file-url","file-name"])])}}}),[["__scopeId","data-v-d161f48c"]]);export{Ga as default};
