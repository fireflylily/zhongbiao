import{G as e,D as a,e as l,p as t,n as s,M as u,C as n,o as i,V as d,a as o,d as c,h as r,Y as v,z as m,L as p,j as f}from"./vendor-element-plus-CEQaQHNc.js";import{dB as _,d2 as y,eW as h,ew as g,er as b}from"./vendor-other-CxXkF0Pk.js";import{_ as x}from"./index.js";import{u as j}from"./useProjectDocuments-DkMW_Nbe.js";import{t as z}from"./tender-ZYcn_VXM.js";import"./vendor-dayjs-CeOjnJlt.js";/* empty css                                                                          */import{D as V}from"./DocumentPreview-BsCsR4le.js";import"./vendor-editor-CGvuleas.js";import{d as w,r as F,a as k,b as C,P,M,b8 as D,O as B,c as G,L as U,Q as T,N as I,F as L,V as O,I as A,R as H,H as N,f as E}from"./vendor-vue-DnBj6vzG.js";import{c as K}from"./company-DX6fQVXW.js";import"./vendor-axios-BG7aBJwU.js";import"./vendor-echarts-C00rBISf.js";import"./project-DRKLdxdD.js";/* empty css                                                                        */const Q={class:"outline-comparison-wrapper"},R={class:"main-content"},S={style:{color:"var(--text-secondary)","font-size":"12px","margin-left":"8px"}},W={class:"document-item"},Y={class:"document-header"},q={class:"document-info"},J={class:"document-item"},X={class:"document-header"},Z={class:"document-info"},$={class:"card-header"},ee={class:"card-title"},ae={class:"card-header"},le={class:"card-title"},te={class:"action-section"},se={class:"card-header"},ue={class:"result-section"},ne={class:"result-title"},ie={class:"outline-content"},de={key:0,class:"outline-text"},oe={class:"result-meta"},ce={class:"result-section"},re={class:"result-title"},ve={class:"outline-content"},me={key:0,class:"outline-text"},pe={class:"result-meta"},fe=x(w({__name:"OutlineComparison",setup(x){const{projects:w,currentDocuments:fe,loadProjects:_e,handleProjectChange:ye}=j(),he=w,ge=F([]),be=F(null),xe=F(null),je=F(!1),ze=F(!1),Ve=F(!1),we=F(""),Fe=F(""),ke=F("正在加载提示词配置..."),Ce=F(!0),Pe=F(""),Me=F(""),De=F(!1),Be=F(!1),Ge=F(""),Ue=F(""),Te=F(""),Ie=F(""),Le=k(()=>be.value&&xe.value&&Pe.value&&Me.value);function Oe(e){if(0===e)return"未知大小";const a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+["B","KB","MB","GB"][a]}async function Ae(e){if(je.value=!1,ze.value=!1,!e)return xe.value=null,void(await ye(null));await ye(e,{onClear:()=>{je.value=!1,ze.value=!1},onDocumentsLoaded:e=>{e.tenderFile&&(je.value=!0),e.technicalFile&&(ze.value=!0)}});const a=he.value.find(a=>a.id===e);a&&a.company_id&&(xe.value=a.company_id)}async function He(){if(Le.value){De.value=!0,Be.value=!1;try{f.info("大纲生成功能开发中..."),setTimeout(()=>{Ge.value="第一章 项目概述\n1.1 项目背景\n1.2 项目目标\n第二章 技术方案\n2.1 系统架构\n2.2 技术选型",Ue.value="第一章 项目介绍\n1.1 背景分析\n1.2 目标设定\n第二章 解决方案\n2.1 架构设计\n2.2 技术栈",Te.value="2.3秒",Ie.value="3.1秒",Be.value=!0,De.value=!1},2e3)}catch(e){f.error("生成失败"),De.value=!1}}else f.warning("请完整填写所有配置项")}function Ne(){be.value=null,xe.value=null,Pe.value="",Me.value="",Be.value=!1,Ge.value="",Ue.value="",Te.value="",Ie.value=""}function Ee(){fe.value.technicalFile?(we.value=fe.value.technicalFile.url,Fe.value=fe.value.technicalFile.name,Ve.value=!0):f.warning("技术文件不存在")}return C(()=>{!async function(){await _e()}(),async function(){try{const e=await K.getCompanies();e.success&&e.data&&(ge.value=e.data)}catch(e){f.error("加载公司列表失败")}}(),async function(){Ce.value=!0;try{const e=await z.getOutlineGenerationPrompts();if(e.success&&e.data){const a=e.data.prompts||e.data;ke.value=a.generate_outline||"未找到提示词配置"}else ke.value="未找到提示词配置"}catch(e){f.error("加载提示词配置失败"),ke.value="加载失败，请刷新页面重试"}finally{Ce.value=!1}}()}),(f,x)=>{const j=s,z=t,w=l,F=a,k=e,C=u,K=n,_e=i,ye=d,Ke=o,Qe=r,Re=c,Se=p,We=m,Ye=v;return M(),P("div",Q,[x[25]||(x[25]=D('<div class="page-header" data-v-97b6cc04><div class="header-content" data-v-97b6cc04><div class="title-section" data-v-97b6cc04><i class="bi-diagram-3 header-icon" data-v-97b6cc04></i><div class="title-group" data-v-97b6cc04><h1 class="page-title" data-v-97b6cc04>大纲生成对比</h1><p class="page-description" data-v-97b6cc04>对比不同模型和提示词生成的技术方案大纲效果</p></div></div></div></div>',1)),B("div",R,[G(C,{class:"selection-card"},{default:I(()=>[G(k,{gutter:16},{default:I(()=>[G(F,{xs:24,sm:12},{default:I(()=>[G(w,{label:"选择项目"},{default:I(()=>[G(z,{modelValue:be.value,"onUpdate:modelValue":x[0]||(x[0]=e=>be.value=e),placeholder:"请选择项目",filterable:"",clearable:"",onChange:Ae},{default:I(()=>[(M(!0),P(L,null,O(A(he),e=>(M(),U(j,{key:e.id,label:e.project_name,value:e.id},{default:I(()=>[B("span",null,H(e.project_name),1),B("span",S,H(e.company_name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),G(F,{xs:24,sm:12},{default:I(()=>[G(w,{label:"应答公司"},{default:I(()=>[G(z,{modelValue:xe.value,"onUpdate:modelValue":x[1]||(x[1]=e=>xe.value=e),placeholder:"请选择应答公司",filterable:"",clearable:""},{default:I(()=>[(M(!0),P(L,null,O(ge.value,e=>(M(),U(j,{key:e.company_id,label:e.company_name||e.name,value:e.company_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),be.value&&(je.value||ze.value)?(M(),U(C,{key:0,class:"documents-card"},{header:I(()=>[...x[6]||(x[6]=[B("div",{class:"card-header"},[B("span",{class:"card-title"},[B("i",{class:"bi-folder2-open"}),N(" 项目文档 ")])],-1)])]),default:I(()=>[G(k,{gutter:16},{default:I(()=>[je.value&&A(fe).tenderFile?(M(),U(F,{key:0,xs:24,sm:12},{default:I(()=>[B("div",W,[B("div",Y,[G(K,{class:"document-icon",color:"#409EFF"},{default:I(()=>[G(A(_))]),_:1}),x[7]||(x[7]=B("span",{class:"document-label"},"招标文档：",-1))]),B("div",q,[G(_e,{type:"info",size:"large"},{default:I(()=>[N(H(A(fe).tenderFile.name),1)]),_:1}),G(ye,{size:"small",type:"info",style:{"margin-left":"8px"}},{default:I(()=>[N(H(Oe(A(fe).tenderFile.size)),1)]),_:1})])])]),_:1})):T("",!0),ze.value&&A(fe).technicalFile?(M(),U(F,{key:1,xs:24,sm:12},{default:I(()=>[B("div",J,[B("div",X,[G(K,{class:"document-icon",color:"#67C23A"},{default:I(()=>[G(A(_))]),_:1}),x[8]||(x[8]=B("span",{class:"document-label"},"技术需求文档：",-1))]),B("div",Z,[G(_e,{type:"success",size:"large"},{default:I(()=>[N(H(A(fe).technicalFile.name),1)]),_:1}),G(ye,{size:"small",type:"info",style:{"margin-left":"8px"}},{default:I(()=>[N(H(Oe(A(fe).technicalFile.size)),1)]),_:1}),G(Ke,{type:"primary",size:"small",plain:"",style:{"margin-left":"12px"},onClick:Ee},{default:I(()=>[G(K,{style:{"margin-right":"4px"}},{default:I(()=>[G(A(y))]),_:1}),x[9]||(x[9]=N(" 预览 ",-1))]),_:1})])])]),_:1})):T("",!0)]),_:1})]),_:1})):T("",!0),G(k,{gutter:16,style:{"margin-top":"16px"}},{default:I(()=>[G(F,{xs:24,lg:12},{default:I(()=>[G(C,{class:"config-card"},{header:I(()=>[B("div",$,[B("span",ee,[G(_e,{type:"success",size:"small"},{default:I(()=>[...x[10]||(x[10]=[N("基准组",-1)])]),_:1}),x[11]||(x[11]=B("span",{style:{"margin-left":"8px"}},"当前配置",-1))])])]),default:I(()=>[G(Re,{"label-position":"top"},{default:I(()=>[G(w,{label:"模型"},{default:I(()=>[G(Qe,{value:"gpt-4o-mini",disabled:""},{prepend:I(()=>[...x[12]||(x[12]=[B("i",{class:"bi-robot"},null,-1)])]),_:1})]),_:1}),G(w,{label:"提示词"},{extra:I(()=>[Ce.value?(M(),U(ye,{key:0,size:"small",type:"warning"},{default:I(()=>[...x[13]||(x[13]=[N(" 正在从后端加载真实提示词配置... ",-1)])]),_:1})):(M(),U(ye,{key:1,size:"small",type:"success"},{default:I(()=>[...x[14]||(x[14]=[N(" ✓ 已加载系统提示词模板。实际使用时，{analysis} 占位符会被替换为标书的具体需求分析结果，确保每个标书的大纲都是个性化的。 ",-1)])]),_:1}))]),default:I(()=>[E(G(Qe,{modelValue:ke.value,"onUpdate:modelValue":x[2]||(x[2]=e=>ke.value=e),type:"textarea",rows:12,placeholder:"当前使用的大纲生成提示词",disabled:""},null,8,["modelValue"]),[[Ye,Ce.value]])]),_:1})]),_:1})]),_:1})]),_:1}),G(F,{xs:24,lg:12},{default:I(()=>[G(C,{class:"config-card"},{header:I(()=>[B("div",ae,[B("span",le,[G(_e,{type:"warning",size:"small"},{default:I(()=>[...x[15]||(x[15]=[N("对比组",-1)])]),_:1}),x[16]||(x[16]=B("span",{style:{"margin-left":"8px"}},"自定义配置",-1))])])]),default:I(()=>[G(Re,{"label-position":"top"},{default:I(()=>[G(w,{label:"模型"},{default:I(()=>[G(z,{modelValue:Pe.value,"onUpdate:modelValue":x[3]||(x[3]=e=>Pe.value=e),placeholder:"选择模型"},{default:I(()=>[G(j,{label:"GPT5（最强推理）",value:"shihuang-gpt5"}),G(j,{label:"Claude Sonnet 4.5（标书专用）",value:"shihuang-claude-sonnet-45"}),G(j,{label:"GPT4o Mini（推荐）",value:"shihuang-gpt4o-mini"})]),_:1},8,["modelValue"])]),_:1}),G(w,{label:"提示词"},{extra:I(()=>[G(ye,{size:"small",type:"info"},{default:I(()=>[...x[17]||(x[17]=[N(" 自定义提示词，用于对比测试 ",-1)])]),_:1})]),default:I(()=>[G(Qe,{modelValue:Me.value,"onUpdate:modelValue":x[4]||(x[4]=e=>Me.value=e),type:"textarea",rows:12,placeholder:"输入自定义提示词..."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),B("div",te,[G(Ke,{type:"primary",size:"large",icon:A(h),loading:De.value,disabled:!Le.value,onClick:He},{default:I(()=>[...x[18]||(x[18]=[N(" 开始生成对比 ",-1)])]),_:1},8,["icon","loading","disabled"]),G(Ke,{size:"large",icon:A(g),onClick:Ne},{default:I(()=>[...x[19]||(x[19]=[N(" 重置 ",-1)])]),_:1},8,["icon"])]),Be.value?(M(),U(C,{key:1,class:"result-card"},{header:I(()=>[B("div",se,[x[21]||(x[21]=B("span",{class:"card-title"},[B("i",{class:"bi-bar-chart"}),N(" 生成结果对比 ")],-1)),G(Ke,{text:"",icon:A(b)},{default:I(()=>[...x[20]||(x[20]=[N("导出报告",-1)])]),_:1},8,["icon"])])]),default:I(()=>[G(k,{gutter:16},{default:I(()=>[G(F,{xs:24,lg:12},{default:I(()=>[B("div",ue,[B("h3",ne,[G(_e,{type:"success",size:"small"},{default:I(()=>[...x[22]||(x[22]=[N("基准组",-1)])]),_:1}),x[23]||(x[23]=N(" GPT-4o-mini ",-1))]),B("div",ie,[G(We,{"max-height":"600px"},{default:I(()=>[Ge.value?(M(),P("div",de,H(Ge.value),1)):(M(),U(Se,{key:1,description:"暂无结果"}))]),_:1})]),B("div",oe,[G(ye,{size:"small",type:"info"},{default:I(()=>[N(" 生成时间: "+H(Te.value||"-"),1)]),_:1})])])]),_:1}),G(F,{xs:24,lg:12},{default:I(()=>[B("div",ce,[B("h3",re,[G(_e,{type:"warning",size:"small"},{default:I(()=>[...x[24]||(x[24]=[N("对比组",-1)])]),_:1}),N(" "+H(Pe.value||"未选择"),1)]),B("div",ve,[G(We,{"max-height":"600px"},{default:I(()=>[Ue.value?(M(),P("div",me,H(Ue.value),1)):(M(),U(Se,{key:1,description:"暂无结果"}))]),_:1})]),B("div",pe,[G(ye,{size:"small",type:"info"},{default:I(()=>[N(" 生成时间: "+H(Ie.value||"-"),1)]),_:1})])])]),_:1})]),_:1})]),_:1})):T("",!0)]),G(A(V),{modelValue:Ve.value,"onUpdate:modelValue":x[5]||(x[5]=e=>Ve.value=e),"file-url":we.value,"file-name":Fe.value},null,8,["modelValue","file-url","file-name"])])}}}),[["__scopeId","data-v-97b6cc04"]]);export{fe as default};
