import{t as e}from"./tender-B2_G1CPt.js";import{u as t}from"./project-D1NKtbTH.js";import{cc as l,c5 as a,du as s,bR as i,cF as o,cD as n,cb as r,d9 as c,av as d,ea as u,bd as p,bX as f,aw as m,db as v,eb as h,bW as _,cT as y,bT as b,aK as g,aL as w,aN as F,a_ as x,aP as C,aU as k,dZ as j,bS as I,da as $,ec as P,aQ as z,aY as T,a$ as E,aX as H,aS as D,aR as K,aT as L,aW as S,bL as R,b1 as U,b3 as B,b4 as M,bY as N,df as A,b6 as Y,bN as W,aM as O,bk as V,bl as J,cO as X,aZ as Z,b7 as G,ch as Q,b0 as q,b$ as ee,ed as te,bh as le,bi as ae,bt as se}from"./index.js";/* empty css               */import{E as ie}from"./index-DwbH8caQ.js";/* empty css                                                                          *//* empty css                   *//* empty css                             *//* empty css                    *//* empty css                */import"./DocumentPreview.vue_vue_type_style_index_0_scoped_056f7814_lang-Cvhffcax.js";import{a as oe,E as ne}from"./index-QjymKf1u.js";import{E as re}from"./index-CzUw8qg0.js";import{E as ce}from"./index--HjUvM4F.js";import{E as de,a as ue}from"./index-Da2rArSZ.js";import{E as pe}from"./index-D28500cA.js";import{E as fe}from"./DocumentPreview-B3F3GS6M.js";import{E as me,a as ve}from"./index-YEioaD_d.js";import{v as he}from"./directive-BQ8mY-Bz.js";import{E as _e}from"./index-CtMmaQjp.js";const ye=e=>l(e)||a(e)||s(e),be=i({accordion:Boolean,modelValue:{type:r([Array,String,Number]),default:()=>c([])},expandIconPosition:{type:r([String]),default:"right"},beforeCollapse:{type:r(Function)}}),ge={[n]:ye,[o]:ye},we=Symbol("collapseContextKey"),Fe=g({name:"ElCollapse"});var xe=b(g({...Fe,props:be,emits:ge,setup(e,{expose:t,emit:l}){const a=e,{activeNames:s,setActiveNames:i}=((e,t)=>{const l=d(u(e.modelValue)),a=a=>{l.value=a;const s=e.accordion?l.value[0]:l.value;t(n,s),t(o,s)},s=t=>{if(e.accordion)a([l.value[0]===t?"":t]);else{const e=[...l.value],s=e.indexOf(t);s>-1?e.splice(s,1):e.push(t),a(e)}};return p(()=>e.modelValue,()=>l.value=u(e.modelValue),{deep:!0}),v(we,{activeNames:l,handleItemClick:async t=>{const{beforeCollapse:l}=e;if(!l)return void s(t);const a=l(t);[h(a),_(a)].includes(!0)||y("ElCollapse","beforeCollapse must return type `Promise<boolean>` or `boolean`"),h(a)?a.then(e=>{!1!==e&&s(t)}).catch(e=>{}):a&&s(t)}}),{activeNames:l,setActiveNames:a}})(a,l),{rootKls:r}=(e=>{const t=f("collapse");return{rootKls:m(()=>[t.b(),t.b(`icon-position-${e.expandIconPosition}`)])}})(a);return t({activeNames:s,setActiveNames:i}),(e,t)=>(F(),w("div",{class:C(k(r))},[x(e.$slots,"default")],2))}}),[["__file","collapse.vue"]]);const Ce=i({title:{type:String,default:""},name:{type:r([String,Number]),default:void 0},icon:{type:I,default:j},disabled:Boolean}),ke=g({name:"ElCollapseItem"});var je=b(g({...ke,props:Ce,setup(e,{expose:t}){const l=e,{focusing:a,id:s,isActive:i,handleFocus:o,handleHeaderClick:n,handleEnterClick:r}=(e=>{const t=$(we),{namespace:l}=f("collapse"),a=d(!1),s=d(!1),i=P(),o=m(()=>i.current++),n=m(()=>{var t;return null!=(t=e.name)?t:`${l.value}-id-${i.prefix}-${k(o)}`}),r=m(()=>null==t?void 0:t.activeNames.value.includes(k(n)));return{focusing:a,id:o,isActive:r,handleFocus:()=>{setTimeout(()=>{s.value?s.value=!1:a.value=!0},50)},handleHeaderClick:l=>{if(e.disabled)return;const i=l.target;(null==i?void 0:i.closest("input, textarea, select"))||(null==t||t.handleItemClick(k(n)),a.value=!1,s.value=!0)},handleEnterClick:e=>{const l=e.target;(null==l?void 0:l.closest("input, textarea, select"))||(e.preventDefault(),null==t||t.handleItemClick(k(n)))}}})(l),{arrowKls:c,headKls:u,rootKls:p,itemTitleKls:v,itemWrapperKls:h,itemContentKls:_,scopedContentId:y,scopedHeadId:b}=((e,{focusing:t,isActive:l,id:a})=>{const s=f("collapse"),i=m(()=>[s.b("item"),s.is("active",k(l)),s.is("disabled",e.disabled)]),o=m(()=>[s.be("item","header"),s.is("active",k(l)),{focusing:k(t)&&!e.disabled}]),n=m(()=>[s.be("item","arrow"),s.is("active",k(l))]);return{itemTitleKls:m(()=>[s.be("item","title")]),arrowKls:n,headKls:o,rootKls:i,itemWrapperKls:m(()=>s.be("item","wrap")),itemContentKls:m(()=>s.be("item","content")),scopedContentId:m(()=>s.b(`content-${k(a)}`)),scopedHeadId:m(()=>s.b(`head-${k(a)}`))}})(l,{focusing:a,isActive:i,id:s});return t({isActive:i}),(e,t)=>(F(),w("div",{class:C(k(p))},[z("div",{id:k(b),class:C(k(u)),"aria-expanded":k(i),"aria-controls":k(y),"aria-describedby":k(y),tabindex:e.disabled?-1:0,role:"button",onClick:k(n),onKeydown:R(U(k(r),["stop"]),["space","enter"]),onFocus:k(o),onBlur:e=>a.value=!1},[z("span",{class:C(k(v))},[x(e.$slots,"title",{isActive:k(i)},()=>[E(H(e.title),1)])],2),x(e.$slots,"icon",{isActive:k(i)},()=>[T(k(S),{class:C(k(c))},{default:D(()=>[(F(),K(L(e.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),T(k(fe),null,{default:D(()=>[B(z("div",{id:k(y),role:"region",class:C(k(h)),"aria-hidden":!k(i),"aria-labelledby":k(b)},[z("div",{class:C(k(_))},[x(e.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[M,k(i)]])]),_:3})],2))}}),[["__file","collapse-item.vue"]]);const Ie=N(xe,{CollapseItem:je}),$e=A(je);function Pe(){const l=t(),a=d([]),s=d(!1),i=d(null),o=d({tenderFile:null,templateFile:null,technicalFile:null,businessResponseFile:null,p2pResponseFile:null,techProposalFile:null}),n=m(()=>a.value.find(e=>e.id===l.projectId)),r=m(()=>a.value.length>0),c=m(()=>null!==o.value.tenderFile),u=m(()=>null!==o.value.templateFile),p=m(()=>null!==o.value.technicalFile),f=async(t,a)=>{if(h(),(null==a?void 0:a.onClear)&&a.onClear(),t){try{const a=await e.getProject(t);a.data&&l.setCurrentProject(a.data)}catch(s){Y.error("Ëé∑ÂèñÈ°πÁõÆËØ¶ÊÉÖÂ§±Ë¥•")}await v(t,a)}else l.clearCurrentProject()},v=async(t,l)=>{var a,n,r,c,d,u,p,f,m;s.value=!0;try{const s=(await e.getProject(t)).data;if(!s)return void Y.warning("Êú™ÊâæÂà∞È°πÁõÆÊï∞ÊçÆ");const i=s.step1_data,v={tenderFile:null,templateFile:null,technicalFile:null,businessResponseFile:null,p2pResponseFile:null,techProposalFile:null};if(null==i?void 0:i.file_path){const e=(null==(a=(i.file_name||i.file_path.split("/").pop()||"ÊãõÊ†áÊñáÊ°£").split(".").pop())?void 0:a.toLowerCase())||"doc";["doc","docx"].includes(e);v.tenderFile={name:i.file_name||"ÊãõÊ†áÊñáÊ°£",url:i.file_path,status:"success",uid:Date.now()+Math.random(),size:i.file_size||0}}if(null==i?void 0:i.response_file_path){const e=i.response_file_path.split("/").pop()||"Â∫îÁ≠îÊ®°Êùø",t=(null==(n=e.split(".").pop())?void 0:n.toLowerCase())||"doc";["doc","docx"].includes(t);v.templateFile={name:e,url:i.response_file_path,status:"success",uid:Date.now()+Math.random()+1,size:0}}if(null==i?void 0:i.technical_file_path){const e=i.technical_file_path.split("/").pop()||"ÊäÄÊúØÈúÄÊ±ÇÊñáÊ°£",t=(null==(r=e.split(".").pop())?void 0:r.toLowerCase())||"doc";["doc","docx"].includes(t);v.technicalFile={name:e,url:i.technical_file_path,status:"success",uid:Date.now()+Math.random()+2,size:0}}if(null==i?void 0:i.business_response_file){const e=i.business_response_file,l=(null==(d=((null==(c=e.file_path)?void 0:c.split("/").pop())||"ÂïÜÂä°Â∫îÁ≠îÊñá‰ª∂").split(".").pop())?void 0:d.toLowerCase())||"docx",a=["doc","docx"].includes(l);v.businessResponseFile={success:!0,outputFile:e.file_path,downloadUrl:_(e.file_path),previewUrl:a?`/api/business-response/preview/${t}`:void 0,stats:e.stats||{},message:"ËØ•È°πÁõÆÂ∑≤ÊúâÂïÜÂä°Â∫îÁ≠îÊñá‰ª∂",isHistory:!0,generated_at:e.generated_at||i.updated_at}}if(null==i?void 0:i.technical_point_to_point_file){const e=i.technical_point_to_point_file,l=(null==(p=((null==(u=e.file_path)?void 0:u.split("/").pop())||"ÁÇπÂØπÁÇπÂ∫îÁ≠îÊñá‰ª∂").split(".").pop())?void 0:p.toLowerCase())||"docx",a=["doc","docx"].includes(l);v.p2pResponseFile={success:!0,outputFile:e.file_path,downloadUrl:_(e.file_path),previewUrl:a?`/api/point-to-point/preview/${t}`:void 0,stats:e.stats||{},message:"ËØ•È°πÁõÆÂ∑≤ÊúâÁÇπÂØπÁÇπÂ∫îÁ≠îÊñá‰ª∂",isHistory:!0,generated_at:e.generated_at||i.updated_at}}if(null==i?void 0:i.technical_proposal_file){const e=i.technical_proposal_file,l=(null==(m=((null==(f=e.file_path)?void 0:f.split("/").pop())||"ÊäÄÊúØÊñπÊ°àÊñá‰ª∂").split(".").pop())?void 0:m.toLowerCase())||"docx",a=["doc","docx"].includes(l);v.techProposalFile={success:!0,outputFile:e.file_path,downloadUrl:_(e.file_path),previewUrl:a?`/api/tech-proposal/preview/${t}`:void 0,stats:e.stats||{},message:"ËØ•È°πÁõÆÂ∑≤ÊúâÊäÄÊúØÊñπÊ°àÊñá‰ª∂",isHistory:!0,generated_at:e.generated_at||i.updated_at}}o.value=v,(null==l?void 0:l.onDocumentsLoaded)&&l.onDocumentsLoaded(v)}catch(v){i.value="Âä†ËΩΩÈ°πÁõÆÊñáÊ°£Â§±Ë¥•",Y.error(i.value)}finally{s.value=!1}},h=()=>{o.value={tenderFile:null,templateFile:null,technicalFile:null,businessResponseFile:null,p2pResponseFile:null,techProposalFile:null}},_=e=>{if(e.startsWith("/api/"))return e.includes("?")?`${e}&download=true`:`${e}?download=true`;let t=e;const l="/Users/lvhe/Downloads/zhongbiao/zhongbiao/";return t.startsWith(l)&&(t=t.substring(42)),t.startsWith("ai_tender_system/data/")?t=t.substring(22):t.startsWith("data/")&&(t=t.substring(5)),`/api/files/serve/${t}?download=true`};return{projects:a,loading:s,error:i,currentDocuments:o,selectedProject:n,hasProjects:r,hasTenderFile:c,hasTemplateFile:u,hasTechnicalFile:p,loadProjects:async t=>{var l;s.value=!0,i.value=null;try{const s=await e.getProjects({page:1,page_size:100,...t});a.value=(null==(l=s.data)?void 0:l.items)||[],0===a.value.length&&Y.warning("ÊöÇÊó†È°πÁõÆÊï∞ÊçÆ")}catch(o){i.value="Âä†ËΩΩÈ°πÁõÆÂàóË°®Â§±Ë¥•",Y.error(i.value)}finally{s.value=!1}},handleProjectChange:f,loadProjectDocuments:v,clearDocuments:h,restoreProjectFromStore:async e=>l.projectId?(await f(l.projectId,e),l.projectId):null,filePathToUploadFile:(e,t)=>({name:t||e.split("/").pop()||"Êñá‰ª∂",url:e,status:"success",uid:Date.now()+Math.random(),size:0}),getDownloadUrl:_}}function ze(e={}){const{onFileLoaded:t,onFileCancelled:l,onSyncSuccess:a}=e,s=d(!1),i=d(null),o=d(!1),n=d(!1),r=m(()=>!!i.value),c=e=>({technicalFile:"ÊäÄÊúØÈúÄÊ±ÇÊñá‰ª∂",tenderFile:"ÊãõÊ†áÊñáÊ°£",templateFile:"Â∫îÁ≠îÊ®°Êùø",businessResponseFile:"ÂïÜÂä°Â∫îÁ≠îÊñá‰ª∂",p2pResponseFile:"ÁÇπÂØπÁÇπÂ∫îÁ≠îÊñá‰ª∂",techProposalFile:"ÊäÄÊúØÊñπÊ°àÊñá‰ª∂"}[e]||"Êñá‰ª∂");return{useHitlFile:s,hitlFileInfo:i,hasHitlFile:r,syncing:o,synced:n,loadFromHITL:(e,l="technicalFile")=>{const a=e[l];return a?(i.value={filename:a.filename||a.name||"Êú™Áü•Êñá‰ª∂",file_path:a.file_path||a.url||"",file_size:a.file_size||a.size,file_url:a.file_url||a.url},s.value=!0,n.value=!1,Y.success({message:`Â∑≤Âä†ËΩΩHITL${c(l)}: ${i.value.filename}`,duration:3e3}),t&&t(i.value),!0):(Y.warning(`ÂΩìÂâçÈ°πÁõÆÊ≤°Êúâ${c(l)}`),!1)},cancelHitlFile:()=>{s.value=!1,i.value=null,n.value=!1,Y.info("Â∑≤ÂèñÊ∂à‰ΩøÁî®HITLÊñá‰ª∂"),l&&l()},syncToHitl:async(e,t,l)=>{if(!e)return Y.error("È°πÁõÆIDÊó†Êïà"),!1;if(!t)return Y.error("Êñá‰ª∂Ë∑ØÂæÑÊó†Êïà"),!1;o.value=!0;try{const s=await fetch(`/api/tender-processing/sync-file/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:t,file_type:l})}),i=s.headers.get("content-type");if(!(null==i?void 0:i.includes("application/json"))){await s.text();throw new Error(`ÊúçÂä°Âô®ËøîÂõûÂºÇÂ∏∏ÂìçÂ∫î (${s.status}): ${s.statusText}„ÄÇÂèØËÉΩÊòØÂêéÁ´ØÈÖçÁΩÆÈóÆÈ¢òÔºåËØ∑ËÅîÁ≥ªÁÆ°ÁêÜÂëò„ÄÇ`)}const o=await s.json();if(o.success||s.ok)return n.value=!0,Y.success({message:o.message||"Â∑≤ÊàêÂäüÂêåÊ≠•Âà∞ÊäïÊ†áÈ°πÁõÆ",duration:3e3}),a&&await a(),!0;throw new Error(o.error||o.message||"ÂêåÊ≠•Â§±Ë¥•")}catch(s){let e="ÂêåÊ≠•Âà∞È°πÁõÆÂ§±Ë¥•";return s.message?e=s.message:"TypeError"===s.name&&(e="ÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•"),Y.error({message:e,duration:5e3}),!1}finally{o.value=!1}},resetSyncStatus:()=>{n.value=!1}}}function Te(e,t="YYYY-MM-DD"){return e?W(e).format(t):""}function Ee(e,t=2){if(null==e||0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,l)).toFixed(t)} ${["B","KB","MB","GB","TB","PB"][l]}`}const He={class:"stats-card"},De={key:0,class:"stats-title"},Ke={class:"stat-item"},Le={class:"stat-prefix"},Se={class:"stat-suffix"},Re=Z(g({__name:"StatsCard",props:{title:{},stats:{},statItems:{},span:{default:6},gutter:{default:20},valueStyle:{default:()=>({})}},setup(e){const t=e,l=[{key:"total_replacements",label:"ÊñáÊú¨ÊõøÊç¢",suffix:"Â§Ñ"},{key:"tables_processed",label:"Ë°®Ê†ºÂ§ÑÁêÜ",suffix:"‰∏™"},{key:"cells_filled",label:"ÂçïÂÖÉÊ†ºÂ°´ÂÖÖ",suffix:"‰∏™"},{key:"images_inserted",label:"ÂõæÁâáÊèíÂÖ•",suffix:"Âº†"}],a=m(()=>t.statItems||l),s=e=>{const l=e.split(".");let a=t.stats;for(const t of l)if(a=null==a?void 0:a[t],null==a)break;return"number"==typeof a?a:0};return(t,l)=>{const i=re,o=ne,n=oe;return F(),w("div",He,[e.title?(F(),w("h4",De,H(e.title),1)):O("",!0),T(n,{gutter:e.gutter},{default:D(()=>[(F(!0),w(V,null,J(a.value,t=>(F(),K(o,{key:t.key,span:e.span},{default:D(()=>[z("div",Ke,[T(i,{title:t.label,value:s(t.key),precision:t.precision,"value-style":e.valueStyle},X({_:2},[t.prefix?{name:"prefix",fn:D(()=>[z("span",Le,H(t.prefix),1)]),key:"0"}:void 0,t.suffix?{name:"suffix",fn:D(()=>[z("span",Se,H(t.suffix),1)]),key:"1"}:void 0]),1032,["title","value","precision","value-style"])])]),_:2},1032,["span"]))),128))]),_:1},8,["gutter"])])}}}),[["__scopeId","data-v-a61794d1"]]),Ue={class:"alert-content"},Be={class:"file-info"},Me={class:"file-details"},Ne={class:"file-label"},Ae={class:"file-name"},Ye={key:0,class:"file-size"},We={class:"alert-actions"},Oe=Z(g({__name:"HitlFileAlert",props:{fileInfo:{},type:{default:"success"},label:{default:"‰ΩøÁî®HITLÊñá‰ª∂:"},showCancel:{type:Boolean,default:!0},cancelText:{default:"ÂèñÊ∂à‰ΩøÁî®"},showTag:{type:Boolean,default:!0}},emits:["cancel"],setup(e,{emit:t}){const l=t,a=()=>{l("cancel")};return(t,l)=>{const s=S,i=ie,o=q,n=Q;return e.fileInfo?(F(),K(n,{key:0,type:e.type,closable:!1,class:"hitl-file-alert"},{title:D(()=>[z("div",Ue,[z("div",Be,[T(s,{class:"file-icon"},{default:D(()=>[T(k(G))]),_:1}),z("div",Me,[z("span",Ne,H(e.label),1),z("span",Ae,H(e.fileInfo.filename),1),e.fileInfo.file_size?(F(),w("span",Ye," ("+H(k(Ee)(e.fileInfo.file_size))+") ",1)):O("",!0),e.showTag?(F(),K(i,{key:1,type:"success",size:"small",class:"hitl-tag"},{default:D(()=>[...l[0]||(l[0]=[E(" Â∑≤‰ªéÊäïÊ†áÈ°πÁõÆÂä†ËΩΩ ",-1)])]),_:1})):O("",!0)])]),z("div",We,[x(t.$slots,"actions",{},()=>[e.showCancel?(F(),K(o,{key:0,type:"text",size:"small",onClick:a},{default:D(()=>[T(s,null,{default:D(()=>[T(k(ee))]),_:1}),E(" "+H(e.cancelText),1)]),_:1})):O("",!0)],!0)])])]),_:3},8,["type"])):O("",!0)}}}),[["__scopeId","data-v-1a132715"]]),Ve={class:"history-files-panel"},Je={class:"card-header"},Xe={class:"header-title"},Ze={class:"current-file-content"},Ge={class:"history-actions"},Qe={class:"collapse-header"},qe={class:"filename-cell"},et=Z(g({__name:"HistoryFilesPanel",props:{title:{default:""},currentFile:{},historyFiles:{},loading:{type:Boolean,default:!1},showRegenerate:{type:Boolean,default:!0},showStats:{type:Boolean,default:!0},statItems:{},currentFileMessage:{default:"ËØ•È°πÁõÆÂ∑≤ÊúâÁîüÊàêÊñá‰ª∂"},showEditorOpen:{type:Boolean,default:!1}},emits:["openInEditor","preview","download","regenerate","refresh"],setup(e){const t=d([]),l=e=>{if(!e)return"-";let t=e;try{t=decodeURIComponent(e)}catch{}const l=t.split("/");return l[l.length-1]||"-"};return(a,s)=>{const i=ie,o=Q,n=ue,r=pe,c=de,d=S,u=q,p=ce,f=ve,m=me,v=_e,h=$e,_=Ie,y=he;return F(),w("div",Ve,[e.currentFile?(F(),K(p,{key:0,shadow:"never",class:"current-file-card"},{header:D(()=>[z("div",Je,[z("div",Xe,[z("span",null,H(e.title||"üìÑ ËØ•È°πÁõÆÁöÑÁîüÊàêÊñá‰ª∂"),1),T(i,{type:"info"},{default:D(()=>[...s[6]||(s[6]=[E("ÂéÜÂè≤Êñá‰ª∂",-1)])]),_:1})])])]),default:D(()=>[z("div",Ze,[T(o,{type:"info",title:e.currentFile.message||e.currentFileMessage,closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},null,8,["title"]),e.currentFile.stats&&e.showStats?(F(),K(k(Re),{key:0,stats:e.currentFile.stats,"stat-items":e.statItems},null,8,["stats","stat-items"])):O("",!0),T(c,{column:2,border:"",style:{"margin-bottom":"20px"}},{default:D(()=>[T(n,{label:"Êñá‰ª∂Âêç"},{default:D(()=>[E(H(l(e.currentFile.outputFile||e.currentFile.file_path)),1)]),_:1}),T(n,{label:"‰∏ãËΩΩÂú∞ÂùÄ"},{default:D(()=>[T(r,{href:e.currentFile.downloadUrl,type:"primary"},{default:D(()=>[E(H(l(e.currentFile.downloadUrl)),1)]),_:1},8,["href"])]),_:1})]),_:1}),z("div",Ge,[e.showEditorOpen?(F(),K(u,{key:0,type:"primary",size:"large",onClick:s[0]||(s[0]=t=>a.$emit("openInEditor",e.currentFile))},{default:D(()=>[T(d,null,{default:D(()=>[T(k(te))]),_:1}),s[7]||(s[7]=E(" Âú®ÁºñËæëÂô®‰∏≠ÊâìÂºÄ ",-1))]),_:1})):O("",!0),T(u,{type:"primary",size:"large",icon:k(le),onClick:s[1]||(s[1]=t=>a.$emit("preview",e.currentFile))},{default:D(()=>[...s[8]||(s[8]=[E(" È¢ÑËßàWord ",-1)])]),_:1},8,["icon"]),T(u,{type:"success",size:"large",icon:k(ae),onClick:s[2]||(s[2]=t=>a.$emit("download",e.currentFile))},{default:D(()=>[...s[9]||(s[9]=[E(" ‰∏ãËΩΩ ",-1)])]),_:1},8,["icon"]),e.showRegenerate?(F(),K(u,{key:1,size:"large",icon:k(se),onClick:s[3]||(s[3]=e=>a.$emit("regenerate"))},{default:D(()=>[...s[10]||(s[10]=[E(" ÈáçÊñ∞ÁîüÊàê ",-1)])]),_:1},8,["icon"])):O("",!0)])])]),_:1})):O("",!0),e.historyFiles.length>0?(F(),K(_,{key:1,modelValue:t.value,"onUpdate:modelValue":s[5]||(s[5]=e=>t.value=e),class:"history-collapse"},{default:D(()=>[T(h,{name:"history"},{title:D(()=>[z("div",Qe,[z("span",null,"üìÇ Êü•ÁúãÊâÄÊúâÂéÜÂè≤Â§ÑÁêÜÊñá‰ª∂ ("+H(e.historyFiles.length)+")",1),t.value.includes("history")?(F(),K(u,{key:0,type:"primary",size:"small",loading:e.loading,onClick:s[4]||(s[4]=U(e=>a.$emit("refresh"),["stop"])),style:{"margin-left":"16px"}},{default:D(()=>[...s[11]||(s[11]=[E(" Âà∑Êñ∞ÂàóË°® ",-1)])]),_:1},8,["loading"])):O("",!0)])]),default:D(()=>[T(p,{shadow:"never",style:{border:"none"}},{default:D(()=>[B((F(),K(m,{data:e.historyFiles,border:"",stripe:"","max-height":"400"},{default:D(()=>[T(f,{type:"index",label:"Â∫èÂè∑",width:"60"}),T(f,{prop:"filename",label:"Êñá‰ª∂Âêç","min-width":"300"},{default:D(({row:e})=>[z("div",qe,[T(d,null,{default:D(()=>[T(k(G))]),_:1}),z("span",null,H(e.filename),1)])]),_:1}),T(f,{prop:"size",label:"Êñá‰ª∂Â§ßÂ∞è",width:"120"},{default:D(({row:e})=>[E(H(k(Ee)(e.size)),1)]),_:1}),T(f,{prop:"process_time",label:"Â§ÑÁêÜÊó∂Èó¥",width:"180"},{default:D(({row:e})=>[E(H(k(Te)(e.process_time||e.generated_at,"YYYY-MM-DD HH:mm:ss")),1)]),_:1}),T(f,{label:"Êìç‰Ωú",width:"200",fixed:"right"},{default:D(({row:e})=>[T(u,{type:"primary",size:"small",onClick:t=>a.$emit("preview",e)},{default:D(()=>[...s[12]||(s[12]=[E(" È¢ÑËßà ",-1)])]),_:1},8,["onClick"]),T(u,{type:"success",size:"small",onClick:t=>a.$emit("download",e)},{default:D(()=>[...s[13]||(s[13]=[E(" ‰∏ãËΩΩ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[y,e.loading]]),e.loading||0!==e.historyFiles.length?O("",!0):(F(),K(v,{key:0,description:"ÊöÇÊó†ÂéÜÂè≤Êñá‰ª∂","image-size":100}))]),_:1})]),_:1})]),_:1},8,["modelValue"])):O("",!0)])}}}),[["__scopeId","data-v-6e6ba197"]]);function tt(e,t){const l="string"==typeof e?e:URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),"string"!=typeof e&&URL.revokeObjectURL(l)}export{$e as E,Oe as H,Re as S,ze as a,Ie as b,et as c,tt as d,Pe as u};
