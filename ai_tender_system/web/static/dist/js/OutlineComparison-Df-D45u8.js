import{I as e,G as a,g as l,t,P as s,D as u,F as i,v as n,X as c,c as d,Z as o,f as r,j as v,a5 as m,u as p,aK as f,aH as _,x as y,O as g,_ as h,k as b}from"./element-plus-ZLeSHaWT.js";import{_ as x}from"./index.js";import{u as j}from"./useProjectDocuments-Bd39Ghee.js";import{t as z}from"./tender-ZYcn_VXM.js";import"./utils-CTJnFPw-.js";/* empty css                                                                          */import"./vendor-ZqVwfHSb.js";import{D as V}from"./DocumentPreview-C2RSkj1M.js";import"./umo-editor-zkeZL3VF.js";import{v as k,r as w,c as F,j as P,x as C,aO as D,B as G,O as M,E as U,I as B,F as O,M as T,aa as I,u as K,K as L,L as A,G as E,y as H}from"./vue-core-CiAVTOOY.js";import{c as S}from"./company-DX6fQVXW.js";import"./project-DAr3RjR2.js";/* empty css                                                                        */const X={class:"outline-comparison-wrapper"},Z={class:"main-content"},q={style:{color:"var(--text-secondary)","font-size":"12px","margin-left":"8px"}},J={class:"document-item"},N={class:"document-header"},Q={class:"document-info"},R={class:"document-item"},W={class:"document-header"},Y={class:"document-info"},$={class:"card-header"},ee={class:"card-title"},ae={class:"card-header"},le={class:"card-title"},te={class:"action-section"},se={class:"card-header"},ue={class:"result-section"},ie={class:"result-title"},ne={class:"outline-content"},ce={key:0,class:"outline-text"},de={class:"result-meta"},oe={class:"result-section"},re={class:"result-title"},ve={class:"outline-content"},me={key:0,class:"outline-text"},pe={class:"result-meta"},fe=x(k({__name:"OutlineComparison",setup(x){const{projects:k,currentDocuments:fe,loadProjects:_e,handleProjectChange:ye}=j(),ge=k,he=w([]),be=w(null),xe=w(null),je=w(!1),ze=w(!1),Ve=w(!1),ke=w(""),we=w(""),Fe=w("正在加载提示词配置..."),Pe=w(!0),Ce=w(""),De=w(""),Ge=w(!1),Me=w(!1),Ue=w(""),Be=w(""),Oe=w(""),Te=w(""),Ie=F(()=>be.value&&xe.value&&Ce.value&&De.value);function Ke(e){if(0===e)return"未知大小";const a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+["B","KB","MB","GB"][a]}async function Le(e){if(je.value=!1,ze.value=!1,!e)return xe.value=null,void(await ye(null));await ye(e,{onClear:()=>{je.value=!1,ze.value=!1},onDocumentsLoaded:e=>{e.tenderFile&&(je.value=!0),e.technicalFile&&(ze.value=!0)}});const a=ge.value.find(a=>a.id===e);a&&a.company_id&&(xe.value=a.company_id)}async function Ae(){if(Ie.value){Ge.value=!0,Me.value=!1;try{b.info("大纲生成功能开发中..."),setTimeout(()=>{Ue.value="第一章 项目概述\n1.1 项目背景\n1.2 项目目标\n第二章 技术方案\n2.1 系统架构\n2.2 技术选型",Be.value="第一章 项目介绍\n1.1 背景分析\n1.2 目标设定\n第二章 解决方案\n2.1 架构设计\n2.2 技术栈",Oe.value="2.3秒",Te.value="3.1秒",Me.value=!0,Ge.value=!1},2e3)}catch(e){b.error("生成失败"),Ge.value=!1}}else b.warning("请完整填写所有配置项")}function Ee(){be.value=null,xe.value=null,Ce.value="",De.value="",Me.value=!1,Ue.value="",Be.value="",Oe.value="",Te.value=""}function He(){fe.value.technicalFile?(ke.value=fe.value.technicalFile.url,we.value=fe.value.technicalFile.name,Ve.value=!0):b.warning("技术文件不存在")}return P(()=>{!async function(){await _e()}(),async function(){try{const e=await S.getCompanies();e.success&&e.data&&(he.value=e.data)}catch(e){b.error("加载公司列表失败")}}(),async function(){Pe.value=!0;try{const e=await z.getOutlineGenerationPrompts();if(e.success&&e.data){const a=e.data.prompts||e.data;Fe.value=a.generate_outline||"未找到提示词配置"}else Fe.value="未找到提示词配置"}catch(e){b.error("加载提示词配置失败"),Fe.value="加载失败，请刷新页面重试"}finally{Pe.value=!1}}()}),(b,x)=>{const j=p,z=t,k=l,w=a,F=e,P=s,S=u,_e=n,ye=c,Se=d,Xe=v,Ze=r,qe=g,Je=y,Ne=m;return H(),C("div",X,[x[25]||(x[25]=D('<div class="page-header" data-v-97b6cc04><div class="header-content" data-v-97b6cc04><div class="title-section" data-v-97b6cc04><i class="bi-diagram-3 header-icon" data-v-97b6cc04></i><div class="title-group" data-v-97b6cc04><h1 class="page-title" data-v-97b6cc04>大纲生成对比</h1><p class="page-description" data-v-97b6cc04>对比不同模型和提示词生成的技术方案大纲效果</p></div></div></div></div>',1)),G("div",Z,[M(P,{class:"selection-card"},{default:O(()=>[M(F,{gutter:16},{default:O(()=>[M(w,{xs:24,sm:12},{default:O(()=>[M(k,{label:"选择项目"},{default:O(()=>[M(z,{modelValue:be.value,"onUpdate:modelValue":x[0]||(x[0]=e=>be.value=e),placeholder:"请选择项目",filterable:"",clearable:"",onChange:Le},{default:O(()=>[(H(!0),C(T,null,I(K(ge),e=>(H(),U(j,{key:e.id,label:e.project_name,value:e.id},{default:O(()=>[G("span",null,A(e.project_name),1),G("span",q,A(e.company_name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),M(w,{xs:24,sm:12},{default:O(()=>[M(k,{label:"应答公司"},{default:O(()=>[M(z,{modelValue:xe.value,"onUpdate:modelValue":x[1]||(x[1]=e=>xe.value=e),placeholder:"请选择应答公司",filterable:"",clearable:""},{default:O(()=>[(H(!0),C(T,null,I(he.value,e=>(H(),U(j,{key:e.company_id,label:e.company_name||e.name,value:e.company_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),be.value&&(je.value||ze.value)?(H(),U(P,{key:0,class:"documents-card"},{header:O(()=>[...x[6]||(x[6]=[G("div",{class:"card-header"},[G("span",{class:"card-title"},[G("i",{class:"bi-folder2-open"}),L(" 项目文档 ")])],-1)])]),default:O(()=>[M(F,{gutter:16},{default:O(()=>[je.value&&K(fe).tenderFile?(H(),U(w,{key:0,xs:24,sm:12},{default:O(()=>[G("div",J,[G("div",N,[M(S,{class:"document-icon",color:"#409EFF"},{default:O(()=>[M(K(i))]),_:1}),x[7]||(x[7]=G("span",{class:"document-label"},"招标文档：",-1))]),G("div",Q,[M(_e,{type:"info",size:"large"},{default:O(()=>[L(A(K(fe).tenderFile.name),1)]),_:1}),M(ye,{size:"small",type:"info",style:{"margin-left":"8px"}},{default:O(()=>[L(A(Ke(K(fe).tenderFile.size)),1)]),_:1})])])]),_:1})):B("",!0),ze.value&&K(fe).technicalFile?(H(),U(w,{key:1,xs:24,sm:12},{default:O(()=>[G("div",R,[G("div",W,[M(S,{class:"document-icon",color:"#67C23A"},{default:O(()=>[M(K(i))]),_:1}),x[8]||(x[8]=G("span",{class:"document-label"},"技术需求文档：",-1))]),G("div",Y,[M(_e,{type:"success",size:"large"},{default:O(()=>[L(A(K(fe).technicalFile.name),1)]),_:1}),M(ye,{size:"small",type:"info",style:{"margin-left":"8px"}},{default:O(()=>[L(A(Ke(K(fe).technicalFile.size)),1)]),_:1}),M(Se,{type:"primary",size:"small",plain:"",style:{"margin-left":"12px"},onClick:He},{default:O(()=>[M(S,{style:{"margin-right":"4px"}},{default:O(()=>[M(K(o))]),_:1}),x[9]||(x[9]=L(" 预览 ",-1))]),_:1})])])]),_:1})):B("",!0)]),_:1})]),_:1})):B("",!0),M(F,{gutter:16,style:{"margin-top":"16px"}},{default:O(()=>[M(w,{xs:24,lg:12},{default:O(()=>[M(P,{class:"config-card"},{header:O(()=>[G("div",$,[G("span",ee,[M(_e,{type:"success",size:"small"},{default:O(()=>[...x[10]||(x[10]=[L("基准组",-1)])]),_:1}),x[11]||(x[11]=G("span",{style:{"margin-left":"8px"}},"当前配置",-1))])])]),default:O(()=>[M(Ze,{"label-position":"top"},{default:O(()=>[M(k,{label:"模型"},{default:O(()=>[M(Xe,{value:"gpt-4o-mini",disabled:""},{prepend:O(()=>[...x[12]||(x[12]=[G("i",{class:"bi-robot"},null,-1)])]),_:1})]),_:1}),M(k,{label:"提示词"},{extra:O(()=>[Pe.value?(H(),U(ye,{key:0,size:"small",type:"warning"},{default:O(()=>[...x[13]||(x[13]=[L(" 正在从后端加载真实提示词配置... ",-1)])]),_:1})):(H(),U(ye,{key:1,size:"small",type:"success"},{default:O(()=>[...x[14]||(x[14]=[L(" ✓ 已加载系统提示词模板。实际使用时，{analysis} 占位符会被替换为标书的具体需求分析结果，确保每个标书的大纲都是个性化的。 ",-1)])]),_:1}))]),default:O(()=>[E(M(Xe,{modelValue:Fe.value,"onUpdate:modelValue":x[2]||(x[2]=e=>Fe.value=e),type:"textarea",rows:12,placeholder:"当前使用的大纲生成提示词",disabled:""},null,8,["modelValue"]),[[Ne,Pe.value]])]),_:1})]),_:1})]),_:1})]),_:1}),M(w,{xs:24,lg:12},{default:O(()=>[M(P,{class:"config-card"},{header:O(()=>[G("div",ae,[G("span",le,[M(_e,{type:"warning",size:"small"},{default:O(()=>[...x[15]||(x[15]=[L("对比组",-1)])]),_:1}),x[16]||(x[16]=G("span",{style:{"margin-left":"8px"}},"自定义配置",-1))])])]),default:O(()=>[M(Ze,{"label-position":"top"},{default:O(()=>[M(k,{label:"模型"},{default:O(()=>[M(z,{modelValue:Ce.value,"onUpdate:modelValue":x[3]||(x[3]=e=>Ce.value=e),placeholder:"选择模型"},{default:O(()=>[M(j,{label:"GPT5（最强推理）",value:"shihuang-gpt5"}),M(j,{label:"Claude Sonnet 4.5（标书专用）",value:"shihuang-claude-sonnet-45"}),M(j,{label:"GPT4o Mini（推荐）",value:"shihuang-gpt4o-mini"})]),_:1},8,["modelValue"])]),_:1}),M(k,{label:"提示词"},{extra:O(()=>[M(ye,{size:"small",type:"info"},{default:O(()=>[...x[17]||(x[17]=[L(" 自定义提示词，用于对比测试 ",-1)])]),_:1})]),default:O(()=>[M(Xe,{modelValue:De.value,"onUpdate:modelValue":x[4]||(x[4]=e=>De.value=e),type:"textarea",rows:12,placeholder:"输入自定义提示词..."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),G("div",te,[M(Se,{type:"primary",size:"large",icon:K(f),loading:Ge.value,disabled:!Ie.value,onClick:Ae},{default:O(()=>[...x[18]||(x[18]=[L(" 开始生成对比 ",-1)])]),_:1},8,["icon","loading","disabled"]),M(Se,{size:"large",icon:K(_),onClick:Ee},{default:O(()=>[...x[19]||(x[19]=[L(" 重置 ",-1)])]),_:1},8,["icon"])]),Me.value?(H(),U(P,{key:1,class:"result-card"},{header:O(()=>[G("div",se,[x[21]||(x[21]=G("span",{class:"card-title"},[G("i",{class:"bi-bar-chart"}),L(" 生成结果对比 ")],-1)),M(Se,{text:"",icon:K(h)},{default:O(()=>[...x[20]||(x[20]=[L("导出报告",-1)])]),_:1},8,["icon"])])]),default:O(()=>[M(F,{gutter:16},{default:O(()=>[M(w,{xs:24,lg:12},{default:O(()=>[G("div",ue,[G("h3",ie,[M(_e,{type:"success",size:"small"},{default:O(()=>[...x[22]||(x[22]=[L("基准组",-1)])]),_:1}),x[23]||(x[23]=L(" GPT-4o-mini ",-1))]),G("div",ne,[M(Je,{"max-height":"600px"},{default:O(()=>[Ue.value?(H(),C("div",ce,A(Ue.value),1)):(H(),U(qe,{key:1,description:"暂无结果"}))]),_:1})]),G("div",de,[M(ye,{size:"small",type:"info"},{default:O(()=>[L(" 生成时间: "+A(Oe.value||"-"),1)]),_:1})])])]),_:1}),M(w,{xs:24,lg:12},{default:O(()=>[G("div",oe,[G("h3",re,[M(_e,{type:"warning",size:"small"},{default:O(()=>[...x[24]||(x[24]=[L("对比组",-1)])]),_:1}),L(" "+A(Ce.value||"未选择"),1)]),G("div",ve,[M(Je,{"max-height":"600px"},{default:O(()=>[Be.value?(H(),C("div",me,A(Be.value),1)):(H(),U(qe,{key:1,description:"暂无结果"}))]),_:1})]),G("div",pe,[M(ye,{size:"small",type:"info"},{default:O(()=>[L(" 生成时间: "+A(Te.value||"-"),1)]),_:1})])])]),_:1})]),_:1})]),_:1})):B("",!0)]),M(K(V),{modelValue:Ve.value,"onUpdate:modelValue":x[5]||(x[5]=e=>Ve.value=e),"file-url":ke.value,"file-name":we.value},null,8,["modelValue","file-url","file-name"])])}}}),[["__scopeId","data-v-97b6cc04"]]);export{fe as default};
