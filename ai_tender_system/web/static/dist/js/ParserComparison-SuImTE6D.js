import{k as e,e as a,t as l,v as t,bE as s,q as r,d as u,aq as c,p as i,E as o,i as n,O as d,y as v,a7 as p,G as _}from"./index.js";/* empty css                                                        *//* empty css                             *//* empty css                    *//* empty css                     *//* empty css               *//* empty css                */import{E as m}from"./el-tree-C7otNEKg.js";import"./el-text-C9ciGf7A.js";import{E as h}from"./el-divider-0kbIBAxC.js";/* empty css                                                                            *//* empty css                */import{C as f}from"./Card-D8VtnD1Z.js";import{am as y,ao as g,cc as k,au as b,ar as x,aw as w,av as z,aB as j,aC as C,aq as F,as as V,ax as $,ay as L,az as R,aA as T,aT as A,an as I,aD as E,aX as G}from"./editor-CeUA3ax_.js";/* empty css                   *//* empty css                */import{E as M}from"./index-BISXlzby.js";import{E as S}from"./index-DE8f5ksc.js";import{E as W,a as D}from"./el-select-ke7UrdxB.js";import{E as U}from"./index-CamumCgu.js";import{E as P}from"./index-DzjaNwmz.js";import{E as B,a as q}from"./index-DpMZ9cG3.js";import{E as H,a as N}from"./index-DIDzDbKq.js";import"./index-D_p_YczY.js";import"./index-BSM8fZi2.js";import"./index-B9zQDgNq.js";import"./strings-twdxJQ8K.js";import"./index-pPpeQHfX.js";import"./toNumber-CDEuZe1n.js";import"./_baseFindIndex-BTqrMG7V.js";import"./_baseIteratee-PtO-pneB.js";import"./index-DOCWmJkm.js";import"./cloneDeep-syPWYH98.js";import"./flatMap-K8MMJsz8.js";import"./map-BH6IylNP.js";import"./_baseEach-DGFkAtUh.js";import"./raf-BZHcGSIv.js";const O={uploadDocument:function(a){const l=new FormData;return l.append("file",a),e.post("/parser-debug/upload",l,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5})},getTestResult:function(a){return e.get(`/parser-debug/${a}`)},saveGroundTruth:function(a,l,t="user"){return e.post(`/parser-debug/${a}/ground-truth`,{chapters:l,annotator:t})},getHistory:function(a){return e.get("/parser-debug/history",{params:a})},deleteTest:function(a){return e.delete(`/parser-debug/${a}/delete`)},exportReport:function(a){return e.get(`/parser-debug/export/${a}`,{responseType:"blob"})},parseSingleMethod:function(a,l){return e.post(`/parser-debug/parse-single/${a}/${l}`,{},{timeout:3e5})},parseSmart:function(a,l){return e.post(`/parser-debug/parse-smart/${a}`,l||{classify:!0},{timeout:3e5})}},J={class:"chapter-title"},Q={class:"chapter-info"},X={class:"word-count"},Z={key:0,class:"children"},K=r(y({__name:"ChapterTreeItem",props:{chapter:{},groundTruth:{},level:{}},setup(e){const r=e,u=g(()=>{if(!r.groundTruth)return"unknown";const e=a=>{const l=[];for(const t of a)l.push(t),t.children&&t.children.length>0&&l.push(...e(t.children));return l},a=e(r.groundTruth),l=e=>e.replace(/^\d+\.\s*/,"").replace(/^\d+\.\d+\s*/,"").replace(/^ç¬¬[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å\d]+[ç« èŠ‚éƒ¨åˆ†]\s*/,"").replace(/\s+/g,"").toLowerCase(),t=l(r.chapter.title);return a.some(e=>l(e.title)===t)?"matched":"false_positive"}),c=g(()=>({"status-matched":"matched"===u.value,"status-false-positive":"false_positive"===u.value,"status-unknown":"unknown"===u.value}));return(r,i)=>{const o=a,n=k("ChapterTreeItem",!0);return x(),b("div",{class:"chapter-tree-item",style:A({paddingLeft:20*e.level+"px"})},[w("div",{class:j(["chapter-row",c.value])},[w("span",{class:j(["level-badge",`level-${e.chapter.level}`])}," L"+C(e.chapter.level),3),w("span",J,C(e.chapter.title),1),w("span",Q,[w("span",X,C(e.chapter.word_count)+"å­—",1),"matched"===u.value?(x(),F(o,{key:0,class:"match-icon success"},{default:V(()=>[$(L(l))]),_:1})):"missed"===u.value?(x(),F(o,{key:1,class:"match-icon error"},{default:V(()=>[$(L(t))]),_:1})):"false_positive"===u.value?(x(),F(o,{key:2,class:"match-icon warning"},{default:V(()=>[$(L(s))]),_:1})):z("",!0)])],2),e.chapter.children&&e.chapter.children.length>0?(x(),b("div",Z,[(x(!0),b(R,null,T(e.chapter.children,a=>(x(),F(n,{key:a.id,chapter:a,"ground-truth":e.groundTruth,level:e.level+1},null,8,["chapter","ground-truth","level"]))),128))])):z("",!0)],4)}}}),[["__scopeId","data-v-3e35c8e3"]]),Y={class:"card-header"},ee={class:"card-body"},ae={key:0,class:"start-parse-section"},le={key:1,class:"loading-section"},te={class:"statistics"},se={class:"stat-item"},re={class:"value"},ue={class:"stat-item"},ce={class:"value"},ie={class:"stat-item"},oe={class:"value"},ne={key:0,class:"stat-item"},de={class:"chapter-list"},ve={class:"chapter-list-header"},pe={key:0,class:"error-message"},_e=r(y({__name:"MethodCard",props:{title:{},result:{},groundTruth:{},accuracy:{},color:{default:"#409EFF"},status:{default:"idle"}},emits:["start"],setup(e,{emit:l}){const t=e,s=l,r=I(!1),n=g(()=>"idle"===t.status?"info":"parsing"===t.status?"warning":"error"!==t.status&&t.result.success?t.accuracy?t.accuracy.f1_score>=.9?"success":t.accuracy.f1_score>=.7?"":t.accuracy.f1_score>=.5?"warning":"danger":"success":"danger"),d=g(()=>"idle"===t.status?"æœªå¼€å§‹":"parsing"===t.status?"è§£æä¸­...":"error"===t.status?"å¤±è´¥":t.result.success?t.accuracy?`F1: ${(100*t.accuracy.f1_score).toFixed(1)}%`:"æˆåŠŸ":"å¤±è´¥"),v=()=>{s("start")},p=()=>{r.value=!r.value};return(l,t)=>{const s=M,_=u,m=a,h=o,f=S;return x(),F(f,{class:"method-card","body-style":{padding:"0"}},{header:V(()=>[w("div",Y,[w("span",{class:"method-title",style:A({color:e.color})},C(e.title),5),$(s,{type:n.value,size:"small"},{default:V(()=>[E(C(d.value),1)]),_:1},8,["type"])])]),default:V(()=>{var a,l,s,u,o;return[w("div",ee,["idle"===e.status?(x(),b("div",ae,[$(_,{type:"primary",onClick:v,icon:L(c)},{default:V(()=>[...t[0]||(t[0]=[E(" å¼€å§‹è§£æ ",-1)])]),_:1},8,["icon"]),t[1]||(t[1]=w("p",{class:"hint-text"},"ç‚¹å‡»æŒ‰é’®å¼€å§‹è¿è¡Œæ­¤æ–¹æ³•",-1))])):"parsing"===e.status?(x(),b("div",le,[$(m,{class:"is-loading",size:32},{default:V(()=>[$(L(i))]),_:1}),t[2]||(t[2]=w("p",null,"è§£æä¸­ï¼Œè¯·ç¨å€™...",-1))])):(x(),b(R,{key:2},[w("div",te,[w("div",se,[t[3]||(t[3]=w("span",{class:"label"},"è¯†åˆ«ç« èŠ‚:",-1)),w("span",re,C((null==(a=e.result.chapters)?void 0:a.length)||0),1)]),w("div",ue,[t[4]||(t[4]=w("span",{class:"label"},"æ€»å­—æ•°:",-1)),w("span",ce,C((o=(null==(l=e.result.statistics)?void 0:l.total_words)||0,o>=1e4?`${(o/1e4).toFixed(1)}ä¸‡`:o.toString())),1)]),w("div",ie,[t[5]||(t[5]=w("span",{class:"label"},"è€—æ—¶:",-1)),w("span",oe,C((null==(s=e.result.performance)?void 0:s.elapsed_formatted)||"-"),1)]),e.accuracy?(x(),b("div",ne,[t[6]||(t[6]=w("span",{class:"label"},"F1åˆ†æ•°:",-1)),w("span",{class:j(["value f1-score",(u=e.accuracy.f1_score,u>=.9?"excellent":u>=.7?"good":u>=.5?"fair":"poor")])},C((100*e.accuracy.f1_score).toFixed(1))+"% ",3)])):z("",!0)]),w("div",de,[w("div",ve,[t[7]||(t[7]=w("span",null,"ç« èŠ‚åˆ—è¡¨",-1)),$(_,{size:"small",text:"",onClick:p},{default:V(()=>[E(C(r.value?"æ”¶èµ·":"å±•å¼€å…¨éƒ¨"),1)]),_:1})]),e.result.success?(x(),b("div",{key:1,class:j(["chapters-container",{collapsed:!r.value}])},[(x(!0),b(R,null,T(e.result.chapters,a=>(x(),F(K,{key:a.id,chapter:a,"ground-truth":e.groundTruth,level:0},null,8,["chapter","ground-truth"]))),128))],2)):(x(),b("div",pe,[$(h,{title:e.result.error||"è§£æå¤±è´¥",type:"error",closable:!1},null,8,["title"])]))])],64))])]}),_:1})}}}),[["__scopeId","data-v-a93d47bb"]]),me={class:"card-header"},he={key:1,class:"action-buttons"},fe={class:"card-body"},ye={key:0,class:"empty-state"},ge={key:1,class:"editing-area"},ke={class:"template-selector mb-3"},be={class:"editable-list"},xe={key:2,class:"display-area"},we={class:"chapter-count"},ze={class:"chapters-container"},je=r(y({__name:"GroundTruthCard",props:{modelValue:{},documentId:{},availableResults:{}},emits:["update:modelValue","save"],setup(e,{emit:a}){const l=e,t=a,s=I(!1),r=I([]),c=I(""),i=()=>{s.value=!0,l.modelValue?r.value=h(l.modelValue):r.value=[]},v=()=>{s.value=!1,r.value=[],c.value=""},p=()=>{if(0===r.value.length)return void n.warning("è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªç« èŠ‚");const e=r.value.map((e,a)=>({id:`gt_${a}`,level:e.level,title:e.title,para_start_idx:0,para_end_idx:0,word_count:0,preview_text:"",auto_selected:!1,skip_recommended:!1,children:[]}));t("update:modelValue",e),t("save",e),s.value=!1},_=e=>{if("manual"===e)return void(r.value=[]);if(!l.availableResults||!l.availableResults[e])return void n.warning("è¯¥æ–¹æ³•çš„ç»“æœä¸å¯ç”¨");const a=l.availableResults[e];a.success&&a.chapters?(r.value=h(a.chapters),n.success(`å·²åŠ è½½${a.method_name}çš„ç»“æœ`)):n.error("è¯¥æ–¹æ³•è§£æå¤±è´¥")},m=()=>{r.value.push({title:"",level:1})},h=e=>{const a=[],l=e=>{for(const t of e)a.push({title:t.title,level:t.level}),t.children&&t.children.length>0&&l(t.children)};return l(e),a},f=e=>{if(!e)return 0;let a=0;const l=e=>{for(const t of e)a++,t.children&&t.children.length>0&&l(t.children)};return l(e),a};return(a,l)=>{const t=u,n=U,h=o,y=D,g=W,k=d,j=S;return x(),F(j,{class:"ground-truth-card"},{header:V(()=>[w("div",me,[l[3]||(l[3]=w("span",{class:"title"},"âœ… æ­£ç¡®ç­”æ¡ˆï¼ˆäººå·¥æ ‡æ³¨ï¼‰",-1)),s.value?(x(),b("div",he,[$(t,{size:"small",onClick:v},{default:V(()=>[...l[1]||(l[1]=[E("å–æ¶ˆ",-1)])]),_:1}),$(t,{size:"small",type:"success",onClick:p},{default:V(()=>[...l[2]||(l[2]=[E("ä¿å­˜",-1)])]),_:1})])):(x(),F(t,{key:0,size:"small",type:"primary",onClick:i},{default:V(()=>[E(C(e.modelValue?"ç¼–è¾‘æ ‡æ³¨":"å¼€å§‹æ ‡æ³¨"),1)]),_:1}))])]),default:V(()=>[w("div",fe,[e.modelValue||s.value?s.value?(x(),b("div",ge,[$(h,{title:"æ ‡æ³¨è¯´æ˜",type:"info",closable:!1,class:"mb-3"},{default:V(()=>[...l[5]||(l[5]=[w("p",null,"è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªæ–¹æ³•çš„ç»“æœä½œä¸ºåŸºç¡€ï¼Œç„¶åè°ƒæ•´ç« èŠ‚åˆ—è¡¨ã€‚",-1),w("p",null,"æ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹ç« èŠ‚ã€‚",-1)])]),_:1}),w("div",ke,[l[6]||(l[6]=w("span",null,"åŸºäºæ–¹æ³•ç»“æœ:",-1)),$(g,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value=e),placeholder:"é€‰æ‹©æ–¹æ³•",onChange:_},{default:V(()=>{var a,l,t,s,r,u,c,i,o,n;return[(null==(l=null==(a=e.availableResults)?void 0:a.gemini)?void 0:l.success)?(x(),F(y,{key:0,label:"Gemini AIè§£æå™¨",value:"gemini"})):z("",!0),(null==(s=null==(t=e.availableResults)?void 0:t.docx_native)?void 0:s.success)?(x(),F(y,{key:1,label:"Wordå¤§çº²çº§åˆ«è¯†åˆ«",value:"docx_native"})):z("",!0),(null==(u=null==(r=e.availableResults)?void 0:r.toc_exact)?void 0:u.success)?(x(),F(y,{key:2,label:"ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)",value:"toc_exact"})):z("",!0),(null==(i=null==(c=e.availableResults)?void 0:c.azure)?void 0:i.success)?(x(),F(y,{key:3,label:"Azure Form Recognizer",value:"azure"})):z("",!0),(null==(n=null==(o=e.availableResults)?void 0:o.llm_level)?void 0:n.success)?(x(),F(y,{key:4,label:"LLMæ™ºèƒ½å±‚çº§åˆ†æ",value:"llm_level"})):z("",!0),$(y,{label:"æ‰‹åŠ¨åˆ›å»º",value:"manual"})]}),_:1},8,["modelValue"])]),w("div",be,[$(t,{size:"small",onClick:m,class:"mb-2"},{default:V(()=>[...l[7]||(l[7]=[E(" + æ·»åŠ ç« èŠ‚ ",-1)])]),_:1}),(x(!0),b(R,null,T(r.value,(e,a)=>(x(),b("div",{key:a,class:"editable-chapter"},[$(k,{modelValue:e.title,"onUpdate:modelValue":a=>e.title=a,placeholder:"ç« èŠ‚æ ‡é¢˜",size:"small"},{prepend:V(()=>[$(g,{modelValue:e.level,"onUpdate:modelValue":a=>e.level=a,style:{width:"80px"},size:"small"},{default:V(()=>[$(y,{label:"L1",value:1}),$(y,{label:"L2",value:2}),$(y,{label:"L3",value:3})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),$(t,{size:"small",type:"danger",text:"",onClick:e=>(e=>{r.value.splice(e,1)})(a)},{default:V(()=>[...l[8]||(l[8]=[E(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])]))),128))])])):(x(),b("div",xe,[w("div",we," å…± "+C(f(e.modelValue))+" ä¸ªç« èŠ‚ ",1),w("div",ze,[(x(!0),b(R,null,T(e.modelValue,e=>(x(),F(K,{key:e.id,chapter:e,level:0},null,8,["chapter"]))),128))])])):(x(),b("div",ye,[$(n,{description:"å°šæœªæ ‡æ³¨æ­£ç¡®ç­”æ¡ˆ"},{default:V(()=>[$(t,{type:"primary",onClick:i},{default:V(()=>[...l[4]||(l[4]=[E("å¼€å§‹æ ‡æ³¨",-1)])]),_:1})]),_:1})]))])]),_:1})}}}),[["__scopeId","data-v-1442b13a"]]),Ce={class:"parser-comparison"},Fe={class:"upload-section"},Ve={key:0,class:"selected-file"},$e={key:0,class:"smart-result-section"},Le={class:"smart-result-header"},Re={class:"method-info"},Te={class:"elapsed"},Ae={key:0,class:"key-sections"},Ie={class:"section-tags"},Ee={key:0,class:"section-item"},Ge={key:1,class:"section-item"},Me={key:2,class:"section-item"},Se={class:"chapters-tree"},We={class:"chapter-node"},De={class:"chapter-title"},Ue={key:1,class:"doc-info"},Pe={key:2,class:"comparison-grid"},Be={key:3,class:"accuracy-section"},qe={class:"best-method-summary"},He={class:"history-section"},Ne={class:"section-header"},Oe={key:0},Je={key:1,class:"text-muted"},Qe={key:1,class:"chapter-count"},Xe={key:3,class:"text-muted"},Ze={key:1,class:"chapter-count"},Ke={key:3,class:"text-muted"},Ye={key:1,class:"chapter-count"},ea={key:3,class:"text-muted"},aa={key:1,class:"chapter-count"},la={key:3,class:"text-muted"},ta={key:1,class:"chapter-count"},sa={key:3,class:"text-muted"},ra={key:0},ua={style:{"font-size":"12px","margin-top":"4px",color:"#606266"}},ca={key:1,class:"text-muted"},ia={key:0,class:"empty-state"},oa=r(y({__name:"ParserComparison",setup(e){const l=I(),t=I(null),s=I(!1),r=I(!1),c=I(""),i=I(null),d=I(null),y=I(null),k=I(null),A=I(null),W=I(!1),D=I([]),J=I({gemini:"idle",docx_native:"idle",toc_exact:"idle",azure:"idle",llm_level:"idle"}),Q=e=>{t.value=e.raw},X=async()=>{var e,a;if(t.value){s.value=!0;try{const e=await O.uploadDocument(t.value),a=e.data||e;if(!a||!a.success)return n.error((null==a?void 0:a.error)||"æ–‡ä»¶ä¸Šä¼ å¤±è´¥"),void(s.value=!1);c.value=a.document_id,i.value=a.document_info,d.value={toc_exact:{success:!1,chapters:[],method_name:"ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)",performance:{elapsed:0,elapsed_formatted:"-"}},azure:{success:!1,chapters:[],method_name:"Azure Form Recognizer",performance:{elapsed:0,elapsed_formatted:"-"}},docx_native:{success:!1,chapters:[],method_name:"Wordå¤§çº²çº§åˆ«è¯†åˆ«",performance:{elapsed:0,elapsed_formatted:"-"}},gemini:{success:!1,chapters:[],method_name:"Gemini AIè§£æå™¨",performance:{elapsed:0,elapsed_formatted:"-"}},llm_level:{success:!1,chapters:[],method_name:"LLMæ™ºèƒ½å±‚çº§åˆ†æ",performance:{elapsed:0,elapsed_formatted:"-"}}},J.value={gemini:"idle",docx_native:"idle",toc_exact:"idle",azure:"idle",llm_level:"idle"},y.value=null,k.value=null,n.success('æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼è¯·ç‚¹å‡»å„æ–¹æ³•çš„"å¼€å§‹è§£æ"æŒ‰é’®'),s.value=!1}catch(l){n.error((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.error)||l.message||"ä¸Šä¼ å¤±è´¥"),s.value=!1}}else n.warning("è¯·å…ˆé€‰æ‹©æ–‡ä»¶")},Z=async()=>{var e,a;if(c.value){r.value=!0,A.value=null;try{const e=await O.parseSmart(c.value,{classify:!0}),a=e.data||e;a.success&&a.result?(A.value=a.result,n.success(`æ™ºèƒ½è§£æå®Œæˆï¼ä½¿ç”¨æ–¹æ³•: ${a.result.method_used}`)):n.error(`æ™ºèƒ½è§£æå¤±è´¥: ${a.error||"æœªçŸ¥é”™è¯¯"}`)}catch(l){n.error((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.error)||l.message||"æ™ºèƒ½è§£æå¤±è´¥")}finally{r.value=!1}}else n.error("è¯·å…ˆä¸Šä¼ æ–‡ä»¶")},K=g(()=>{var e;if(!(null==(e=A.value)?void 0:e.chapters))return[];const a=e=>e.map(e=>({...e,label:e.title,children:e.children?a(e.children):[]}));return a(A.value.chapters)}),Y=e=>({invitation:"æŠ•æ ‡é‚€è¯·",bidder_notice:"æŠ•æ ‡äººé¡»çŸ¥",evaluation:"è¯„æ ‡åŠæ³•",contract_terms:"åˆåŒæ¡æ¬¾",contract_content:"åˆåŒå†…å®¹",business_response:"å•†åŠ¡åº”ç­”",technical_spec:"æŠ€æœ¯è§„èŒƒ",appendix:"é™„ä»¶",other:"å…¶ä»–"}[e]||e),ee=async e=>{var a,l;if(c.value){J.value[e]="parsing";try{const a=await O.parseSingleMethod(c.value,e),l=a.data||a;l.success&&l.result?(d.value&&(d.value[e]=l.result),J.value[e]=l.result.success?"success":"error",l.result.success?n.success(`${l.result.method_name} è§£æå®Œæˆï¼`):n.error(`${l.result.method_name} è§£æå¤±è´¥: ${l.result.error||"æœªçŸ¥é”™è¯¯"}`),le()):(J.value[e]="error",n.error(`è§£æå¤±è´¥: ${l.error||"æœªçŸ¥é”™è¯¯"}`))}catch(t){J.value[e]="error",n.error((null==(l=null==(a=t.response)?void 0:a.data)?void 0:l.error)||t.message||"è§£æå¤±è´¥")}}else n.error("è¯·å…ˆä¸Šä¼ æ–‡ä»¶")},ae=async e=>{if(c.value)try{const a=await O.saveGroundTruth(c.value,e,"user");a.success&&(k.value=a.accuracy,n.success("æ ‡æ³¨å·²ä¿å­˜ï¼Œå‡†ç¡®ç‡å·²è®¡ç®—"))}catch(a){n.error("ä¿å­˜å¤±è´¥")}else n.error("æ²¡æœ‰å½“å‰æ–‡æ¡£")},le=async()=>{try{const e=await O.getHistory({limit:50});D.value=e.tests}catch(e){n.error("åŠ è½½å†å²è®°å½•å¤±è´¥")}},te=async()=>{await le(),W.value=!0},se=g(()=>{if(!k.value||!d.value)return[];return[{key:"gemini",name:"Gemini AIè§£æå™¨"},{key:"docx_native",name:"Wordå¤§çº²çº§åˆ«è¯†åˆ«"},{key:"toc_exact",name:"ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)"},{key:"azure",name:"Azure Form Recognizer"},{key:"llm_level",name:"LLMæ™ºèƒ½å±‚çº§åˆ†æ"}].filter(({key:e})=>d.value[e]).map(({key:e,name:a})=>{var l,t,s,r,u,c,i;return{method:a,precision:(null==(l=k.value[e])?void 0:l.precision)||0,recall:(null==(t=k.value[e])?void 0:t.recall)||0,f1:(null==(s=k.value[e])?void 0:s.f1_score)||0,detected:(null==(u=null==(r=d.value[e])?void 0:r.chapters)?void 0:u.length)||0,elapsed:(null==(i=null==(c=d.value[e])?void 0:c.performance)?void 0:i.elapsed_formatted)||"-",is_best:k.value.best_method===e}})}),re=e=>e>=.9?"score-excellent":e>=.7?"score-good":e>=.5?"score-fair":"score-poor",ue=()=>{var e;return{toc_exact:"ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)",azure:"Azure Form Recognizer",docx_native:"Wordå¤§çº²çº§åˆ«è¯†åˆ«",gemini:"Gemini AIè§£æå™¨",llm_level:"LLMæ™ºèƒ½å±‚çº§åˆ†æ"}[null==(e=k.value)?void 0:e.best_method]||"æœªçŸ¥"};return G(async()=>{await le()}),(e,g)=>{const I=u,G=P,ce=h,ie=M,oe=m,ne=S,de=q,ve=B,pe=N,me=H,he=o,fe=U;return x(),b("div",Ce,[$(L(f),{title:"ğŸ“Š ç›®å½•è§£ææ–¹æ³•å¯¹æ¯”å·¥å…·"},{extra:V(()=>[$(I,{onClick:te,type:"text"},{default:V(()=>[...g[6]||(g[6]=[E("å†å²è®°å½•",-1)])]),_:1})]),default:V(()=>{var e,u,o,m,h;return[w("div",Fe,[$(G,{ref_key:"uploadRef",ref:l,"auto-upload":!1,"on-change":Q,"show-file-list":!1,accept:".docx"},{default:V(()=>[$(I,{type:"primary",icon:L(v)},{default:V(()=>[...g[7]||(g[7]=[E("é€‰æ‹©æ ‡ä¹¦æ–‡æ¡£ (.docx)",-1)])]),_:1},8,["icon"])]),_:1},512),t.value?(x(),b("span",Ve," å·²é€‰æ‹©: "+C(t.value.name),1)):z("",!0),$(I,{onClick:X,loading:s.value,disabled:!t.value,type:"success"},{default:V(()=>[...g[8]||(g[8]=[E(" å¼€å§‹è§£æå¯¹æ¯” ",-1)])]),_:1},8,["loading","disabled"]),$(ce,{direction:"vertical"}),$(I,{onClick:Z,loading:r.value,disabled:!c.value,type:"warning"},{default:V(()=>[...g[9]||(g[9]=[E(" ğŸ§  æ™ºèƒ½è¯†åˆ« ",-1)])]),_:1},8,["loading","disabled"])]),A.value?(x(),b("div",$e,[$(ne,{shadow:"hover"},{header:V(()=>{var e;return[w("div",Le,[g[10]||(g[10]=w("span",{class:"title"},"ğŸ§  æ™ºèƒ½è¯†åˆ«ç»“æœ",-1)),w("div",Re,[$(ie,{type:"primary"},{default:V(()=>[E(C(A.value.method_used),1)]),_:1}),A.value.fallback_from?(x(),F(ie,{key:0,type:"warning"},{default:V(()=>[E(" å›é€€è‡ª: "+C(A.value.fallback_from),1)]),_:1})):z("",!0),A.value.fallback_reason?(x(),F(ie,{key:1,type:"info"},{default:V(()=>[E(C(A.value.fallback_reason),1)]),_:1})):z("",!0),w("span",Te,"è€—æ—¶: "+C((null==(e=A.value.performance)?void 0:e.elapsed_formatted)||"-"),1)])])]}),default:V(()=>{var e,a,l,t;return[A.value.key_sections?(x(),b("div",Ae,[g[14]||(g[14]=w("h4",null,"ğŸ“Œ å…³é”®åŒºåŸŸ",-1)),w("div",Ie,[(null==(e=A.value.key_sections.business_response)?void 0:e.length)?(x(),b("div",Ee,[$(ie,{type:"primary",effect:"dark"},{default:V(()=>[...g[11]||(g[11]=[E("å•†åŠ¡åº”ç­”æ¨¡æ¿",-1)])]),_:1}),(x(!0),b(R,null,T(A.value.key_sections.business_response,e=>(x(),b("span",{key:e,class:"section-title"},C(e),1))),128))])):z("",!0),(null==(a=A.value.key_sections.technical_spec)?void 0:a.length)?(x(),b("div",Ge,[$(ie,{type:"success",effect:"dark"},{default:V(()=>[...g[12]||(g[12]=[E("æŠ€æœ¯è§„èŒƒ",-1)])]),_:1}),(x(!0),b(R,null,T(A.value.key_sections.technical_spec,e=>(x(),b("span",{key:e,class:"section-title"},C(e),1))),128))])):z("",!0),(null==(l=A.value.key_sections.contract_content)?void 0:l.length)?(x(),b("div",Me,[$(ie,{type:"warning",effect:"dark"},{default:V(()=>[...g[13]||(g[13]=[E("åˆåŒå†…å®¹",-1)])]),_:1}),(x(!0),b(R,null,T(A.value.key_sections.contract_content,e=>(x(),b("span",{key:e,class:"section-title"},C(e),1))),128))])):z("",!0)])])):z("",!0),w("div",Se,[w("h4",null,"ğŸ“š ç« èŠ‚ç»“æ„ (å…± "+C((null==(t=A.value.chapters)?void 0:t.length)||0)+" ä¸ªä¸€çº§ç« èŠ‚)",1),$(oe,{data:K.value,props:{label:"label",children:"children"},"default-expand-all":"","expand-on-click-node":!1},{default:V(({node:e,data:a})=>{return[w("span",We,[w("span",De,C(a.title),1),a.chapter_type?(x(),F(ie,{key:0,type:(l=a.chapter_type,{invitation:"info",bidder_notice:"info",evaluation:"",contract_terms:"",contract_content:"warning",business_response:"primary",technical_spec:"success",appendix:"info",other:"info"}[l]||"info"),size:"small"},{default:V(()=>[E(C(Y(a.chapter_type)),1)]),_:2},1032,["type"])):z("",!0)])];var l}),_:1},8,["data"])])]}),_:1})])):z("",!0),i.value?(x(),b("div",Ue,[$(ve,{column:4,border:""},{default:V(()=>[$(de,{label:"æ–‡ä»¶å"},{default:V(()=>[E(C(i.value.filename),1)]),_:1}),$(de,{label:"æ€»æ®µè½æ•°"},{default:V(()=>[E(C(i.value.total_paragraphs),1)]),_:1}),$(de,{label:"ç›®å½•æ£€æµ‹"},{default:V(()=>[$(ie,{type:i.value.has_toc?"success":"warning"},{default:V(()=>[E(C(i.value.has_toc?`âœ“ æ£€æµ‹åˆ° (${i.value.toc_items_count}é¡¹)`:"âœ— æœªæ£€æµ‹åˆ°"),1)]),_:1},8,["type"])]),_:1}),$(de,{label:"ä¸Šä¼ æ—¶é—´"},{default:V(()=>[E(C(i.value.upload_time||"-"),1)]),_:1})]),_:1})])):z("",!0),d.value?(x(),b("div",Pe,[d.value.gemini?(x(),F(_e,{key:0,title:"æ–¹æ³•1: Gemini AIè§£æå™¨",result:d.value.gemini,"ground-truth":y.value,accuracy:null==(e=k.value)?void 0:e.gemini,status:J.value.gemini,color:"#FF6D00",onStart:g[0]||(g[0]=e=>ee("gemini"))},null,8,["result","ground-truth","accuracy","status"])):z("",!0),d.value.docx_native?(x(),F(_e,{key:1,title:"æ–¹æ³•2: Wordå¤§çº²çº§åˆ«è¯†åˆ«",result:d.value.docx_native,"ground-truth":y.value,accuracy:null==(u=k.value)?void 0:u.docx_native,status:J.value.docx_native,color:"#9C27B0",onStart:g[1]||(g[1]=e=>ee("docx_native"))},null,8,["result","ground-truth","accuracy","status"])):z("",!0),d.value.toc_exact?(x(),F(_e,{key:2,title:"æ–¹æ³•3: ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)",result:d.value.toc_exact,"ground-truth":y.value,accuracy:null==(o=k.value)?void 0:o.toc_exact,status:J.value.toc_exact,color:"#F56C6C",onStart:g[2]||(g[2]=e=>ee("toc_exact"))},null,8,["result","ground-truth","accuracy","status"])):z("",!0),d.value.azure?(x(),F(_e,{key:3,title:"æ–¹æ³•4: Azure Form Recognizer",result:d.value.azure,"ground-truth":y.value,accuracy:null==(m=k.value)?void 0:m.azure,status:J.value.azure,color:"#00B7C3",onStart:g[3]||(g[3]=e=>ee("azure"))},null,8,["result","ground-truth","accuracy","status"])):z("",!0),d.value.llm_level?(x(),F(_e,{key:4,title:"æ–¹æ³•5: LLMæ™ºèƒ½å±‚çº§åˆ†æ",result:d.value.llm_level,"ground-truth":y.value,accuracy:null==(h=k.value)?void 0:h.llm_level,status:J.value.llm_level,color:"#10B981",onStart:g[4]||(g[4]=e=>ee("llm_level"))},null,8,["result","ground-truth","accuracy","status"])):z("",!0),$(je,{modelValue:y.value,"onUpdate:modelValue":g[5]||(g[5]=e=>y.value=e),"document-id":c.value,"available-results":d.value,onSave:ae},null,8,["modelValue","document-id","available-results"])])):z("",!0),k.value?(x(),b("div",Be,[g[16]||(g[16]=w("h3",null,"å‡†ç¡®ç‡å¯¹æ¯”",-1)),$(me,{data:se.value,border:"",stripe:""},{default:V(()=>[$(pe,{prop:"method",label:"è§£ææ–¹æ³•",width:"180"}),$(pe,{prop:"precision",label:"ç²¾ç¡®ç‡ (P)",width:"120"},{default:V(({row:e})=>[w("span",{class:j(re(e.precision))},C((100*e.precision).toFixed(1))+"% ",3)]),_:1}),$(pe,{prop:"recall",label:"å¬å›ç‡ (R)",width:"120"},{default:V(({row:e})=>[w("span",{class:j(re(e.recall))},C((100*e.recall).toFixed(1))+"% ",3)]),_:1}),$(pe,{prop:"f1",label:"F1åˆ†æ•°",width:"120"},{default:V(({row:e})=>{return[$(ie,{type:(a=e.f1,a>=.9?"success":a>=.7?"":a>=.5?"warning":"danger"),effect:"dark"},{default:V(()=>[E(C((100*e.f1).toFixed(1))+"% ",1)]),_:2},1032,["type"])];var a}),_:1}),$(pe,{prop:"detected",label:"è¯†åˆ«æ•°é‡",width:"100"}),$(pe,{prop:"elapsed",label:"è€—æ—¶",width:"100"}),$(pe,{label:"çŠ¶æ€",width:"100"},{default:V(({row:e})=>[e.is_best?(x(),F(ie,{key:0,type:"success"},{default:V(()=>[...g[15]||(g[15]=[E("æœ€ä½³",-1)])]),_:1})):z("",!0)]),_:1})]),_:1},8,["data"]),w("div",qe,[$(he,{title:`æœ€ä½³æ–¹æ³•: ${ue()} (F1åˆ†æ•°: ${(100*k.value.best_f1_score).toFixed(1)}%)`,type:"success",closable:!1},null,8,["title"])])])):z("",!0),w("div",He,[w("div",Ne,[g[18]||(g[18]=w("h3",null,"ğŸ“‹ å†å²è§£æè®°å½•",-1)),$(I,{onClick:le,icon:L(v),size:"small"},{default:V(()=>[...g[17]||(g[17]=[E(" åˆ·æ–°åˆ—è¡¨ ",-1)])]),_:1},8,["icon"])]),$(me,{data:D.value,border:"",stripe:""},{default:V(()=>[$(pe,{label:"æ–‡ä»¶å","min-width":"200"},{default:V(({row:e})=>{return[(l=e.filename,!l||l.length<3||"docx"===l||".docx"===l||l.startsWith("-.")||l.startsWith("--")?(x(),b("span",Je,[$(L(a),null,{default:V(()=>[$(L(p))]),_:1}),g[19]||(g[19]=E(" (æ–‡ä»¶åå·²æŸå) ",-1))])):(x(),b("span",Oe,C(e.filename),1)))];var l}),_:1}),$(pe,{prop:"upload_time",label:"è§£ææ—¶é—´",width:"180"}),$(pe,{label:"ç›®å½•æ£€æµ‹",width:"100",align:"center"},{default:V(({row:e})=>[$(ie,{type:e.has_toc?"success":"info",size:"small"},{default:V(()=>[E(C(e.has_toc?`âœ“ (${e.toc_items_count})`:"âœ—"),1)]),_:2},1032,["type"])]),_:1}),$(pe,{label:"ç²¾ç¡®åŒ¹é…",width:"110",align:"center"},{default:V(({row:e})=>[e.toc_exact_f1?(x(),b("div",{key:0,class:j(re(e.toc_exact_f1))},C((100*e.toc_exact_f1).toFixed(1))+"% ",3)):e.toc_exact_chapters_count>0?(x(),b("div",Qe,C(e.toc_exact_chapters_count)+"ç«  ",1)):void 0!==e.toc_exact_elapsed&&null!==e.toc_exact_elapsed?(x(),F(ie,{key:2,type:"danger",size:"small"},{default:V(()=>[...g[20]||(g[20]=[E("å¤±è´¥",-1)])]),_:1})):(x(),b("span",Xe,"-"))]),_:1}),$(pe,{label:"Azure",width:"110",align:"center"},{default:V(({row:e})=>[e.azure_f1?(x(),b("div",{key:0,class:j(re(e.azure_f1))},C((100*e.azure_f1).toFixed(1))+"% ",3)):e.azure_chapters_count>0?(x(),b("div",Ze,C(e.azure_chapters_count)+"ç«  ",1)):void 0!==e.azure_elapsed&&null!==e.azure_elapsed?(x(),F(ie,{key:2,type:"danger",size:"small"},{default:V(()=>[...g[21]||(g[21]=[E("å¤±è´¥",-1)])]),_:1})):(x(),b("span",Ke,"-"))]),_:1}),$(pe,{label:"Wordå¤§çº²",width:"110",align:"center"},{default:V(({row:e})=>[e.docx_native_f1?(x(),b("div",{key:0,class:j(re(e.docx_native_f1))},C((100*e.docx_native_f1).toFixed(1))+"% ",3)):e.docx_native_chapters_count>0?(x(),b("div",Ye,C(e.docx_native_chapters_count)+"ç«  ",1)):void 0!==e.docx_native_elapsed&&null!==e.docx_native_elapsed?(x(),F(ie,{key:2,type:"danger",size:"small"},{default:V(()=>[...g[22]||(g[22]=[E("å¤±è´¥",-1)])]),_:1})):(x(),b("span",ea,"-"))]),_:1}),$(pe,{label:"Gemini AI",width:"110",align:"center"},{default:V(({row:e})=>[e.gemini_f1?(x(),b("div",{key:0,class:j(re(e.gemini_f1))},C((100*e.gemini_f1).toFixed(1))+"% ",3)):e.gemini_chapters_count>0?(x(),b("div",aa,C(e.gemini_chapters_count)+"ç«  ",1)):void 0!==e.gemini_elapsed&&null!==e.gemini_elapsed?(x(),F(ie,{key:2,type:"danger",size:"small"},{default:V(()=>[...g[23]||(g[23]=[E("å¤±è´¥",-1)])]),_:1})):(x(),b("span",la,"-"))]),_:1}),$(pe,{label:"LLMå±‚çº§",width:"110",align:"center"},{default:V(({row:e})=>[e.llm_level_f1?(x(),b("div",{key:0,class:j(re(e.llm_level_f1))},C((100*e.llm_level_f1).toFixed(1))+"% ",3)):e.llm_level_chapters_count>0?(x(),b("div",ta,C(e.llm_level_chapters_count)+"ç«  ",1)):void 0!==e.llm_level_elapsed&&null!==e.llm_level_elapsed?(x(),F(ie,{key:2,type:"danger",size:"small"},{default:V(()=>[...g[24]||(g[24]=[E("å¤±è´¥",-1)])]),_:1})):(x(),b("span",sa,"-"))]),_:1}),$(pe,{label:"æœ€ä½³æ–¹æ³•",width:"150",align:"center"},{default:V(({row:e})=>[e.best_method?(x(),b("div",ra,[$(ie,{type:e.best_f1_score>=.9?"success":"primary",effect:"dark"},{default:V(()=>{return[E(C((a=e.best_method,{toc_exact:"ç²¾ç¡®åŒ¹é…",azure:"Azure",docx_native:"Wordå¤§çº²",gemini:"Gemini AI",llm_level:"LLMå±‚çº§"}[a]||a)),1)];var a}),_:2},1032,["type"]),w("div",ua," F1: "+C((100*e.best_f1_score).toFixed(1))+"% ",1)])):(x(),b("span",ca,"æœªæ ‡æ³¨"))]),_:1}),$(pe,{label:"æ“ä½œ",width:"150",fixed:"right",align:"center"},{default:V(({row:e})=>[$(I,{size:"small",type:"primary",onClick:a=>(async e=>{var a,l,t,s,r,u,o,v,p,_,m,h,f,g,b;try{const x=await O.getTestResult(e);x.success&&(c.value=x.document_id,i.value=x.document_info,d.value=x.results,y.value=x.ground_truth||null,k.value=x.accuracy||null,J.value={gemini:(null==(l=null==(a=d.value)?void 0:a.gemini)?void 0:l.success)?"success":(null==(t=d.value)?void 0:t.gemini)?"error":"idle",docx_native:(null==(r=null==(s=d.value)?void 0:s.docx_native)?void 0:r.success)?"success":(null==(u=d.value)?void 0:u.docx_native)?"error":"idle",toc_exact:(null==(v=null==(o=d.value)?void 0:o.toc_exact)?void 0:v.success)?"success":(null==(p=d.value)?void 0:p.toc_exact)?"error":"idle",azure:(null==(m=null==(_=d.value)?void 0:_.azure)?void 0:m.success)?"success":(null==(h=d.value)?void 0:h.azure)?"error":"idle",llm_level:(null==(g=null==(f=d.value)?void 0:f.llm_level)?void 0:g.success)?"success":(null==(b=d.value)?void 0:b.llm_level)?"error":"idle"},W.value=!1,n.success("æµ‹è¯•ç»“æœå·²åŠ è½½"))}catch(x){n.error("åŠ è½½å¤±è´¥")}})(e.document_id)},{default:V(()=>[...g[25]||(g[25]=[E(" æŸ¥çœ‹ ",-1)])]),_:1},8,["onClick"]),$(I,{size:"small",type:"danger",onClick:a=>(async e=>{try{await _.confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡æµ‹è¯•è®°å½•å—ï¼Ÿ","ç¡®è®¤åˆ é™¤",{type:"warning"}),await O.deleteTest(e),n.success("å·²åˆ é™¤"),te()}catch(a){}})(e.document_id)},{default:V(()=>[...g[26]||(g[26]=[E(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),0===D.value.length?(x(),b("div",ia,[$(fe,{description:"æš‚æ— å†å²è§£æè®°å½•"})])):z("",!0)])]}),_:1})])}}}),[["__scopeId","data-v-fc2216b2"]]);export{oa as default};
