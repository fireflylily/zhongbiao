import{k as e,e as l,t as a,v as t,bE as s,q as r,d as u,aq as c,p as o,E as i,i as n,O as d,y as v,a7 as p,G as m}from"./index.js";/* empty css                                                        *//* empty css                             *//* empty css                    *//* empty css                     *//* empty css               *//* empty css                                                                          *//* empty css                */import{C as _}from"./Card-DjWxEjgq.js";/* empty css                */import{am as h,ao as f,cc as y,au as g,ar as x,aw as b,av as k,aB as w,aC as z,aq as j,as as C,ax as F,ay as V,az as L,aA as R,aT as T,an as $,aD as A,aX as I}from"./editor-CkQC1Uq_.js";/* empty css                   *//* empty css                */import{E}from"./index-Jdk3-L3D.js";import{E as G}from"./index-CPjPqG6g.js";import{E as M,a as S}from"./el-select-DZeK41OH.js";import{E as W}from"./index-CwbKUXgF.js";import{E as D}from"./index-ZlCuKr4C.js";import{E as U,a as P}from"./index-BgJNQ3LN.js";import{E as B,a as H}from"./index-Ct_FIOsr.js";import"./index-DO7-lxyV.js";import"./strings-DygAwr0H.js";import"./index-C1LY3n9p.js";import"./toNumber-B_atpBHU.js";import"./_baseFindIndex-BTqrMG7V.js";import"./_baseIteratee-CwtmDzoV.js";import"./index-DzllSHb7.js";import"./cloneDeep-syPWYH98.js";import"./flatMap-D7uPVDtS.js";import"./map-B_SlaKiF.js";import"./_baseEach-V8knk74i.js";import"./index-lVhqCxeU.js";import"./raf-BZHcGSIv.js";const q={uploadDocument:function(l){const a=new FormData;return a.append("file",l),e.post("/parser-debug/upload",a,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5})},getTestResult:function(l){return e.get(`/parser-debug/${l}`)},saveGroundTruth:function(l,a,t="user"){return e.post(`/parser-debug/${l}/ground-truth`,{chapters:a,annotator:t})},getHistory:function(l){return e.get("/parser-debug/history",{params:l})},deleteTest:function(l){return e.delete(`/parser-debug/${l}/delete`)},exportReport:function(l){return e.get(`/parser-debug/export/${l}`,{responseType:"blob"})},parseSingleMethod:function(l,a){return e.post(`/parser-debug/parse-single/${l}/${a}`,{},{timeout:3e5})}},O={class:"chapter-title"},N={class:"chapter-info"},Q={class:"word-count"},X={key:0,class:"children"},Z=r(h({__name:"ChapterTreeItem",props:{chapter:{},groundTruth:{},level:{}},setup(e){const r=e,u=f(()=>{if(!r.groundTruth)return"unknown";const e=l=>{const a=[];for(const t of l)a.push(t),t.children&&t.children.length>0&&a.push(...e(t.children));return a},l=e(r.groundTruth),a=e=>e.replace(/^\d+\.\s*/,"").replace(/^\d+\.\d+\s*/,"").replace(/^ç¬¬[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å\d]+[ç« èŠ‚éƒ¨åˆ†]\s*/,"").replace(/\s+/g,"").toLowerCase(),t=a(r.chapter.title);return l.some(e=>a(e.title)===t)?"matched":"false_positive"}),c=f(()=>({"status-matched":"matched"===u.value,"status-false-positive":"false_positive"===u.value,"status-unknown":"unknown"===u.value}));return(r,o)=>{const i=l,n=y("ChapterTreeItem",!0);return x(),g("div",{class:"chapter-tree-item",style:T({paddingLeft:20*e.level+"px"})},[b("div",{class:w(["chapter-row",c.value])},[b("span",{class:w(["level-badge",`level-${e.chapter.level}`])}," L"+z(e.chapter.level),3),b("span",O,z(e.chapter.title),1),b("span",N,[b("span",Q,z(e.chapter.word_count)+"å­—",1),"matched"===u.value?(x(),j(i,{key:0,class:"match-icon success"},{default:C(()=>[F(V(a))]),_:1})):"missed"===u.value?(x(),j(i,{key:1,class:"match-icon error"},{default:C(()=>[F(V(t))]),_:1})):"false_positive"===u.value?(x(),j(i,{key:2,class:"match-icon warning"},{default:C(()=>[F(V(s))]),_:1})):k("",!0)])],2),e.chapter.children&&e.chapter.children.length>0?(x(),g("div",X,[(x(!0),g(L,null,R(e.chapter.children,l=>(x(),j(n,{key:l.id,chapter:l,"ground-truth":e.groundTruth,level:e.level+1},null,8,["chapter","ground-truth","level"]))),128))])):k("",!0)],4)}}}),[["__scopeId","data-v-3e35c8e3"]]),J={class:"card-header"},K={class:"card-body"},Y={key:0,class:"start-parse-section"},ee={key:1,class:"loading-section"},le={class:"statistics"},ae={class:"stat-item"},te={class:"value"},se={class:"stat-item"},re={class:"value"},ue={class:"stat-item"},ce={class:"value"},oe={key:0,class:"stat-item"},ie={class:"chapter-list"},ne={class:"chapter-list-header"},de={key:0,class:"error-message"},ve=r(h({__name:"MethodCard",props:{title:{},result:{},groundTruth:{},accuracy:{},color:{default:"#409EFF"},status:{default:"idle"}},emits:["start"],setup(e,{emit:a}){const t=e,s=a,r=$(!1),n=f(()=>"idle"===t.status?"info":"parsing"===t.status?"warning":"error"!==t.status&&t.result.success?t.accuracy?t.accuracy.f1_score>=.9?"success":t.accuracy.f1_score>=.7?"":t.accuracy.f1_score>=.5?"warning":"danger":"success":"danger"),d=f(()=>"idle"===t.status?"æœªå¼€å§‹":"parsing"===t.status?"è§£æä¸­...":"error"===t.status?"å¤±è´¥":t.result.success?t.accuracy?`F1: ${(100*t.accuracy.f1_score).toFixed(1)}%`:"æˆåŠŸ":"å¤±è´¥"),v=()=>{s("start")},p=()=>{r.value=!r.value};return(a,t)=>{const s=E,m=u,_=l,h=i,f=G;return x(),j(f,{class:"method-card","body-style":{padding:"0"}},{header:C(()=>[b("div",J,[b("span",{class:"method-title",style:T({color:e.color})},z(e.title),5),F(s,{type:n.value,size:"small"},{default:C(()=>[A(z(d.value),1)]),_:1},8,["type"])])]),default:C(()=>{var l,a,s,u,i;return[b("div",K,["idle"===e.status?(x(),g("div",Y,[F(m,{type:"primary",onClick:v,icon:V(c)},{default:C(()=>[...t[0]||(t[0]=[A(" å¼€å§‹è§£æ ",-1)])]),_:1},8,["icon"]),t[1]||(t[1]=b("p",{class:"hint-text"},"ç‚¹å‡»æŒ‰é’®å¼€å§‹è¿è¡Œæ­¤æ–¹æ³•",-1))])):"parsing"===e.status?(x(),g("div",ee,[F(_,{class:"is-loading",size:32},{default:C(()=>[F(V(o))]),_:1}),t[2]||(t[2]=b("p",null,"è§£æä¸­ï¼Œè¯·ç¨å€™...",-1))])):(x(),g(L,{key:2},[b("div",le,[b("div",ae,[t[3]||(t[3]=b("span",{class:"label"},"è¯†åˆ«ç« èŠ‚:",-1)),b("span",te,z((null==(l=e.result.chapters)?void 0:l.length)||0),1)]),b("div",se,[t[4]||(t[4]=b("span",{class:"label"},"æ€»å­—æ•°:",-1)),b("span",re,z((i=(null==(a=e.result.statistics)?void 0:a.total_words)||0,i>=1e4?`${(i/1e4).toFixed(1)}ä¸‡`:i.toString())),1)]),b("div",ue,[t[5]||(t[5]=b("span",{class:"label"},"è€—æ—¶:",-1)),b("span",ce,z((null==(s=e.result.performance)?void 0:s.elapsed_formatted)||"-"),1)]),e.accuracy?(x(),g("div",oe,[t[6]||(t[6]=b("span",{class:"label"},"F1åˆ†æ•°:",-1)),b("span",{class:w(["value f1-score",(u=e.accuracy.f1_score,u>=.9?"excellent":u>=.7?"good":u>=.5?"fair":"poor")])},z((100*e.accuracy.f1_score).toFixed(1))+"% ",3)])):k("",!0)]),b("div",ie,[b("div",ne,[t[7]||(t[7]=b("span",null,"ç« èŠ‚åˆ—è¡¨",-1)),F(m,{size:"small",text:"",onClick:p},{default:C(()=>[A(z(r.value?"æ”¶èµ·":"å±•å¼€å…¨éƒ¨"),1)]),_:1})]),e.result.success?(x(),g("div",{key:1,class:w(["chapters-container",{collapsed:!r.value}])},[(x(!0),g(L,null,R(e.result.chapters,l=>(x(),j(Z,{key:l.id,chapter:l,"ground-truth":e.groundTruth,level:0},null,8,["chapter","ground-truth"]))),128))],2)):(x(),g("div",de,[F(h,{title:e.result.error||"è§£æå¤±è´¥",type:"error",closable:!1},null,8,["title"])]))])],64))])]}),_:1})}}}),[["__scopeId","data-v-a93d47bb"]]),pe={class:"card-header"},me={key:1,class:"action-buttons"},_e={class:"card-body"},he={key:0,class:"empty-state"},fe={key:1,class:"editing-area"},ye={class:"template-selector mb-3"},ge={class:"editable-list"},xe={key:2,class:"display-area"},be={class:"chapter-count"},ke={class:"chapters-container"},we=r(h({__name:"GroundTruthCard",props:{modelValue:{},documentId:{},availableResults:{}},emits:["update:modelValue","save"],setup(e,{emit:l}){const a=e,t=l,s=$(!1),r=$([]),c=$(""),o=()=>{s.value=!0,a.modelValue?r.value=h(a.modelValue):r.value=[]},v=()=>{s.value=!1,r.value=[],c.value=""},p=()=>{if(0===r.value.length)return void n.warning("è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªç« èŠ‚");const e=r.value.map((e,l)=>({id:`gt_${l}`,level:e.level,title:e.title,para_start_idx:0,para_end_idx:0,word_count:0,preview_text:"",auto_selected:!1,skip_recommended:!1,children:[]}));t("update:modelValue",e),t("save",e),s.value=!1},m=e=>{if("manual"===e)return void(r.value=[]);if(!a.availableResults||!a.availableResults[e])return void n.warning("è¯¥æ–¹æ³•çš„ç»“æœä¸å¯ç”¨");const l=a.availableResults[e];l.success&&l.chapters?(r.value=h(l.chapters),n.success(`å·²åŠ è½½${l.method_name}çš„ç»“æœ`)):n.error("è¯¥æ–¹æ³•è§£æå¤±è´¥")},_=()=>{r.value.push({title:"",level:1})},h=e=>{const l=[],a=e=>{for(const t of e)l.push({title:t.title,level:t.level}),t.children&&t.children.length>0&&a(t.children)};return a(e),l},f=e=>{if(!e)return 0;let l=0;const a=e=>{for(const t of e)l++,t.children&&t.children.length>0&&a(t.children)};return a(e),l};return(l,a)=>{const t=u,n=W,h=i,y=S,w=M,V=d,T=G;return x(),j(T,{class:"ground-truth-card"},{header:C(()=>[b("div",pe,[a[3]||(a[3]=b("span",{class:"title"},"âœ… æ­£ç¡®ç­”æ¡ˆï¼ˆäººå·¥æ ‡æ³¨ï¼‰",-1)),s.value?(x(),g("div",me,[F(t,{size:"small",onClick:v},{default:C(()=>[...a[1]||(a[1]=[A("å–æ¶ˆ",-1)])]),_:1}),F(t,{size:"small",type:"success",onClick:p},{default:C(()=>[...a[2]||(a[2]=[A("ä¿å­˜",-1)])]),_:1})])):(x(),j(t,{key:0,size:"small",type:"primary",onClick:o},{default:C(()=>[A(z(e.modelValue?"ç¼–è¾‘æ ‡æ³¨":"å¼€å§‹æ ‡æ³¨"),1)]),_:1}))])]),default:C(()=>[b("div",_e,[e.modelValue||s.value?s.value?(x(),g("div",fe,[F(h,{title:"æ ‡æ³¨è¯´æ˜",type:"info",closable:!1,class:"mb-3"},{default:C(()=>[...a[5]||(a[5]=[b("p",null,"è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªæ–¹æ³•çš„ç»“æœä½œä¸ºåŸºç¡€ï¼Œç„¶åè°ƒæ•´ç« èŠ‚åˆ—è¡¨ã€‚",-1),b("p",null,"æ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹ç« èŠ‚ã€‚",-1)])]),_:1}),b("div",ye,[a[6]||(a[6]=b("span",null,"åŸºäºæ–¹æ³•ç»“æœ:",-1)),F(w,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),placeholder:"é€‰æ‹©æ–¹æ³•",onChange:m},{default:C(()=>{var l,a,t,s,r,u,c,o,i,n;return[(null==(a=null==(l=e.availableResults)?void 0:l.gemini)?void 0:a.success)?(x(),j(y,{key:0,label:"Gemini AIè§£æå™¨",value:"gemini"})):k("",!0),(null==(s=null==(t=e.availableResults)?void 0:t.docx_native)?void 0:s.success)?(x(),j(y,{key:1,label:"Wordå¤§çº²çº§åˆ«è¯†åˆ«",value:"docx_native"})):k("",!0),(null==(u=null==(r=e.availableResults)?void 0:r.toc_exact)?void 0:u.success)?(x(),j(y,{key:2,label:"ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)",value:"toc_exact"})):k("",!0),(null==(o=null==(c=e.availableResults)?void 0:c.azure)?void 0:o.success)?(x(),j(y,{key:3,label:"Azure Form Recognizer",value:"azure"})):k("",!0),(null==(n=null==(i=e.availableResults)?void 0:i.llm_level)?void 0:n.success)?(x(),j(y,{key:4,label:"LLMæ™ºèƒ½å±‚çº§åˆ†æ",value:"llm_level"})):k("",!0),F(y,{label:"æ‰‹åŠ¨åˆ›å»º",value:"manual"})]}),_:1},8,["modelValue"])]),b("div",ge,[F(t,{size:"small",onClick:_,class:"mb-2"},{default:C(()=>[...a[7]||(a[7]=[A(" + æ·»åŠ ç« èŠ‚ ",-1)])]),_:1}),(x(!0),g(L,null,R(r.value,(e,l)=>(x(),g("div",{key:l,class:"editable-chapter"},[F(V,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,placeholder:"ç« èŠ‚æ ‡é¢˜",size:"small"},{prepend:C(()=>[F(w,{modelValue:e.level,"onUpdate:modelValue":l=>e.level=l,style:{width:"80px"},size:"small"},{default:C(()=>[F(y,{label:"L1",value:1}),F(y,{label:"L2",value:2}),F(y,{label:"L3",value:3})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),F(t,{size:"small",type:"danger",text:"",onClick:e=>(e=>{r.value.splice(e,1)})(l)},{default:C(()=>[...a[8]||(a[8]=[A(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])]))),128))])])):(x(),g("div",xe,[b("div",be," å…± "+z(f(e.modelValue))+" ä¸ªç« èŠ‚ ",1),b("div",ke,[(x(!0),g(L,null,R(e.modelValue,e=>(x(),j(Z,{key:e.id,chapter:e,level:0},null,8,["chapter"]))),128))])])):(x(),g("div",he,[F(n,{description:"å°šæœªæ ‡æ³¨æ­£ç¡®ç­”æ¡ˆ"},{default:C(()=>[F(t,{type:"primary",onClick:o},{default:C(()=>[...a[4]||(a[4]=[A("å¼€å§‹æ ‡æ³¨",-1)])]),_:1})]),_:1})]))])]),_:1})}}}),[["__scopeId","data-v-1442b13a"]]),ze={class:"parser-comparison"},je={class:"upload-section"},Ce={key:0,class:"selected-file"},Fe={key:0,class:"doc-info"},Ve={key:1,class:"comparison-grid"},Le={key:2,class:"accuracy-section"},Re={class:"best-method-summary"},Te={class:"history-section"},$e={class:"section-header"},Ae={key:0},Ie={key:1,class:"text-muted"},Ee={key:1,class:"chapter-count"},Ge={key:3,class:"text-muted"},Me={key:1,class:"chapter-count"},Se={key:3,class:"text-muted"},We={key:1,class:"chapter-count"},De={key:3,class:"text-muted"},Ue={key:1,class:"chapter-count"},Pe={key:3,class:"text-muted"},Be={key:1,class:"chapter-count"},He={key:3,class:"text-muted"},qe={key:0},Oe={style:{"font-size":"12px","margin-top":"4px",color:"#606266"}},Ne={key:1,class:"text-muted"},Qe={key:0,class:"empty-state"},Xe=r(h({__name:"ParserComparison",setup(e){const a=$(),t=$(null),s=$(!1),r=$(""),c=$(null),o=$(null),d=$(null),h=$(null),y=$(!1),L=$([]),R=$({gemini:"idle",docx_native:"idle",toc_exact:"idle",azure:"idle",llm_level:"idle"}),T=e=>{t.value=e.raw},G=async()=>{var e,l;if(t.value){s.value=!0;try{const e=await q.uploadDocument(t.value),l=e.data||e;if(!l||!l.success)return n.error((null==l?void 0:l.error)||"æ–‡ä»¶ä¸Šä¼ å¤±è´¥"),void(s.value=!1);r.value=l.document_id,c.value=l.document_info,o.value={toc_exact:{success:!1,chapters:[],method_name:"ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)",performance:{elapsed:0,elapsed_formatted:"-"}},azure:{success:!1,chapters:[],method_name:"Azure Form Recognizer",performance:{elapsed:0,elapsed_formatted:"-"}},docx_native:{success:!1,chapters:[],method_name:"Wordå¤§çº²çº§åˆ«è¯†åˆ«",performance:{elapsed:0,elapsed_formatted:"-"}},gemini:{success:!1,chapters:[],method_name:"Gemini AIè§£æå™¨",performance:{elapsed:0,elapsed_formatted:"-"}},llm_level:{success:!1,chapters:[],method_name:"LLMæ™ºèƒ½å±‚çº§åˆ†æ",performance:{elapsed:0,elapsed_formatted:"-"}}},R.value={gemini:"idle",docx_native:"idle",toc_exact:"idle",azure:"idle",llm_level:"idle"},d.value=null,h.value=null,n.success('æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼è¯·ç‚¹å‡»å„æ–¹æ³•çš„"å¼€å§‹è§£æ"æŒ‰é’®'),s.value=!1}catch(a){n.error((null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.error)||a.message||"ä¸Šä¼ å¤±è´¥"),s.value=!1}}else n.warning("è¯·å…ˆé€‰æ‹©æ–‡ä»¶")},M=async e=>{var l,a;if(r.value){R.value[e]="parsing";try{const l=await q.parseSingleMethod(r.value,e),a=l.data||l;a.success&&a.result?(o.value&&(o.value[e]=a.result),R.value[e]=a.result.success?"success":"error",a.result.success?n.success(`${a.result.method_name} è§£æå®Œæˆï¼`):n.error(`${a.result.method_name} è§£æå¤±è´¥: ${a.result.error||"æœªçŸ¥é”™è¯¯"}`),O()):(R.value[e]="error",n.error(`è§£æå¤±è´¥: ${a.error||"æœªçŸ¥é”™è¯¯"}`))}catch(t){R.value[e]="error",n.error((null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.error)||t.message||"è§£æå¤±è´¥")}}else n.error("è¯·å…ˆä¸Šä¼ æ–‡ä»¶")},S=async e=>{if(r.value)try{const l=await q.saveGroundTruth(r.value,e,"user");l.success&&(h.value=l.accuracy,n.success("æ ‡æ³¨å·²ä¿å­˜ï¼Œå‡†ç¡®ç‡å·²è®¡ç®—"))}catch(l){n.error("ä¿å­˜å¤±è´¥")}else n.error("æ²¡æœ‰å½“å‰æ–‡æ¡£")},O=async()=>{try{const e=await q.getHistory({limit:50});L.value=e.tests}catch(e){n.error("åŠ è½½å†å²è®°å½•å¤±è´¥")}},N=async()=>{await O(),y.value=!0},Q=f(()=>{if(!h.value||!o.value)return[];return[{key:"gemini",name:"Gemini AIè§£æå™¨"},{key:"docx_native",name:"Wordå¤§çº²çº§åˆ«è¯†åˆ«"},{key:"toc_exact",name:"ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)"},{key:"azure",name:"Azure Form Recognizer"},{key:"llm_level",name:"LLMæ™ºèƒ½å±‚çº§åˆ†æ"}].filter(({key:e})=>o.value[e]).map(({key:e,name:l})=>{var a,t,s,r,u,c,i;return{method:l,precision:(null==(a=h.value[e])?void 0:a.precision)||0,recall:(null==(t=h.value[e])?void 0:t.recall)||0,f1:(null==(s=h.value[e])?void 0:s.f1_score)||0,detected:(null==(u=null==(r=o.value[e])?void 0:r.chapters)?void 0:u.length)||0,elapsed:(null==(i=null==(c=o.value[e])?void 0:c.performance)?void 0:i.elapsed_formatted)||"-",is_best:h.value.best_method===e}})}),X=e=>e>=.9?"score-excellent":e>=.7?"score-good":e>=.5?"score-fair":"score-poor",Z=()=>{var e;return{toc_exact:"ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)",azure:"Azure Form Recognizer",docx_native:"Wordå¤§çº²çº§åˆ«è¯†åˆ«",gemini:"Gemini AIè§£æå™¨",llm_level:"LLMæ™ºèƒ½å±‚çº§åˆ†æ"}[null==(e=h.value)?void 0:e.best_method]||"æœªçŸ¥"};return I(async()=>{await O()}),(e,f)=>{const $=u,I=D,J=P,K=E,Y=U,ee=H,le=B,ae=i,te=W;return x(),g("div",ze,[F(V(_),{title:"ğŸ“Š ç›®å½•è§£ææ–¹æ³•å¯¹æ¯”å·¥å…·"},{extra:C(()=>[F($,{onClick:N,type:"text"},{default:C(()=>[...f[6]||(f[6]=[A("å†å²è®°å½•",-1)])]),_:1})]),default:C(()=>{var e,u,i,_,E;return[b("div",je,[F(I,{ref_key:"uploadRef",ref:a,"auto-upload":!1,"on-change":T,"show-file-list":!1,accept:".docx"},{default:C(()=>[F($,{type:"primary",icon:V(v)},{default:C(()=>[...f[7]||(f[7]=[A("é€‰æ‹©æ ‡ä¹¦æ–‡æ¡£ (.docx)",-1)])]),_:1},8,["icon"])]),_:1},512),t.value?(x(),g("span",Ce," å·²é€‰æ‹©: "+z(t.value.name),1)):k("",!0),F($,{onClick:G,loading:s.value,disabled:!t.value,type:"success"},{default:C(()=>[...f[8]||(f[8]=[A(" å¼€å§‹è§£æå¯¹æ¯” ",-1)])]),_:1},8,["loading","disabled"])]),c.value?(x(),g("div",Fe,[F(Y,{column:4,border:""},{default:C(()=>[F(J,{label:"æ–‡ä»¶å"},{default:C(()=>[A(z(c.value.filename),1)]),_:1}),F(J,{label:"æ€»æ®µè½æ•°"},{default:C(()=>[A(z(c.value.total_paragraphs),1)]),_:1}),F(J,{label:"ç›®å½•æ£€æµ‹"},{default:C(()=>[F(K,{type:c.value.has_toc?"success":"warning"},{default:C(()=>[A(z(c.value.has_toc?`âœ“ æ£€æµ‹åˆ° (${c.value.toc_items_count}é¡¹)`:"âœ— æœªæ£€æµ‹åˆ°"),1)]),_:1},8,["type"])]),_:1}),F(J,{label:"ä¸Šä¼ æ—¶é—´"},{default:C(()=>[A(z(c.value.upload_time||"-"),1)]),_:1})]),_:1})])):k("",!0),o.value?(x(),g("div",Ve,[o.value.gemini?(x(),j(ve,{key:0,title:"æ–¹æ³•1: Gemini AIè§£æå™¨",result:o.value.gemini,"ground-truth":d.value,accuracy:null==(e=h.value)?void 0:e.gemini,status:R.value.gemini,color:"#FF6D00",onStart:f[0]||(f[0]=e=>M("gemini"))},null,8,["result","ground-truth","accuracy","status"])):k("",!0),o.value.docx_native?(x(),j(ve,{key:1,title:"æ–¹æ³•2: Wordå¤§çº²çº§åˆ«è¯†åˆ«",result:o.value.docx_native,"ground-truth":d.value,accuracy:null==(u=h.value)?void 0:u.docx_native,status:R.value.docx_native,color:"#9C27B0",onStart:f[1]||(f[1]=e=>M("docx_native"))},null,8,["result","ground-truth","accuracy","status"])):k("",!0),o.value.toc_exact?(x(),j(ve,{key:2,title:"æ–¹æ³•3: ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)",result:o.value.toc_exact,"ground-truth":d.value,accuracy:null==(i=h.value)?void 0:i.toc_exact,status:R.value.toc_exact,color:"#F56C6C",onStart:f[2]||(f[2]=e=>M("toc_exact"))},null,8,["result","ground-truth","accuracy","status"])):k("",!0),o.value.azure?(x(),j(ve,{key:3,title:"æ–¹æ³•4: Azure Form Recognizer",result:o.value.azure,"ground-truth":d.value,accuracy:null==(_=h.value)?void 0:_.azure,status:R.value.azure,color:"#00B7C3",onStart:f[3]||(f[3]=e=>M("azure"))},null,8,["result","ground-truth","accuracy","status"])):k("",!0),o.value.llm_level?(x(),j(ve,{key:4,title:"æ–¹æ³•5: LLMæ™ºèƒ½å±‚çº§åˆ†æ",result:o.value.llm_level,"ground-truth":d.value,accuracy:null==(E=h.value)?void 0:E.llm_level,status:R.value.llm_level,color:"#10B981",onStart:f[4]||(f[4]=e=>M("llm_level"))},null,8,["result","ground-truth","accuracy","status"])):k("",!0),F(we,{modelValue:d.value,"onUpdate:modelValue":f[5]||(f[5]=e=>d.value=e),"document-id":r.value,"available-results":o.value,onSave:S},null,8,["modelValue","document-id","available-results"])])):k("",!0),h.value?(x(),g("div",Le,[f[10]||(f[10]=b("h3",null,"å‡†ç¡®ç‡å¯¹æ¯”",-1)),F(le,{data:Q.value,border:"",stripe:""},{default:C(()=>[F(ee,{prop:"method",label:"è§£ææ–¹æ³•",width:"180"}),F(ee,{prop:"precision",label:"ç²¾ç¡®ç‡ (P)",width:"120"},{default:C(({row:e})=>[b("span",{class:w(X(e.precision))},z((100*e.precision).toFixed(1))+"% ",3)]),_:1}),F(ee,{prop:"recall",label:"å¬å›ç‡ (R)",width:"120"},{default:C(({row:e})=>[b("span",{class:w(X(e.recall))},z((100*e.recall).toFixed(1))+"% ",3)]),_:1}),F(ee,{prop:"f1",label:"F1åˆ†æ•°",width:"120"},{default:C(({row:e})=>{return[F(K,{type:(l=e.f1,l>=.9?"success":l>=.7?"":l>=.5?"warning":"danger"),effect:"dark"},{default:C(()=>[A(z((100*e.f1).toFixed(1))+"% ",1)]),_:2},1032,["type"])];var l}),_:1}),F(ee,{prop:"detected",label:"è¯†åˆ«æ•°é‡",width:"100"}),F(ee,{prop:"elapsed",label:"è€—æ—¶",width:"100"}),F(ee,{label:"çŠ¶æ€",width:"100"},{default:C(({row:e})=>[e.is_best?(x(),j(K,{key:0,type:"success"},{default:C(()=>[...f[9]||(f[9]=[A("æœ€ä½³",-1)])]),_:1})):k("",!0)]),_:1})]),_:1},8,["data"]),b("div",Re,[F(ae,{title:`æœ€ä½³æ–¹æ³•: ${Z()} (F1åˆ†æ•°: ${(100*h.value.best_f1_score).toFixed(1)}%)`,type:"success",closable:!1},null,8,["title"])])])):k("",!0),b("div",Te,[b("div",$e,[f[12]||(f[12]=b("h3",null,"ğŸ“‹ å†å²è§£æè®°å½•",-1)),F($,{onClick:O,icon:V(v),size:"small"},{default:C(()=>[...f[11]||(f[11]=[A(" åˆ·æ–°åˆ—è¡¨ ",-1)])]),_:1},8,["icon"])]),F(le,{data:L.value,border:"",stripe:""},{default:C(()=>[F(ee,{label:"æ–‡ä»¶å","min-width":"200"},{default:C(({row:e})=>{return[(a=e.filename,!a||a.length<3||"docx"===a||".docx"===a||a.startsWith("-.")||a.startsWith("--")?(x(),g("span",Ie,[F(V(l),null,{default:C(()=>[F(V(p))]),_:1}),f[13]||(f[13]=A(" (æ–‡ä»¶åå·²æŸå) ",-1))])):(x(),g("span",Ae,z(e.filename),1)))];var a}),_:1}),F(ee,{prop:"upload_time",label:"è§£ææ—¶é—´",width:"180"}),F(ee,{label:"ç›®å½•æ£€æµ‹",width:"100",align:"center"},{default:C(({row:e})=>[F(K,{type:e.has_toc?"success":"info",size:"small"},{default:C(()=>[A(z(e.has_toc?`âœ“ (${e.toc_items_count})`:"âœ—"),1)]),_:2},1032,["type"])]),_:1}),F(ee,{label:"ç²¾ç¡®åŒ¹é…",width:"110",align:"center"},{default:C(({row:e})=>[e.toc_exact_f1?(x(),g("div",{key:0,class:w(X(e.toc_exact_f1))},z((100*e.toc_exact_f1).toFixed(1))+"% ",3)):e.toc_exact_chapters_count>0?(x(),g("div",Ee,z(e.toc_exact_chapters_count)+"ç«  ",1)):void 0!==e.toc_exact_elapsed&&null!==e.toc_exact_elapsed?(x(),j(K,{key:2,type:"danger",size:"small"},{default:C(()=>[...f[14]||(f[14]=[A("å¤±è´¥",-1)])]),_:1})):(x(),g("span",Ge,"-"))]),_:1}),F(ee,{label:"Azure",width:"110",align:"center"},{default:C(({row:e})=>[e.azure_f1?(x(),g("div",{key:0,class:w(X(e.azure_f1))},z((100*e.azure_f1).toFixed(1))+"% ",3)):e.azure_chapters_count>0?(x(),g("div",Me,z(e.azure_chapters_count)+"ç«  ",1)):void 0!==e.azure_elapsed&&null!==e.azure_elapsed?(x(),j(K,{key:2,type:"danger",size:"small"},{default:C(()=>[...f[15]||(f[15]=[A("å¤±è´¥",-1)])]),_:1})):(x(),g("span",Se,"-"))]),_:1}),F(ee,{label:"Wordå¤§çº²",width:"110",align:"center"},{default:C(({row:e})=>[e.docx_native_f1?(x(),g("div",{key:0,class:w(X(e.docx_native_f1))},z((100*e.docx_native_f1).toFixed(1))+"% ",3)):e.docx_native_chapters_count>0?(x(),g("div",We,z(e.docx_native_chapters_count)+"ç«  ",1)):void 0!==e.docx_native_elapsed&&null!==e.docx_native_elapsed?(x(),j(K,{key:2,type:"danger",size:"small"},{default:C(()=>[...f[16]||(f[16]=[A("å¤±è´¥",-1)])]),_:1})):(x(),g("span",De,"-"))]),_:1}),F(ee,{label:"Gemini AI",width:"110",align:"center"},{default:C(({row:e})=>[e.gemini_f1?(x(),g("div",{key:0,class:w(X(e.gemini_f1))},z((100*e.gemini_f1).toFixed(1))+"% ",3)):e.gemini_chapters_count>0?(x(),g("div",Ue,z(e.gemini_chapters_count)+"ç«  ",1)):void 0!==e.gemini_elapsed&&null!==e.gemini_elapsed?(x(),j(K,{key:2,type:"danger",size:"small"},{default:C(()=>[...f[17]||(f[17]=[A("å¤±è´¥",-1)])]),_:1})):(x(),g("span",Pe,"-"))]),_:1}),F(ee,{label:"LLMå±‚çº§",width:"110",align:"center"},{default:C(({row:e})=>[e.llm_level_f1?(x(),g("div",{key:0,class:w(X(e.llm_level_f1))},z((100*e.llm_level_f1).toFixed(1))+"% ",3)):e.llm_level_chapters_count>0?(x(),g("div",Be,z(e.llm_level_chapters_count)+"ç«  ",1)):void 0!==e.llm_level_elapsed&&null!==e.llm_level_elapsed?(x(),j(K,{key:2,type:"danger",size:"small"},{default:C(()=>[...f[18]||(f[18]=[A("å¤±è´¥",-1)])]),_:1})):(x(),g("span",He,"-"))]),_:1}),F(ee,{label:"æœ€ä½³æ–¹æ³•",width:"150",align:"center"},{default:C(({row:e})=>[e.best_method?(x(),g("div",qe,[F(K,{type:e.best_f1_score>=.9?"success":"primary",effect:"dark"},{default:C(()=>{return[A(z((l=e.best_method,{toc_exact:"ç²¾ç¡®åŒ¹é…",azure:"Azure",docx_native:"Wordå¤§çº²",gemini:"Gemini AI",llm_level:"LLMå±‚çº§"}[l]||l)),1)];var l}),_:2},1032,["type"]),b("div",Oe," F1: "+z((100*e.best_f1_score).toFixed(1))+"% ",1)])):(x(),g("span",Ne,"æœªæ ‡æ³¨"))]),_:1}),F(ee,{label:"æ“ä½œ",width:"150",fixed:"right",align:"center"},{default:C(({row:e})=>[F($,{size:"small",type:"primary",onClick:l=>(async e=>{var l,a,t,s,u,i,v,p,m,_,f,g,x,b,k;try{const w=await q.getTestResult(e);w.success&&(r.value=w.document_id,c.value=w.document_info,o.value=w.results,d.value=w.ground_truth||null,h.value=w.accuracy||null,R.value={gemini:(null==(a=null==(l=o.value)?void 0:l.gemini)?void 0:a.success)?"success":(null==(t=o.value)?void 0:t.gemini)?"error":"idle",docx_native:(null==(u=null==(s=o.value)?void 0:s.docx_native)?void 0:u.success)?"success":(null==(i=o.value)?void 0:i.docx_native)?"error":"idle",toc_exact:(null==(p=null==(v=o.value)?void 0:v.toc_exact)?void 0:p.success)?"success":(null==(m=o.value)?void 0:m.toc_exact)?"error":"idle",azure:(null==(f=null==(_=o.value)?void 0:_.azure)?void 0:f.success)?"success":(null==(g=o.value)?void 0:g.azure)?"error":"idle",llm_level:(null==(b=null==(x=o.value)?void 0:x.llm_level)?void 0:b.success)?"success":(null==(k=o.value)?void 0:k.llm_level)?"error":"idle"},y.value=!1,n.success("æµ‹è¯•ç»“æœå·²åŠ è½½"))}catch(w){n.error("åŠ è½½å¤±è´¥")}})(e.document_id)},{default:C(()=>[...f[19]||(f[19]=[A(" æŸ¥çœ‹ ",-1)])]),_:1},8,["onClick"]),F($,{size:"small",type:"danger",onClick:l=>(async e=>{try{await m.confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡æµ‹è¯•è®°å½•å—ï¼Ÿ","ç¡®è®¤åˆ é™¤",{type:"warning"}),await q.deleteTest(e),n.success("å·²åˆ é™¤"),N()}catch(l){}})(e.document_id)},{default:C(()=>[...f[20]||(f[20]=[A(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),0===L.value.length?(x(),g("div",Qe,[F(te,{description:"æš‚æ— å†å²è§£æè®°å½•"})])):k("",!0)])]}),_:1})])}}}),[["__scopeId","data-v-cac7f9f4"]]);export{Xe as default};
