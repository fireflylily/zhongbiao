import{_ as e}from"./_plugin-vue_export-helper-BZqs1yfm.js";import{a as n,E as a}from"./el-tab-pane-DorCtwCc.js";/* empty css                */import{E as l,a as t}from"./el-form-item-BSZXyn1L.js";/* empty css                 */import{E as s,a as r}from"./el-col-DR3qk7qZ.js";/* empty css               */import{E as o,a as u}from"./el-select-zgwPLghA.js";import"./el-scrollbar-COliMHv4.js";/* empty css                   */import{d as i,r as p,x as d,L as m,c,g as v,B as f,a0 as g,w as y,aA as _,o as x,a6 as j,aB as b,E as h,l as w,k,e as V,F as E,a$ as I,b0 as $}from"./index.js";import"./DocumentPreview.vue_vue_type_style_index_0_scoped_e3ac2352_lang-aAcHzWd0.js";/* empty css                 */import{S as U}from"./SSEStreamViewer-DyLy_mPE.js";import"./el-alert-CXP7XODY.js";import{t as S}from"./tender-CTTmwiee.js";import{E as L}from"./index-ELBiC1Q4.js";import{E as P}from"./index-DzZX4pf4.js";import"./raf-CXOaDqGI.js";import"./strings-DTuDRpJG.js";import"./index-_IbxD8AI.js";import"./omit-Czoq2i9Z.js";import"./_baseClone-DZAH0W8r.js";import"./castArray-pal66jBx.js";const C={class:"tech-proposal"},q={style:{display:"flex","justify-content":"space-between","align-items":"center"}},A={style:{display:"flex","justify-content":"space-between","align-items":"center"}},R={style:{display:"flex",gap:"12px"}},T=e(i({__name:"TechProposal",setup(e){const i=p({projectId:null,proposalType:"integration",requirements:""}),T=p([]),B=p(!1),z=p(0),O=p(""),D=p(null),F=p("outline"),Q=d(()=>i.value.projectId&&i.value.requirements.trim().length>0),G=async()=>{if(Q.value){B.value=!0,z.value=0,O.value="",D.value=null;try{await N(),_.success("技术方案生成完成")}catch(e){_.error("生成失败，请重试")}finally{B.value=!1}}else _.warning("请填写必要信息")},N=async()=>new Promise(e=>{const n=[{progress:25,message:"正在分析技术要求..."},{progress:50,message:"正在生成方案大纲..."},{progress:75,message:"正在完善技术细节..."},{progress:100,message:"生成完成！"}];let a=0;const l=setInterval(()=>{if(a<n.length){const e=n[a];z.value=e.progress,O.value+=`\n[${e.progress}%] ${e.message}`,a++}else clearInterval(l),D.value={outline:"# 技术方案大纲\n\n## 1. 项目概述\n\n### 1.1 项目背景\n本项目旨在构建xxx系统，满足xxx业务需求。\n\n### 1.2 建设目标\n- 提升xxx效率\n- 优化xxx流程\n- 保障xxx安全\n\n## 2. 需求分析\n\n### 2.1 功能需求\n- 核心功能1\n- 核心功能2\n- 扩展功能\n\n### 2.2 性能需求\n- 并发用户数：xxx\n- 响应时间：< 3s\n- 系统可用性：99.9%\n\n## 3. 技术选型\n\n### 3.1 技术栈\n- 前端：Vue 3 + TypeScript\n- 后端：Python Flask\n- 数据库：PostgreSQL\n\n### 3.2 选型理由\n详细说明技术选型的合理性...",architecture:"# 技术架构设计\n\n## 1. 总体架构\n\n采用分层架构设计：\n- 展现层\n- 业务层\n- 数据层\n\n## 2. 系统架构图\n\n```\n┌─────────────┐\n│   用户层    │\n└──────┬──────┘\n       │\n┌──────▼──────┐\n│  前端应用   │\n└──────┬──────┘\n       │\n┌──────▼──────┐\n│   API网关   │\n└──────┬──────┘\n       │\n┌──────▼──────┐\n│  业务服务   │\n└──────┬──────┘\n       │\n┌──────▼──────┐\n│   数据库    │\n└─────────────┘\n```\n\n## 3. 关键技术\n\n### 3.1 高可用设计\n- 负载均衡\n- 服务冗余\n- 故障切换\n\n### 3.2 安全设计\n- 身份认证\n- 权限控制\n- 数据加密",plan:"# 实施计划\n\n## 1. 项目阶段\n\n### 阶段一：需求调研（2周）\n- 用户访谈\n- 需求文档\n- 原型设计\n\n### 阶段二：系统设计（3周）\n- 架构设计\n- 数据库设计\n- 接口设计\n\n### 阶段三：开发实施（12周）\n- 前端开发\n- 后端开发\n- 接口联调\n\n### 阶段四：测试验收（4周）\n- 单元测试\n- 集成测试\n- 用户验收\n\n## 2. 资源配置\n\n### 2.1 人员配置\n- 项目经理：1名\n- 架构师：1名\n- 开发人员：5名\n- 测试人员：2名\n\n## 3. 质量保障\n\n- 代码审查\n- 自动化测试\n- 持续集成",risks:"# 风险评估与应对\n\n## 1. 技术风险\n\n### 1.1 性能风险\n**风险描述**: 系统并发量不足\n**风险等级**: 中\n**应对措施**:\n- 进行压力测试\n- 优化数据库查询\n- 增加缓存机制\n\n### 1.2 安全风险\n**风险描述**: 数据泄露风险\n**风险等级**: 高\n**应对措施**:\n- 实施数据加密\n- 完善权限控制\n- 定期安全审计\n\n## 2. 项目风险\n\n### 2.1 进度风险\n**风险描述**: 项目延期\n**风险等级**: 中\n**应对措施**:\n- 合理安排进度\n- 增加人力投入\n- 及时沟通调整\n\n## 3. 运维风险\n\n- 系统故障应急预案\n- 数据备份恢复策略\n- 7x24技术支持"},e()},700)}),H=()=>{B.value=!1,_.info("已停止生成")},J=()=>{if(!D.value)return;const e=`# 技术方案文档\n\n${D.value.outline}\n\n${D.value.architecture}\n\n${D.value.plan}\n\n${D.value.risks}`,n=new Blob([e],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=`技术方案-${Date.now()}.txt`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a),_.success("导出成功")};return m(()=>{(async()=>{var e;try{const n=await S.getProjects({page:1,page_size:100});T.value=(null==(e=n.data)?void 0:e.items)||[]}catch(n){_.error("加载项目列表失败")}})()}),(e,p)=>{const d=u,m=o,_=t,S=r,N=s,K=h,M=w,W=l,X=L,Y=P,Z=n,ee=a;return x(),c("div",C,[v(X,{shadow:"never"},{header:y(()=>[...p[4]||(p[4]=[V("span",null,"方案配置",-1)])]),default:y(()=>[v(W,{model:i.value,"label-width":"100px"},{default:y(()=>[v(N,{gutter:20},{default:y(()=>[v(S,{span:12},{default:y(()=>[v(_,{label:"项目"},{default:y(()=>[v(m,{modelValue:i.value.projectId,"onUpdate:modelValue":p[0]||(p[0]=e=>i.value.projectId=e),placeholder:"请选择项目",filterable:"",style:{width:"100%"}},{default:y(()=>[(x(!0),c(j,null,b(T.value,e=>(x(),f(d,{key:e.id,label:`${e.project_name} (${e.project_number||"-"})`,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),v(S,{span:12},{default:y(()=>[v(_,{label:"方案类型"},{default:y(()=>[v(m,{modelValue:i.value.proposalType,"onUpdate:modelValue":p[1]||(p[1]=e=>i.value.proposalType=e),style:{width:"100%"}},{default:y(()=>[v(d,{label:"系统集成方案",value:"integration"}),v(d,{label:"软件开发方案",value:"development"}),v(d,{label:"运维服务方案",value:"operation"}),v(d,{label:"云服务方案",value:"cloud"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),v(_,{label:"技术要求"},{default:y(()=>[v(K,{modelValue:i.value.requirements,"onUpdate:modelValue":p[2]||(p[2]=e=>i.value.requirements=e),type:"textarea",rows:4,placeholder:"请输入主要技术要求，AI将基于此生成技术方案大纲"},null,8,["modelValue"])]),_:1}),v(_,null,{default:y(()=>[v(M,{type:"primary",size:"large",disabled:!Q.value,loading:B.value,onClick:G},{default:y(()=>[...p[5]||(p[5]=[k(" 生成技术方案大纲 ",-1)])]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["model"])]),_:1}),B.value?(x(),f(X,{key:0,shadow:"never",style:{"margin-top":"20px"}},{header:y(()=>[V("div",q,[p[6]||(p[6]=V("span",null,"AI正在生成技术方案...",-1)),v(Y,{percentage:z.value,status:100===z.value?"success":void 0,style:{width:"300px"}},null,8,["percentage","status"])])]),default:y(()=>[v(E(U),{content:O.value,"is-streaming":B.value,onStop:H},null,8,["content","is-streaming"])]),_:1})):g("",!0),D.value?(x(),f(X,{key:1,shadow:"never",style:{"margin-top":"20px"}},{header:y(()=>[V("div",A,[p[9]||(p[9]=V("span",null,"技术方案大纲",-1)),V("div",R,[v(M,{type:"success",icon:E(I),onClick:J},{default:y(()=>[...p[7]||(p[7]=[k(" 导出方案 ",-1)])]),_:1},8,["icon"]),v(M,{type:"primary",icon:E($),onClick:G},{default:y(()=>[...p[8]||(p[8]=[k(" 重新生成 ",-1)])]),_:1},8,["icon"])])])]),default:y(()=>[v(ee,{modelValue:F.value,"onUpdate:modelValue":p[3]||(p[3]=e=>F.value=e)},{default:y(()=>[v(Z,{label:"方案大纲",name:"outline"},{default:y(()=>[v(E(U),{content:D.value.outline,"is-streaming":!1,"enable-markdown":!0},null,8,["content"])]),_:1}),v(Z,{label:"技术架构",name:"architecture"},{default:y(()=>[v(E(U),{content:D.value.architecture,"is-streaming":!1,"enable-markdown":!0},null,8,["content"])]),_:1}),v(Z,{label:"实施计划",name:"plan"},{default:y(()=>[v(E(U),{content:D.value.plan,"is-streaming":!1,"enable-markdown":!0},null,8,["content"])]),_:1}),v(Z,{label:"风险评估",name:"risks"},{default:y(()=>[v(E(U),{content:D.value.risks,"is-streaming":!1,"enable-markdown":!0},null,8,["content"])]),_:1})]),_:1},8,["modelValue"])]),_:1})):g("",!0)])}}}),[["__scopeId","data-v-0a89d769"]]);export{T as default};
