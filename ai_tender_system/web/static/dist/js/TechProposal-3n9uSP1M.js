import{a6 as e,T as a,aD as l,aC as t,aB as n,aE as o,a5 as i,aF as s,b5 as r,aL as u,aN as d,p,u as c,h as v,aH as m,aP as f,aO as g,aG as y,bj as h,Z as _,w as b,R as w,P as x,Q as V,n as k,q as j,a9 as S,aa as F,g as C,bZ as E,b_ as M,bC as I,s as P,F as D,D as T,y as z,M as B,E as N,_ as $}from"./index.js";import{E as L}from"./el-tree-D0QGCDvi.js";/* empty css                    */import"./el-text-BgjM2hgy.js";/* empty css                                                                          *//* empty css               *//* empty css                             */import{E as U}from"./el-input-number-ZmcrAUQ9.js";import{E as O}from"./el-divider-BwqaVCRx.js";/* empty css                */import{E as A,a as R}from"./el-select-D-eTZRrd.js";/* empty css                     */import{bA as X,ci as Y,bT as W,am as q,an as H,aI as J,aM as K,aq as G,bu as Z,bC as Q,aw as ee,as as ae,au as le,at as te,av as ne,aA as oe,ay as ie,aR as se,az as re,bE as ue,bD as de,c6 as pe,aX as ce,bU as ve,ar as me,aK as fe,aV as ge,aW as ye,aT as he,aS as _e,aJ as be,aU as we}from"./editor-Bn74SR7L.js";/* empty css                *//* empty css                                                                        */import{S as xe}from"./SSEStreamViewer-Crks4iVO.js";import{D as Ve}from"./DocumentUploader-CDAhai8o.js";import{D as ke}from"./DocumentPreview-CdxU1TCy.js";import{R as je}from"./RichTextEditor-Dk7yJ2TA.js";import{u as Se,H as Fe,S as Ce,a as Ee,d as Me}from"./helpers-DZXkOkrQ.js";import{t as Ie}from"./tender-Bln5F12J.js";import{u as Pe}from"./useProjectDocuments-BatS3Muh.js";import{a as De,E as Te}from"./index-Bo5qvZwH.js";import{E as ze}from"./index-5eWLmnnA.js";import{d as Be}from"./index-D8Hh0SVN.js";import{c as Ne}from"./clamp-D7SwoHnV.js";import{a as $e,E as Le}from"./index-CzNdjNDH.js";import{E as Ue}from"./index-DuHT-hOT.js";import{a as Oe,E as Ae}from"./index-BaI9VdxI.js";import{E as Re}from"./index-CBF-ROjY.js";import"./index-BPPQtfIi.js";import"./index-JcdpKXLm.js";import"./index-BQehA_Vu.js";import"./strings-BtVBUKvn.js";import"./_baseFindIndex-BTqrMG7V.js";import"./_baseIteratee-7DStOeou.js";import"./imageCompressor-CTkRt5bg.js";import"./index-BYEnnAWm.js";import"./cloneDeep-syPWYH98.js";/* empty css                   */import"./directive-BTLPk184.js";import"./index-fvojRq6Z.js";import"./index-BeFbZM6T.js";/* empty css                */import"./index-BhZG3_p9.js";import"./index-BgsmGGfd.js";import"./index-V0dZGEuy.js";import"./index-BmkUgcux.js";import"./flatMap-BTMFBMly.js";import"./map-CiznYGNP.js";import"./_baseEach-CE5vOtW7.js";import"./raf-B6jWGkGX.js";import"./project-CKYizDOQ.js";import"./toNumber-CtKC8bmH.js";const Xe=Symbol("sliderContextKey"),Ye=a({modelValue:{type:i([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:s,inputSize:s,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:i(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:i(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Y,default:"top"},marks:{type:i(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...o(["ariaLabel"])}),We=a=>e(a)||X(a)&&a.every(e),qe={[n]:We,[t]:We,[l]:We},He=a({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Y,default:"top"}}),Je={[n]:a=>e(a)},Ke=(e,a,l)=>{const{disabled:t,min:o,max:i,step:s,showTooltip:p,persistent:c,precision:v,sliderSize:m,formatTooltip:f,emitChange:g,resetSize:y,updateDragging:h}=W(Xe),{tooltip:_,tooltipVisible:b,formatValue:w,displayTooltip:x,hideTooltip:V}=((e,a,l)=>{const t=q(),n=q(!1),o=H(()=>a.value instanceof Function),i=H(()=>o.value&&a.value(e.modelValue)||e.modelValue),s=Be(()=>{l.value&&(n.value=!0)},50),r=Be(()=>{l.value&&(n.value=!1)},50);return{tooltip:t,tooltipVisible:n,formatValue:i,displayTooltip:s,hideTooltip:r}})(e,f,p),k=q(),j=H(()=>(e.modelValue-o.value)/(i.value-o.value)*100+"%"),S=H(()=>e.vertical?{bottom:j.value}:{left:j.value}),F=e=>{t.value||(e.preventDefault(),M(e),window.addEventListener("mousemove",I),window.addEventListener("touchmove",I),window.addEventListener("mouseup",P),window.addEventListener("touchend",P),window.addEventListener("contextmenu",P),k.value.focus())},C=e=>{t.value||(a.newPosition=Number.parseFloat(j.value)+e/(i.value-o.value)*100,D(a.newPosition),g())},E=e=>{let a,l;return e.type.startsWith("touch")?(l=e.touches[0].clientY,a=e.touches[0].clientX):(l=e.clientY,a=e.clientX),{clientX:a,clientY:l}},M=l=>{a.dragging=!0,a.isClick=!0;const{clientX:t,clientY:n}=E(l);e.vertical?a.startY=n:a.startX=t,a.startPosition=Number.parseFloat(j.value),a.newPosition=a.startPosition},I=l=>{if(a.dragging){let t;a.isClick=!1,x(),y();const{clientX:n,clientY:o}=E(l);e.vertical?(a.currentY=o,t=(a.startY-a.currentY)/m.value*100):(a.currentX=n,t=(a.currentX-a.startX)/m.value*100),a.newPosition=a.startPosition+t,D(a.newPosition)}},P=()=>{a.dragging&&(setTimeout(()=>{a.dragging=!1,a.hovering||V(),a.isClick||D(a.newPosition),g()},0),window.removeEventListener("mousemove",I),window.removeEventListener("touchmove",I),window.removeEventListener("mouseup",P),window.removeEventListener("touchend",P),window.removeEventListener("contextmenu",P))},D=async t=>{if(null===t||Number.isNaN(+t))return;t=Ne(t,0,100);const r=Math.floor((i.value-o.value)/s.value),u=r*s.value/(i.value-o.value)*100,d=u+(100-u)/2;let p;if(t<u){const e=u/r,a=Math.round(t/e);p=o.value+a*s.value}else p=t<d?o.value+r*s.value:i.value;p=Number.parseFloat(p.toFixed(v.value)),p!==e.modelValue&&l(n,p),a.dragging||e.modelValue===a.oldValue||(a.oldValue=e.modelValue),await K(),a.dragging&&x(),_.value.updatePopper()};return J(()=>a.dragging,e=>{h(e)}),r(k,"touchstart",F,{passive:!1}),{disabled:t,button:k,tooltip:_,tooltipVisible:b,showTooltip:p,persistent:c,wrapperStyle:S,formatValue:w,handleMouseEnter:()=>{a.hovering=!0,x()},handleMouseLeave:()=>{a.hovering=!1,a.dragging||V()},onButtonDown:F,onKeyDown:e=>{let a=!0;switch(u(e)){case d.left:case d.down:C(-s.value);break;case d.right:case d.up:C(s.value);break;case d.home:t.value||(D(0),g());break;case d.end:t.value||(D(100),g());break;case d.pageDown:C(4*-s.value);break;case d.pageUp:C(4*s.value);break;default:a=!1}a&&e.preventDefault()},setPosition:D}},Ge=G({name:"ElSliderButton"});var Ze=p(G({...Ge,props:He,emits:Je,setup(e,{expose:a,emit:l}){const t=e,n=c("slider"),o=Z({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:t.modelValue}),i=H(()=>!!d.value&&p.value),{disabled:s,button:r,tooltip:u,showTooltip:d,persistent:p,tooltipVisible:m,wrapperStyle:f,formatValue:g,handleMouseEnter:y,handleMouseLeave:h,onButtonDown:_,onKeyDown:b,setPosition:w}=Ke(t,o,l),{hovering:x,dragging:V}=Q(o);return a({onButtonDown:_,onKeyDown:b,setPosition:w,hovering:x,dragging:V}),(e,a)=>(ae(),ee("div",{ref_key:"button",ref:r,class:oe([ie(n).e("button-wrapper"),{hover:ie(x),dragging:ie(V)}]),style:re(ie(f)),tabindex:ie(s)?-1:0,onMouseenter:ie(y),onMouseleave:ie(h),onMousedown:ie(_),onFocus:ie(y),onBlur:ie(h),onKeydown:ie(b)},[le(ie(v),{ref_key:"tooltip",ref:u,visible:ie(m),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!ie(d),persistent:ie(i)},{content:te(()=>[ne("span",null,se(ie(g)),1)]),default:te(()=>[ne("div",{class:oe([ie(n).e("button"),{hover:ie(x),dragging:ie(V)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}}),[["__file","button.vue"]]);var Qe=G({name:"ElSliderMarker",props:a({mark:{type:i([String,Object]),default:void 0}}),setup(e){const a=c("slider"),l=H(()=>ue(e.mark)?e.mark:e.mark.label),t=H(()=>ue(e.mark)?void 0:e.mark.style);return()=>de("div",{class:a.e("marks-text"),style:t.value},l.value)}});const ea=(e,a,o)=>{const{form:i,formItem:s}=m(),r=pe(),u=q(),d=q(),p={firstButton:u,secondButton:d},c=H(()=>e.disabled||(null==i?void 0:i.disabled)||!1),v=H(()=>Math.min(a.firstValue,a.secondValue)),f=H(()=>Math.max(a.firstValue,a.secondValue)),g=H(()=>e.range?100*(f.value-v.value)/(e.max-e.min)+"%":100*(a.firstValue-e.min)/(e.max-e.min)+"%"),y=H(()=>e.range?100*(v.value-e.min)/(e.max-e.min)+"%":"0%"),h=H(()=>e.vertical?{height:e.height}:{}),_=H(()=>e.vertical?{height:g.value,bottom:y.value}:{width:g.value,left:y.value}),b=()=>{if(r.value){const l=r.value.getBoundingClientRect();a.sliderSize=l[e.vertical?"height":"width"]}},w=l=>{const t=(l=>{const t=e.min+l*(e.max-e.min)/100;if(!e.range)return u;let n;return n=Math.abs(v.value-t)<Math.abs(f.value-t)?a.firstValue<a.secondValue?"firstButton":"secondButton":a.firstValue>a.secondValue?"firstButton":"secondButton",p[n]})(l);return t.value.setPosition(l),t},x=e=>{o(n,e),o(t,e)},V=async()=>{await K(),o(l,e.range?[v.value,f.value]:e.modelValue)},k=l=>{var t,n,o,i,s,u;if(c.value||a.dragging)return;b();let d=0;if(e.vertical){const e=null!=(o=null==(n=null==(t=l.touches)?void 0:t.item(0))?void 0:n.clientY)?o:l.clientY;d=(r.value.getBoundingClientRect().bottom-e)/a.sliderSize*100}else{d=((null!=(u=null==(s=null==(i=l.touches)?void 0:i.item(0))?void 0:s.clientX)?u:l.clientX)-r.value.getBoundingClientRect().left)/a.sliderSize*100}return d<0||d>100?void 0:w(d)};return{elFormItem:s,slider:r,firstButton:u,secondButton:d,sliderDisabled:c,minValue:v,maxValue:f,runwayStyle:h,barStyle:_,resetSize:b,setPosition:w,emitChange:V,onSliderWrapperPrevent:e=>{var a,l;((null==(a=p.firstButton.value)?void 0:a.dragging)||(null==(l=p.secondButton.value)?void 0:l.dragging))&&e.preventDefault()},onSliderClick:e=>{k(e)&&V()},onSliderDown:async e=>{const a=k(e);a&&(await K(),a.value.onButtonDown(e))},onSliderMarkerDown:e=>{if(c.value||a.dragging)return;w(e)&&V()},setFirstValue:l=>{a.firstValue=null!=l?l:e.min,x(e.range?[v.value,f.value]:null!=l?l:e.min)},setSecondValue:l=>{a.secondValue=l,e.range&&x([v.value,f.value])}}},aa=G({name:"ElSlider"});const la=b(p(G({...aa,props:Ye,emits:qe,setup(a,{expose:l,emit:o}){const i=a,s=c("slider"),{t:u}=y(),d=Z({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:p,slider:v,firstButton:m,secondButton:b,sliderDisabled:w,minValue:x,maxValue:V,runwayStyle:k,barStyle:j,resetSize:S,emitChange:F,onSliderWrapperPrevent:C,onSliderClick:E,onSliderDown:M,onSliderMarkerDown:I,setFirstValue:P,setSecondValue:D}=ea(i,d,o),{stops:T,getStopStyle:z}=((e,a,l,t)=>({stops:H(()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const n=Math.ceil((e.max-e.min)/e.step),o=100*e.step/(e.max-e.min),i=Array.from({length:n-1}).map((e,a)=>(a+1)*o);return e.range?i.filter(a=>a<100*(l.value-e.min)/(e.max-e.min)||a>100*(t.value-e.min)/(e.max-e.min)):i.filter(l=>l>100*(a.firstValue-e.min)/(e.max-e.min))}),getStopStyle:a=>e.vertical?{bottom:`${a}%`}:{left:`${a}%`}}))(i,d,x,V),{inputId:B,isLabeledByFormItem:N}=h(i,{formItemContext:p}),$=_(),L=H(()=>i.inputSize||$.value),O=H(()=>i.ariaLabel||u("el.slider.defaultLabel",{min:i.min,max:i.max})),A=H(()=>i.range?i.rangeStartLabel||u("el.slider.defaultRangeStartLabel"):O.value),R=H(()=>i.formatValueText?i.formatValueText(de.value):`${de.value}`),Y=H(()=>i.rangeEndLabel||u("el.slider.defaultRangeEndLabel")),W=H(()=>i.formatValueText?i.formatValueText(pe.value):`${pe.value}`),G=H(()=>[s.b(),s.m($.value),s.is("vertical",i.vertical),{[s.m("with-input")]:i.showInput}]),te=(e=>H(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((e,a)=>e-a).filter(a=>a<=e.max&&a>=e.min).map(a=>({point:a,position:100*(a-e.min)/(e.max-e.min),mark:e.marks[a]})):[]))(i);((a,l,o,i,s,r)=>{const u=e=>{s(n,e),s(t,e)},d=()=>a.range?![o.value,i.value].every((e,a)=>e===l.oldValue[a]):a.modelValue!==l.oldValue,p=()=>{var t,n;a.min>a.max&&f("Slider","min should not be greater than max.");const o=a.modelValue;a.range&&X(o)?o[1]<a.min?u([a.min,a.min]):o[0]>a.max?u([a.max,a.max]):o[0]<a.min?u([a.min,o[1]]):o[1]>a.max?u([o[0],a.max]):(l.firstValue=o[0],l.secondValue=o[1],d()&&(a.validateEvent&&(null==(t=null==r?void 0:r.validate)||t.call(r,"change").catch(e=>g())),l.oldValue=o.slice())):a.range||!e(o)||Number.isNaN(o)||(o<a.min?u(a.min):o>a.max?u(a.max):(l.firstValue=o,d()&&(a.validateEvent&&(null==(n=null==r?void 0:r.validate)||n.call(r,"change").catch(e=>g())),l.oldValue=o)))};p(),J(()=>l.dragging,e=>{e||p()}),J(()=>a.modelValue,(e,a)=>{l.dragging||X(e)&&X(a)&&e.every((e,l)=>e===a[l])&&l.firstValue===e[0]&&l.secondValue===e[1]||p()},{deep:!0}),J(()=>[a.min,a.max],()=>{p()})})(i,d,x,V,o,p);const se=H(()=>{const e=[i.min,i.max,i.step].map(e=>{const a=`${e}`.split(".")[1];return a?a.length:0});return Math.max.apply(null,e)}),{sliderWrapper:ue}=((a,l,t)=>{const n=q();return ce(async()=>{a.range?(X(a.modelValue)?(l.firstValue=Math.max(a.min,a.modelValue[0]),l.secondValue=Math.min(a.max,a.modelValue[1])):(l.firstValue=a.min,l.secondValue=a.max),l.oldValue=[l.firstValue,l.secondValue]):(!e(a.modelValue)||Number.isNaN(a.modelValue)?l.firstValue=a.min:l.firstValue=Math.min(a.max,Math.max(a.min,a.modelValue)),l.oldValue=l.firstValue),r(window,"resize",t),await K(),t()}),{sliderWrapper:n}})(i,d,S),{firstValue:de,secondValue:pe,sliderSize:_e}=Q(d);return r(ue,"touchstart",C,{passive:!1}),r(ue,"touchmove",C,{passive:!1}),ve(Xe,{...Q(i),sliderSize:_e,disabled:w,precision:se,emitChange:F,resetSize:S,updateDragging:e=>{d.dragging=e}}),l({onSliderClick:E}),(e,a)=>{var l,t;return ae(),ee("div",{id:e.range?ie(B):void 0,ref_key:"sliderWrapper",ref:ue,class:oe(ie(G)),role:e.range?"group":void 0,"aria-label":e.range&&!ie(N)?ie(O):void 0,"aria-labelledby":e.range&&ie(N)?null==(l=ie(p))?void 0:l.labelId:void 0},[ne("div",{ref_key:"slider",ref:v,class:oe([ie(s).e("runway"),{"show-input":e.showInput&&!e.range},ie(s).is("disabled",ie(w))]),style:re(ie(k)),onMousedown:ie(M),onTouchstartPassive:ie(M)},[ne("div",{class:oe(ie(s).e("bar")),style:re(ie(j))},null,6),le(Ze,{id:e.range?void 0:ie(B),ref_key:"firstButton",ref:m,"model-value":ie(de),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":e.range||!ie(N)?ie(A):void 0,"aria-labelledby":!e.range&&ie(N)?null==(t=ie(p))?void 0:t.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?ie(pe):e.max,"aria-valuenow":ie(de),"aria-valuetext":ie(R),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":ie(w),"onUpdate:modelValue":ie(P)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?(ae(),me(Ze,{key:0,ref_key:"secondButton",ref:b,"model-value":ie(pe),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":ie(Y),"aria-valuemin":ie(de),"aria-valuemax":e.max,"aria-valuenow":ie(pe),"aria-valuetext":ie(W),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":ie(w),"onUpdate:modelValue":ie(D)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):fe("v-if",!0),e.showStops?(ae(),ee("div",{key:1},[(ae(!0),ee(ge,null,ye(ie(T),(e,a)=>(ae(),ee("div",{key:a,class:oe(ie(s).e("stop")),style:re(ie(z)(e))},null,6))),128))])):fe("v-if",!0),ie(te).length>0?(ae(),ee(ge,{key:2},[ne("div",null,[(ae(!0),ee(ge,null,ye(ie(te),(e,a)=>(ae(),ee("div",{key:a,style:re(ie(z)(e.position)),class:oe([ie(s).e("stop"),ie(s).e("marks-stop")])},null,6))),128))]),ne("div",{class:oe(ie(s).e("marks"))},[(ae(!0),ee(ge,null,ye(ie(te),(e,a)=>(ae(),me(ie(Qe),{key:a,mark:e.mark,style:re(ie(z)(e.position)),onMousedown:he(a=>ie(I)(e.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):fe("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),e.showInput&&!e.range?(ae(),me(ie(U),{key:0,ref:"input","model-value":ie(de),class:oe(ie(s).e("input")),step:e.step,disabled:ie(w),controls:e.showInputControls,min:e.min,max:e.max,precision:ie(se),size:ie(L),"onUpdate:modelValue":ie(P),onChange:ie(F)},null,8,["model-value","class","step","disabled","controls","min","max","precision","size","onUpdate:modelValue","onChange"])):fe("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}}),[["__file","slider.vue"]])),ta={class:"tech-proposal"},na={style:{display:"flex","justify-content":"space-between","align-items":"center"}},oa={style:{"margin-top":"28px",color:"#999","font-size":"12px"}},ia={style:{display:"flex",gap:"20px"}},sa={style:{width:"200px"}},ra={style:{width:"200px"}},ua={style:{width:"200px"}},da={class:"action-controls"},pa={class:"card-header"},ca={class:"card-header"},va={class:"requirement-categories"},ma={class:"category-title"},fa={class:"category-content"},ga={key:0,class:"category-summary"},ya={key:1,class:"category-keywords"},ha={key:2,class:"category-points"},_a={class:"card-header"},ba={class:"ç« èŠ‚ç»“æ„"},wa={class:"tree-node"},xa={class:"node-title"},Va={key:2,class:"node-desc"},ka={class:"card-header"},ja={class:"header-actions"},Sa={class:"result-content"},Fa={class:"output-files"},Ca={class:"file-buttons"},Ea=$(G({__name:"TechProposal",setup(e){const{projects:a,selectedProject:l,currentDocuments:t,loadProjects:n,handleProjectChange:o,restoreProjectFromStore:i}=Pe(),{useHitlFile:s,hitlFileInfo:r,syncing:u,synced:d,loadFromHITL:p,cancelHitlFile:c,syncToHitl:m}=Se({onFileLoaded:()=>{_.value.tenderFiles=[]}}),f=q([]),g=q(!1),y=async()=>{},h=async e=>{try{if(!e.downloadUrl)return void N.error("ä¸‹è½½åœ°å€æ— æ•ˆ");let a=e.filename||e.downloadUrl.split("/").pop()||"æŠ€æœ¯æ–¹æ¡ˆ.docx";a=a.split("?")[0],Me(e.downloadUrl,a),N.success("æ–‡ä»¶ä¸‹è½½ä¸­...")}catch(a){N.error(a.message||"ä¸‹è½½æ–‡ä»¶å¤±è´¥")}},_=q({projectId:null,tenderFiles:[]}),b=q({outputPrefix:"æŠ€æœ¯æ–¹æ¡ˆ",aiModel:"shihuang-gpt4o-mini",generationMode:"æŒ‰æ‹›æ ‡ä¹¦ç›®å½•å†™",templateName:"æ”¿åºœé‡‡è´­æ ‡å‡†",pageCount:200,contentStyle:{tables:"é€‚é‡",flowcharts:"æµç¨‹å›¾",images:"å°‘é‡"},additionalOutputs:["includeAnalysis","includeMapping","includeSummary"]}),$=q(!1),U=q(0),X=q(""),Y=q(null),W=q(!0),J=q(null),K=q(!0),G=q(null),Z=q(null),Q=q(!1),oe=q(""),re=q(""),ue=q(!1),de=q(null),pe=q(""),ve=q(!1),he=q(!1),Be=H(()=>{var e;return(null==(e=J.value)?void 0:e.chapters)?J.value.chapters:[]}),Ne=H(()=>_.value.projectId&&(s.value||_.value.tenderFiles.length>0)),Xe=async e=>{var a;const{file:t,onSuccess:n,onError:o}=e;if(!_.value.projectId){return o(new Error("è¯·å…ˆé€‰æ‹©é¡¹ç›®")),void N.error("è¯·å…ˆé€‰æ‹©é¡¹ç›®")}if(!(null==(a=l.value)?void 0:a.company_id)){return o(new Error("é¡¹ç›®æ²¡æœ‰å…³è”å…¬å¸")),void N.error("é¡¹ç›®æ²¡æœ‰å…³è”å…¬å¸")}try{const e=new FormData;e.append("file",t),e.append("company_id",l.value.company_id.toString()),e.append("project_id",_.value.projectId.toString());const a=await Ie.parseDocumentStructure(e);if(!a.success)throw new Error(a.message||"ä¸Šä¼ å¤±è´¥");n(a.data),N.success("æŠ€æœ¯éœ€æ±‚æ–‡æ¡£ä¸Šä¼ æˆåŠŸ")}catch(i){o(i),N.error(i.message||"æ–‡æ¡£ä¸Šä¼ å¤±è´¥")}},Ye=()=>{N.success("æ–‡æ¡£ä¸Šä¼ æˆåŠŸ")},We=async()=>{await o(_.value.projectId,{onClear:()=>{_.value.tenderFiles=[],Y.value=null,J.value=null,G.value=null,Z.value=null,X.value="",ue.value=!1,pe.value="",s.value&&c()},onDocumentsLoaded:e=>{e.technicalFile&&p(e,"technicalFile"),e.techProposalFile&&(Z.value=e.techProposalFile,N.success("å·²åŠ è½½å†å²æŠ€æœ¯æ–¹æ¡ˆæ–‡ä»¶"))}})},qe=async()=>{var e;if(Ne.value){$.value=!0,U.value=0,X.value="",Y.value=null,G.value=null,ue.value=!1,pe.value="";try{const a=new FormData;if(s.value&&r.value)a.append("use_hitl_technical_file","true"),a.append("project_id",_.value.projectId.toString());else{if(!(null==(e=_.value.tenderFiles[0])?void 0:e.raw))throw new Error("è¯·ä¸Šä¼ æŠ€æœ¯éœ€æ±‚æ–‡æ¡£æˆ–ä½¿ç”¨æŠ€æœ¯æ–‡ä»¶");a.append("tender_file",_.value.tenderFiles[0].raw)}a.append("outputPrefix",b.value.outputPrefix),a.append("companyId",l.value.company_id.toString()),a.append("projectName",l.value.project_name||""),a.append("projectId",_.value.projectId.toString()),a.append("aiModel",b.value.aiModel),b.value.generationMode&&(a.append("generation_mode",b.value.generationMode),a.append("page_count",b.value.pageCount.toString()),a.append("content_style",JSON.stringify(b.value.contentStyle)),"ç¼–å†™ä¸“é¡¹ç« èŠ‚"===b.value.generationMode&&b.value.templateName&&a.append("template_name",b.value.templateName)),a.append("includeAnalysis",b.value.additionalOutputs.includes("includeAnalysis")?"true":"false"),a.append("includeMapping",b.value.additionalOutputs.includes("includeMapping")?"true":"false"),a.append("includeSummary",b.value.additionalOutputs.includes("includeSummary")?"true":"false"),await He(a),N.success("æŠ€æœ¯æ–¹æ¡ˆç”Ÿæˆå®Œæˆ")}catch(a){N.error(a.message||"ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•")}finally{$.value=!1}}else N.warning("è¯·é€‰æ‹©é¡¹ç›®å¹¶ä¸Šä¼ æŠ€æœ¯éœ€æ±‚æ–‡æ¡£")},He=async e=>{var a,l,t;const n=!!b.value.generationMode?"/api/agent/generate":"/api/generate-proposal-stream-v2",o=await fetch(n,{method:"POST",body:e});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const i=null==(a=o.body)?void 0:a.getReader();if(!i)throw new Error("æ— æ³•è¯»å–å“åº”æµ");const s=new TextDecoder;let r="";const u={};let d="",p=null;const c=()=>{p&&clearTimeout(p),p=setTimeout(()=>{Je(u)},500)};for(;;){const{done:e,value:a}=await i.read();if(e)break;r+=s.decode(a,{stream:!0});const n=r.split("\n");r=n.pop()||"";for(const o of n)if(o.startsWith("data: "))try{const e=JSON.parse(o.slice(6));if(void 0!==e.progress&&(U.value=e.progress),e.message&&(X.value+=e.message+"\n"),"analysis_completed"===e.stage&&e.analysis_result&&(Y.value=e.analysis_result),"outline_completed"===e.stage&&e.outline_data&&(J.value=e.outline_data),"content_generation"===e.stage)if("chapter_start"===e.event)d=e.chapter_number||"",u[d]="",X.value+=`\n\n## ${e.chapter_number} ${e.chapter_title}\n\n`,ue.value||(ue.value=!0);else if("content_chunk"===e.event){const a=e.chapter_number||d;a&&(u[a]=(u[a]||"")+(e.content||""),c())}else"chapter_end"===e.event&&(p&&clearTimeout(p),Je(u),X.value+=`\nâœ“ ${e.chapter_title||"ç« èŠ‚"} ç”Ÿæˆå®Œæˆ\n`);if("completed"===e.stage&&e.success&&(G.value=e,Z.value={outputFile:e.output_file,downloadUrl:null==(l=e.output_files)?void 0:l.proposal,stats:{requirements_count:e.requirements_count,sections_count:e.sections_count,matches_count:e.matches_count},message:"æŠ€æœ¯æ–¹æ¡ˆå·²ç”Ÿæˆ"},useStreamingContent&&(ue.value=!0),e.output_file&&_.value.projectId&&await m(_.value.projectId,e.output_file,"tech_proposal")),"error"===e.stage)throw X.value+=`\nâŒ é”™è¯¯: ${e.error||e.message}\n`,new Error(e.error||e.message||"ç”Ÿæˆå¤±è´¥")}catch(v){if(!(null==(t=v.message)?void 0:t.includes("JSON")))throw v}}},Je=e=>{var a;if(null==(a=J.value)?void 0:a.chapters){let a="";const l=t=>{for(const n of t){const t=n.chapter_number,o=e[t]||"",i=n.level||1,s=`ch-${t.replace(/\./g,"-")}`;a+=`<h${i} id="${s}">${t} ${n.title}</h${i}>\n`,n.description&&(a+=`<div style="padding: 12px; background: #E8F4FD; border-left: 4px solid #409EFF; margin: 12px 0;">\n            <strong>ã€æœ¬ç« è¯´æ˜ã€‘</strong> ${n.description}\n          </div>\n`),n.response_strategy&&(a+=`<div style="padding: 12px; background: #F0F9FF; border-left: 4px solid #67C23A; margin: 12px 0;">\n            <strong>ã€åº”ç­”ç­–ç•¥ã€‘</strong> ${n.response_strategy}\n          </div>\n`),n.content_hints&&n.content_hints.length>0&&(a+=`<div style="padding: 12px; background: #FFF7E6; border-left: 4px solid #E6A23C; margin: 12px 0;">\n            <strong>ã€å†…å®¹æç¤ºã€‘</strong>\n            <ul style="margin: 8px 0; padding-left: 24px;">\n              ${n.content_hints.map(e=>`<li>${e}</li>`).join("")}\n            </ul>\n          </div>\n`),n.response_tips&&n.response_tips.length>0&&(a+=`<div style="padding: 12px; background: #FEF0F0; border-left: 4px solid #F56C6C; margin: 12px 0;">\n            <strong>ã€åº”ç­”å»ºè®®ã€‘</strong>\n            <ul style="margin: 8px 0; padding-left: 24px;">\n              ${n.response_tips.map(e=>`<li>${e}</li>`).join("")}\n            </ul>\n          </div>\n`),o?(a+='<div style="padding: 12px; background: #F0FFF4; border-left: 4px solid #52C41A; margin: 12px 0;">\n            <strong style="color: #52C41A;">ã€AIç”Ÿæˆå†…å®¹ã€‘</strong>\n          </div>\n',a+=`<div style="line-height: 1.8; margin: 12px 0;">${o.replace(/\n/g,"<br>")}</div>\n`):t in e&&(a+='<div style="padding: 12px; background: #F5F5F5; border: 1px dashed #D9D9D9; margin: 12px 0; color: #999;">\n            <em>æ­£åœ¨ç”Ÿæˆå†…å®¹...</em>\n          </div>\n'),n.subsections&&n.subsections.length>0&&l(n.subsections)}};l(J.value.chapters),pe.value=a}else{let a="";const l=Object.entries(e).sort((e,a)=>{const[l]=e,[t]=a;return l.localeCompare(t,"zh-CN")});for(const[e,t]of l)a+=`<h2>${e}</h2>\n`,t&&(a+=`<div style="line-height: 1.8;">${t.replace(/\n/g,"<br>")}</div>\n`);pe.value=a}},Ke=()=>{$.value=!1,N.info("å·²åœæ­¢ç”Ÿæˆ")},Ge=e=>{var a,l;if(!(null==(l=null==(a=G.value)?void 0:a.output_files)?void 0:l[e]))return void N.warning("æ–‡ä»¶ä¸å­˜åœ¨");const t=G.value.output_files[e];let n=t.split("/").pop()||`æŠ€æœ¯æ–¹æ¡ˆ_${e}.docx`;n=n.split("?")[0],Me(t,n),N.success("ä¸‹è½½å·²å¼€å§‹")},Ze=()=>{var e,a,t;(null==(a=null==(e=G.value)?void 0:e.output_files)?void 0:a.proposal)?(oe.value=G.value.output_files.proposal,re.value=`æŠ€æœ¯æ–¹æ¡ˆ-${(null==(t=l.value)?void 0:t.project_name)||"æ–‡æ¡£"}.docx`,Q.value=!0):N.warning("æš‚æ— æ–‡æ¡£å¯é¢„è§ˆ")},Qe=e=>{oe.value=e.file_path||e.outputFile,re.value=e.filename||"æŠ€æœ¯æ–¹æ¡ˆ.docx",Q.value=!0},ea=async()=>{var e;(null==(e=G.value)?void 0:e.output_file)?_.value.projectId?await m(_.value.projectId,G.value.output_file,"tech_proposal"):N.error("é¡¹ç›®IDæ— æ•ˆ"):N.warning("æ²¡æœ‰å¯åŒæ­¥çš„æ–‡ä»¶")},aa=()=>{Z.value=null,G.value=null,Y.value=null,J.value=null,ue.value=!1,pe.value="",N.info("è¯·é…ç½®å‚æ•°åé‡æ–°ç”Ÿæˆ")},Ea=async e=>{var a;if(null==(a=G.value)?void 0:a.output_file)try{he.value=!0;const a=await fetch("/api/editor/save-html-to-word",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html_content:e,project_id:_.value.projectId,document_type:"tech_proposal",original_file:G.value.output_file})}),l=await a.json();if(!l.success)throw new Error(l.error||"ä¿å­˜å¤±è´¥");N.success("æŠ€æœ¯æ–¹æ¡ˆå†…å®¹å·²ä¿å­˜"),l.output_file&&(G.value.output_file=l.output_file,l.download_url&&G.value.output_files&&(G.value.output_files.proposal=l.download_url)),l.output_file&&_.value.projectId&&await m(_.value.projectId,l.output_file,"tech_proposal")}catch(l){throw l}finally{he.value=!1}else N.warning("æ²¡æœ‰å¯ä¿å­˜çš„æ–‡ä»¶")},Ma=async()=>{var e;if(null==(e=Z.value)?void 0:e.outputFile)try{ue.value=!0,await(async e=>{try{ve.value=!0,pe.value='<p style="color: #409EFF;">æ­£åœ¨è½¬æ¢Wordæ–‡æ¡£ä¸ºå¯ç¼–è¾‘æ ¼å¼...</p>';const a=await fetch("/api/editor/convert-word-to-html",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:e})}),l=await a.json();if(!l.success||!l.html_content)throw new Error(l.error||"è½¬æ¢å¤±è´¥");pe.value=l.html_content,de.value&&de.value.setContent(l.html_content)}catch(a){pe.value=`\n      <h1>ğŸ“„ æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£</h1>\n      <div style="padding: 20px; background: #FFF3E0; border-left: 4px solid #FF9800; margin: 16px 0;">\n        <p><strong>âš ï¸ æç¤ºï¼š</strong>Wordæ–‡æ¡£è½¬æ¢å¤±è´¥</p>\n        <p>åŸå› ï¼š${a.message}</p>\n        <p>æ‚¨å¯ä»¥ï¼š</p>\n        <ul>\n          <li>ç›´æ¥åœ¨æ­¤ç¼–è¾‘å™¨ä¸­è¾“å…¥å†…å®¹</li>\n          <li>æˆ–ç‚¹å‡»ä¸‹æ–¹"é¢„è§ˆWord"æˆ–"ä¸‹è½½"æŒ‰é’®æŸ¥çœ‹åŸå§‹æ–‡æ¡£</li>\n        </ul>\n      </div>\n      <p>å¼€å§‹ç¼–è¾‘æ‚¨çš„å†…å®¹...</p>\n    `,N.warning("Wordè½¬æ¢HTMLå¤±è´¥ï¼Œè¯·ä½¿ç”¨é¢„è§ˆæˆ–ä¸‹è½½åŠŸèƒ½")}finally{ve.value=!1}})(Z.value.outputFile),N.success("å†å²æ–‡ä»¶å·²åŠ è½½åˆ°ç¼–è¾‘å™¨"),setTimeout(()=>{var e;null==(e=document.querySelector(".editor-section"))||e.scrollIntoView({behavior:"smooth",block:"start"})},100)}catch(a){N.error("æ‰“å¼€å†å²æ–‡ä»¶å¤±è´¥: "+a.message)}else N.error("å†å²æ–‡ä»¶ä¿¡æ¯æ— æ•ˆ")};return ce(async()=>{await n();const e=await i({onClear:()=>{_.value.tenderFiles=[],Y.value=null,J.value=null,G.value=null,Z.value=null,s.value&&c()},onDocumentsLoaded:e=>{e.technicalFile&&p(e,"technicalFile"),e.techProposalFile&&(Z.value=e.techProposalFile)}});e&&(_.value.projectId=e)}),(e,n)=>{const o=R,i=A,m=x,N=Te,q=V,H=De,ce=w,Se=ze,Me=j,Ie=k,Pe=O,He=C,Je=v,Ia=F,Pa=S,Da=la,Ta=Le,za=$e,Ba=Ue,Na=Re,$a=Ae,La=Oe,Ua=L;return ae(),ee("div",ta,[le(Se,{class:"project-section",shadow:"never"},{default:te(()=>[le(ce,{model:_.value,"label-width":"100px"},{default:te(()=>[le(H,{gutter:20},{default:te(()=>[le(N,{span:12},{default:te(()=>[le(m,{label:"é¡¹ç›®"},{default:te(()=>[le(i,{modelValue:_.value.projectId,"onUpdate:modelValue":n[0]||(n[0]=e=>_.value.projectId=e),placeholder:"è¯·é€‰æ‹©é¡¹ç›®",filterable:"",onChange:We,style:{width:"100%"}},{default:te(()=>[(ae(!0),ee(ge,null,ye(ie(a),e=>(ae(),me(o,{key:e.id,label:`${e.project_name} (${e.project_number||"-"})`,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),le(N,{span:12},{default:te(()=>[le(m,{label:"å…¬å¸"},{default:te(()=>{var e;return[le(q,{value:(null==(e=ie(l))?void 0:e.company_name)||"-",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),le(Se,{class:"upload-section",shadow:"never"},{default:te(()=>[ie(t).technicalFile&&!ie(s)?(ae(),me(Ie,{key:0,type:"success",closable:!1,style:{"margin-bottom":"16px"}},{default:te(()=>[ne("div",na,[n[22]||(n[22]=ne("span",null,"ğŸ’¡ æ£€æµ‹åˆ°è¯¥é¡¹ç›®å·²æœ‰æŠ€æœ¯éœ€æ±‚æ–‡ä»¶ï¼Œå¯ç›´æ¥ä½¿ç”¨",-1)),le(Me,{type:"primary",size:"small",onClick:n[1]||(n[1]=e=>ie(p)(ie(t),"technicalFile"))},{default:te(()=>[...n[21]||(n[21]=[_e(" ä½¿ç”¨æŠ€æœ¯éœ€æ±‚æ–‡ä»¶ ",-1)])]),_:1})])]),_:1})):fe("",!0),ie(s)?(ae(),me(ie(Fe),{key:1,"file-info":ie(r),label:"æŠ€æœ¯éœ€æ±‚æ–‡ä»¶:",onCancel:ie(c)},null,8,["file-info","onCancel"])):fe("",!0),ie(s)?fe("",!0):(ae(),me(ie(Ve),{key:2,modelValue:_.value.tenderFiles,"onUpdate:modelValue":n[2]||(n[2]=e=>_.value.tenderFiles=e),"http-request":Xe,accept:".pdf,.doc,.docx",limit:1,"max-size":50,drag:"","tip-text":"ä¸Šä¼ æŠ€æœ¯éœ€æ±‚æ–‡æ¡£",onSuccess:Ye},null,8,["modelValue"])),le(Pe,null,{default:te(()=>[...n[23]||(n[23]=[_e("ç”Ÿæˆé€‰é¡¹",-1)])]),_:1}),le(ce,{model:b.value,"label-width":"140px",class:"config-form"},{default:te(()=>[le(H,{gutter:20},{default:te(()=>[le(N,{span:12},{default:te(()=>[le(m,{label:"è¾“å‡ºæ–‡ä»¶å‰ç¼€"},{default:te(()=>[le(q,{modelValue:b.value.outputPrefix,"onUpdate:modelValue":n[3]||(n[3]=e=>b.value.outputPrefix=e),placeholder:"æŠ€æœ¯æ–¹æ¡ˆ"},null,8,["modelValue"])]),_:1})]),_:1}),le(N,{span:12},{default:te(()=>[le(m,{label:"AIæ¨¡å‹"},{default:te(()=>[le(i,{modelValue:b.value.aiModel,"onUpdate:modelValue":n[4]||(n[4]=e=>b.value.aiModel=e),style:{width:"100%"}},{default:te(()=>[le(o,{label:"GPT5ï¼ˆæœ€å¼ºæ¨ç†ï¼‰",value:"shihuang-gpt5"}),le(o,{label:"Claude Sonnet 4.5ï¼ˆæ ‡ä¹¦ä¸“ç”¨ï¼‰",value:"shihuang-claude-sonnet-45"}),le(o,{label:"GPT4o Miniï¼ˆæ¨è-é»˜è®¤ï¼‰",value:"shihuang-gpt4o-mini"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),le(m,{label:"ç”Ÿæˆæ¨¡å¼"},{default:te(()=>[le(Pa,{modelValue:b.value.generationMode,"onUpdate:modelValue":n[5]||(n[5]=e=>b.value.generationMode=e)},{default:te(()=>[le(Ia,{value:"æŒ‰è¯„åˆ†ç‚¹å†™"},{default:te(()=>[n[25]||(n[25]=_e(" æŒ‰è¯„åˆ†ç‚¹å†™ ",-1)),le(Je,{placement:"top"},{content:te(()=>[...n[24]||(n[24]=[ne("div",{style:{"max-width":"300px"}},[_e(" æ ¹æ®è¯„åˆ†æ ‡å‡†ç”Ÿæˆæ–¹æ¡ˆ"),ne("br"),_e(" â€¢ è‡ªåŠ¨æå–è¯„åˆ†ç‚¹"),ne("br"),_e(" â€¢ æŒ‰æƒé‡åˆ†é…é¡µæ•°"),ne("br"),_e(" â€¢ ç¡®ä¿å¾—åˆ†æœ€å¤§åŒ– ")],-1)])]),default:te(()=>[le(He,{style:{"margin-left":"4px"}},{default:te(()=>[le(ie(E))]),_:1})]),_:1})]),_:1}),le(Ia,{value:"æŒ‰æ‹›æ ‡ä¹¦ç›®å½•å†™"},{default:te(()=>[n[27]||(n[27]=_e(" æŒ‰æ‹›æ ‡ä¹¦ç›®å½•å†™ï¼ˆæ¨èï¼‰ ",-1)),le(Je,{placement:"top"},{content:te(()=>[...n[26]||(n[26]=[ne("div",{style:{"max-width":"300px"}},[_e(" åŠ¨æ€åˆ†æéœ€æ±‚ç”Ÿæˆæ–¹æ¡ˆ"),ne("br"),_e(" â€¢ ç´§æ‰£æ‹›æ ‡éœ€æ±‚"),ne("br"),_e(" â€¢ æ™ºèƒ½åˆ†ç±»åº”ç­”"),ne("br"),_e(" â€¢ è¦†ç›–ç‡â‰¥90% ")],-1)])]),default:te(()=>[le(He,{style:{"margin-left":"4px"}},{default:te(()=>[le(ie(E))]),_:1})]),_:1})]),_:1}),le(Ia,{value:"ç¼–å†™ä¸“é¡¹ç« èŠ‚"},{default:te(()=>[n[29]||(n[29]=_e(" ä½¿ç”¨å›ºå®šæ¨¡æ¿ ",-1)),le(Je,{placement:"top"},{content:te(()=>[...n[28]||(n[28]=[ne("div",{style:{"max-width":"300px"}},[_e(" ä½¿ç”¨é¢„å®šä¹‰æ¨¡æ¿"),ne("br"),_e(" â€¢ å¿«é€Ÿç”Ÿæˆ"),ne("br"),_e(" â€¢ ç¬¦åˆè¡Œä¸šè§„èŒƒ"),ne("br"),_e(" â€¢ 3ç§æ¨¡æ¿å¯é€‰ ")],-1)])]),default:te(()=>[le(He,{style:{"margin-left":"4px"}},{default:te(()=>[le(ie(E))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),"ç¼–å†™ä¸“é¡¹ç« èŠ‚"===b.value.generationMode?(ae(),me(m,{key:0,label:"é€‰æ‹©æ¨¡æ¿"},{default:te(()=>[le(i,{modelValue:b.value.templateName,"onUpdate:modelValue":n[6]||(n[6]=e=>b.value.templateName=e),placeholder:"è¯·é€‰æ‹©æ¨¡æ¿",style:{width:"100%"}},{default:te(()=>[le(o,{label:"æ”¿åºœé‡‡è´­æ ‡å‡†ï¼ˆ5ç« ï¼‰",value:"æ”¿åºœé‡‡è´­æ ‡å‡†"},{default:te(()=>[...n[30]||(n[30]=[ne("div",null,[ne("div",null,"æ”¿åºœé‡‡è´­æ ‡å‡†"),ne("div",{style:{color:"#999","font-size":"12px","margin-top":"4px"}}," æ€»ä½“è®¾è®¡ | éœ€æ±‚åº”ç­” | æŠ€æœ¯æŒ‡æ ‡ | å®æ–½æ–¹æ¡ˆ | æœåŠ¡æ‰¿è¯º ")],-1)])]),_:1}),le(o,{label:"è½¯ä»¶å¼€å‘é¡¹ç›®ï¼ˆ8ç« ï¼‰",value:"è½¯ä»¶å¼€å‘é¡¹ç›®"},{default:te(()=>[...n[31]||(n[31]=[ne("div",null,[ne("div",null,"è½¯ä»¶å¼€å‘é¡¹ç›®"),ne("div",{style:{color:"#999","font-size":"12px","margin-top":"4px"}}," é¡¹ç›®æ¦‚è¿° | éœ€æ±‚åˆ†æ | ç³»ç»Ÿè®¾è®¡ | å¼€å‘å®æ–½ | æµ‹è¯• | éƒ¨ç½² | è¿ç»´ | åŸ¹è®­ ")],-1)])]),_:1}),le(o,{label:"ISOè´¨é‡ä½“ç³»ï¼ˆ6ç« ï¼‰",value:"ISOè´¨é‡ä½“ç³»"},{default:te(()=>[...n[32]||(n[32]=[ne("div",null,[ne("div",null,"ISOè´¨é‡ä½“ç³»"),ne("div",{style:{color:"#999","font-size":"12px","margin-top":"4px"}}," è´¨é‡æ–¹é’ˆ | è´¨é‡ç›®æ ‡ | è¿‡ç¨‹æ§åˆ¶ | æ–‡æ¡£ç®¡ç† | æŒç»­æ”¹è¿› | ç®¡ç†è¯„å®¡ ")],-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):fe("",!0),le(m,{label:"é¡µæ•°æ§åˆ¶"},{default:te(()=>[le(Da,{modelValue:b.value.pageCount,"onUpdate:modelValue":n[7]||(n[7]=e=>b.value.pageCount=e),min:50,max:400,step:10,marks:{50:"50é¡µ",100:"100é¡µ",200:"200é¡µ",300:"300é¡µ",400:"400é¡µ"},"show-input":"","show-input-controls":!1},null,8,["modelValue"]),ne("div",oa," é¢„ä¼°å­—æ•°: "+se(Math.round(700*b.value.pageCount*.8))+" - "+se(Math.round(700*b.value.pageCount))+" å­— ",1)]),_:1}),le(m,{label:"å†…å®¹é£æ ¼"},{default:te(()=>[ne("div",ia,[ne("div",sa,[n[33]||(n[33]=ne("div",{style:{"margin-bottom":"8px","font-size":"14px","font-weight":"500",color:"#666"}},"è¡¨æ ¼æ•°é‡",-1)),le(i,{modelValue:b.value.contentStyle.tables,"onUpdate:modelValue":n[8]||(n[8]=e=>b.value.contentStyle.tables=e),style:{width:"100%"}},{default:te(()=>[le(o,{label:"æ— ",value:"æ— "}),le(o,{label:"å°‘é‡",value:"å°‘é‡"}),le(o,{label:"é€‚é‡ï¼ˆæ¨èï¼‰",value:"é€‚é‡"}),le(o,{label:"å¤§é‡",value:"å¤§é‡"})]),_:1},8,["modelValue"])]),ne("div",ra,[n[34]||(n[34]=ne("div",{style:{"margin-bottom":"8px","font-size":"14px","font-weight":"500",color:"#666"}},"æµç¨‹å›¾",-1)),le(i,{modelValue:b.value.contentStyle.flowcharts,"onUpdate:modelValue":n[9]||(n[9]=e=>b.value.contentStyle.flowcharts=e),style:{width:"100%"}},{default:te(()=>[le(o,{label:"æ— ",value:"æ— "}),le(o,{label:"æµç¨‹å›¾ï¼ˆæ¨èï¼‰",value:"æµç¨‹å›¾"}),le(o,{label:"SmartArt",value:"SmartArt"})]),_:1},8,["modelValue"])]),ne("div",ua,[n[35]||(n[35]=ne("div",{style:{"margin-bottom":"8px","font-size":"14px","font-weight":"500",color:"#666"}},"å›¾ç‰‡æ•°é‡",-1)),le(i,{modelValue:b.value.contentStyle.images,"onUpdate:modelValue":n[10]||(n[10]=e=>b.value.contentStyle.images=e),style:{width:"100%"}},{default:te(()=>[le(o,{label:"æ— ",value:"æ— "}),le(o,{label:"å°‘é‡ï¼ˆæ¨èï¼‰",value:"å°‘é‡"}),le(o,{label:"å¤§é‡",value:"å¤§é‡"})]),_:1},8,["modelValue"])])])]),_:1}),le(m,{label:"é™„åŠ è¾“å‡º"},{default:te(()=>[le(za,{modelValue:b.value.additionalOutputs,"onUpdate:modelValue":n[11]||(n[11]=e=>b.value.additionalOutputs=e)},{default:te(()=>[le(Ta,{label:"includeAnalysis"},{default:te(()=>[...n[36]||(n[36]=[_e("éœ€æ±‚åˆ†ææŠ¥å‘Š",-1)])]),_:1}),le(Ta,{label:"includeMapping"},{default:te(()=>[...n[37]||(n[37]=[_e("éœ€æ±‚åŒ¹é…è¡¨",-1)])]),_:1}),le(Ta,{label:"includeSummary"},{default:te(()=>[...n[38]||(n[38]=[_e("ç”Ÿæˆæ€»ç»“æŠ¥å‘Š",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),ne("div",da,[le(Me,{type:"primary",size:"large",disabled:!Ne.value,loading:$.value,onClick:qe},{default:te(()=>[le(He,null,{default:te(()=>[le(ie(M))]),_:1}),n[39]||(n[39]=_e(" ç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆ ",-1))]),_:1},8,["disabled","loading"])])]),_:1}),$.value?(ae(),me(Se,{key:0,class:"generation-output",shadow:"never"},{header:te(()=>[ne("div",pa,[n[40]||(n[40]=ne("span",null,"AIæ­£åœ¨ç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆ...",-1)),le(Ba,{percentage:U.value,status:100===U.value?"success":void 0,style:{width:"300px"}},null,8,["percentage","status"])])]),default:te(()=>[le(ie(xe),{content:X.value,"is-streaming":$.value,onStop:Ke},null,8,["content","is-streaming"])]),_:1})):fe("",!0),Y.value?(ae(),me(Se,{key:1,class:"analysis-section",shadow:"never"},{header:te(()=>[ne("div",ca,[n[41]||(n[41]=ne("span",null,"éœ€æ±‚åˆ†æç»“æœ",-1)),le(Me,{size:"small",onClick:n[12]||(n[12]=e=>W.value=!W.value)},{default:te(()=>[_e(se(W.value?"æ”¶èµ·":"å±•å¼€"),1)]),_:1})])]),default:te(()=>[be(ne("div",null,[le(ie(Ce),{title:"æ–‡æ¡£æ‘˜è¦",stats:Y.value.document_summary||{},"stat-items":[{key:"total_requirements",label:"æ€»éœ€æ±‚æ•°",suffix:"é¡¹"},{key:"mandatory_count",label:"å¼ºåˆ¶éœ€æ±‚",suffix:"é¡¹"},{key:"optional_count",label:"å¯é€‰éœ€æ±‚",suffix:"é¡¹"}]},null,8,["stats"]),ne("div",va,[n[44]||(n[44]=ne("h4",null,"éœ€æ±‚åˆ†ç±»",-1)),le(La,{accordion:""},{default:te(()=>[(ae(!0),ee(ge,null,ye(Y.value.requirement_categories,(e,a)=>(ae(),me($a,{key:a,name:a},{title:te(()=>{return[ne("div",ma,[ne("span",null,se(e.category),1),le(Na,{type:(a=e.priority,{"é«˜":"danger",high:"danger","ä¸­":"warning",medium:"warning","ä½":"info",low:"info"}[a]||"info"),size:"small"},{default:te(()=>[_e(se(e.priority),1)]),_:2},1032,["type"]),le(Na,{type:"info",size:"small"},{default:te(()=>[_e(se(e.requirements_count||0)+"é¡¹ ",1)]),_:2},1024)])];var a}),default:te(()=>[ne("div",fa,[e.summary?(ae(),ee("p",ga,se(e.summary),1)):fe("",!0),e.keywords&&e.keywords.length>0?(ae(),ee("div",ya,[n[42]||(n[42]=ne("strong",null,"å…³é”®è¯ï¼š",-1)),(ae(!0),ee(ge,null,ye(e.keywords,e=>(ae(),me(Na,{key:e,size:"small",style:{"margin-right":"8px"}},{default:te(()=>[_e(se(e),1)]),_:2},1024))),128))])):fe("",!0),e.key_points&&e.key_points.length>0?(ae(),ee("div",ha,[n[43]||(n[43]=ne("strong",null,"è¦ç‚¹ï¼š",-1)),ne("ul",null,[(ae(!0),ee(ge,null,ye(e.key_points,(e,a)=>(ae(),ee("li",{key:a},se(e),1))),128))])])):fe("",!0)])]),_:2},1032,["name"]))),128))]),_:1})])],512),[[we,W.value]])]),_:1})):fe("",!0),J.value?(ae(),me(Se,{key:2,class:"outline-section",shadow:"never"},{header:te(()=>[ne("div",_a,[n[45]||(n[45]=ne("span",null,"æŠ€æœ¯æ–¹æ¡ˆå¤§çº²",-1)),le(Me,{size:"small",onClick:n[13]||(n[13]=e=>K.value=!K.value)},{default:te(()=>[_e(se(K.value?"æ”¶èµ·":"å±•å¼€"),1)]),_:1})])]),default:te(()=>[be(ne("div",null,[le(ie(Ce),{title:"å¤§çº²æ¦‚è§ˆ",stats:J.value,"stat-items":[{key:"total_chapters",label:"æ€»ç« èŠ‚æ•°",suffix:"ç« "},{key:"estimated_pages",label:"é¢„è®¡é¡µæ•°",suffix:"é¡µ"}],span:12},null,8,["stats"]),ne("div",ba,[n[46]||(n[46]=ne("h4",null,"ç« èŠ‚ç»“æ„",-1)),le(Ua,{data:Be.value,props:{label:"title",children:"subsections"},"default-expand-all":"","node-key":"chapter_number"},{default:te(({node:e,data:a})=>[ne("span",wa,[1===a.level?(ae(),me(He,{key:0},{default:te(()=>[le(ie(I))]),_:1})):(ae(),me(He,{key:1},{default:te(()=>[le(ie(P))]),_:1})),ne("span",xa,se(a.chapter_number)+" "+se(a.title),1),a.description?(ae(),ee("span",Va,se(a.description),1)):fe("",!0)])]),_:1},8,["data"])])],512),[[we,K.value]])]),_:1})):fe("",!0),ue.value?(ae(),me(Se,{key:3,class:"editor-section",shadow:"never"},{default:te(()=>[le(ie(je),{ref_key:"editorRef",ref:de,modelValue:pe.value,"onUpdate:modelValue":n[14]||(n[14]=e=>pe.value=e),title:"æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£",height:1e3,loading:ve.value,saving:he.value,onSave:Ea},null,8,["modelValue","loading","saving"])]),_:1})):fe("",!0),G.value?(ae(),me(Se,{key:4,class:"result-section",shadow:"never"},{header:te(()=>[ne("div",ka,[n[52]||(n[52]=ne("span",null,"âœ… ç”Ÿæˆç»“æœ",-1)),ne("div",ja,[le(Me,{type:"primary",icon:ie(T),onClick:Ze},{default:te(()=>[...n[47]||(n[47]=[_e(" é¢„è§ˆæ–‡æ¡£ ",-1)])]),_:1},8,["icon"]),le(Me,{type:"success",icon:ie(D),onClick:n[15]||(n[15]=e=>Ge("proposal"))},{default:te(()=>[...n[48]||(n[48]=[_e(" ä¸‹è½½æŠ€æœ¯æ–¹æ¡ˆ ",-1)])]),_:1},8,["icon"]),ie(d)?(ae(),me(Na,{key:1,type:"success",size:"large"},{default:te(()=>[...n[50]||(n[50]=[_e(" å·²åŒæ­¥åˆ°æŠ•æ ‡é¡¹ç›® ",-1)])]),_:1})):(ae(),me(Me,{key:0,type:"info",icon:ie(z),loading:ie(u),onClick:ea},{default:te(()=>[...n[49]||(n[49]=[_e(" åŒæ­¥åˆ°æŠ•æ ‡é¡¹ç›® ",-1)])]),_:1},8,["icon","loading"])),le(Me,{type:"primary",icon:ie(B),onClick:qe},{default:te(()=>[...n[51]||(n[51]=[_e(" é‡æ–°ç”Ÿæˆ ",-1)])]),_:1},8,["icon"])])])]),default:te(()=>{var e,a,l,t;return[ne("div",Sa,[le(ie(Ce),{title:"ç”Ÿæˆç»Ÿè®¡",stats:G.value,"stat-items":[{key:"requirements_count",label:"éœ€æ±‚æ•°é‡",suffix:"é¡¹"},{key:"sections_count",label:"ç« èŠ‚æ•°é‡",suffix:"ç« "},{key:"matches_count",label:"åŒ¹é…æ•°é‡",suffix:"é¡¹"}]},null,8,["stats"]),ne("div",Fa,[n[57]||(n[57]=ne("h4",null,"è¾“å‡ºæ–‡ä»¶",-1)),ne("div",Ca,[(null==(e=G.value.output_files)?void 0:e.proposal)?(ae(),me(Me,{key:0,type:"success",onClick:n[16]||(n[16]=e=>Ge("proposal"))},{default:te(()=>[le(He,null,{default:te(()=>[le(ie(D))]),_:1}),n[53]||(n[53]=_e(" ä¸‹è½½æŠ€æœ¯æ–¹æ¡ˆ ",-1))]),_:1})):fe("",!0),(null==(a=G.value.output_files)?void 0:a.analysis)?(ae(),me(Me,{key:1,type:"primary",onClick:n[17]||(n[17]=e=>Ge("analysis"))},{default:te(()=>[le(He,null,{default:te(()=>[le(ie(D))]),_:1}),n[54]||(n[54]=_e(" ä¸‹è½½éœ€æ±‚åˆ†æ ",-1))]),_:1})):fe("",!0),(null==(l=G.value.output_files)?void 0:l.mapping)?(ae(),me(Me,{key:2,type:"info",onClick:n[18]||(n[18]=e=>Ge("mapping"))},{default:te(()=>[le(He,null,{default:te(()=>[le(ie(D))]),_:1}),n[55]||(n[55]=_e(" ä¸‹è½½åŒ¹é…è¡¨ ",-1))]),_:1})):fe("",!0),(null==(t=G.value.output_files)?void 0:t.summary)?(ae(),me(Me,{key:3,type:"warning",onClick:n[19]||(n[19]=e=>Ge("summary"))},{default:te(()=>[le(He,null,{default:te(()=>[le(ie(D))]),_:1}),n[56]||(n[56]=_e(" ä¸‹è½½ç”ŸæˆæŠ¥å‘Š ",-1))]),_:1})):fe("",!0)])])])]}),_:1})):fe("",!0),_.value.projectId?(ae(),me(ie(Ee),{key:5,title:"è¯¥é¡¹ç›®çš„æŠ€æœ¯æ–¹æ¡ˆæ–‡ä»¶","current-file":Z.value,"history-files":f.value,loading:g.value,"show-stats":!1,"show-editor-open":!0,onPreview:Qe,onDownload:h,onRegenerate:aa,onRefresh:y,onOpenInEditor:Ma},null,8,["current-file","history-files","loading"])):fe("",!0),le(ie(ke),{modelValue:Q.value,"onUpdate:modelValue":n[20]||(n[20]=e=>Q.value=e),"file-url":oe.value,"file-name":re.value},null,8,["modelValue","file-url","file-name"])])}}}),[["__scopeId","data-v-742c11c9"]]);export{Ea as default};
