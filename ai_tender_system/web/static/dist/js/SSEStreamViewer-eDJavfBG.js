import{aL as e,av as a,aw as t,bm as n,b6 as s,aM as o,aO as r,aQ as c,aZ as i,aN as l,aT as d,aR as u,aX as p,aV as m,aW as y,aS as b,b1 as _,bn as f,b0 as g,bo as v,bb as k,bp as w,bk as S,bj as h,a_ as j}from"./index.js";/* empty css                */import{E as x}from"./index-pL0-fGnR.js";/* empty css                                                                          */const L=["innerHTML"],C={key:0,class:"streaming-indicator"},R={key:0,class:"stream-actions"},M=j(e({__name:"SSEStreamViewer",props:{content:{},isStreaming:{type:Boolean,default:!1},enableMarkdown:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0}},emits:["stop","regenerate"],setup(e,{emit:j}){const M=e,T=j,B=a(null),H=t(()=>{if(!M.content)return"";if(M.enableMarkdown)try{return n.parse(M.content)}catch(e){return M.content}return M.content.replace(/\n/g,"<br>")});s(()=>M.content,async()=>{M.autoScroll&&M.isStreaming&&(await h(),U())});const U=()=>{B.value&&(B.value.scrollTop=B.value.scrollHeight)},E=async()=>{try{await navigator.clipboard.writeText(M.content),S.success("内容已复制到剪贴板")}catch(e){S.error("复制失败，请手动复制")}},O=()=>{try{const e=new Blob([M.content],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download=`ai-content-${Date.now()}.txt`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a),S.success("文档下载成功")}catch(e){S.error("下载失败，请重试")}};return(a,t)=>{const n=p,s=x,S=_;return r(),o("div",{class:c(["sse-stream-viewer",{"is-loading":e.isStreaming}])},[i(s,{class:"stream-content",shadow:"never"},{default:d(()=>[u("div",{ref_key:"contentRef",ref:B,class:"content-wrapper",innerHTML:H.value},null,8,L),e.isStreaming?(r(),o("div",C,[i(n,{class:"is-loading"},{default:d(()=>[i(m(y))]),_:1}),t[2]||(t[2]=u("span",null,"正在生成中...",-1))])):l("",!0)]),_:1}),e.content?(r(),o("div",R,[e.isStreaming?(r(),b(S,{key:0,type:"warning",icon:m(f),onClick:t[0]||(t[0]=e=>T("stop"))},{default:d(()=>[...t[3]||(t[3]=[g(" 停止生成 ",-1)])]),_:1},8,["icon"])):(r(),b(S,{key:1,type:"primary",icon:m(v),onClick:E},{default:d(()=>[...t[4]||(t[4]=[g(" 复制内容 ",-1)])]),_:1},8,["icon"])),!e.isStreaming&&e.content?(r(),b(S,{key:2,type:"success",icon:m(k),onClick:O},{default:d(()=>[...t[5]||(t[5]=[g(" 下载文档 ",-1)])]),_:1},8,["icon"])):l("",!0),!e.isStreaming&&e.content?(r(),b(S,{key:3,icon:m(w),onClick:t[1]||(t[1]=e=>T("regenerate"))},{default:d(()=>[...t[6]||(t[6]=[g(" 重新生成 ",-1)])]),_:1},8,["icon"])):l("",!0)])):l("",!0)],2)}}}),[["__scopeId","data-v-cba4d568"]]);export{M as S};
