import{O as e,aN as t,q as a}from"./index.js";/* empty css                                                        */import{E as s}from"./el-tree-CUlCaDRQ.js";/* empty css                    */import"./el-text-Kv3Vn9-t.js";/* empty css               */import{E as l}from"./strings-BjAjE6k-.js";import{E as c}from"./index-rLTqmg7l.js";import{am as r,an as n,ap as o,au as i,ar as d,av as u,aw as h,ax as p,as as m,aq as v,aD as _,aB as k,aC as f}from"./editor-Dt4gYtYt.js";const y={class:"chapter-tree"},b={key:0,class:"chapter-search mb-3"},C={class:"chapter-tree-container"},x={class:"chapter-tree-node"},g={class:"chapter-title"},w={class:"chapter-meta"},j={key:2,class:"word-count text-muted ms-2"},K={key:3,class:"word-count text-muted ms-2"},N=a(r({__name:"ChapterTree",props:{chapters:{},showCheckbox:{type:Boolean,default:!0},showSearch:{type:Boolean,default:!0},defaultCheckedKeys:{default:()=>[]}},emits:["check","select"],setup(a,{expose:r,emit:N}){const z=a,B=N,E=n(),L=n(""),S=n([]),V={children:"children",label:"title"};S.value=z.chapters,o(()=>z.chapters,e=>{S.value=e,z.defaultCheckedKeys.length>0&&E.value&&E.value.setCheckedKeys(z.defaultCheckedKeys)},{immediate:!0});const q=()=>{if(!L.value.trim())return void(S.value=z.chapters);const e=L.value.toLowerCase();S.value=D(z.chapters,e)},D=(e,t)=>{const a=[];for(const s of e)if(s.title.toLowerCase().includes(t))a.push(s);else if(s.children&&s.children.length>0){const e=D(s.children,t);e.length>0&&a.push({...s,children:e})}return a},I=()=>{if(!E.value)return;const e=E.value.getCheckedKeys(),t=E.value.getCheckedNodes();B("check",e,t)},O=e=>({technical_spec:"success",business_response:"primary",contract_content:"warning"}[e||""]||"info"),T=e=>({technical_spec:"æŠ€æœ¯éœ€æ±‚",business_response:"å•†åŠ¡åº”ç­”",contract_content:"åˆåŒå†…å®¹"}[e||""]||"");return r({setCheckedKeys:e=>{var t;null==(t=E.value)||t.setCheckedKeys(e)},getCheckedKeys:()=>{var e;return null==(e=E.value)?void 0:e.getCheckedKeys()},getCheckedNodes:()=>{var e;return null==(e=E.value)?void 0:e.getCheckedNodes()}}),(r,n)=>{const o=e,N=t,z=l,B=s,D=c;return d(),i("div",y,[a.showSearch?(d(),i("div",b,[p(o,{modelValue:L.value,"onUpdate:modelValue":n[0]||(n[0]=e=>L.value=e),placeholder:"ğŸ” æœç´¢ç« èŠ‚...",clearable:"",onInput:q},{prefix:m(()=>[...n[1]||(n[1]=[h("i",{class:"bi bi-search"},null,-1)])]),_:1},8,["modelValue"])])):u("",!0),h("div",C,[p(B,{ref_key:"treeRef",ref:E,data:S.value,props:V,"show-checkbox":a.showCheckbox,"check-strictly":!1,"default-expand-all":!1,"expand-on-click-node":!1,"node-key":"id",onCheck:I},{default:m(({node:e,data:t})=>{return[h("div",x,[h("span",g,[h("i",{class:k([(l=t,l.children&&l.children.length>0?"bi bi-folder":"bi bi-file-earmark-text"),"me-1"])},null,2),_(" "+f(t.title)+" ",1),t.has_table?(d(),v(N,{key:0,content:"åŒ…å«è¡¨æ ¼",placement:"top"},{default:m(()=>[...n[2]||(n[2]=[h("i",{class:"bi bi-table ms-1 table-indicator"},null,-1)])]),_:1})):u("",!0)]),h("span",w,[(s=t.chapter_type,s&&["technical_spec","business_response","contract_content"].includes(s)?(d(),v(z,{key:0,type:O(t.chapter_type),size:"small",effect:"dark"},{default:m(()=>[_(f(T(t.chapter_type)),1)]),_:2},1032,["type"])):u("",!0)),t.level?(d(),v(z,{key:1,size:"small",type:"info"},{default:m(()=>{return[_(f((e=t.level,{1:"ä¸€çº§",2:"äºŒçº§",3:"ä¸‰çº§",4:"å››çº§",5:"äº”çº§"}[e]||`${e}çº§`)),1)];var e}),_:2},1024)):u("",!0),t.word_count&&t.word_count>0?(d(),i("span",j,f((a=t.word_count,a>=1e4?`${(a/1e4).toFixed(1)}ä¸‡`:a.toLocaleString()))+"å­— ",1)):-1===t.word_count?(d(),i("span",K,[...n[3]||(n[3]=[h("i",{class:"el-icon-loading"},null,-1),_(" ... ",-1)])])):u("",!0)])])];var a,s,l}),_:1},8,["data","show-checkbox"]),S.value&&0!==S.value.length?u("",!0):(d(),v(D,{key:0,description:"æš‚æ— ç« èŠ‚æ•°æ®","image-size":80}))])])}}}),[["__scopeId","data-v-51b80b29"]]);export{N as C};
