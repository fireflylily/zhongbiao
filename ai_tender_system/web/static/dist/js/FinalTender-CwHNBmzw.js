import{ab as e,c as l,d as s,v as a,m as t,j as i,a3 as c,Y as u,V as o,ac as n,k as r,b as d,t as p,O as v,P as _,u as f}from"./element-plus-ZLeSHaWT.js";import{v as m,r as b,c as y,j as h,x as k,E as g,M as j,B as x,I as w,K as z,H as F,L as V,O as I,F as P,aa as C,y as D,aJ as U,u as R,aP as q}from"./vue-core-CiAVTOOY.js";import{L as $}from"./Loading-BvtdKuLc.js";/* empty css                                                                          */import{P as B}from"./PageHeader-C8PosvJu.js";import"./vendor-ZqVwfHSb.js";import"./umo-editor-zkeZL3VF.js";/* empty css                                                                        */import{m as L}from"./utils-CTJnFPw-.js";import{_ as S}from"./index.js";import{u as T}from"./useProjectDocuments-Bd39Ghee.js";import{u as W}from"./project-DAr3RjR2.js";import"./tender-ZYcn_VXM.js";const H={class:"document-merge-panel"},M={class:"merge-section"},N={class:"files-status"},O={class:"status-icon"},J={key:0,class:"bi bi-check-circle-fill text-success"},E={key:1,class:"bi bi-x-circle-fill text-danger"},K={class:"file-info"},A={class:"file-name"},Y={class:"file-meta"},G={key:1,class:"text-muted"},Q={key:0,class:"file-actions"},X={class:"status-icon"},Z={key:0,class:"bi bi-check-circle-fill text-success"},ee={key:1,class:"bi bi-dash-circle text-warning"},le={class:"file-info"},se={class:"file-name"},ae={class:"file-meta"},te={key:1,class:"text-muted"},ie={key:0,class:"file-actions"},ce={class:"status-icon"},ue={key:0,class:"bi bi-check-circle-fill text-success"},oe={key:1,class:"bi bi-x-circle-fill text-danger"},ne={class:"file-info"},re={class:"file-name"},de={class:"file-meta"},pe={key:1,class:"text-muted"},ve={key:0,class:"file-actions"},_e={key:0},fe={key:1},me={key:0,class:"merge-section"},be={class:"config-group"},ye={class:"doc-order-list"},he={class:"doc-order-item fixed"},ke={key:0,class:"doc-order-item"},ge={class:"doc-order-item"},je={class:"order-number"},xe={class:"config-group"},we={class:"options-list"},ze={class:"config-group"},Fe={class:"index-template-preview"},Ve={class:"score-items-preview"},Ie={class:"config-group"},Pe={key:1,class:"merge-section"},Ce={key:0,class:"action-area"},De={key:1,class:"merge-progress"},Ue={class:"progress-message"},Re={class:"progress-details"},qe={key:0,class:"current"},$e={key:2,class:"merge-result"},Be={class:"result-info"},Le={class:"stats-list"},Se={key:0},Te={key:1},We={key:2},He={class:"processing-details"},Me={key:0},Ne={key:1},Oe={key:2},Je={key:3},Ee={class:"action-buttons"},Ke=S(m({__name:"DocumentMergePanel",props:{projectId:{},currentDocuments:{}},setup(p){const v=p,_=b(!0),f=b({}),m=b({required:!1,type:"none"}),U=b({include_p2p:!0,doc_order:["business","p2p","tech"],generate_toc:!0,remove_blanks:!0,unify_styles:!0,add_section_breaks:!0,output_filename:""}),R=b(!1),q=b(!1),$=b(0),B=b(""),S=b(""),T=b(""),W=b([]),Ke=b(null),Ae=b(!0),Ye=y(()=>f.value.business&&f.value.tech),Ge=async()=>{var e,l;try{q.value=!0;const e={business:f.value.business.file_path,tech:f.value.tech.file_path};U.value.include_p2p&&f.value.p2p&&(e.p2p=f.value.p2p.file_path);const l=await L.post(`/api/projects/${v.projectId}/merge-documents`,{file_paths:e,config:{...U.value,index_config:m.value}});if(l.data.success){const e=l.data.task_id||v.projectId;R.value=!0,q.value=!1,Qe(e)}}catch(s){r.error((null==(l=null==(e=s.response)?void 0:e.data)?void 0:l.error)||"启动整合失败"),q.value=!1}},Qe=e=>{const l=new EventSource(`/api/merge-status/${e}`);l.onmessage=e=>{try{const s=JSON.parse(e.data);if($.value=s.progress_percentage||0,S.value=s.current_step||"",s.current_step&&!W.value.includes(s.current_step)&&(T.value&&W.value.push(T.value),T.value=s.current_step),"completed"===s.overall_status){if(B.value="success",$.value=100,s.options){const e="string"==typeof s.options?JSON.parse(s.options):s.options;Ke.value={filename:U.value.output_filename+".docx",file_path:e.merged_document_path,file_size:e.file_size||0,stats:e.stats,created_at:(new Date).toLocaleString("zh-CN")}}R.value=!1,l.close(),r.success("文档整合完成！")}else"failed"===s.overall_status&&(B.value="exception",R.value=!1,l.close(),r.error("文档整合失败："+s.current_step))}catch(s){}},l.onerror=()=>{l.close(),R.value&&(r.error("进度监听中断"),R.value=!1)}},Xe=()=>{d.confirm("确定要重新整合吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Ke.value=null,$.value=0,B.value="",S.value="",T.value="",W.value=[]}).catch(()=>{})},Ze=e=>{if(!e)return"";if(e.startsWith("/api/"))return e;let l=e;const s="/Users/lvhe/Downloads/zhongbiao/zhongbiao/";return l.startsWith(s)&&(l=l.substring(42)),l.startsWith("ai_tender_system/data/")?l=l.substring(22):l.startsWith("data/")&&(l=l.substring(5)),`/api/files/serve/${l}`},el=()=>{var e;if(null==(e=Ke.value)?void 0:e.file_path){const e=Ze(Ke.value.file_path)+"?download=true";window.open(e,"_blank")}},ll=()=>{var e;if(null==(e=Ke.value)?void 0:e.file_path){const e=Ze(Ke.value.file_path);window.open(e,"_blank")}},sl=()=>{var e;(null==(e=Ke.value)?void 0:e.file_path)&&(r.success("正在打开编辑器..."),r.info("编辑功能开发中..."))},al=e=>{const l=f.value[e];if(null==l?void 0:l.file_path){const e=Ze(l.file_path);window.open(e,"_blank")}},tl=e=>e?e<1024?e+" B":e<1048576?(e/1024).toFixed(2)+" KB":(e/1048576).toFixed(2)+" MB":"--";return h(()=>{(async()=>{var e,l,s,a,t,i;try{if(_.value=!0,v.currentDocuments){const c=v.currentDocuments;return f.value={},c.businessResponseFile&&(f.value.business={status:"ready",file_path:c.businessResponseFile.outputFile,file_name:(null==(e=c.businessResponseFile.outputFile)?void 0:e.split("/").pop())||"商务应答文件.docx",file_size:(null==(l=c.businessResponseFile.stats)?void 0:l.file_size)||0}),c.p2pResponseFile&&(f.value.p2p={status:"ready",file_path:c.p2pResponseFile.outputFile,file_name:(null==(s=c.p2pResponseFile.outputFile)?void 0:s.split("/").pop())||"点对点应答文件.docx",file_size:(null==(a=c.p2pResponseFile.stats)?void 0:a.file_size)||0}),c.techProposalFile&&(f.value.tech={status:"ready",file_path:c.techProposalFile.outputFile,file_name:(null==(t=c.techProposalFile.outputFile)?void 0:t.split("/").pop())||"技术方案文件.docx",file_size:(null==(i=c.techProposalFile.stats)?void 0:i.file_size)||0}),U.value={include_p2p:!!f.value.p2p,doc_order:f.value.p2p?["business","p2p","tech"]:["business","tech"],generate_toc:!0,remove_blanks:!0,unify_styles:!0,add_section_breaks:!0,output_filename:`项目${v.projectId}_最终标书`},void(_.value=!1)}const c=await L.get(`/api/projects/${v.projectId}/merge-config`);if(c.data.success){const e=c.data.data;f.value=e.files||{},m.value=e.index_requirement||{required:!1,type:"none"},e.default_config&&(U.value={...e.default_config})}}catch(c){r.error("加载配置失败")}finally{_.value=!1}})()}),(r,d)=>{const p=e,v=l,b=s,y=a,h=t,L=i,Qe=c,Ze=o,il=u,cl=n;return D(),k("div",H,[_.value?(D(),g(p,{key:0,rows:10,animated:""})):(D(),k(j,{key:1},[x("section",M,[d[18]||(d[18]=x("div",{class:"section-header"},[x("h3",null,[x("i",{class:"bi bi-file-check"}),z(" 步骤 1/3：文件状态检查")])],-1)),x("div",N,[x("div",{class:F(["file-status-item",{"file-ready":f.value.business}])},[x("div",O,[f.value.business?(D(),k("i",J)):(D(),k("i",E))]),x("div",K,[d[11]||(d[11]=x("h4",null,"商务应答文件",-1)),f.value.business?(D(),k(j,{key:0},[x("p",A,V(f.value.business.file_name),1),x("p",Y,V(tl(f.value.business.file_size)),1)],64)):(D(),k("p",G,"未生成"))]),f.value.business?(D(),k("div",Q,[I(v,{size:"small",onClick:d[0]||(d[0]=e=>al("business"))},{default:P(()=>[...d[12]||(d[12]=[x("i",{class:"bi bi-eye"},null,-1),z(" 预览 ",-1)])]),_:1})])):w("",!0)],2),x("div",{class:F(["file-status-item",{"file-ready":f.value.p2p}])},[x("div",X,[f.value.p2p?(D(),k("i",Z)):(D(),k("i",ee))]),x("div",le,[d[13]||(d[13]=x("h4",null,"技术点对点应答",-1)),f.value.p2p?(D(),k(j,{key:0},[x("p",se,V(f.value.p2p.file_name),1),x("p",ae,V(tl(f.value.p2p.file_size)),1)],64)):(D(),k("p",te,"未生成（可选）"))]),f.value.p2p?(D(),k("div",ie,[I(v,{size:"small",onClick:d[1]||(d[1]=e=>al("p2p"))},{default:P(()=>[...d[14]||(d[14]=[x("i",{class:"bi bi-eye"},null,-1),z(" 预览 ",-1)])]),_:1})])):w("",!0)],2),x("div",{class:F(["file-status-item",{"file-ready":f.value.tech}])},[x("div",ce,[f.value.tech?(D(),k("i",ue)):(D(),k("i",oe))]),x("div",ne,[d[15]||(d[15]=x("h4",null,"技术方案文件",-1)),f.value.tech?(D(),k(j,{key:0},[x("p",re,V(f.value.tech.file_name),1),x("p",de,V(tl(f.value.tech.file_size)),1)],64)):(D(),k("p",pe,"未生成"))]),f.value.tech?(D(),k("div",ve,[I(v,{size:"small",onClick:d[2]||(d[2]=e=>al("tech"))},{default:P(()=>[...d[16]||(d[16]=[x("i",{class:"bi bi-eye"},null,-1),z(" 预览 ",-1)])]),_:1})])):w("",!0)],2)]),Ye.value?w("",!0):(D(),g(b,{key:0,type:"warning",closable:!1,"show-icon":"",class:"mt-3"},{title:P(()=>[...d[17]||(d[17]=[z(" 无法整合：缺少必需的文件 ",-1)])]),default:P(()=>[f.value.business?w("",!0):(D(),k("p",_e,"• 商务应答文件未生成，请先完成商务应答")),f.value.tech?w("",!0):(D(),k("p",fe,"• 技术方案文件未生成，请先完成技术方案"))]),_:1}))]),Ye.value?(D(),k("section",me,[d[42]||(d[42]=x("div",{class:"section-header"},[x("h3",null,[x("i",{class:"bi bi-sliders"}),z(" 步骤 2/3：整合配置")])],-1)),x("div",be,[d[27]||(d[27]=x("h4",null,[x("i",{class:"bi bi-files"}),z(" 文档组成与顺序")],-1)),x("div",ye,[x("div",he,[d[20]||(d[20]=x("span",{class:"order-number"},"1",-1)),d[21]||(d[21]=x("span",{class:"doc-name"},"商务应答",-1)),I(y,{size:"small",type:"info"},{default:P(()=>[...d[19]||(d[19]=[z("固定第一部分",-1)])]),_:1})]),f.value.p2p?(D(),k("div",ke,[d[23]||(d[23]=x("span",{class:"order-number"},"2",-1)),d[24]||(d[24]=x("span",{class:"doc-name"},"点对点应答",-1)),I(h,{modelValue:U.value.include_p2p,"onUpdate:modelValue":d[3]||(d[3]=e=>U.value.include_p2p=e)},{default:P(()=>[...d[22]||(d[22]=[z("包含此部分",-1)])]),_:1},8,["modelValue"])])):w("",!0),x("div",ge,[x("span",je,V(f.value.p2p?"3":"2"),1),d[26]||(d[26]=x("span",{class:"doc-name"},"技术方案",-1)),I(y,{size:"small",type:"success"},{default:P(()=>[...d[25]||(d[25]=[z("✓ 包含",-1)])]),_:1})])])]),x("div",xe,[d[32]||(d[32]=x("h4",null,[x("i",{class:"bi bi-palette"}),z(" 格式与目录选项")],-1)),x("div",we,[I(h,{modelValue:U.value.generate_toc,"onUpdate:modelValue":d[4]||(d[4]=e=>U.value.generate_toc=e)},{default:P(()=>[...d[28]||(d[28]=[z(" 自动生成目录（基于1-3级标题，带页码） ",-1)])]),_:1},8,["modelValue"]),I(h,{modelValue:U.value.remove_blanks,"onUpdate:modelValue":d[5]||(d[5]=e=>U.value.remove_blanks=e)},{default:P(()=>[...d[29]||(d[29]=[z(" 删除空白页和空白段落 ",-1)])]),_:1},8,["modelValue"]),I(h,{modelValue:U.value.unify_styles,"onUpdate:modelValue":d[6]||(d[6]=e=>U.value.unify_styles=e)},{default:P(()=>[...d[30]||(d[30]=[z(" 统一页眉页脚格式 ",-1)])]),_:1},8,["modelValue"]),I(h,{modelValue:U.value.add_section_breaks,"onUpdate:modelValue":d[7]||(d[7]=e=>U.value.add_section_breaks=e)},{default:P(()=>[...d[31]||(d[31]=[z(" 每部分间添加分节符 ",-1)])]),_:1},8,["modelValue"])])]),x("div",ze,[d[39]||(d[39]=x("h4",null,[x("i",{class:"bi bi-list-ol"}),z(" 索引设置")],-1)),m.value.required?"fixed_format"===m.value.type?(D(),g(b,{key:1,type:"warning",closable:!1,"show-icon":""},{title:P(()=>[...d[34]||(d[34]=[z(" 招标文件要求提供固定格式索引 ",-1)])]),default:P(()=>[x("div",Fe,[x("pre",null,V(m.value.template),1)]),I(h,{modelValue:Ae.value,"onUpdate:modelValue":d[8]||(d[8]=e=>Ae.value=e),disabled:"",checked:""},{default:P(()=>[...d[35]||(d[35]=[z(" 自动生成索引（必需） ",-1)])]),_:1},8,["modelValue"])]),_:1})):"score_based"===m.value.type?(D(),g(b,{key:2,type:"success",closable:!1,"show-icon":""},{title:P(()=>[...d[36]||(d[36]=[z(" 招标文件要求以评分标准建立索引 ",-1)])]),default:P(()=>[x("div",Ve,[d[37]||(d[37]=x("p",null,"将基于以下评分项生成索引：",-1)),x("ul",null,[(D(!0),k(j,null,C(m.value.score_items,e=>(D(),k("li",{key:e},V(e),1))),128))])]),I(h,{modelValue:Ae.value,"onUpdate:modelValue":d[9]||(d[9]=e=>Ae.value=e),disabled:"",checked:""},{default:P(()=>[...d[38]||(d[38]=[z(" 自动生成评分标准索引（必需） ",-1)])]),_:1},8,["modelValue"])]),_:1})):w("",!0):(D(),g(b,{key:0,type:"info",closable:!1,"show-icon":""},{title:P(()=>[...d[33]||(d[33]=[z(" 招标文件未要求提供索引，无需生成 ",-1)])]),_:1}))]),x("div",Ie,[d[41]||(d[41]=x("h4",null,[x("i",{class:"bi bi-file-earmark-text"}),z(" 文档名称")],-1)),I(L,{modelValue:U.value.output_filename,"onUpdate:modelValue":d[10]||(d[10]=e=>U.value.output_filename=e),placeholder:"请输入最终标书文件名",maxlength:"100","show-word-limit":""},{suffix:P(()=>[...d[40]||(d[40]=[z(".docx",-1)])]),_:1},8,["modelValue"])])])):w("",!0),Ye.value?(D(),k("section",Pe,[d[58]||(d[58]=x("div",{class:"section-header"},[x("h3",null,[x("i",{class:"bi bi-rocket-takeoff"}),z(" 步骤 3/3：开始整合")])],-1)),R.value||Ke.value?w("",!0):(D(),k("div",Ce,[I(v,{type:"primary",size:"large",loading:q.value,onClick:Ge},{default:P(()=>[...d[43]||(d[43]=[x("i",{class:"bi bi-play-fill"},null,-1),z(" 开始整合 ",-1)])]),_:1},8,["loading"])])),R.value?(D(),k("div",De,[I(Qe,{percentage:$.value,status:B.value},null,8,["percentage","status"]),x("p",Ue,V(S.value),1),x("div",Re,[d[46]||(d[46]=x("h5",null,"处理详情：",-1)),x("ul",null,[(D(!0),k(j,null,C(W.value,(e,l)=>(D(),k("li",{key:l,class:"completed"},[d[44]||(d[44]=x("i",{class:"bi bi-check-circle-fill"},null,-1)),z(" "+V(e),1)]))),128)),T.value?(D(),k("li",qe,[d[45]||(d[45]=x("i",{class:"bi bi-arrow-right-circle-fill"},null,-1)),z(" "+V(T.value),1)])):w("",!0)])])])):w("",!0),Ke.value?(D(),k("div",$e,[I(cl,{icon:"success",title:"整合完成！","sub-title":"您的最终标书已生成"},{extra:P(()=>{var e,l,s,a,t,i;return[x("div",Be,[d[55]||(d[55]=x("h4",null,[x("i",{class:"bi bi-file-earmark-check"}),z(" 文件信息")],-1)),I(il,{column:2,border:""},{default:P(()=>[I(Ze,{label:"文件名"},{default:P(()=>[z(V(Ke.value.filename),1)]),_:1}),I(Ze,{label:"文件大小"},{default:P(()=>[z(V(tl(Ke.value.file_size)),1)]),_:1}),I(Ze,{label:"总页数"},{default:P(()=>{var e;return[z(V((null==(e=Ke.value.stats)?void 0:e.total_pages)||"--")+" 页 ",1)]}),_:1}),I(Ze,{label:"生成时间"},{default:P(()=>[z(V(Ke.value.created_at),1)]),_:1})]),_:1}),d[56]||(d[56]=x("h4",{class:"mt-3"},[x("i",{class:"bi bi-bar-chart"}),z(" 文件组成统计")],-1)),x("ul",Le,[(null==(e=Ke.value.stats)?void 0:e.toc_pages)?(D(),k("li",Se," 目录："+V(Ke.value.stats.toc_pages)+" 页 ",1)):w("",!0),x("li",null,"商务应答："+V((null==(l=Ke.value.stats)?void 0:l.business_pages)||"--")+" 页",1),U.value.include_p2p?(D(),k("li",Te," 点对点应答："+V((null==(s=Ke.value.stats)?void 0:s.p2p_pages)||"--")+" 页 ",1)):w("",!0),x("li",null,"技术方案："+V((null==(a=Ke.value.stats)?void 0:a.tech_pages)||"--")+" 页",1),(null==(t=Ke.value.stats)?void 0:t.index_pages)?(D(),k("li",We," 索引："+V(Ke.value.stats.index_pages)+" 页 ",1)):w("",!0)]),d[57]||(d[57]=x("h4",{class:"mt-3"},[x("i",{class:"bi bi-tools"}),z(" 处理详情")],-1)),x("ul",He,[(null==(i=Ke.value.stats)?void 0:i.removed_blanks)?(D(),k("li",Me,[d[47]||(d[47]=x("i",{class:"bi bi-check-circle text-success"},null,-1)),z(" 已删除 "+V(Ke.value.stats.removed_blanks)+" 个空白段落 ",1)])):w("",!0),U.value.generate_toc?(D(),k("li",Ne,[...d[48]||(d[48]=[x("i",{class:"bi bi-check-circle text-success"},null,-1),z(" 已生成多级目录 ",-1)])])):w("",!0),m.value.required?(D(),k("li",Oe,[d[49]||(d[49]=x("i",{class:"bi bi-check-circle text-success"},null,-1)),z(" 已生成"+V("score_based"===m.value.type?"评分标准":"固定格式")+"索引 ",1)])):w("",!0),U.value.unify_styles?(D(),k("li",Je,[...d[50]||(d[50]=[x("i",{class:"bi bi-check-circle text-success"},null,-1),z(" 已统一页眉页脚 ",-1)])])):w("",!0)]),x("div",Ee,[I(v,{type:"primary",size:"large",onClick:el},{default:P(()=>[...d[51]||(d[51]=[x("i",{class:"bi bi-download"},null,-1),z(" 下载Word版 ",-1)])]),_:1}),I(v,{type:"success",size:"large",onClick:ll},{default:P(()=>[...d[52]||(d[52]=[x("i",{class:"bi bi-eye"},null,-1),z(" 在线预览 ",-1)])]),_:1}),I(v,{type:"warning",size:"large",onClick:sl},{default:P(()=>[...d[53]||(d[53]=[x("i",{class:"bi bi-pencil-square"},null,-1),z(" 在线编辑 ",-1)])]),_:1}),I(v,{size:"large",onClick:Xe},{default:P(()=>[...d[54]||(d[54]=[x("i",{class:"bi bi-arrow-clockwise"},null,-1),z(" 重新整合 ",-1)])]),_:1})])])]}),_:1})])):w("",!0)])):w("",!0)],64))])}}}),[["__scopeId","data-v-4f5ce16e"]]),Ae={class:"final-tender-page"},Ye={class:"selector-content"},Ge={class:"project-option"},Qe={class:"project-name"},Xe={class:"project-status"},Ze={class:"project-info"},el={class:"project-header"},ll={class:"project-meta"},sl=S(m({__name:"FinalTender",setup(e){const s=U(),t=q();W();const{projects:i,loading:c,selectedProject:u,currentDocuments:o,hasProjects:n,loadProjects:d,handleProjectChange:m,restoreProjectFromStore:y}=T(),F=b({projectId:null}),L=async()=>{await m(F.value.projectId,{onClear:()=>{},onDocumentsLoaded:e=>{const l=!!e.businessResponseFile,s=!!e.techProposalFile;l&&s||r.warning("该项目缺少商务应答或技术方案文件，无法整合")}}),F.value.projectId&&t.replace({name:"FinalTender",query:{projectId:F.value.projectId.toString()}})},S=()=>{F.value.projectId=null,t.replace({name:"FinalTender"})},H=()=>{d()};return h(async()=>{await d();const e=await y({onClear:()=>{},onDocumentsLoaded:e=>{}});e&&(F.value.projectId=e);const l=s.query.projectId;if(l&&!e){const e=Number(l);i.value.some(l=>l.id===e)&&(F.value.projectId=e,await L())}}),(e,s)=>{const t=l,r=a,d=f,m=p,b=v,y=_;return D(),k("div",Ae,[I(R(B),{title:"最终标书","show-back":!1},{actions:P(()=>[I(t,{onClick:H},{default:P(()=>[...s[2]||(s[2]=[x("i",{class:"bi bi-arrow-clockwise"},null,-1),z(" 刷新 ",-1)])]),_:1})]),_:1}),R(c)?(D(),g(R($),{key:0,text:"加载项目列表..."})):(D(),k(j,{key:1},[F.value.projectId?w("",!0):(D(),g(y,{key:0,class:"project-selector-card",shadow:"never"},{default:P(()=>[x("div",Ye,[s[4]||(s[4]=x("div",{class:"selector-icon"},[x("i",{class:"bi bi-folder2-open"})],-1)),s[5]||(s[5]=x("h3",null,"请选择要整合的项目",-1)),s[6]||(s[6]=x("p",{class:"text-muted"}," 从下方列表中选择一个已完成商务应答和技术方案的项目 ",-1)),I(m,{modelValue:F.value.projectId,"onUpdate:modelValue":s[0]||(s[0]=e=>F.value.projectId=e),placeholder:"选择项目",size:"large",filterable:"",class:"project-select",onChange:L},{default:P(()=>[(D(!0),k(j,null,C(R(i),e=>(D(),g(d,{key:e.id,label:`${e.project_name} (${e.project_number||"-"})`,value:e.id},{default:P(()=>[x("div",Ge,[x("span",Qe,V(e.project_name),1),x("div",Xe,[I(r,{type:"info",size:"small"},{default:P(()=>[z(V(e.company_name),1)]),_:2},1024)])])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),R(n)?w("",!0):(D(),g(b,{key:0,description:"暂无项目","image-size":120},{extra:P(()=>[I(t,{type:"primary",onClick:s[1]||(s[1]=l=>e.$router.push({name:"TenderManagement"}))},{default:P(()=>[...s[3]||(s[3]=[x("i",{class:"bi bi-folder-plus"},null,-1),z(" 前往项目管理 ",-1)])]),_:1})]),_:1}))])]),_:1})),F.value.projectId&&R(u)?(D(),k(j,{key:1},[I(y,{class:"current-project-card",shadow:"never"},{default:P(()=>[x("div",Ze,[x("div",el,[x("h3",null,[s[7]||(s[7]=x("i",{class:"bi bi-folder-check"},null,-1)),z(" "+V(R(u).project_name),1)]),I(t,{size:"small",text:"",onClick:S},{default:P(()=>[...s[8]||(s[8]=[x("i",{class:"bi bi-arrow-left-right"},null,-1),z(" 切换项目 ",-1)])]),_:1})]),x("p",ll," 公司："+V(R(u).company_name)+" | 项目编号："+V(R(u).project_number||"-")+" | 创建时间："+V(R(u).created_at),1)])]),_:1}),(D(),g(Ke,{"project-id":F.value.projectId,"current-documents":R(o),key:F.value.projectId},null,8,["project-id","current-documents"]))],64)):w("",!0)],64))])}}}),[["__scopeId","data-v-a7f77f31"]]);export{sl as default};
