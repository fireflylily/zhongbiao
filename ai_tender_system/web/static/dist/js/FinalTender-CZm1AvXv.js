import{$ as e,a as l,c as s,o as a,l as t,h as i,Z as c,S as u,T as o,a0 as n,j as r,i as d,p,n as v,L as _,M as f}from"./vendor-element-plus-CEQaQHNc.js";import{d as m,r as b,a as y,b as h,P as k,M as g,L as j,F as x,O as w,Q as z,H as F,W as V,R as I,c as C,N as P,V as D,b4 as R,b7 as U,I as $}from"./vendor-vue-DnBj6vzG.js";import{L as q}from"./Loading-fOFG7xAl.js";/* empty css                                                                          */import{P as L}from"./PageHeader-BJsiLdTH.js";import"./vendor-other-CxXkF0Pk.js";import"./vendor-editor-CGvuleas.js";/* empty css                                                                        */import"./vendor-dayjs-CeOjnJlt.js";import{_ as S}from"./index.js";import{a as T}from"./vendor-axios-BG7aBJwU.js";import{u as B}from"./useProjectDocuments-DkMW_Nbe.js";import{u as N}from"./project-DRKLdxdD.js";import"./vendor-echarts-C00rBISf.js";import"./tender-ZYcn_VXM.js";const W={class:"document-merge-panel"},M={class:"merge-section"},H={class:"files-status"},J={class:"status-icon"},O={key:0,class:"bi bi-check-circle-fill text-success"},A={key:1,class:"bi bi-x-circle-fill text-danger"},E={class:"file-info"},K={class:"file-name"},Q={class:"file-meta"},Z={key:1,class:"text-muted"},G={key:0,class:"file-actions"},X={class:"status-icon"},Y={key:0,class:"bi bi-check-circle-fill text-success"},ee={key:1,class:"bi bi-dash-circle text-warning"},le={class:"file-info"},se={class:"file-name"},ae={class:"file-meta"},te={key:1,class:"text-muted"},ie={key:0,class:"file-actions"},ce={class:"status-icon"},ue={key:0,class:"bi bi-check-circle-fill text-success"},oe={key:1,class:"bi bi-x-circle-fill text-danger"},ne={class:"file-info"},re={class:"file-name"},de={class:"file-meta"},pe={key:1,class:"text-muted"},ve={key:0,class:"file-actions"},_e={key:0},fe={key:1},me={key:0,class:"merge-section"},be={class:"config-group"},ye={class:"doc-order-list"},he={class:"doc-order-item fixed"},ke={key:0,class:"doc-order-item"},ge={class:"doc-order-item"},je={class:"order-number"},xe={class:"config-group"},we={class:"options-list"},ze={class:"config-group"},Fe={class:"index-template-preview"},Ve={class:"score-items-preview"},Ie={class:"config-group"},Ce={key:1,class:"merge-section"},Pe={key:0,class:"action-area"},De={key:1,class:"merge-progress"},Re={class:"progress-message"},Ue={class:"progress-details"},$e={key:0,class:"current"},qe={key:2,class:"merge-result"},Le={class:"result-info"},Se={class:"stats-list"},Te={key:0},Be={key:1},Ne={key:2},We={class:"processing-details"},Me={key:0},He={key:1},Je={key:2},Oe={key:3},Ae={class:"action-buttons"},Ee=S(m({__name:"DocumentMergePanel",props:{projectId:{},currentDocuments:{}},setup(p){const v=p,_=b(!0),f=b({}),m=b({required:!1,type:"none"}),R=b({include_p2p:!0,doc_order:["business","p2p","tech"],generate_toc:!0,remove_blanks:!0,unify_styles:!0,add_section_breaks:!0,output_filename:""}),U=b(!1),$=b(!1),q=b(0),L=b(""),S=b(""),B=b(""),N=b([]),Ee=b(null),Ke=b(!0),Qe=y(()=>f.value.business&&f.value.tech),Ze=async()=>{var e,l;try{$.value=!0;const e={business:f.value.business.file_path,tech:f.value.tech.file_path};R.value.include_p2p&&f.value.p2p&&(e.p2p=f.value.p2p.file_path);const l=await T.post(`/api/projects/${v.projectId}/merge-documents`,{file_paths:e,config:{...R.value,index_config:m.value}});if(l.data.success){const e=l.data.task_id||v.projectId;U.value=!0,$.value=!1,Ge(e)}}catch(s){r.error((null==(l=null==(e=s.response)?void 0:e.data)?void 0:l.error)||"启动整合失败"),$.value=!1}},Ge=e=>{const l=new EventSource(`/api/merge-status/${e}`);l.onmessage=e=>{try{const s=JSON.parse(e.data);if(q.value=s.progress_percentage||0,S.value=s.current_step||"",s.current_step&&!N.value.includes(s.current_step)&&(B.value&&N.value.push(B.value),B.value=s.current_step),"completed"===s.overall_status){if(L.value="success",q.value=100,s.options){const e="string"==typeof s.options?JSON.parse(s.options):s.options;Ee.value={filename:R.value.output_filename+".docx",file_path:e.merged_document_path,file_size:e.file_size||0,stats:e.stats,created_at:(new Date).toLocaleString("zh-CN")}}U.value=!1,l.close(),r.success("文档整合完成！")}else"failed"===s.overall_status&&(L.value="exception",U.value=!1,l.close(),r.error("文档整合失败："+s.current_step))}catch(s){}},l.onerror=()=>{l.close(),U.value&&(r.error("进度监听中断"),U.value=!1)}},Xe=()=>{d.confirm("确定要重新整合吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Ee.value=null,q.value=0,L.value="",S.value="",B.value="",N.value=[]}).catch(()=>{})},Ye=e=>{if(!e)return"";if(e.startsWith("/api/"))return e;let l=e;const s="/Users/lvhe/Downloads/zhongbiao/zhongbiao/";return l.startsWith(s)&&(l=l.substring(42)),l.startsWith("ai_tender_system/data/")?l=l.substring(22):l.startsWith("data/")&&(l=l.substring(5)),`/api/files/serve/${l}`},el=()=>{var e;if(null==(e=Ee.value)?void 0:e.file_path){const e=Ye(Ee.value.file_path)+"?download=true";window.open(e,"_blank")}},ll=()=>{var e;if(null==(e=Ee.value)?void 0:e.file_path){const e=Ye(Ee.value.file_path);window.open(e,"_blank")}},sl=()=>{var e;(null==(e=Ee.value)?void 0:e.file_path)&&(r.success("正在打开编辑器..."),r.info("编辑功能开发中..."))},al=e=>{const l=f.value[e];if(null==l?void 0:l.file_path){const e=Ye(l.file_path);window.open(e,"_blank")}},tl=e=>e?e<1024?e+" B":e<1048576?(e/1024).toFixed(2)+" KB":(e/1048576).toFixed(2)+" MB":"--";return h(()=>{(async()=>{var e,l,s,a,t,i;try{if(_.value=!0,v.currentDocuments){const c=v.currentDocuments;return f.value={},c.businessResponseFile&&(f.value.business={status:"ready",file_path:c.businessResponseFile.outputFile,file_name:(null==(e=c.businessResponseFile.outputFile)?void 0:e.split("/").pop())||"商务应答文件.docx",file_size:(null==(l=c.businessResponseFile.stats)?void 0:l.file_size)||0}),c.p2pResponseFile&&(f.value.p2p={status:"ready",file_path:c.p2pResponseFile.outputFile,file_name:(null==(s=c.p2pResponseFile.outputFile)?void 0:s.split("/").pop())||"点对点应答文件.docx",file_size:(null==(a=c.p2pResponseFile.stats)?void 0:a.file_size)||0}),c.techProposalFile&&(f.value.tech={status:"ready",file_path:c.techProposalFile.outputFile,file_name:(null==(t=c.techProposalFile.outputFile)?void 0:t.split("/").pop())||"技术方案文件.docx",file_size:(null==(i=c.techProposalFile.stats)?void 0:i.file_size)||0}),R.value={include_p2p:!!f.value.p2p,doc_order:f.value.p2p?["business","p2p","tech"]:["business","tech"],generate_toc:!0,remove_blanks:!0,unify_styles:!0,add_section_breaks:!0,output_filename:`项目${v.projectId}_最终标书`},void(_.value=!1)}const c=await T.get(`/api/projects/${v.projectId}/merge-config`);if(c.data.success){const e=c.data.data;f.value=e.files||{},m.value=e.index_requirement||{required:!1,type:"none"},e.default_config&&(R.value={...e.default_config})}}catch(c){r.error("加载配置失败")}finally{_.value=!1}})()}),(r,d)=>{const p=e,v=l,b=s,y=a,h=t,T=i,Ge=c,Ye=o,il=u,cl=n;return g(),k("div",W,[_.value?(g(),j(p,{key:0,rows:10,animated:""})):(g(),k(x,{key:1},[w("section",M,[d[18]||(d[18]=w("div",{class:"section-header"},[w("h3",null,[w("i",{class:"bi bi-file-check"}),F(" 步骤 1/3：文件状态检查")])],-1)),w("div",H,[w("div",{class:V(["file-status-item",{"file-ready":f.value.business}])},[w("div",J,[f.value.business?(g(),k("i",O)):(g(),k("i",A))]),w("div",E,[d[11]||(d[11]=w("h4",null,"商务应答文件",-1)),f.value.business?(g(),k(x,{key:0},[w("p",K,I(f.value.business.file_name),1),w("p",Q,I(tl(f.value.business.file_size)),1)],64)):(g(),k("p",Z,"未生成"))]),f.value.business?(g(),k("div",G,[C(v,{size:"small",onClick:d[0]||(d[0]=e=>al("business"))},{default:P(()=>[...d[12]||(d[12]=[w("i",{class:"bi bi-eye"},null,-1),F(" 预览 ",-1)])]),_:1})])):z("",!0)],2),w("div",{class:V(["file-status-item",{"file-ready":f.value.p2p}])},[w("div",X,[f.value.p2p?(g(),k("i",Y)):(g(),k("i",ee))]),w("div",le,[d[13]||(d[13]=w("h4",null,"技术点对点应答",-1)),f.value.p2p?(g(),k(x,{key:0},[w("p",se,I(f.value.p2p.file_name),1),w("p",ae,I(tl(f.value.p2p.file_size)),1)],64)):(g(),k("p",te,"未生成（可选）"))]),f.value.p2p?(g(),k("div",ie,[C(v,{size:"small",onClick:d[1]||(d[1]=e=>al("p2p"))},{default:P(()=>[...d[14]||(d[14]=[w("i",{class:"bi bi-eye"},null,-1),F(" 预览 ",-1)])]),_:1})])):z("",!0)],2),w("div",{class:V(["file-status-item",{"file-ready":f.value.tech}])},[w("div",ce,[f.value.tech?(g(),k("i",ue)):(g(),k("i",oe))]),w("div",ne,[d[15]||(d[15]=w("h4",null,"技术方案文件",-1)),f.value.tech?(g(),k(x,{key:0},[w("p",re,I(f.value.tech.file_name),1),w("p",de,I(tl(f.value.tech.file_size)),1)],64)):(g(),k("p",pe,"未生成"))]),f.value.tech?(g(),k("div",ve,[C(v,{size:"small",onClick:d[2]||(d[2]=e=>al("tech"))},{default:P(()=>[...d[16]||(d[16]=[w("i",{class:"bi bi-eye"},null,-1),F(" 预览 ",-1)])]),_:1})])):z("",!0)],2)]),Qe.value?z("",!0):(g(),j(b,{key:0,type:"warning",closable:!1,"show-icon":"",class:"mt-3"},{title:P(()=>[...d[17]||(d[17]=[F(" 无法整合：缺少必需的文件 ",-1)])]),default:P(()=>[f.value.business?z("",!0):(g(),k("p",_e,"• 商务应答文件未生成，请先完成商务应答")),f.value.tech?z("",!0):(g(),k("p",fe,"• 技术方案文件未生成，请先完成技术方案"))]),_:1}))]),Qe.value?(g(),k("section",me,[d[42]||(d[42]=w("div",{class:"section-header"},[w("h3",null,[w("i",{class:"bi bi-sliders"}),F(" 步骤 2/3：整合配置")])],-1)),w("div",be,[d[27]||(d[27]=w("h4",null,[w("i",{class:"bi bi-files"}),F(" 文档组成与顺序")],-1)),w("div",ye,[w("div",he,[d[20]||(d[20]=w("span",{class:"order-number"},"1",-1)),d[21]||(d[21]=w("span",{class:"doc-name"},"商务应答",-1)),C(y,{size:"small",type:"info"},{default:P(()=>[...d[19]||(d[19]=[F("固定第一部分",-1)])]),_:1})]),f.value.p2p?(g(),k("div",ke,[d[23]||(d[23]=w("span",{class:"order-number"},"2",-1)),d[24]||(d[24]=w("span",{class:"doc-name"},"点对点应答",-1)),C(h,{modelValue:R.value.include_p2p,"onUpdate:modelValue":d[3]||(d[3]=e=>R.value.include_p2p=e)},{default:P(()=>[...d[22]||(d[22]=[F("包含此部分",-1)])]),_:1},8,["modelValue"])])):z("",!0),w("div",ge,[w("span",je,I(f.value.p2p?"3":"2"),1),d[26]||(d[26]=w("span",{class:"doc-name"},"技术方案",-1)),C(y,{size:"small",type:"success"},{default:P(()=>[...d[25]||(d[25]=[F("✓ 包含",-1)])]),_:1})])])]),w("div",xe,[d[32]||(d[32]=w("h4",null,[w("i",{class:"bi bi-palette"}),F(" 格式与目录选项")],-1)),w("div",we,[C(h,{modelValue:R.value.generate_toc,"onUpdate:modelValue":d[4]||(d[4]=e=>R.value.generate_toc=e)},{default:P(()=>[...d[28]||(d[28]=[F(" 自动生成目录（基于1-3级标题，带页码） ",-1)])]),_:1},8,["modelValue"]),C(h,{modelValue:R.value.remove_blanks,"onUpdate:modelValue":d[5]||(d[5]=e=>R.value.remove_blanks=e)},{default:P(()=>[...d[29]||(d[29]=[F(" 删除空白页和空白段落 ",-1)])]),_:1},8,["modelValue"]),C(h,{modelValue:R.value.unify_styles,"onUpdate:modelValue":d[6]||(d[6]=e=>R.value.unify_styles=e)},{default:P(()=>[...d[30]||(d[30]=[F(" 统一页眉页脚格式 ",-1)])]),_:1},8,["modelValue"]),C(h,{modelValue:R.value.add_section_breaks,"onUpdate:modelValue":d[7]||(d[7]=e=>R.value.add_section_breaks=e)},{default:P(()=>[...d[31]||(d[31]=[F(" 每部分间添加分节符 ",-1)])]),_:1},8,["modelValue"])])]),w("div",ze,[d[39]||(d[39]=w("h4",null,[w("i",{class:"bi bi-list-ol"}),F(" 索引设置")],-1)),m.value.required?"fixed_format"===m.value.type?(g(),j(b,{key:1,type:"warning",closable:!1,"show-icon":""},{title:P(()=>[...d[34]||(d[34]=[F(" 招标文件要求提供固定格式索引 ",-1)])]),default:P(()=>[w("div",Fe,[w("pre",null,I(m.value.template),1)]),C(h,{modelValue:Ke.value,"onUpdate:modelValue":d[8]||(d[8]=e=>Ke.value=e),disabled:"",checked:""},{default:P(()=>[...d[35]||(d[35]=[F(" 自动生成索引（必需） ",-1)])]),_:1},8,["modelValue"])]),_:1})):"score_based"===m.value.type?(g(),j(b,{key:2,type:"success",closable:!1,"show-icon":""},{title:P(()=>[...d[36]||(d[36]=[F(" 招标文件要求以评分标准建立索引 ",-1)])]),default:P(()=>[w("div",Ve,[d[37]||(d[37]=w("p",null,"将基于以下评分项生成索引：",-1)),w("ul",null,[(g(!0),k(x,null,D(m.value.score_items,e=>(g(),k("li",{key:e},I(e),1))),128))])]),C(h,{modelValue:Ke.value,"onUpdate:modelValue":d[9]||(d[9]=e=>Ke.value=e),disabled:"",checked:""},{default:P(()=>[...d[38]||(d[38]=[F(" 自动生成评分标准索引（必需） ",-1)])]),_:1},8,["modelValue"])]),_:1})):z("",!0):(g(),j(b,{key:0,type:"info",closable:!1,"show-icon":""},{title:P(()=>[...d[33]||(d[33]=[F(" 招标文件未要求提供索引，无需生成 ",-1)])]),_:1}))]),w("div",Ie,[d[41]||(d[41]=w("h4",null,[w("i",{class:"bi bi-file-earmark-text"}),F(" 文档名称")],-1)),C(T,{modelValue:R.value.output_filename,"onUpdate:modelValue":d[10]||(d[10]=e=>R.value.output_filename=e),placeholder:"请输入最终标书文件名",maxlength:"100","show-word-limit":""},{suffix:P(()=>[...d[40]||(d[40]=[F(".docx",-1)])]),_:1},8,["modelValue"])])])):z("",!0),Qe.value?(g(),k("section",Ce,[d[58]||(d[58]=w("div",{class:"section-header"},[w("h3",null,[w("i",{class:"bi bi-rocket-takeoff"}),F(" 步骤 3/3：开始整合")])],-1)),U.value||Ee.value?z("",!0):(g(),k("div",Pe,[C(v,{type:"primary",size:"large",loading:$.value,onClick:Ze},{default:P(()=>[...d[43]||(d[43]=[w("i",{class:"bi bi-play-fill"},null,-1),F(" 开始整合 ",-1)])]),_:1},8,["loading"])])),U.value?(g(),k("div",De,[C(Ge,{percentage:q.value,status:L.value},null,8,["percentage","status"]),w("p",Re,I(S.value),1),w("div",Ue,[d[46]||(d[46]=w("h5",null,"处理详情：",-1)),w("ul",null,[(g(!0),k(x,null,D(N.value,(e,l)=>(g(),k("li",{key:l,class:"completed"},[d[44]||(d[44]=w("i",{class:"bi bi-check-circle-fill"},null,-1)),F(" "+I(e),1)]))),128)),B.value?(g(),k("li",$e,[d[45]||(d[45]=w("i",{class:"bi bi-arrow-right-circle-fill"},null,-1)),F(" "+I(B.value),1)])):z("",!0)])])])):z("",!0),Ee.value?(g(),k("div",qe,[C(cl,{icon:"success",title:"整合完成！","sub-title":"您的最终标书已生成"},{extra:P(()=>{var e,l,s,a,t,i;return[w("div",Le,[d[55]||(d[55]=w("h4",null,[w("i",{class:"bi bi-file-earmark-check"}),F(" 文件信息")],-1)),C(il,{column:2,border:""},{default:P(()=>[C(Ye,{label:"文件名"},{default:P(()=>[F(I(Ee.value.filename),1)]),_:1}),C(Ye,{label:"文件大小"},{default:P(()=>[F(I(tl(Ee.value.file_size)),1)]),_:1}),C(Ye,{label:"总页数"},{default:P(()=>{var e;return[F(I((null==(e=Ee.value.stats)?void 0:e.total_pages)||"--")+" 页 ",1)]}),_:1}),C(Ye,{label:"生成时间"},{default:P(()=>[F(I(Ee.value.created_at),1)]),_:1})]),_:1}),d[56]||(d[56]=w("h4",{class:"mt-3"},[w("i",{class:"bi bi-bar-chart"}),F(" 文件组成统计")],-1)),w("ul",Se,[(null==(e=Ee.value.stats)?void 0:e.toc_pages)?(g(),k("li",Te," 目录："+I(Ee.value.stats.toc_pages)+" 页 ",1)):z("",!0),w("li",null,"商务应答："+I((null==(l=Ee.value.stats)?void 0:l.business_pages)||"--")+" 页",1),R.value.include_p2p?(g(),k("li",Be," 点对点应答："+I((null==(s=Ee.value.stats)?void 0:s.p2p_pages)||"--")+" 页 ",1)):z("",!0),w("li",null,"技术方案："+I((null==(a=Ee.value.stats)?void 0:a.tech_pages)||"--")+" 页",1),(null==(t=Ee.value.stats)?void 0:t.index_pages)?(g(),k("li",Ne," 索引："+I(Ee.value.stats.index_pages)+" 页 ",1)):z("",!0)]),d[57]||(d[57]=w("h4",{class:"mt-3"},[w("i",{class:"bi bi-tools"}),F(" 处理详情")],-1)),w("ul",We,[(null==(i=Ee.value.stats)?void 0:i.removed_blanks)?(g(),k("li",Me,[d[47]||(d[47]=w("i",{class:"bi bi-check-circle text-success"},null,-1)),F(" 已删除 "+I(Ee.value.stats.removed_blanks)+" 个空白段落 ",1)])):z("",!0),R.value.generate_toc?(g(),k("li",He,[...d[48]||(d[48]=[w("i",{class:"bi bi-check-circle text-success"},null,-1),F(" 已生成多级目录 ",-1)])])):z("",!0),m.value.required?(g(),k("li",Je,[d[49]||(d[49]=w("i",{class:"bi bi-check-circle text-success"},null,-1)),F(" 已生成"+I("score_based"===m.value.type?"评分标准":"固定格式")+"索引 ",1)])):z("",!0),R.value.unify_styles?(g(),k("li",Oe,[...d[50]||(d[50]=[w("i",{class:"bi bi-check-circle text-success"},null,-1),F(" 已统一页眉页脚 ",-1)])])):z("",!0)]),w("div",Ae,[C(v,{type:"primary",size:"large",onClick:el},{default:P(()=>[...d[51]||(d[51]=[w("i",{class:"bi bi-download"},null,-1),F(" 下载Word版 ",-1)])]),_:1}),C(v,{type:"success",size:"large",onClick:ll},{default:P(()=>[...d[52]||(d[52]=[w("i",{class:"bi bi-eye"},null,-1),F(" 在线预览 ",-1)])]),_:1}),C(v,{type:"warning",size:"large",onClick:sl},{default:P(()=>[...d[53]||(d[53]=[w("i",{class:"bi bi-pencil-square"},null,-1),F(" 在线编辑 ",-1)])]),_:1}),C(v,{size:"large",onClick:Xe},{default:P(()=>[...d[54]||(d[54]=[w("i",{class:"bi bi-arrow-clockwise"},null,-1),F(" 重新整合 ",-1)])]),_:1})])])]}),_:1})])):z("",!0)])):z("",!0)],64))])}}}),[["__scopeId","data-v-4f5ce16e"]]),Ke={class:"final-tender-page"},Qe={class:"selector-content"},Ze={class:"project-option"},Ge={class:"project-name"},Xe={class:"project-status"},Ye={class:"project-info"},el={class:"project-header"},ll={class:"project-meta"},sl=S(m({__name:"FinalTender",setup(e){const s=R(),t=U();N();const{projects:i,loading:c,selectedProject:u,currentDocuments:o,hasProjects:n,loadProjects:d,handleProjectChange:m,restoreProjectFromStore:y}=B(),V=b({projectId:null}),S=async()=>{await m(V.value.projectId,{onClear:()=>{},onDocumentsLoaded:e=>{const l=!!e.businessResponseFile,s=!!e.techProposalFile;l&&s||r.warning("该项目缺少商务应答或技术方案文件，无法整合")}}),V.value.projectId&&t.replace({name:"FinalTender",query:{projectId:V.value.projectId.toString()}})},T=()=>{V.value.projectId=null,t.replace({name:"FinalTender"})},W=()=>{d()};return h(async()=>{await d();const e=await y({onClear:()=>{},onDocumentsLoaded:e=>{}});e&&(V.value.projectId=e);const l=s.query.projectId;if(l&&!e){const e=Number(l);i.value.some(l=>l.id===e)&&(V.value.projectId=e,await S())}}),(e,s)=>{const t=l,r=a,d=v,m=p,b=_,y=f;return g(),k("div",Ke,[C($(L),{title:"最终标书","show-back":!1},{actions:P(()=>[C(t,{onClick:W},{default:P(()=>[...s[2]||(s[2]=[w("i",{class:"bi bi-arrow-clockwise"},null,-1),F(" 刷新 ",-1)])]),_:1})]),_:1}),$(c)?(g(),j($(q),{key:0,text:"加载项目列表..."})):(g(),k(x,{key:1},[V.value.projectId?z("",!0):(g(),j(y,{key:0,class:"project-selector-card",shadow:"never"},{default:P(()=>[w("div",Qe,[s[4]||(s[4]=w("div",{class:"selector-icon"},[w("i",{class:"bi bi-folder2-open"})],-1)),s[5]||(s[5]=w("h3",null,"请选择要整合的项目",-1)),s[6]||(s[6]=w("p",{class:"text-muted"}," 从下方列表中选择一个已完成商务应答和技术方案的项目 ",-1)),C(m,{modelValue:V.value.projectId,"onUpdate:modelValue":s[0]||(s[0]=e=>V.value.projectId=e),placeholder:"选择项目",size:"large",filterable:"",class:"project-select",onChange:S},{default:P(()=>[(g(!0),k(x,null,D($(i),e=>(g(),j(d,{key:e.id,label:`${e.project_name} (${e.project_number||"-"})`,value:e.id},{default:P(()=>[w("div",Ze,[w("span",Ge,I(e.project_name),1),w("div",Xe,[C(r,{type:"info",size:"small"},{default:P(()=>[F(I(e.company_name),1)]),_:2},1024)])])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),$(n)?z("",!0):(g(),j(b,{key:0,description:"暂无项目","image-size":120},{extra:P(()=>[C(t,{type:"primary",onClick:s[1]||(s[1]=l=>e.$router.push({name:"TenderManagement"}))},{default:P(()=>[...s[3]||(s[3]=[w("i",{class:"bi bi-folder-plus"},null,-1),F(" 前往项目管理 ",-1)])]),_:1})]),_:1}))])]),_:1})),V.value.projectId&&$(u)?(g(),k(x,{key:1},[C(y,{class:"current-project-card",shadow:"never"},{default:P(()=>[w("div",Ye,[w("div",el,[w("h3",null,[s[7]||(s[7]=w("i",{class:"bi bi-folder-check"},null,-1)),F(" "+I($(u).project_name),1)]),C(t,{size:"small",text:"",onClick:T},{default:P(()=>[...s[8]||(s[8]=[w("i",{class:"bi bi-arrow-left-right"},null,-1),F(" 切换项目 ",-1)])]),_:1})]),w("p",ll," 公司："+I($(u).company_name)+" | 项目编号："+I($(u).project_number||"-")+" | 创建时间："+I($(u).created_at),1)])]),_:1}),(g(),j(Ee,{"project-id":V.value.projectId,"current-documents":$(o),key:V.value.projectId},null,8,["project-id","current-documents"]))],64)):z("",!0)],64))])}}}),[["__scopeId","data-v-a7f77f31"]]);export{sl as default};
