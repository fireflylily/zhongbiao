import{_ as e}from"./_plugin-vue_export-helper-BZqs1yfm.js";/* empty css                */import"./DocumentUploader.vue_vue_type_style_index_0_scoped_1530a3ce_lang-kpO4p46J.js";import{E as a}from"./Empty-zwxEoS1s.js";import{P as t}from"./PageHeader-BjzQIq6-.js";import{C as o}from"./Card-DZyKkX6c.js";import{d as s,b4 as l,r,x as i,c as u,o as n,g as p,a0 as c,a1 as d,w as m,e as f,t as v,B as g,k as _,l as y,aA as x,a as b,F as h}from"./index.js";import{E as j}from"./index-C1e8Wm8f.js";import{E as w}from"./index-2qkNUAPG.js";/* empty css                   */import"./el-tag-Bqv51Q1S.js";import"./_baseClone-DjpDAVKO.js";const B={class:"upload-button"},k={key:1,class:"upload-drag-area"},z={class:"drag-text"},S={class:"drag-hint"},I={class:"upload-tip"},$={key:0,class:"upload-progress"},F=e(s({__name:"UploadButton",props:{action:{default:"/api/upload"},headers:{default:()=>({})},data:{default:()=>({})},multiple:{type:Boolean,default:!1},accept:{default:"*"},limit:{default:1},maxSize:{default:100},buttonText:{default:"上传文件"},buttonType:{default:"primary"},buttonIcon:{default:l},tip:{default:""},showFileList:{type:Boolean,default:!0},showProgress:{type:Boolean,default:!0},drag:{type:Boolean,default:!1},autoUpload:{type:Boolean,default:!0}},emits:["success","error","progress","remove","exceed"],setup(e,{expose:a,emit:t}){const o=e,s=t,l=r(),b=r([]),h=r(!1),F=r(0),T=i(()=>{if(o.tip)return o.tip;const e=[];return o.accept&&"*"!==o.accept&&e.push(`支持${o.accept}格式`),o.maxSize&&e.push(`大小不超过${o.maxSize}MB`),e.join("，")});function U(e){if(o.maxSize){if(!(e.size/1024/1024<o.maxSize))return x.error(`文件大小不能超过 ${o.maxSize}MB!`),!1}if(o.accept&&"*"!==o.accept){const a=o.accept.split(",").map(e=>e.trim()),t=e.name.substring(e.name.lastIndexOf("."));if(!a.some(a=>a===t||a===e.type))return x.error(`只支持 ${o.accept} 格式的文件！`),!1}return h.value=!0,F.value=0,!0}function C(e,a){h.value=!1,F.value=100,setTimeout(()=>{F.value=0},1e3),x.success("上传成功"),s("success",e,a)}function E(e,a){h.value=!1,F.value=0,x.error("上传失败: "+e.message),s("error",e,a)}function P(e,a){F.value=Math.round(e.percent),s("progress",e,a)}function L(e){x.warning(`最多只能上传 ${o.limit} 个文件！`),s("exceed",e)}function M(e){s("remove",e)}return a({clearFiles:function(){var e;null==(e=l.value)||e.clearFiles()},submit:function(){var e;null==(e=l.value)||e.submit()}}),(a,t)=>{const o=y,s=j,r=w;return n(),u("div",B,[p(s,{ref_key:"uploadRef",ref:l,action:e.action,headers:e.headers,data:e.data,multiple:e.multiple,accept:e.accept,limit:e.limit,"file-list":b.value,"before-upload":U,"on-success":C,"on-error":E,"on-progress":P,"on-exceed":L,"on-remove":M,"show-file-list":e.showFileList,drag:e.drag,"auto-upload":e.autoUpload},d({default:m(()=>[e.drag?(n(),u("div",k,[t[1]||(t[1]=f("i",{class:"bi bi-cloud-upload drag-icon"},null,-1)),f("div",z,[t[0]||(t[0]=f("p",{class:"drag-title"},[_("拖拽文件到此处或"),f("em",null,"点击上传")],-1)),f("p",S,v(T.value),1)])])):(n(),g(o,{key:0,type:e.buttonType,icon:e.buttonIcon,loading:h.value},{default:m(()=>[_(v(e.buttonText),1)]),_:1},8,["type","icon","loading"]))]),_:2},[e.tip&&!e.drag?{name:"tip",fn:m(()=>[f("div",I,v(e.tip),1)]),key:"0"}:void 0]),1032,["action","headers","data","multiple","accept","limit","file-list","show-file-list","drag","auto-upload"]),e.showProgress&&F.value>0&&F.value<100?(n(),u("div",$,[p(r,{percentage:F.value,"stroke-width":6},null,8,["percentage"])])):c("",!0)])}}}),[["__scopeId","data-v-7e6c62a3"]]),T={class:"document-library"},U=e(s({__name:"DocumentLibrary",setup(e){const{success:s}=b(),l=e=>{s("上传文档",`已选择文件: ${e.name}`)};return(e,s)=>{const r=y;return n(),u("div",T,[p(h(t),{title:"文档库",description:"管理企业知识文档"},{actions:m(()=>[p(h(F),{"auto-upload":!1,accept:".pdf,.doc,.docx",onChange:l},{default:m(()=>[p(r,{type:"primary",icon:"Upload"},{default:m(()=>[...s[0]||(s[0]=[_("上传文档",-1)])]),_:1})]),_:1})]),_:1}),p(h(o),{title:"文档列表"},{default:m(()=>[p(h(a),{type:"no-data",description:"暂无文档数据"})]),_:1})])}}}),[["__scopeId","data-v-affe32a7"]]);export{U as default};
