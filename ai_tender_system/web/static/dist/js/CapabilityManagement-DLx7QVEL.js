import{u as e,bm as a,aC as l,bn as t,aB as s,bo as i,l as o,_ as d,w as r,M as n,L as u,e as c,bp as p,au as v,t as f,d as m,ae as _,af as y,aS as h,bq as g,O as b,S as k,B as C,P as w,N as x,h as j,G as V,q as E}from"./index.js";/* empty css               */import{E as N,a as K,s as O}from"./el-select-ke7UrdxB.js";/* empty css                     *//* empty css                             */import{E as S}from"./el-tree-C7otNEKg.js";/* empty css                    */import"./el-text-C9ciGf7A.js";import{E as z}from"./el-pagination-xKYLvwnI.js";/* empty css                */import{ap as U,ao as $,bA as M,aF as T,am as A,c4 as L,bH as P,aH as D,bQ as H,an as R,bu as q,aX as B,bB as I,au as F,ar as J,aw as G,ax as Q,as as X,ay as Z,aC as W,aq as Y,aV as ee,aD as ae,av as le,bw as te,az as se,aA as ie}from"./editor-CeUA3ax_.js";import{L as oe}from"./Loading-BYRlvOhH.js";import{E as de}from"./Empty-D7Fl5Zrw.js";/* empty css                */import{C as re}from"./Card-D8VtnD1Z.js";/* empty css                                                        *//* empty css                                                                            *//* empty css                   *//* empty css                */import{E as ne}from"./index-DE8f5ksc.js";import{a as ue,E as ce}from"./index-CJcdScbE.js";import{E as pe,a as ve}from"./index-DIDzDbKq.js";import{E as fe}from"./index-BISXlzby.js";import{E as me}from"./index-DOCWmJkm.js";import{e as _e}from"./strings-twdxJQ8K.js";import{E as ye,a as he}from"./index-DpMZ9cG3.js";import"./index-B9zQDgNq.js";import"./index-pPpeQHfX.js";import"./toNumber-CDEuZe1n.js";import"./_baseFindIndex-BTqrMG7V.js";import"./_baseIteratee-PtO-pneB.js";import"./index-D_p_YczY.js";import"./index-BSM8fZi2.js";import"./flatMap-K8MMJsz8.js";import"./map-BH6IylNP.js";import"./_baseEach-DGFkAtUh.js";import"./raf-BZHcGSIv.js";const ge=A({extends:K,setup(e,a){const l=K.setup(e,a);delete l.selectOptionClick;const t=L().proxy;return T(()=>{l.select.states.cachedOptions.get(t.value)||l.select.onOptionCreate(t)}),U(()=>a.attrs.visible,e=>{T(()=>{l.states.visible=e})},{immediate:!0}),l},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function be(e){return e||0===e}function ke(e){return P(e)&&e.length}function Ce(e){return P(e)?e:be(e)?[e]:[]}function we(e,a,l,t,s){for(let i=0;i<e.length;i++){const o=e[i];if(a(o,i,e,s))return t?t(o,i,e,s):o;{const e=l(o);if(ke(e)){const s=we(e,a,l,t,o);if(s)return s}}}}function xe(e,a,l,t){for(let s=0;s<e.length;s++){const i=e[s];a(i,s,e,t);const o=l(i);ke(o)&&xe(o,a,l,i)}}var je=A({props:{data:{type:Array,default:()=>[]}},setup(e){const a=H(O);return U(()=>e.data,()=>{var l;e.data.forEach(e=>{a.states.cachedOptions.has(e.value)||a.states.cachedOptions.set(e.value,e)});const t=(null==(l=a.selectRef)?void 0:l.querySelectorAll("input"))||[];o&&!Array.from(t).includes(document.activeElement)&&a.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const Ve=r(d(A({name:"ElTreeSelect",inheritAttrs:!1,props:{...N.props,...S.props,cacheData:{type:Array,default:()=>[]}},setup(o,d){const{slots:r,expose:n}=d,u=R(),c=R(),p=$(()=>o.nodeKey||o.valueKey||"value"),v=((t,{attrs:s,emit:i},{select:o,tree:d,key:r})=>{const n=e("tree-select");return U(()=>t.data,()=>{t.filterable&&T(()=>{var e,a;null==(a=d.value)||a.filter(null==(e=o.value)?void 0:e.states.inputValue)})},{flush:"post"}),{...a(M(t),Object.keys(N.props)),...s,class:$(()=>s.class),style:$(()=>s.style),"onUpdate:modelValue":e=>i(l,e),valueKey:r,popperClass:$(()=>{const e=[n.e("popper")];return t.popperClass&&e.push(t.popperClass),e.join(" ")}),filterMethod:(e="")=>{var a;t.filterMethod?t.filterMethod(e):t.remoteMethod?t.remoteMethod(e):null==(a=d.value)||a.filter(e)}}})(o,d,{select:u,tree:c,key:p}),{cacheOptions:f,...m}=((e,{attrs:o,slots:d,emit:r},{select:n,tree:u,key:c})=>{U([()=>e.modelValue,u],()=>{e.showCheckbox&&T(()=>{const a=u.value;a&&!i(a.getCheckedKeys(),Ce(e.modelValue))&&a.setCheckedKeys(Ce(e.modelValue))})},{immediate:!0,deep:!0});const p=$(()=>({value:c.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),v=(e,a)=>{var l;const t=p.value[e];return D(t)?t(a,null==(l=u.value)?void 0:l.getNode(v("value",a))):a[t]},f=Ce(e.modelValue).map(a=>we(e.data||[],e=>v("value",e)===a,e=>v("children",e),(e,a,l,t)=>t&&v("value",t))).filter(e=>be(e)),m=$(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const a=[];return xe(e.data.concat(e.cacheData),e=>{const l=v("value",e);a.push({value:l,currentLabel:v("label",e),isDisabled:v("disabled",e)})},e=>v("children",e)),a}),_=()=>{var e;return null==(e=u.value)?void 0:e.getCheckedKeys().filter(e=>{var a;const l=null==(a=u.value)?void 0:a.getNode(e);return!s(l)&&t(l.childNodes)})};return{...a(M(e),Object.keys(S.props)),...o,nodeKey:c,expandOnClickNode:$(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:$(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(f):f),renderContent:(a,{node:l,data:t,store:s})=>a(ge,{value:v("value",t),label:v("label",t),disabled:v("disabled",t),visible:l.visible},e.renderContent?()=>e.renderContent(a,{node:l,data:t,store:s}):d.default?()=>d.default({node:l,data:t,store:s}):void 0),filterNodeMethod:(a,l,t)=>e.filterNodeMethod?e.filterNodeMethod(a,l,t):!a||new RegExp(_e(a),"i").test(v("label",l)||""),onNodeClick:(a,l,t)=>{var s,i,d,r;if(null==(s=o.onNodeClick)||s.call(o,a,l,t),!e.showCheckbox||!e.checkOnClickNode){if(e.showCheckbox||!e.checkStrictly&&!l.isLeaf)e.expandOnClickNode&&t.proxy.handleExpandIconClick();else if(!v("disabled",a)){const e=null==(i=n.value)?void 0:i.states.options.get(v("value",a));null==(d=n.value)||d.handleOptionSelect(e)}null==(r=n.value)||r.focus()}},onCheck:(a,t)=>{var s;if(!e.showCheckbox)return;const i=v("value",a),d={};xe([u.value.store.root],e=>d[e.key]=e,e=>e.childNodes);const c=t.checkedKeys,p=e.multiple?Ce(e.modelValue).filter(e=>!(e in d)&&!c.includes(e)):[],f=p.concat(c);if(e.checkStrictly)r(l,e.multiple?f:f.includes(i)?i:void 0);else if(e.multiple){const e=_();r(l,p.concat(e))}else{const t=we([a],e=>!ke(v("children",e))&&!v("disabled",e),e=>v("children",e)),s=t?v("value",t):void 0,i=be(e.modelValue)&&!!we([a],a=>v("value",a)===e.modelValue,e=>v("children",e));r(l,s===e.modelValue||i?void 0:s)}T(()=>{var l;const t=Ce(e.modelValue);u.value.setCheckedKeys(t),null==(l=o.onCheck)||l.call(o,a,{checkedKeys:u.value.getCheckedKeys(),checkedNodes:u.value.getCheckedNodes(),halfCheckedKeys:u.value.getHalfCheckedKeys(),halfCheckedNodes:u.value.getHalfCheckedNodes()})}),null==(s=n.value)||s.focus()},onNodeExpand:(a,t,s)=>{var i;null==(i=o.onNodeExpand)||i.call(o,a,t,s),T(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&t.checked){const a={},t=u.value.getCheckedKeys();xe([u.value.store.root],e=>a[e.key]=e,e=>e.childNodes);const s=Ce(e.modelValue).filter(e=>!(e in a)&&!t.includes(e)),i=_();r(l,s.concat(i))}})},cacheOptions:m}})(o,d,{select:u,tree:c,key:p}),_=q({});return n(_),B(()=>{Object.assign(_,{...a(c.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...a(u.value,["focus","blur","selectedLabel"]),treeRef:c.value,selectRef:u.value})}),()=>I(N,q({...v,ref:e=>u.value=e}),{...r,default:()=>[I(je,{data:f.value}),I(S,q({...m,ref:e=>c.value=e}))]})}}),[["__file","tree-select.vue"]])),Ee={class:"capability-management"},Ne={class:"stats-bar"},Ke={class:"stat-content"},Oe={class:"stat-icon tags"},Se={class:"stat-info"},ze={class:"stat-value"},Ue={class:"stat-content"},$e={class:"stat-icon capabilities"},Me={class:"stat-info"},Te={class:"stat-value"},Ae={class:"stat-content"},Le={class:"stat-icon verified"},Pe={class:"stat-info"},De={class:"stat-value"},He={class:"tree-node"},Re={class:"node-label"},qe={class:"node-actions"},Be={class:"capabilities-toolbar"},Ie={key:3,class:"pagination-wrapper"},Fe={class:"original-text"},Je="/api/capability",Ge=E(A({__name:"CapabilityManagement",setup(e){const{success:a,error:l}=n(),t=u(),s=$(()=>t.currentCompanyId||1),i=q({tagCount:0,capabilityCount:0,verifiedCount:0}),o=R(!1),d=R([]),r={label:"tag_name",children:"children"},E=R(null),O=R(""),M=R(!1),T=R([]),A=R(""),L=R(1),P=R(20),D=R(0),H=R(!1),I=R("create"),_e=R({tag_id:null,tag_name:"",tag_code:"",parent_tag_id:null,description:"",example_keywords:""}),ge=R(),be={tag_name:[{required:!0,message:"请输入标签名称",trigger:"blur"}],tag_code:[{required:!0,message:"请输入标签代码",trigger:"blur"}]},ke=R(!1),Ce=R(!1),we=R(null),xe=R(!1),je=q({doc_ids:[],tag_id:null}),Ge=R([]),Qe=R(!1),Xe=async()=>{o.value=!0;try{const e=await fetch(`${Je}/tags?company_id=${s.value}`),a=await e.json();a.success?(d.value=a.data||[],i.tagCount=Ze(d.value)):l("加载失败",a.error||"未知错误")}catch(e){l("加载失败",e instanceof Error?e.message:"未知错误")}finally{o.value=!1}},Ze=e=>e.reduce((e,a)=>e+1+(a.children?Ze(a.children):0),0),We=async()=>{M.value=!0;try{const e=new URLSearchParams({company_id:String(s.value),page:String(L.value),page_size:String(P.value)});E.value&&e.append("tag_id",String(E.value)),A.value&&e.append("keyword",A.value);const a=await fetch(`${Je}/capabilities?${e}`),t=await a.json();t.success?(T.value=t.data||[],D.value=t.total||0,i.capabilityCount=D.value,i.verifiedCount=T.value.filter(e=>e.verified).length):l("加载失败",t.error||"未知错误")}catch(e){l("加载失败",e instanceof Error?e.message:"未知错误")}finally{M.value=!1}},Ye=()=>{L.value=1,We()},ea=e=>{E.value=e.tag_id,O.value=e.tag_name,L.value=1,We()},aa=()=>{I.value="create",_e.value={tag_id:null,tag_name:"",tag_code:"",parent_tag_id:null,description:"",example_keywords:""},H.value=!0},la=async()=>{ge.value&&await ge.value.validate(async e=>{if(e){ke.value=!0;try{const e="edit"===I.value,t=e?`${Je}/tags/${_e.value.tag_id}`:`${Je}/tags`,i={..._e.value,company_id:s.value},o=await fetch(t,{method:e?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),d=await o.json();d.success?(a(e?"更新成功":"创建成功"),H.value=!1,await Xe()):l(e?"更新失败":"创建失败",d.error||"未知错误")}catch(t){l("保存失败",t instanceof Error?t.message:"未知错误")}finally{ke.value=!1}}})},ta=async e=>{try{const t=await fetch(`${Je}/capabilities/${e.capability_id}/verify`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({verified:!e.verified})}),s=await t.json();s.success?(e.verified=!e.verified,a(e.verified?"已验证":"已取消验证")):l("操作失败",s.error||"未知错误")}catch(t){l("操作失败",t instanceof Error?t.message:"未知错误")}},sa=async()=>{we.value&&await ta(we.value)},ia=async()=>{je.doc_ids=[],je.tag_id=E.value;try{const e=await fetch(`/api/documents?company_id=${s.value}&limit=100`),a=await e.json();a.success&&(Ge.value=a.data||[])}catch(e){}xe.value=!0},oa=async()=>{Qe.value=!0;try{const e=await fetch(`${Je}/extract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_id:s.value,doc_ids:je.doc_ids,tag_id:je.tag_id})}),t=await e.json();t.success?(a("提取完成",`成功提取 ${t.extracted_count||0} 个能力`),xe.value=!1,We()):l("提取失败",t.error||"未知错误")}catch(e){l("提取失败",e instanceof Error?e.message:"未知错误")}finally{Qe.value=!1}};return B(()=>{Xe(),We()}),U(s,()=>{Xe(),We()}),(e,t)=>{const s=c,n=ne,u=m,U=S,$=ue,R=b,q=ve,B=fe,Ze=me,da=pe,ra=z,na=ce,ua=x,ca=Ve,pa=w,va=j,fa=he,ma=ye,_a=K,ya=N;return J(),F("div",Ee,[G("div",Ne,[Q(n,{class:"stat-card"},{default:X(()=>[G("div",Ke,[G("div",Oe,[Q(s,{size:32,color:"#409eff"},{default:X(()=>[Q(Z(p))]),_:1})]),G("div",Se,[t[16]||(t[16]=G("div",{class:"stat-label"},"能力标签",-1)),G("div",ze,W(i.tagCount),1)])])]),_:1}),Q(n,{class:"stat-card"},{default:X(()=>[G("div",Ue,[G("div",$e,[Q(s,{size:32,color:"#67c23a"},{default:X(()=>[Q(Z(v))]),_:1})]),G("div",Me,[t[17]||(t[17]=G("div",{class:"stat-label"},"能力条目",-1)),G("div",Te,W(i.capabilityCount),1)])])]),_:1}),Q(n,{class:"stat-card"},{default:X(()=>[G("div",Ae,[G("div",Le,[Q(s,{size:32,color:"#e6a23c"},{default:X(()=>[Q(Z(f))]),_:1})]),G("div",Pe,[t[18]||(t[18]=G("div",{class:"stat-label"},"已验证",-1)),G("div",De,W(i.verifiedCount),1)])])]),_:1})]),Q(na,{gutter:20},{default:X(()=>[Q($,{span:8},{default:X(()=>[Q(Z(re),{title:"能力标签"},{extra:X(()=>[Q(u,{type:"primary",size:"small",onClick:aa},{default:X(()=>[Q(s,null,{default:X(()=>[Q(Z(_))]),_:1}),t[19]||(t[19]=ae(" 新建标签 ",-1))]),_:1})]),default:X(()=>[o.value?(J(),Y(Z(oe),{key:0,text:"加载中..."})):d.value.length?(J(),Y(U,{key:2,data:d.value,props:r,"node-key":"tag_id","default-expand-all":"","highlight-current":"",onNodeClick:ea},{default:X(({node:e,data:t})=>[G("div",He,[G("span",Re,W(e.label),1),G("span",qe,[Q(u,{link:"",type:"primary",size:"small",onClick:ee(e=>{return a=t,I.value="create",_e.value={tag_id:null,tag_name:"",tag_code:"",parent_tag_id:a.tag_id,description:"",example_keywords:""},void(H.value=!0);var a},["stop"])},{default:X(()=>[Q(s,null,{default:X(()=>[Q(Z(_))]),_:1})]),_:1},8,["onClick"]),Q(u,{link:"",type:"warning",size:"small",onClick:ee(e=>{return a=t,I.value="edit",_e.value={tag_id:a.tag_id,tag_name:a.tag_name,tag_code:a.tag_code,parent_tag_id:a.parent_tag_id,description:a.description||"",example_keywords:a.example_keywords||""},void(H.value=!0);var a},["stop"])},{default:X(()=>[Q(s,null,{default:X(()=>[Q(Z(y))]),_:1})]),_:1},8,["onClick"]),Q(u,{link:"",type:"danger",size:"small",onClick:ee(e=>(async e=>{try{await V.confirm(`确定要删除标签 "${e.tag_name}" 吗？`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"})}catch{return}try{const t=await fetch(`${Je}/tags/${e.tag_id}`,{method:"DELETE"}),s=await t.json();s.success?(a("删除成功"),await Xe(),E.value===e.tag_id&&(E.value=null,O.value="",We())):l("删除失败",s.error||"未知错误")}catch(t){l("删除失败",t instanceof Error?t.message:"未知错误")}})(t),["stop"])},{default:X(()=>[Q(s,null,{default:X(()=>[Q(Z(h))]),_:1})]),_:1},8,["onClick"])])])]),_:1},8,["data"])):(J(),Y(Z(de),{key:1,type:"no-data",description:"暂无标签"}))]),_:1})]),_:1}),Q($,{span:16},{default:X(()=>[Q(Z(re),{title:O.value?`${O.value} - 能力列表`:"全部能力"},{extra:X(()=>[G("div",Be,[Q(R,{modelValue:A.value,"onUpdate:modelValue":t[0]||(t[0]=e=>A.value=e),placeholder:"搜索能力名称...",clearable:"",style:{width:"200px"},onKeyup:te(Ye,["enter"])},{prefix:X(()=>[Q(s,null,{default:X(()=>[Q(Z(k))]),_:1})]),_:1},8,["modelValue"]),Q(u,{type:"primary",onClick:ia},{default:X(()=>[Q(s,null,{default:X(()=>[Q(Z(C))]),_:1}),t[20]||(t[20]=ae(" 从文档提取 ",-1))]),_:1})])]),default:X(()=>[M.value?(J(),Y(Z(oe),{key:0,text:"加载中..."})):T.value.length?(J(),Y(da,{key:2,data:T.value,stripe:"","max-height":"500"},{default:X(()=>[Q(q,{prop:"capability_name",label:"能力名称",width:"180","show-overflow-tooltip":""}),Q(q,{prop:"capability_type",label:"类型",width:"100"},{default:X(({row:e})=>{return[Q(B,{type:(a=e.capability_type,{"功能":"primary","接口":"success","服务":"warning","支持能力":"info"}[a]||"info"),size:"small"},{default:X(()=>[ae(W(e.capability_type||"未分类"),1)]),_:2},1032,["type"])];var a}),_:1}),Q(q,{prop:"capability_description",label:"描述","show-overflow-tooltip":""}),Q(q,{prop:"doc_name",label:"来源文档",width:"150","show-overflow-tooltip":""}),Q(q,{prop:"confidence_score",label:"置信度",width:"80",align:"center"},{default:X(({row:e})=>{return[Q(Ze,{percentage:Math.round(100*(e.confidence_score||0)),"stroke-width":6,"show-text":!1,color:(a=e.confidence_score,a>=.8?"#67c23a":a>=.6?"#e6a23c":"#f56c6c")},null,8,["percentage","color"])];var a}),_:1}),Q(q,{prop:"verified",label:"验证",width:"70",align:"center"},{default:X(({row:e})=>[e.verified?(J(),Y(s,{key:0,color:"#67c23a"},{default:X(()=>[Q(Z(f))]),_:1})):(J(),Y(s,{key:1,color:"#909399"},{default:X(()=>[Q(Z(g))]),_:1}))]),_:1}),Q(q,{label:"操作",width:"150",fixed:"right"},{default:X(({row:e})=>[Q(u,{link:"",type:"primary",size:"small",onClick:a=>{return l=e,we.value=l,void(Ce.value=!0);var l}},{default:X(()=>[...t[21]||(t[21]=[ae(" 详情 ",-1)])]),_:1},8,["onClick"]),Q(u,{link:"",type:e.verified?"warning":"success",size:"small",onClick:a=>ta(e)},{default:X(()=>[ae(W(e.verified?"取消验证":"验证"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data"])):(J(),Y(Z(de),{key:1,type:"no-data",description:"暂无能力数据"})),D.value>P.value?(J(),F("div",Ie,[Q(ra,{"current-page":L.value,"onUpdate:currentPage":t[1]||(t[1]=e=>L.value=e),"page-size":P.value,"onUpdate:pageSize":t[2]||(t[2]=e=>P.value=e),total:D.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onSizeChange:We,onCurrentChange:We},null,8,["current-page","page-size","total"])])):le("",!0)]),_:1},8,["title"])]),_:1})]),_:1}),Q(va,{modelValue:H.value,"onUpdate:modelValue":t[9]||(t[9]=e=>H.value=e),title:"create"===I.value?"新建标签":"编辑标签",width:"500px"},{footer:X(()=>[Q(u,{onClick:t[8]||(t[8]=e=>H.value=!1)},{default:X(()=>[...t[22]||(t[22]=[ae("取消",-1)])]),_:1}),Q(u,{type:"primary",onClick:la,loading:ke.value},{default:X(()=>[...t[23]||(t[23]=[ae(" 保存 ",-1)])]),_:1},8,["loading"])]),default:X(()=>[Q(pa,{model:_e.value,rules:be,ref_key:"tagFormRef",ref:ge,"label-width":"100px"},{default:X(()=>[Q(ua,{label:"标签名称",prop:"tag_name"},{default:X(()=>[Q(R,{modelValue:_e.value.tag_name,"onUpdate:modelValue":t[3]||(t[3]=e=>_e.value.tag_name=e),placeholder:"如：风控产品、实修能力"},null,8,["modelValue"])]),_:1}),Q(ua,{label:"标签代码",prop:"tag_code"},{default:X(()=>[Q(R,{modelValue:_e.value.tag_code,"onUpdate:modelValue":t[4]||(t[4]=e=>_e.value.tag_code=e),placeholder:"英文代码，如: risk_control",disabled:"edit"===I.value},null,8,["modelValue","disabled"])]),_:1}),Q(ua,{label:"父级标签",prop:"parent_tag_id"},{default:X(()=>[Q(ca,{modelValue:_e.value.parent_tag_id,"onUpdate:modelValue":t[5]||(t[5]=e=>_e.value.parent_tag_id=e),data:d.value,props:{label:"tag_name",value:"tag_id",children:"children"},placeholder:"选择父级标签（可选）","check-strictly":"",clearable:"",style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),Q(ua,{label:"描述",prop:"description"},{default:X(()=>[Q(R,{modelValue:_e.value.description,"onUpdate:modelValue":t[6]||(t[6]=e=>_e.value.description=e),type:"textarea",rows:3,placeholder:"标签的详细描述"},null,8,["modelValue"])]),_:1}),Q(ua,{label:"示例关键词",prop:"example_keywords"},{default:X(()=>[Q(R,{modelValue:_e.value.example_keywords,"onUpdate:modelValue":t[7]||(t[7]=e=>_e.value.example_keywords=e),type:"textarea",rows:2,placeholder:"逗号分隔的关键词，用于AI匹配"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),Q(va,{modelValue:Ce.value,"onUpdate:modelValue":t[11]||(t[11]=e=>Ce.value=e),title:"能力详情",width:"600px"},{footer:X(()=>{var e;return[Q(u,{onClick:t[10]||(t[10]=e=>Ce.value=!1)},{default:X(()=>[...t[24]||(t[24]=[ae("关闭",-1)])]),_:1}),Q(u,{type:(null==(e=we.value)?void 0:e.verified)?"warning":"success",onClick:sa},{default:X(()=>{var e;return[ae(W((null==(e=we.value)?void 0:e.verified)?"取消验证":"标记为已验证"),1)]}),_:1},8,["type"])]}),default:X(()=>[we.value?(J(),Y(ma,{key:0,column:2,border:""},{default:X(()=>[Q(fa,{label:"能力名称",span:2},{default:X(()=>[ae(W(we.value.capability_name),1)]),_:1}),Q(fa,{label:"能力类型"},{default:X(()=>[ae(W(we.value.capability_type||"未分类"),1)]),_:1}),Q(fa,{label:"置信度"},{default:X(()=>[ae(W(Math.round(100*(we.value.confidence_score||0)))+"% ",1)]),_:1}),Q(fa,{label:"关联标签"},{default:X(()=>[ae(W(we.value.tag_name||"无"),1)]),_:1}),Q(fa,{label:"验证状态"},{default:X(()=>[Q(B,{type:we.value.verified?"success":"info"},{default:X(()=>[ae(W(we.value.verified?"已验证":"待验证"),1)]),_:1},8,["type"])]),_:1}),Q(fa,{label:"来源文档",span:2},{default:X(()=>[ae(W(we.value.doc_name||"未知"),1)]),_:1}),Q(fa,{label:"能力描述",span:2},{default:X(()=>[ae(W(we.value.capability_description||"无描述"),1)]),_:1}),Q(fa,{label:"原文摘录",span:2},{default:X(()=>[G("div",Fe,W(we.value.original_text||"无"),1)]),_:1})]),_:1})):le("",!0)]),_:1},8,["modelValue"]),Q(va,{modelValue:xe.value,"onUpdate:modelValue":t[15]||(t[15]=e=>xe.value=e),title:"从文档提取能力",width:"600px"},{footer:X(()=>[Q(u,{onClick:t[14]||(t[14]=e=>xe.value=!1)},{default:X(()=>[...t[25]||(t[25]=[ae("取消",-1)])]),_:1}),Q(u,{type:"primary",onClick:oa,loading:Qe.value,disabled:!je.doc_ids.length},{default:X(()=>[...t[26]||(t[26]=[ae(" 开始提取 ",-1)])]),_:1},8,["loading","disabled"])]),default:X(()=>[Q(pa,{"label-width":"100px"},{default:X(()=>[Q(ua,{label:"选择文档"},{default:X(()=>[Q(ya,{modelValue:je.doc_ids,"onUpdate:modelValue":t[12]||(t[12]=e=>je.doc_ids=e),multiple:"",filterable:"",placeholder:"选择要提取能力的文档",style:{width:"100%"}},{default:X(()=>[(J(!0),F(se,null,ie(Ge.value,e=>(J(),Y(_a,{key:e.doc_id,label:e.doc_name,value:e.doc_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Q(ua,{label:"关联标签"},{default:X(()=>[Q(ca,{modelValue:je.tag_id,"onUpdate:modelValue":t[13]||(t[13]=e=>je.tag_id=e),data:d.value,props:{label:"tag_name",value:"tag_id",children:"children"},placeholder:"选择要关联的标签（可选）","check-strictly":"",clearable:"",style:{width:"100%"}},null,8,["modelValue","data"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-a7963c26"]]);export{Ge as default};
