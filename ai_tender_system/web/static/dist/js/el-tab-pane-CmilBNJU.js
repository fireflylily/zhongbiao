import{aZ as e,bj as a,R as t,aV as l,$ as s,l as n,aH as o,u as r,aX as u,ar as i,bk as d,bl as v,bm as c,n as b,bn as p,bo as f,aD as m,aF as h,a3 as g,a0 as y,bc as w,ae as C,at as x,bp as R,w as $,a_ as N}from"./index.js";import{c as P,r as E}from"./raf-B6jWGkGX.js";import{c as k}from"./strings-C1SMPKoP.js";import{c6 as T,aw as B,bA as S,c9 as F,aW as A,bM as V,bR as j,am as _,ax as L,aX as M,aC as W,az as z,aM as K,aN as O,aF as X,aH as D,an as H,bG as I,aE as Y,bB as q,aI as G,b$ as U,bS as Z,bV as J,bt as Q,ca as ee,aB as ae,aD as te,aT as le}from"./editor-BnIwMfSr.js";import{t as se}from"./toNumber-CvdKE1Ff.js";const ne=(a,t)=>{const l=T({}),s=T([]),n=new WeakMap,o=()=>{s.value=((a,t,l)=>e(a.subTree).filter(e=>{var a;return V(e)&&(null==(a=e.type)?void 0:a.name)===t&&!!e.component}).map(e=>e.component.uid).map(e=>l[e]).filter(e=>!!e))(a,t,l.value)},r=e=>e.render(),u=B({setup:(e,{slots:a})=>()=>(o(),a.default?S(r,{render:a.default}):null)});return{children:s,addChild:e=>{l.value[e.uid]=e,F(l),A(()=>{const a=e.getVnode().el,t=a.parentNode;if(!n.has(t)){n.set(t,[]);const e=t.insertBefore.bind(t);t.insertBefore=(a,s)=>(n.get(t).some(e=>a===e||s===e)&&F(l),e(a,s))}n.get(t).push(a)})},removeChild:e=>{delete l.value[e.uid],F(l);const a=e.getVnode().el,t=a.parentNode,s=n.get(t),o=s.indexOf(a);s.splice(o,1)},ChildrenSorter:u}},oe="horizontal",re="vertical",ue={[oe]:"deltaX",[re]:"deltaY"},ie=Symbol("tabsRootContextKey"),de=t({tabs:{type:s(Array),default:()=>l([])},tabRefs:{type:s(Object),default:()=>l({})}}),ve="ElTabBar",ce=B({name:ve});var be=n(B({...ce,props:de,setup(e,{expose:a}){const t=e,l=j(ie);l||o(ve,"<el-tabs><el-tab-bar /></el-tabs>");const s=r("tabs"),n=_(),d=_(),v=()=>d.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(i(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${k(o)}`],a=n[`client${k(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${k(n)}(${e}px)`}})(),c=[];L(()=>t.tabs,async()=>{await D(),v(),c.forEach(e=>e.stop()),c.length=0,Object.values(t.tabRefs).forEach(e=>{c.push(u(e,v))})},{immediate:!0});const b=u(n,()=>v());return M(()=>{c.forEach(e=>e.stop()),c.length=0,b.stop()}),a({ref:n,update:v}),(e,a)=>(z(),W("div",{ref_key:"barRef",ref:n,class:O([X(s).e("active-bar"),X(s).is(X(l).props.tabPosition)]),style:K(d.value)},null,6))}}),[["__file","tab-bar.vue"]]);const pe=t({panes:{type:s(Array),default:()=>l([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),fe="ElTabNav",me=B({name:fe,props:pe,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(e,{expose:t,emit:l}){const s=j(ie);s||o(fe,"<el-tabs><tab-nav /></el-tabs>");const n=r("tabs"),i=d(),y=v(),w=_(),C=_(),x=_(),R=_({}),$=_(),N=_(!1),B=_(0),S=_(!1),V=_(!0),M=T(),W=H(()=>["top","bottom"].includes(s.props.tabPosition)),z=H(()=>W.value?"width":"height"),K=H(()=>({transform:`translate${"width"===z.value?"X":"Y"}(-${B.value}px)`})),{width:O,height:X}=c(w),{width:q,height:G}=c(C,{width:0,height:0},{box:"border-box"}),U=H(()=>W.value?O.value:X.value),Z=H(()=>W.value?q.value:G.value),{onWheel:J}=(({atEndEdge:e,atStartEdge:t,layout:l},s)=>{let n,o=0;const r=a=>a<0&&t.value||a>0&&e.value;return{hasReachedEdge:r,onWheel:e=>{P(n);const t=e[ue[l.value]];r(o)&&r(o+t)||(o+=t,a()||e.preventDefault(),n=E(()=>{s(o),o=0}))}}})({atStartEdge:H(()=>B.value<=0),atEndEdge:H(()=>Z.value-B.value<=U.value),layout:H(()=>W.value?"horizontal":"vertical")},e=>{var a,t,l;B.value=(a=B.value+e,t=0,void 0===(l=Z.value-U.value)&&(l=t,t=void 0),void 0!==l&&(l=(l=se(l))==l?l:0),void 0!==t&&(t=(t=se(t))==t?t:0),function(e,a,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==a&&(e=e>=a?e:a)),e}(se(a),t,l))}),Q=()=>{if(!w.value)return;const e=w.value[`offset${k(z.value)}`],a=B.value;if(!a)return;const t=a>e?a-e:0;B.value=t},ee=()=>{if(!w.value||!C.value)return;const e=C.value[`offset${k(z.value)}`],a=w.value[`offset${k(z.value)}`],t=B.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;B.value=l},ae=async()=>{const a=C.value;if(!(N.value&&x.value&&w.value&&a))return;await D();const t=R.value[e.currentName];if(!t)return;const l=w.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=W.value?a.offsetWidth-n.width:a.offsetHeight-n.height,r=B.value;let u=r;W.value?(s.left<n.left&&(u=r-(n.left-s.left)),s.right>n.right&&(u=r+s.right-n.right)):(s.top<n.top&&(u=r-(n.top-s.top)),s.bottom>n.bottom&&(u=r+(s.bottom-n.bottom))),u=Math.max(u,0),B.value=Math.min(u,o)},te=()=>{var a;if(!C.value||!w.value)return;e.stretch&&(null==(a=$.value)||a.update());const t=C.value[`offset${k(z.value)}`],l=w.value[`offset${k(z.value)}`],s=B.value;l<t?(N.value=N.value||{},N.value.prev=s,N.value.next=s+l<t,t-s<l&&(B.value=t-l)):(N.value=!1,s>0&&(B.value=0))},le=e=>{let a=0;switch(m(e)){case h.left:case h.up:a=-1;break;case h.right:case h.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),ne()},ne=()=>{V.value&&(S.value=!0)},oe=()=>S.value=!1;return L(i,e=>{"hidden"===e?V.value=!1:"visible"===e&&setTimeout(()=>V.value=!0,50)}),L(y,e=>{e?setTimeout(()=>V.value=!0,50):V.value=!1}),u(x,te),A(()=>setTimeout(()=>ae(),0)),I(()=>te()),t({scrollToActiveTab:ae,removeFocus:oe,focusActiveTab:async()=>{await D();const a=R.value[e.currentName];null==a||a.focus({preventScroll:!0})},tabListRef:C,tabBarRef:$,scheduleRender:()=>F(M)}),()=>{const a=N.value?[Y("span",{class:[n.e("nav-prev"),n.is("disabled",!N.value.prev)],onClick:Q},[Y(b,null,{default:()=>[Y(p,null,null)]})]),Y("span",{class:[n.e("nav-next"),n.is("disabled",!N.value.next)],onClick:ee},[Y(b,null,{default:()=>[Y(f,null,null)]})])]:null,t=e.panes.map((a,t)=>{var o,r,u,i;const d=a.uid,v=a.props.disabled,c=null!=(r=null!=(o=a.props.name)?o:a.index)?r:`${t}`,p=!v&&(a.isClosable||!1!==a.props.closable&&e.editable);a.index=`${t}`;const f=p?Y(b,{class:"is-icon-close",onClick:e=>l("tabRemove",a,e)},{default:()=>[Y(g,null,null)]}):null,y=(null==(i=(u=a.slots).label)?void 0:i.call(u))||a.props.label,w=!v&&a.active?0:-1;return Y("div",{ref:e=>((e,a)=>{R.value[a]=e})(e,c),class:[n.e("item"),n.is(s.props.tabPosition),n.is("active",a.active),n.is("disabled",v),n.is("closable",p),n.is("focus",S.value)],id:`tab-${c}`,key:`tab-${d}`,"aria-controls":`pane-${c}`,role:"tab","aria-selected":a.active,tabindex:w,onFocus:()=>ne(),onBlur:()=>oe(),onClick:e=>{oe(),l("tabClick",a,c,e)},onKeydown:e=>{const t=m(e);!p||t!==h.delete&&t!==h.backspace||l("tabRemove",a,e)}},[y,f])});return M.value,Y("div",{ref:x,class:[n.e("nav-wrap"),n.is("scrollable",!!N.value),n.is(s.props.tabPosition)]},[a,Y("div",{class:n.e("nav-scroll"),ref:w},[e.panes.length>0?Y("div",{class:[n.e("nav"),n.is(s.props.tabPosition),n.is("stretch",e.stretch&&["top","bottom"].includes(s.props.tabPosition))],ref:C,style:K.value,role:"tablist",onKeydown:le,onWheel:J},[e.type?null:Y(be,{ref:$,tabs:[...e.panes],tabRefs:R.value},null),t]):null])])}}}),he=t({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:s(Function),default:()=>!0},stretch:Boolean}),ge=e=>q(e)||y(e);var ye=B({name:"ElTabs",props:he,emits:{[x]:e=>ge(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>ge(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>ge(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=r("tabs"),o=H(()=>["left","right"].includes(e.tabPosition)),{children:u,addChild:d,removeChild:v,ChildrenSorter:c}=ne(U(),"ElTabPane"),p=_(),f=_(null!=(s=e.modelValue)?s:"0"),g=async(t,l=!1)=>{var s,n,o,r;if(f.value!==t&&!i(t))try{let i;if(e.beforeLeave){const a=e.beforeLeave(t,f.value);i=a instanceof Promise?await a:a}else i=!0;if(!1!==i){const e=null==(s=u.value.find(e=>e.paneName===f.value))?void 0:s.isFocusInsidePane();f.value=t,l&&(a(x,t),a("tabChange",t)),null==(o=null==(n=p.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(r=p.value)||r.focusActiveTab())}}catch(d){}},y=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),g(t,!0))},R=(e,t)=>{e.props.disabled||i(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},$=()=>{a("edit",void 0,"add"),a("tabAdd")},N=e=>{const a=m(e);[h.enter,h.numpadEnter].includes(a)&&$()},P=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return L(()=>e.modelValue,e=>g(e)),L(f,async()=>{var e;await D(),null==(e=p.value)||e.scrollToActiveTab()}),Z(ie,{props:e,currentName:f,registerPane:d,unregisterPane:v,nav$:p}),l({currentName:f,get tabNavRef(){return w(p.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?Y("div",{class:[n.e("new-tab"),o.value&&n.e("new-tab-vertical")],tabindex:"0",onClick:$,onKeydown:N},[a?G(t,"add-icon"):Y(b,{class:n.is("icon-plus")},{default:()=>[Y(C,null,null)]})]):null,s=Y("div",{class:[n.e("header"),o.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[Y(c,null,{default:()=>Y(me,{ref:p,currentName:f.value,editable:e.editable,type:e.type,panes:u.value,stretch:e.stretch,onTabClick:y,onTabRemove:R},null),$stable:!0}),l]),r=Y("div",{class:n.e("content")},[G(t,"default")]);return Y("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:P,onVnodeUpdated:P},[r,s])}}});const we=t({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),Ce="ElTabPane",xe=B({name:Ce});var Re=n(B({...xe,props:we,setup(e){const a=e,t=U(),l=J(),s=j(ie);s||o(Ce,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=r("tab-pane"),u=_(),i=_(),d=H(()=>{var e;return null!=(e=a.closable)?e:s.props.closable}),v=R(()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:i.value)}),c=_(v.value),b=H(()=>{var e;return null!=(e=a.name)?e:i.value}),p=R(()=>!a.lazy||c.value||v.value);L(v,e=>{e&&(c.value=!0)});const f=Q({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:b,active:v,index:i,isClosable:d,isFocusInsidePane:()=>{var e;return null==(e=u.value)?void 0:e.contains(document.activeElement)}});return s.registerPane(f),M(()=>{s.unregisterPane(f)}),ee(()=>{var e;l.label&&(null==(e=s.nav$.value)||e.scheduleRender())}),(e,a)=>X(p)?ae((z(),W("div",{key:0,id:`pane-${X(b)}`,ref_key:"paneRef",ref:u,class:O(X(n).b()),role:"tabpanel","aria-hidden":!X(v),"aria-labelledby":`tab-${X(b)}`},[G(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[le,X(v)]]):te("v-if",!0)}}),[["__file","tab-pane.vue"]]);const $e=$(ye,{TabPane:Re}),Ne=N(Re);export{$e as E,Ne as a};
