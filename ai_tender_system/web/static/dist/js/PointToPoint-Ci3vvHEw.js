import{R as e,P as a,Q as l,n as t,q as n,S as o,T as s,C as r,D as i,x as u,L as d,g as c,U as p,o as v,r as m,E as f,_ as y}from"./index.js";/* empty css                   *//* empty css                                                                          *//* empty css                             *//* empty css                    *//* empty css                     *//* empty css               *//* empty css                *//* empty css                */import{E as h,a as _}from"./el-select-BRmwHaPV.js";import{aq as g,am as w,an as j,aI as x,aV as b,aw as F,as as k,au as V,ar as I,aK as C,at as S,aX as E,aY as U,ay as q,av as z,aS as D,aR as $,aJ as P,aT as M}from"./editor-B2OO2pov.js";/* empty css                *//* empty css                                                                        */import{S as T}from"./SSEStreamViewer-BLujLwfg.js";import{D as L}from"./DocumentUploader-BlFhosNM.js";import{D as R}from"./DocumentPreview-By4_Zaxt.js";import{R as O}from"./RichTextEditor-CO2_Eyir.js";import{u as W,H,S as N,d as A}from"./helpers-Cpqdodjs.js";import{t as B}from"./tender-Bln5F12J.js";import{u as J}from"./useProjectDocuments-CWPtTqxz.js";import{a as G,E as K}from"./index-D4leEHxh.js";import{E as Q}from"./index-DOF8wyI3.js";import{E as Y}from"./index-2BvDutB9.js";import{E as X,a as Z}from"./index-CCp-mfyB.js";import{E as ee,a as ae}from"./index-N8cx6dDB.js";import{E as le}from"./index-BnBGxagZ.js";import{E as te}from"./index-nzMCCPZ_.js";import{E as ne,a as oe}from"./index-DV_tRJ6B.js";import{v as se}from"./directive-nXjVAqB7.js";import{E as re}from"./index-CVQCSiPO.js";import"./index-C2wRk8Ho.js";import"./strings-AttvWK4d.js";import"./index-C3Wd-RFA.js";import"./toNumber-BHhAPexX.js";import"./_baseFindIndex-BTqrMG7V.js";import"./_baseIteratee-C8pVAKYE.js";import"./imageCompressor-CTkRt5bg.js";import"./index-BqOFd9Zn.js";import"./cloneDeep-syPWYH98.js";import"./index-BGcrlS83.js";import"./index-DdajWaCy.js";import"./project-CTyJA4Mq.js";import"./index-Bf5f8z6I.js";import"./flatMap-IaJ8K9rw.js";import"./map-DjkI9_xQ.js";import"./_baseEach-CJbh0AmI.js";import"./index-DxEuAmkt.js";import"./raf-B6jWGkGX.js";const ie={class:"point-to-point"},ue={style:{display:"flex","justify-content":"space-between","align-items":"center"}},de={class:"action-controls"},ce={class:"card-header"},pe={class:"card-header"},ve={class:"header-actions"},me={class:"result-content"},fe={class:"file-info-section"},ye={class:"card-header"},he={class:"header-actions"},_e={class:"requirement-text"},ge={class:"card-header"},we={class:"card-header"},je={class:"header-actions"},xe={class:"collapse-title"},be={class:"requirement-preview"},Fe={class:"response-content"},ke={class:"response-item"},Ve={class:"requirement-detail"},Ie={class:"response-item"},Ce={key:0,class:"response-item"},Se={key:0,class:"response-dialog"},Ee={class:"dialog-section"},Ue={class:"requirement-detail"},qe={class:"dialog-section"},ze={key:0,class:"dialog-section"},De={class:"collapse-header"},$e={class:"filename-cell"},Pe=y(g({__name:"PointToPoint",setup(y){const{projects:g,selectedProject:Pe,currentDocuments:Me,loadProjects:Te,handleProjectChange:Le,restoreProjectFromStore:Re}=J(),{useHitlFile:Oe,hitlFileInfo:We,syncing:He,synced:Ne,loadFromHITL:Ae,cancelHitlFile:Be,syncToHitl:Je}=W({onFileLoaded:()=>{Ge.value.tenderFiles=[]}}),Ge=w({projectId:null,tenderFiles:[]}),Ke=w({responseFrequency:"every_paragraph",responseMode:"simple",aiModel:"shihuang-gpt4o-mini"}),Qe=w(!1),Ye=w(0),Xe=w(""),Ze=w([]),ea=w([]),aa=w(""),la=w(""),ta=j(()=>{let e=Ze.value;return aa.value&&(e=e.filter(e=>e.requirement.toLowerCase().includes(aa.value.toLowerCase()))),la.value&&(e=e.filter(e=>e.category===la.value)),e}),na=w(!1),oa=w(0),sa=w(""),ra=w(""),ia=w(""),ua=w(null),da=w(null),ca=w(!1),pa=w(null),va=w(""),ma=w(!1),fa=w([]),ya=w(null),ha=w([]),_a=w(!1),ga=w([]),wa=w(!1),ja=w(""),xa=w(""),ba=j(()=>Ze.value.some(e=>e.response)),Fa=w([]),ka=w(!1),Va=w(null),Ia=j(()=>Ge.value.projectId&&(Ge.value.tenderFiles.length>0||Oe.value)),Ca=async e=>{var a;const{file:l,onSuccess:t,onError:n}=e;if(!Ge.value.projectId){return n(new Error("è¯·å…ˆé€‰æ‹©é¡¹ç›®")),void f.error("è¯·å…ˆé€‰æ‹©é¡¹ç›®")}if(!(null==(a=Pe.value)?void 0:a.company_id)){return n(new Error("é¡¹ç›®æ²¡æœ‰å…³è”å…¬å¸")),void f.error("é¡¹ç›®æ²¡æœ‰å…³è”å…¬å¸")}try{const e=new FormData;e.append("file",l),e.append("company_id",Pe.value.company_id.toString()),e.append("project_id",Ge.value.projectId.toString());const a=await B.parseDocumentStructure(e);if(!a.success)throw new Error(a.message||"ä¸Šä¼ å¤±è´¥");t(a.data),f.success("æ‹›æ ‡æ–‡æ¡£ä¸Šä¼ æˆåŠŸ")}catch(o){n(o),f.error(o.message||"æ‹›æ ‡æ–‡æ¡£ä¸Šä¼ å¤±è´¥")}},Sa=async()=>{await Le(Ge.value.projectId,{onClear:()=>{Ge.value.tenderFiles=[],Ze.value=[],ea.value=[],ya.value=null,da.value=null,ca.value=!1,va.value="",fa.value=[],ha.value=[],Oe.value&&Be()},onDocumentsLoaded:Ua}),Ge.value.projectId&&await Ka()},Ea=()=>{f.success("æ–‡æ¡£ä¸Šä¼ æˆåŠŸ")},Ua=e=>{e.technicalFile?Ae(e,"technicalFile"):e.tenderFile&&(Ge.value.tenderFiles=[e.tenderFile]),e.p2pResponseFile&&(ya.value=e.p2pResponseFile,ca.value=!1,f.info('æ£€æµ‹åˆ°å†å²ç‚¹å¯¹ç‚¹åº”ç­”æ–‡ä»¶ï¼Œç‚¹å‡»"åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€"å¯ç¼–è¾‘'))},qa=e=>{ea.value=e},za=async()=>{if(0!==ea.value.length){na.value=!0,oa.value=0,sa.value="";try{await Da(),f.success("ç‚¹å¯¹ç‚¹åº”ç­”ç”Ÿæˆå®Œæˆ")}catch(e){f.error("ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•")}finally{na.value=!1}}else f.warning("è¯·é€‰æ‹©è¦ç”Ÿæˆåº”ç­”çš„è¦æ±‚")},Da=async()=>new Promise(e=>{const a=ea.value.length;let l=0;const t=setInterval(()=>{if(l<a){const e=ea.value[l];oa.value=Math.round((l+1)/a*100),sa.value+=`\n[${l+1}/${a}] æ­£åœ¨ç”Ÿæˆ"${e.requirement.substring(0,20)}..."çš„åº”ç­”`;const t=Ze.value.findIndex(a=>a.id===e.id);-1!==t&&(Ze.value[t]={...Ze.value[t],status:"generated",response:Pa(e),compliance:Math.random()>.3?"å®Œå…¨ç¬¦åˆ":"éƒ¨åˆ†ç¬¦åˆ"}),l++}else clearInterval(t),e()},800)}),$a=async()=>{if(Ge.value.projectId&&Pe.value)if(Oe.value||0!==Ge.value.tenderFiles.length){na.value=!0,oa.value=0,da.value=null,ca.value=!0,va.value='<h1>ğŸ“„ ç‚¹å¯¹ç‚¹åº”ç­”æ–‡æ¡£</h1><p style="color: #909399;">AIæ­£åœ¨ç”Ÿæˆå†…è”åº”ç­”ï¼Œè¯·ç¨å€™...</p>',setTimeout(()=>{var e;null==(e=document.querySelector(".editor-section"))||e.scrollIntoView({behavior:"smooth",block:"start"})},100);try{const e=new FormData;Oe.value&&We.value?(e.append("use_hitl_technical_file","true"),e.append("project_id",Ge.value.projectId.toString())):Ge.value.tenderFiles.length>0&&Ge.value.tenderFiles[0].raw&&e.append("file",Ge.value.tenderFiles[0].raw),e.append("companyId",Pe.value.company_id.toString()),e.append("projectName",Pe.value.project_name||""),e.append("responseFrequency",Ke.value.responseFrequency),e.append("responseMode",Ke.value.responseMode),e.append("aiModel",Ke.value.aiModel);const a=await fetch("/api/process-point-to-point",{method:"POST",body:e}),l=await a.json();if(!l.success){let e="å¤„ç†å¤±è´¥";throw l.error?e="object"==typeof l.error&&l.error.message?l.error.message:"string"==typeof l.error?l.error:JSON.stringify(l.error):l.message&&(e=l.message),new Error(e)}ra.value=l.output_file,ia.value=l.download_url,ua.value=l.stats,da.value={success:!0,outputFile:l.output_file,downloadUrl:l.download_url,stats:l.stats||{},message:l.message||"ç‚¹å¯¹ç‚¹åº”ç­”ç”Ÿæˆå®Œæˆ"},await Ta(l.output_file),f.success("ç‚¹å¯¹ç‚¹åº”ç­”ç”Ÿæˆå®Œæˆï¼å¯ä»¥ç¼–è¾‘äº†"),l.output_file&&await Je(Ge.value.projectId,l.output_file,"point_to_point")}catch(e){let a="å¤„ç†å¤±è´¥ï¼Œè¯·é‡è¯•";"string"==typeof e?a=e:(null==e?void 0:e.message)?a=e.message:(null==e?void 0:e.error)?a=e.error:"object"==typeof e&&(a=JSON.stringify(e)),pa.value&&pa.value.appendContent(`<p style="color: red;">âŒ é”™è¯¯: ${a}</p>`),f.error({message:a,duration:5e3})}finally{na.value=!1}}else f.error("è¯·å…ˆä¸Šä¼ æ‹›æ ‡æ–‡æ¡£æˆ–ä½¿ç”¨æŠ€æœ¯æ–‡ä»¶");else f.error("è¯·å…ˆé€‰æ‹©é¡¹ç›®")},Pa=e=>({technical:"## æŠ€æœ¯å“åº”\n\næˆ‘æ–¹ç³»ç»Ÿå®Œå…¨æ»¡è¶³è¯¥æŠ€æœ¯è¦æ±‚ï¼š\n\n### æ–¹æ¡ˆè¯´æ˜\n1. é‡‡ç”¨xxxæ¶æ„è®¾è®¡ï¼Œæ”¯æŒé«˜å¹¶å‘è®¿é—®\n2. ç»è¿‡å‹åŠ›æµ‹è¯•ï¼Œå¯æ”¯æŒxxxå¹¶å‘ç”¨æˆ·\n3. é…ç½®xxxæœåŠ¡å™¨é›†ç¾¤ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§\n\n### æŠ€æœ¯æŒ‡æ ‡\n- å¹¶å‘å¤„ç†èƒ½åŠ›ï¼šæ»¡è¶³è¦æ±‚\n- å“åº”æ—¶é—´ï¼šå¹³å‡2ç§’ä»¥å†…\n- ç³»ç»Ÿå¯ç”¨æ€§ï¼š99.9%\n\n### è¯æ˜ææ–™\nè¯¦è§é™„ä»¶ã€ŠæŠ€æœ¯æ–¹æ¡ˆä¹¦ã€‹ç¬¬xxé¡µ",business:"## å•†åŠ¡å“åº”\n\næˆ‘æ–¹å®Œå…¨æ¥å—è¯¥å•†åŠ¡æ¡æ¬¾ï¼š\n\n### æ‰¿è¯ºå†…å®¹\n1. ä¸¥æ ¼æŒ‰ç…§è¦æ±‚æ‰§è¡Œ\n2. æä¾›ç›¸åº”çš„ä¿éšœæªæ–½\n3. ç¡®ä¿æŒ‰æ—¶å®Œæˆ\n\n### å…·ä½“å®‰æ’\n- é¡¹ç›®å‘¨æœŸï¼šç¬¦åˆè¦æ±‚\n- è´¨ä¿æœŸï¼šæ»¡è¶³è¦æ±‚\n- éªŒæ”¶æ ‡å‡†ï¼šæŒ‰ç…§æ‹›æ ‡æ–‡ä»¶æ‰§è¡Œ\n\n### æœåŠ¡ä¿éšœ\nè¯¦è§é™„ä»¶ã€Šå•†åŠ¡åº”ç­”ä¹¦ã€‹ç¬¬xxé¡µ",qualification:"## èµ„è´¨å“åº”\n\næˆ‘æ–¹å…·å¤‡è¯¥é¡¹èµ„è´¨è¦æ±‚ï¼š\n\n### èµ„è´¨è¯æ˜\n1. æŒæœ‰xxxè¯ä¹¦ï¼Œè¯ä¹¦ç¼–å·ï¼šxxx\n2. è¯ä¹¦æœ‰æ•ˆæœŸï¼šxxxxå¹´xxæœˆè‡³xxxxå¹´xxæœˆ\n3. è®¤è¯èŒƒå›´ï¼šè¦†ç›–æœ¬é¡¹ç›®éœ€æ±‚\n\n### ç›¸å…³ä¸šç»©\n- è¿‘ä¸‰å¹´å®Œæˆç±»ä¼¼é¡¹ç›®xxä¸ª\n- é¡¹ç›®éªŒæ”¶åˆæ ¼ç‡100%\n\n### é™„ä»¶ææ–™\nè¯¦è§é™„ä»¶ã€Šèµ„è´¨è¯æ˜æ–‡ä»¶ã€‹",other:"## å…¶ä»–è¦æ±‚å“åº”\n\næˆ‘æ–¹æ‰¿è¯ºæ»¡è¶³è¯¥è¦æ±‚ï¼š\n\n### å…·ä½“å®‰æ’\n1. åˆ¶å®šè¯¦ç»†è®¡åˆ’\n2. é…å¤‡ä¸“ä¸šäººå‘˜\n3. æä¾›å®Œæ•´æ–‡æ¡£\n\n### æ‰§è¡Œæ ‡å‡†\n- ä¸¥æ ¼æŒ‰ç…§æ‹›æ ‡æ–‡ä»¶è¦æ±‚\n- ç¡®ä¿è´¨é‡å’Œè¿›åº¦\n\n### ç›¸å…³æ–‡ä»¶\nè¯¦è§é™„ä»¶ç›¸å…³ç« èŠ‚"}[e.category]||"æˆ‘æ–¹å®Œå…¨å“åº”è¯¥è¦æ±‚ã€‚"),Ma=()=>{na.value=!1,f.info("å·²åœæ­¢ç”Ÿæˆ")},Ta=async e=>{try{va.value='<p style="color: #409EFF;">æ­£åœ¨è½¬æ¢Wordæ–‡æ¡£ä¸ºå¯ç¼–è¾‘æ ¼å¼...</p>';const a=await fetch("/api/editor/convert-word-to-html",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:e})}),l=await a.json();if(!l.success||!l.html_content)throw new Error(l.error||"è½¬æ¢å¤±è´¥");va.value=l.html_content,pa.value&&pa.value.setContent(l.html_content)}catch(a){va.value=`\n      <h1>ğŸ“„ ç‚¹å¯¹ç‚¹åº”ç­”æ–‡æ¡£</h1>\n      <div style="padding: 20px; background: #FFF3E0; border-left: 4px solid #FF9800; margin: 16px 0;">\n        <p><strong>âš ï¸ æç¤ºï¼š</strong>Wordæ–‡æ¡£è½¬æ¢å¤±è´¥</p>\n        <p>åŸå› ï¼š${a.message}</p>\n        <p>æ‚¨å¯ä»¥ï¼š</p>\n        <ul>\n          <li>ç‚¹å‡»ä¸‹æ–¹"æŸ¥çœ‹åŸå§‹ç”Ÿæˆç»“æœ"ä¸‹è½½Wordæ–‡æ¡£æŸ¥çœ‹</li>\n          <li>Wordæ–‡æ¡£ä¸­å·²åŒ…å«å†…è”å›å¤ï¼ˆç°è‰²åº•çº¹æ ‡è®°ï¼‰</li>\n        </ul>\n      </div>\n    `,f.warning("Wordè½¬æ¢HTMLå¤±è´¥ï¼Œè¯·ä½¿ç”¨ä¸‹è½½åŠŸèƒ½æŸ¥çœ‹")}},La=async e=>{var a,l;if(Ge.value.projectId){ma.value=!0;try{const t=await fetch("/api/editor/save-html-to-word",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html_content:e,project_id:Ge.value.projectId,document_type:"point_to_point",original_file:null==(a=da.value)?void 0:a.outputFile})}),n=await t.json();if(!n.success)throw new Error(n.error||"ä¿å­˜å¤±è´¥");da.value={success:!0,outputFile:n.output_file,downloadUrl:n.download_url,stats:(null==(l=da.value)?void 0:l.stats)||{},message:"æ–‡æ¡£å·²ä¿å­˜"},n.output_file&&await Je(Ge.value.projectId,n.output_file,"point_to_point")}catch(t){throw t}finally{ma.value=!1}}else f.error("é¡¹ç›®IDæ— æ•ˆ")},Ra=()=>{var e;da.value?da.value.downloadUrl?(ja.value=da.value.outputFile,xa.value=`ç‚¹å¯¹ç‚¹åº”ç­”-${(null==(e=Pe.value)?void 0:e.project_name)||"æ–‡æ¡£"}.docx`,wa.value=!0):f.warning("æ–‡æ¡£åœ°å€æ— æ•ˆ"):f.warning("æš‚æ— æ–‡æ¡£å¯é¢„è§ˆ")},Oa=()=>{var e;if(da.value)try{const a=da.value.downloadUrl,l=`ç‚¹å¯¹ç‚¹åº”ç­”-${(null==(e=Pe.value)?void 0:e.project_name)||"æ–‡æ¡£"}-${Date.now()}.docx`;A(a,l),f.success("Wordæ–‡æ¡£ä¸‹è½½æˆåŠŸ")}catch(a){f.error("æ–‡æ¡£ä¸‹è½½å¤±è´¥ï¼Œè¯·é‡è¯•")}else f.warning("æš‚æ— æ–‡æ¡£å¯ä¸‹è½½")},Wa=async()=>{var e;(null==(e=da.value)?void 0:e.outputFile)?Ge.value.projectId?await Je(Ge.value.projectId,da.value.outputFile,"point_to_point"):f.error("é¡¹ç›®IDæ— æ•ˆ"):f.warning("æ²¡æœ‰å¯åŒæ­¥çš„æ–‡ä»¶")},Ha=()=>{var e;const a=Ze.value.filter(e=>e.response).map((e,a)=>`${a+1}. ã€${Na(e.category)}ã€‘${e.requirement}\n\n${e.response}\n\nç¬¦åˆæ€§ï¼š${e.compliance}\n\n---\n`).join("\n"),l=new Blob([`# ç‚¹å¯¹ç‚¹åº”ç­”æ–‡æ¡£\n\n${a}`],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(l),n=document.createElement("a");n.href=t,n.download=`ç‚¹å¯¹ç‚¹åº”ç­”-${(null==(e=Pe.value)?void 0:e.project_name)||"export"}-${Date.now()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),f.success("å¯¼å‡ºæˆåŠŸ")},Na=e=>({technical:"æŠ€æœ¯è¦æ±‚",business:"å•†åŠ¡è¦æ±‚",qualification:"èµ„è´¨è¦æ±‚",other:"å…¶ä»–è¦æ±‚"}[e]||e),Aa=e=>({technical:"primary",business:"success",qualification:"warning",other:"info"}[e]||""),Ba=e=>({pending:"å¾…ç”Ÿæˆ",generated:"å·²ç”Ÿæˆ",reviewed:"å·²å®¡æ ¸"}[e]||e),Ja=e=>({pending:"info",generated:"success",reviewed:"primary"}[e]||""),Ga=e=>{if(!e)return"-";let a=e;try{a=decodeURIComponent(e)}catch{}const l=a.split("/");return l[l.length-1]||"-"},Ka=async()=>{if(Ge.value.projectId){_a.value=!0;try{const e=await fetch(`/api/point-to-point/files?project_id=${Ge.value.projectId}`),a=await e.json();if(!a.success)throw new Error(a.error||"åŠ è½½å¤±è´¥");ha.value=a.data||[]}catch(e){f.error(e.message||"åŠ è½½å†å²æ–‡ä»¶å¤±è´¥")}finally{_a.value=!1}}else ha.value=[]},Qa=e=>{const a=["B","KB","MB","GB"];let l=e,t=0;for(;l>=1024&&t<a.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${a[t]}`},Ya=e=>{try{return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return e}};return x(ga,e=>{e.includes("history")&&0===ha.value.length&&!_a.value&&Ka()}),b(async()=>{await Te();const e=await Re({onClear:()=>{Ge.value.tenderFiles=[],Ze.value=[],ea.value=[],ya.value=null,da.value=null,ca.value=!1,va.value="",Oe.value&&Be()},onDocumentsLoaded:Ua});e&&(Ge.value.projectId=e)}),(y,w)=>{const j=_,x=h,b=a,W=K,B=l,J=G,Te=e,Le=Q,Re=n,Je=t,ra=s,ia=o,ua=Y,ma=te,ya=ae,Ua=le,Da=ee,Pa=X,Ta=Z,Xa=c,Za=oe,el=ne,al=v,ll=re,tl=se;return k(),F("div",ie,[V(Le,{class:"project-section",shadow:"never"},{default:S(()=>[V(Te,{model:Ge.value,"label-width":"100px"},{default:S(()=>[V(J,{gutter:20},{default:S(()=>[V(W,{span:12},{default:S(()=>[V(b,{label:"é¡¹ç›®"},{default:S(()=>[V(x,{modelValue:Ge.value.projectId,"onUpdate:modelValue":w[0]||(w[0]=e=>Ge.value.projectId=e),placeholder:"è¯·é€‰æ‹©é¡¹ç›®",filterable:"",onChange:Sa,style:{width:"100%"}},{default:S(()=>[(k(!0),F(E,null,U(q(g),e=>(k(),I(j,{key:e.id,label:`${e.project_name} (${e.project_number||"-"})`,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),V(W,{span:12},{default:S(()=>[V(b,{label:"å…¬å¸"},{default:S(()=>{var e;return[V(B,{value:(null==(e=q(Pe))?void 0:e.company_name)||"-",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),V(Le,{class:"upload-section",shadow:"never"},{default:S(()=>[q(Me).technicalFile&&!q(Oe)?(k(),I(Je,{key:0,type:"success",closable:!1,style:{"margin-bottom":"16px"}},{default:S(()=>[z("div",ue,[w[15]||(w[15]=z("span",null,"ğŸ’¡ æ£€æµ‹åˆ°è¯¥é¡¹ç›®å·²æœ‰æŠ€æœ¯éœ€æ±‚æ–‡ä»¶ï¼Œå¯ç›´æ¥ä½¿ç”¨",-1)),V(Re,{type:"primary",size:"small",onClick:w[1]||(w[1]=e=>q(Ae)(q(Me),"technicalFile"))},{default:S(()=>[...w[14]||(w[14]=[D(" ä½¿ç”¨æŠ€æœ¯éœ€æ±‚æ–‡ä»¶ ",-1)])]),_:1})])]),_:1})):C("",!0),q(Oe)?(k(),I(q(H),{key:1,"file-info":q(We),label:"æŠ€æœ¯éœ€æ±‚æ–‡ä»¶:",onCancel:q(Be)},null,8,["file-info","onCancel"])):C("",!0),q(Oe)?C("",!0):(k(),I(q(L),{key:2,modelValue:Ge.value.tenderFiles,"onUpdate:modelValue":w[2]||(w[2]=e=>Ge.value.tenderFiles=e),"http-request":Ca,accept:".pdf,.doc,.docx",limit:5,"max-size":50,drag:"","tip-text":"ä¸Šä¼ æŠ€æœ¯éœ€æ±‚æ–‡æ¡£",onSuccess:Ea},null,8,["modelValue"])),V(Te,{model:Ke.value,"label-width":"100px",style:{"margin-top":"20px"}},{default:S(()=>[V(J,{gutter:20},{default:S(()=>[V(W,{span:12},{default:S(()=>[V(b,{label:"åº”ç­”é¢‘ç‡"},{default:S(()=>[V(x,{modelValue:Ke.value.responseFrequency,"onUpdate:modelValue":w[3]||(w[3]=e=>Ke.value.responseFrequency=e),style:{width:"100%"}},{default:S(()=>[V(j,{label:"æ¯æ®µåº”ç­”",value:"every_paragraph"}),V(j,{label:"æ¯é¡µåº”ç­”",value:"every_page"}),V(j,{label:"æ¯ç« èŠ‚åº”ç­”",value:"every_section"}),V(j,{label:"æ–‡æ¡£æœ«å°¾ç»Ÿä¸€åº”ç­”",value:"end_of_document"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),V(W,{span:12},{default:S(()=>[V(b,{label:"åº”ç­”æ–¹å¼"},{default:S(()=>[V(ia,{modelValue:Ke.value.responseMode,"onUpdate:modelValue":w[4]||(w[4]=e=>Ke.value.responseMode=e)},{default:S(()=>[V(ra,{label:"simple"},{default:S(()=>[...w[16]||(w[16]=[D("ç®€å•æ¨¡æ¿åº”ç­”",-1)])]),_:1}),V(ra,{label:"ai"},{default:S(()=>[...w[17]||(w[17]=[D("AIæ™ºèƒ½åº”ç­”",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),"ai"===Ke.value.responseMode?(k(),I(W,{key:0,span:12},{default:S(()=>[V(b,{label:"AIæ¨¡å‹"},{default:S(()=>[V(x,{modelValue:Ke.value.aiModel,"onUpdate:modelValue":w[5]||(w[5]=e=>Ke.value.aiModel=e),style:{width:"100%"}},{default:S(()=>[V(j,{label:"GPT5ï¼ˆæœ€å¼ºæ¨ç†ï¼‰",value:"shihuang-gpt5"}),V(j,{label:"Claude Sonnet 4.5ï¼ˆæ ‡ä¹¦ä¸“ç”¨ï¼‰",value:"shihuang-claude-sonnet-45"}),V(j,{label:"GPT4o Miniï¼ˆæ¨è-é»˜è®¤ï¼‰",value:"shihuang-gpt4o-mini"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):C("",!0)]),_:1})]),_:1},8,["model"]),z("div",de,[V(Re,{type:"success",size:"large",disabled:!Ia.value,loading:na.value,onClick:$a},{default:S(()=>[...w[18]||(w[18]=[D(" ç›´æ¥ç”ŸæˆWordæ–‡æ¡£ ",-1)])]),_:1},8,["disabled","loading"])])]),_:1}),Qe.value?(k(),I(Le,{key:0,class:"extracting-section",shadow:"never"},{header:S(()=>[z("div",ce,[w[19]||(w[19]=z("span",null,"æ­£åœ¨æå–æ‹›æ ‡è¦æ±‚...",-1)),V(ua,{percentage:Ye.value,status:100===Ye.value?"success":void 0,style:{width:"300px"}},null,8,["percentage","status"])])]),default:S(()=>[V(q(T),{content:Xe.value,"is-streaming":Qe.value},null,8,["content","is-streaming"])]),_:1})):C("",!0),ca.value?(k(),I(Le,{key:1,class:"editor-section",shadow:"never"},{default:S(()=>[V(q(O),{ref_key:"editorRef",ref:pa,modelValue:va.value,"onUpdate:modelValue":w[6]||(w[6]=e=>va.value=e),title:"ç‚¹å¯¹ç‚¹åº”ç­”æ–‡æ¡£",streaming:na.value,height:700,onSave:La,onPreview:Ra,onExport:Oa},null,8,["modelValue","streaming"])]),_:1})):C("",!0),ca.value&&da.value?(k(),I(Ta,{key:2,modelValue:fa.value,"onUpdate:modelValue":w[7]||(w[7]=e=>fa.value=e),class:"result-collapse"},{default:S(()=>[V(Pa,{name:"result",title:"ğŸ“„ æŸ¥çœ‹åŸå§‹ç”Ÿæˆç»“æœ"},{default:S(()=>[V(Le,{class:"result-section",shadow:"never"},{header:S(()=>[z("div",pe,[w[25]||(w[25]=z("span",null,"âœ… ç”Ÿæˆç»“æœ",-1)),z("div",ve,[V(Re,{type:"primary",size:"large",icon:q(r),onClick:Ra},{default:S(()=>[...w[20]||(w[20]=[D(" é¢„è§ˆæ–‡æ¡£ ",-1)])]),_:1},8,["icon"]),V(Re,{type:"success",size:"large",icon:q(i),onClick:Oa},{default:S(()=>[...w[21]||(w[21]=[D(" ä¸‹è½½Wordæ–‡æ¡£ ",-1)])]),_:1},8,["icon"]),q(Ne)?(k(),I(ma,{key:1,type:"success",size:"large"},{default:S(()=>[...w[23]||(w[23]=[D(" å·²åŒæ­¥åˆ°æŠ•æ ‡é¡¹ç›® ",-1)])]),_:1})):(k(),I(Re,{key:0,type:"info",size:"large",icon:q(u),loading:q(He),onClick:Wa},{default:S(()=>[...w[22]||(w[22]=[D(" åŒæ­¥åˆ°æŠ•æ ‡é¡¹ç›® ",-1)])]),_:1},8,["icon","loading"])),V(Re,{type:"primary",size:"large",icon:q(d),onClick:$a},{default:S(()=>[...w[24]||(w[24]=[D(" é‡æ–°ç”Ÿæˆ ",-1)])]),_:1},8,["icon"])])])]),default:S(()=>[z("div",me,[V(Je,{type:"success",title:da.value.message,closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},null,8,["title"]),da.value.stats&&Object.keys(da.value.stats).length>0?(k(),I(q(N),{key:0,title:"å¤„ç†ç»Ÿè®¡",stats:da.value.stats},null,8,["stats"])):C("",!0),z("div",fe,[w[26]||(w[26]=z("h4",null,"ç”Ÿæˆæ–‡ä»¶",-1)),V(Da,{column:2,border:""},{default:S(()=>[V(ya,{label:"æ–‡ä»¶å"},{default:S(()=>[D($(Ga(da.value.outputFile)),1)]),_:1}),V(ya,{label:"ä¸‹è½½åœ°å€"},{default:S(()=>[V(Ua,{href:da.value.downloadUrl,type:"primary"},{default:S(()=>[D($(Ga(da.value.downloadUrl)),1)]),_:1},8,["href"])]),_:1})]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])):C("",!0),Ze.value.length>0?(k(),I(Le,{key:3,class:"requirements-section",shadow:"never"},{header:S(()=>[z("div",ye,[z("span",null,"æ‹›æ ‡è¦æ±‚åˆ—è¡¨ (å…± "+$(Ze.value.length)+" æ¡)",1),z("div",he,[V(B,{modelValue:aa.value,"onUpdate:modelValue":w[8]||(w[8]=e=>aa.value=e),placeholder:"æœç´¢è¦æ±‚...",clearable:"",style:{width:"200px"}},{prefix:S(()=>[V(Xa,null,{default:S(()=>[V(q(p))]),_:1})]),_:1},8,["modelValue"]),V(x,{modelValue:la.value,"onUpdate:modelValue":w[9]||(w[9]=e=>la.value=e),placeholder:"ç­›é€‰åˆ†ç±»",clearable:"",style:{width:"150px"}},{default:S(()=>[V(j,{label:"å…¨éƒ¨",value:""}),V(j,{label:"æŠ€æœ¯è¦æ±‚",value:"technical"}),V(j,{label:"å•†åŠ¡è¦æ±‚",value:"business"}),V(j,{label:"èµ„è´¨è¦æ±‚",value:"qualification"}),V(j,{label:"å…¶ä»–è¦æ±‚",value:"other"})]),_:1},8,["modelValue"]),V(Re,{type:"primary",disabled:0===ea.value.length,loading:na.value,onClick:za},{default:S(()=>[D(" ç”Ÿæˆåº”ç­” ("+$(ea.value.length)+") ",1)]),_:1},8,["disabled","loading"])])])]),default:S(()=>[V(el,{data:ta.value,border:"",onSelectionChange:qa,"max-height":"500"},{default:S(()=>[V(Za,{type:"selection",width:"55"}),V(Za,{type:"index",label:"åºå·",width:"60"}),V(Za,{prop:"category",label:"åˆ†ç±»",width:"100"},{default:S(({row:e})=>[V(ma,{type:Aa(e.category),size:"small"},{default:S(()=>[D($(Na(e.category)),1)]),_:2},1032,["type"])]),_:1}),V(Za,{prop:"requirement",label:"æ‹›æ ‡è¦æ±‚","min-width":"300"},{default:S(({row:e})=>[z("div",_e,$(e.requirement),1)]),_:1}),V(Za,{prop:"priority",label:"ä¼˜å…ˆçº§",width:"100"},{default:S(({row:e})=>{return[V(ma,{type:(a=e.priority,{"é«˜":"danger","ä¸­":"warning","ä½":"info"}[a]||""),size:"small"},{default:S(()=>[D($(e.priority),1)]),_:2},1032,["type"])];var a}),_:1}),V(Za,{prop:"status",label:"åº”ç­”çŠ¶æ€",width:"100"},{default:S(({row:e})=>[V(ma,{type:Ja(e.status),size:"small"},{default:S(()=>[D($(Ba(e.status)),1)]),_:2},1032,["type"])]),_:1}),V(Za,{label:"æ“ä½œ",width:"100",fixed:"right"},{default:S(({row:e})=>[e.response?(k(),I(Re,{key:0,type:"primary",size:"small",text:"",onClick:a=>{return l=e,Va.value=l,void(ka.value=!0);var l}},{default:S(()=>[...w[27]||(w[27]=[D(" æŸ¥çœ‹ ",-1)])]),_:1},8,["onClick"])):C("",!0)]),_:1})]),_:1},8,["data"])]),_:1})):C("",!0),na.value?(k(),I(Le,{key:4,class:"generation-output",shadow:"never"},{header:S(()=>[z("div",ge,[w[28]||(w[28]=z("span",null,"AIæ­£åœ¨ç”Ÿæˆç‚¹å¯¹ç‚¹åº”ç­”...",-1)),V(ua,{percentage:oa.value,status:100===oa.value?"success":void 0,style:{width:"300px"}},null,8,["percentage","status"])])]),default:S(()=>[V(q(T),{content:sa.value,"is-streaming":na.value,onStop:Ma},null,8,["content","is-streaming"])]),_:1})):C("",!0),ba.value?(k(),I(Le,{key:5,class:"responses-section",shadow:"never"},{header:S(()=>[z("div",we,[w[30]||(w[30]=z("span",null,"ç‚¹å¯¹ç‚¹åº”ç­”ç»“æœ",-1)),z("div",je,[V(Re,{type:"success",icon:q(i),onClick:Ha},{default:S(()=>[...w[29]||(w[29]=[D(" å¯¼å‡ºåº”ç­”æ–‡æ¡£ ",-1)])]),_:1},8,["icon"])])])]),default:S(()=>[V(Ta,{modelValue:Fa.value,"onUpdate:modelValue":w[10]||(w[10]=e=>Fa.value=e),accordion:""},{default:S(()=>[(k(!0),F(E,null,U(Ze.value.filter(e=>e.response),e=>(k(),I(Pa,{key:e.id,name:e.id},{title:S(()=>[z("div",xe,[V(ma,{type:Aa(e.category),size:"small"},{default:S(()=>[D($(Na(e.category)),1)]),_:2},1032,["type"]),z("span",be,$(e.requirement),1),V(ma,{type:Ja(e.status),size:"small"},{default:S(()=>[D($(Ba(e.status)),1)]),_:2},1032,["type"])])]),default:S(()=>[z("div",Fe,[z("div",ke,[w[31]||(w[31]=z("h4",null,"æ‹›æ ‡è¦æ±‚",-1)),z("div",Ve,$(e.requirement),1)]),z("div",Ie,[w[32]||(w[32]=z("h4",null,"æˆ‘æ–¹åº”ç­”",-1)),V(q(T),{content:e.response||"","is-streaming":!1,"enable-markdown":!0},null,8,["content"])]),e.compliance?(k(),F("div",Ce,[w[33]||(w[33]=z("h4",null,"ç¬¦åˆæ€§è¯´æ˜",-1)),V(ma,{type:"å®Œå…¨ç¬¦åˆ"===e.compliance?"success":"warning",size:"large"},{default:S(()=>[D($(e.compliance),1)]),_:2},1032,["type"])])):C("",!0)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1})):C("",!0),V(al,{modelValue:ka.value,"onUpdate:modelValue":w[11]||(w[11]=e=>ka.value=e),title:"åº”ç­”è¯¦æƒ…",width:"800px","destroy-on-close":""},{default:S(()=>[Va.value?(k(),F("div",Se,[z("div",Ee,[w[34]||(w[34]=z("h4",null,"æ‹›æ ‡è¦æ±‚",-1)),z("div",Ue,$(Va.value.requirement),1)]),z("div",qe,[w[35]||(w[35]=z("h4",null,"æˆ‘æ–¹åº”ç­”",-1)),V(q(T),{content:Va.value.response||"","is-streaming":!1,"enable-markdown":!0},null,8,["content"])]),Va.value.compliance?(k(),F("div",ze,[w[36]||(w[36]=z("h4",null,"ç¬¦åˆæ€§",-1)),V(ma,{type:"å®Œå…¨ç¬¦åˆ"===Va.value.compliance?"success":"warning"},{default:S(()=>[D($(Va.value.compliance),1)]),_:1},8,["type"])])):C("",!0)])):C("",!0)]),_:1},8,["modelValue"]),Ge.value.projectId?(k(),I(Ta,{key:6,modelValue:ga.value,"onUpdate:modelValue":w[12]||(w[12]=e=>ga.value=e),class:"history-collapse"},{default:S(()=>[V(Pa,{name:"history"},{title:S(()=>[z("div",De,[z("span",null,"ğŸ“‚ æœ¬é¡¹ç›®å†å²æ–‡ä»¶ ("+$(ha.value.length)+")",1),ga.value?(k(),I(Re,{key:0,type:"primary",size:"small",loading:_a.value,onClick:M(Ka,["stop"]),style:{"margin-left":"16px"}},{default:S(()=>[...w[37]||(w[37]=[D(" åˆ·æ–°åˆ—è¡¨ ",-1)])]),_:1},8,["loading"])):C("",!0)])]),default:S(()=>[V(Le,{shadow:"never",style:{border:"none"}},{default:S(()=>[P((k(),I(el,{data:ha.value,border:"",stripe:"","max-height":"400"},{default:S(()=>[V(Za,{type:"index",label:"åºå·",width:"60"}),V(Za,{prop:"filename",label:"æ–‡ä»¶å","min-width":"300"},{default:S(({row:e})=>[z("div",$e,[V(Xa,null,{default:S(()=>[V(q(m))]),_:1}),z("span",null,$(e.filename),1)])]),_:1}),V(Za,{prop:"size",label:"æ–‡ä»¶å¤§å°",width:"120"},{default:S(({row:e})=>[D($(Qa(e.size)),1)]),_:1}),V(Za,{prop:"process_time",label:"å¤„ç†æ—¶é—´",width:"180"},{default:S(({row:e})=>[D($(Ya(e.process_time)),1)]),_:1}),V(Za,{label:"æ“ä½œ",width:"200",fixed:"right"},{default:S(({row:e})=>[V(Re,{type:"primary",size:"small",onClick:a=>{var l;(l=e).file_path?(ja.value=l.file_path,xa.value=l.filename,wa.value=!0):f.warning("æ— æ³•è·å–æ–‡ä»¶ä¿¡æ¯")}},{default:S(()=>[...w[38]||(w[38]=[D(" é¢„è§ˆ ",-1)])]),_:1},8,["onClick"]),V(Re,{type:"success",size:"small",onClick:a=>q(A)(e)},{default:S(()=>[...w[39]||(w[39]=[D(" ä¸‹è½½ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[tl,_a.value]]),_a.value||0!==ha.value.length?C("",!0):(k(),I(ll,{key:0,description:"æš‚æ— å†å²æ–‡ä»¶","image-size":100}))]),_:1})]),_:1})]),_:1},8,["modelValue"])):C("",!0),V(q(R),{modelValue:wa.value,"onUpdate:modelValue":w[13]||(w[13]=e=>wa.value=e),"file-url":ja.value,"file-name":xa.value},null,8,["modelValue","file-url","file-name"])])}}}),[["__scopeId","data-v-1b60494c"]]);export{Pe as default};
