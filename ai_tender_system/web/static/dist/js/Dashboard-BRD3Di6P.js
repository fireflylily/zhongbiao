import{_ as e}from"./_plugin-vue_export-helper-BZqs1yfm.js";import{I as a,E as t}from"./IconButton-DRztSxV_.js";/* empty css               */import"./el-select-BSk6f2dL.js";/* empty css                   *//* empty css                 *//* empty css                             *//* empty css                    */import{E as i}from"./el-link-BN2G44Li.js";/* empty css                */import"./HistoryFilesPanel.vue_vue_type_style_index_0_scoped_8037c805_lang-DZHVYQUE.js";import{d as o,a as l,r as s,L as r,c as n,g as c,w as d,F as u,o as p,e as m,a6 as f,aB as g,B as v,l as _,k as b,t as j,i as y,D as h,I as w}from"./index.js";import{u as k}from"./project-BvI9efyp.js";import{t as x}from"./tender-lE9zOws1.js";import{d as C}from"./el-form-item-CVdTmnJr.js";import{L as P}from"./Loading-Bhd5IqAX.js";import{E as T}from"./Empty-DGG2bPYG.js";import{C as z}from"./Card-C1SaukE4.js";import"./DocumentPreview.vue_vue_type_style_index_0_scoped_3e333bda_lang-DmpRfM6z.js";/* empty css                 *//* empty css                */import{E as D,a as E}from"./index-CLnWWCfK.js";import{E as M}from"./index-C0O2dFA5.js";import{E as H,a as I}from"./index-QKZXHMAQ.js";import{E as A}from"./strings-DBU9TC1F.js";import"./castArray-COSn9LfO.js";import"./_commonjsHelpers-lGe4XDVY.js";import"./index-DVu1qCus.js";import"./_baseClone-BxWT40wp.js";import"./omit-CX340h9Z.js";import"./index-Csos-qsJ.js";import"./raf-D3yCAO_k.js";const B={class:"dashboard-page"},L={class:"quick-actions"},Y=["onClick"],q={class:"action-label"},S={class:"pagination-wrapper"},U=e(o({__name:"Dashboard",setup(e){const o=y(),U=k(),{success:F,error:K,confirm:N}=l(),O=s(!1),Q=s(!1),R=s({totalProjects:0,inProgressProjects:0,wonThisMonth:0,pendingTasks:0}),V=s([]),W=s(1),X=s(10),$=s(0),G=[{name:"start-tender",label:"开始投标",icon:"bi bi-play-circle-fill",color:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",route:"/tender-management"},{name:"business-response",label:"商务应答",icon:"bi bi-briefcase-fill",color:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",route:"/business-response"},{name:"point-to-point",label:"点对点应答",icon:"bi bi-arrow-left-right",color:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",route:"/point-to-point"},{name:"tech-proposal",label:"技术方案",icon:"bi bi-file-code-fill",color:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",route:"/tech-proposal"},{name:"tender-scoring",label:"标书评分",icon:"bi bi-star-fill",color:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",route:"/tender-scoring"},{name:"knowledge",label:"知识中心",icon:"bi bi-book-fill",color:"linear-gradient(135deg, #30cfd0 0%, #330867 100%)",route:"/knowledge/company-library"}];async function J(){Q.value=!0;try{const e=await x.getProjects({page:W.value,page_size:X.value});e.success&&e.data&&(Array.isArray(e.data)?(V.value=e.data,$.value=e.data.length):e.data.items&&(V.value=e.data.items,$.value=e.data.total||0))}catch(e){K("加载项目列表失败: "+e.message)}finally{Q.value=!1}}async function Z(){await J(),F("刷新成功")}function ee(){o.push("/tender-management")}function ae(e){U.setCurrentProject(e),o.push({name:"TenderManagementDetail",params:{id:e.id}})}function te(e){X.value=e,W.value=1,J()}function ie(e){W.value=e,J()}function oe(e){return{pending:"待处理",in_progress:"进行中",completed:"已完成",won:"已中标",lost:"未中标",archived:"已归档"}[e]||e}return r(()=>{!async function(){O.value=!0;try{setTimeout(()=>{R.value={totalProjects:156,inProgressProjects:23,wonThisMonth:8,pendingTasks:12},O.value=!1},500)}catch(e){K("加载统计数据失败: "+e.message),O.value=!1}}(),J()}),(e,l)=>{const s=M,r=E,y=D,k=_,x=i,le=I,se=A,re=H,ne=t;return p(),n("div",B,[c(y,{gutter:16,class:"kpi-cards"},{default:d(()=>[c(r,{xs:12,sm:12,md:6,lg:6},{default:d(()=>[c(u(z),{shadow:"hover",loading:O.value},{default:d(()=>[c(s,{title:"总项目数",value:R.value.totalProjects},{prefix:d(()=>[...l[2]||(l[2]=[m("i",{class:"bi bi-folder-fill statistic-icon",style:{color:"#409eff"}},null,-1)])]),_:1},8,["value"])]),_:1},8,["loading"])]),_:1}),c(r,{xs:12,sm:12,md:6,lg:6},{default:d(()=>[c(u(z),{shadow:"hover",loading:O.value},{default:d(()=>[c(s,{title:"进行中项目",value:R.value.inProgressProjects},{prefix:d(()=>[...l[3]||(l[3]=[m("i",{class:"bi bi-clock-fill statistic-icon",style:{color:"#e6a23c"}},null,-1)])]),_:1},8,["value"])]),_:1},8,["loading"])]),_:1}),c(r,{xs:12,sm:12,md:6,lg:6},{default:d(()=>[c(u(z),{shadow:"hover",loading:O.value},{default:d(()=>[c(s,{title:"本月中标",value:R.value.wonThisMonth},{prefix:d(()=>[...l[4]||(l[4]=[m("i",{class:"bi bi-trophy-fill statistic-icon",style:{color:"#67c23a"}},null,-1)])]),_:1},8,["value"])]),_:1},8,["loading"])]),_:1}),c(r,{xs:12,sm:12,md:6,lg:6},{default:d(()=>[c(u(z),{shadow:"hover",loading:O.value},{default:d(()=>[c(s,{title:"待处理任务",value:R.value.pendingTasks},{prefix:d(()=>[...l[5]||(l[5]=[m("i",{class:"bi bi-list-task statistic-icon",style:{color:"#f56c6c"}},null,-1)])]),_:1},8,["value"])]),_:1},8,["loading"])]),_:1})]),_:1}),c(u(z),{title:"快捷入口",class:"quick-actions-card"},{default:d(()=>[m("div",L,[(p(),n(f,null,g(G,e=>m("div",{key:e.name,class:"action-item",onClick:a=>function(e){o.push(e.route)}(e)},[m("div",{class:"action-icon",style:h({background:e.color})},[m("i",{class:w(e.icon)},null,2)],4),m("div",q,j(e.label),1)],8,Y)),64))])]),_:1}),c(u(z),{title:"进行中的项目",class:"projects-card"},{actions:d(()=>[c(u(a),{icon:"bi-arrow-clockwise",tooltip:"刷新",onClick:Z})]),default:d(()=>[Q.value?(p(),v(u(P),{key:0,visible:!0,fullscreen:!1,text:"加载项目列表..."})):0===V.value.length?(p(),v(u(T),{key:1,type:"no-data",description:"暂无进行中的项目"},{action:d(()=>[c(k,{type:"primary",onClick:ee},{default:d(()=>[...l[6]||(l[6]=[b("创建第一个项目",-1)])]),_:1})]),_:1})):(p(),n(f,{key:2},[c(re,{data:V.value,stripe:"",style:{width:"100%"}},{default:d(()=>[c(le,{prop:"project_name",label:"项目名称","min-width":"200"},{default:d(({row:e})=>[c(x,{type:"primary",onClick:a=>ae(e)},{default:d(()=>[b(j(e.project_name),1)]),_:2},1032,["onClick"])]),_:1}),c(le,{prop:"project_number",label:"项目编号",width:"150"}),c(le,{prop:"status",label:"状态",width:"120"},{default:d(({row:e})=>{return[c(se,{type:(a=e.status,{pending:"info",in_progress:"warning",completed:"success",won:"success",lost:"danger",archived:"info"}[a]||"info")},{default:d(()=>[b(j(oe(e.status)),1)]),_:2},1032,["type"])];var a}),_:1}),c(le,{prop:"company_name",label:"关联企业",width:"200"}),c(le,{prop:"created_at",label:"创建时间",width:"180"},{default:d(({row:e})=>{return[b(j((a=e.created_at,a?C(a).format("YYYY-MM-DD HH:mm"):"-")),1)];var a}),_:1}),c(le,{label:"操作",width:"200",fixed:"right"},{default:d(({row:e})=>[c(u(a),{icon:"bi-eye",type:"primary",tooltip:"查看详情",onClick:a=>ae(e)},null,8,["onClick"]),c(u(a),{icon:"bi-play-circle",type:"success",tooltip:"继续处理",onClick:a=>{return t=e,U.setCurrentProject(t),void o.push({name:"TenderManagementDetail",params:{id:t.id}});var t}},null,8,["onClick"]),c(u(a),{icon:"bi-archive",type:"warning",tooltip:"归档",onClick:a=>async function(e){if(await N(`确定要归档项目"${e.project_name}"吗?`,"归档项目","归档后项目将不再显示在进行中列表"))try{await U.updateProject(e.id,{status:"archived"}),F("项目已归档"),await J()}catch(a){K("归档失败: "+a.message)}}(e)},null,8,["onClick"])]),_:1})]),_:1},8,["data"]),m("div",S,[c(ne,{"current-page":W.value,"onUpdate:currentPage":l[0]||(l[0]=e=>W.value=e),"page-size":X.value,"onUpdate:pageSize":l[1]||(l[1]=e=>X.value=e),total:$.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:te,onCurrentChange:ie},null,8,["current-page","page-size","total"])])],64))]),_:1})])}}}),[["__scopeId","data-v-74c5835e"]]);export{U as default};
