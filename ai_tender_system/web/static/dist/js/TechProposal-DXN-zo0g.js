import{_ as e}from"./_plugin-vue_export-helper-BZqs1yfm.js";import{E as l}from"./el-tree-CTHbWUfQ.js";/* empty css                    */import"./el-text-r3eyBgaU.js";import"./HistoryFilesPanel.vue_vue_type_style_index_0_scoped_8037c805_lang-DZHVYQUE.js";/* empty css               *//* empty css                */import{E as a}from"./el-divider-Dr_mtr9k.js";import"./el-form-item-CVdTmnJr.js";/* empty css                 */import{c as t,d as s}from"./el-select-BSk6f2dL.js";/* empty css                   */import{d as o,r as i,c as n,B as r,a0 as u,g as d,w as c,o as p,e as m,F as v,k as f,t as _,aU as y,l as h,aV as g,aX as w,ai as k,H as j,aF as b,h as x,x as F,L as I,a6 as C,aB as S,E,aZ as P,aj as V,a_ as z,aW as H,aA as D}from"./index.js";import"./DocumentPreview.vue_vue_type_style_index_0_scoped_3e333bda_lang-DmpRfM6z.js";import{S as U}from"./SSEStreamViewer-B_dDjhsA.js";import{D as q}from"./DocumentUploader-Bped4RWX.js";import{v as T,D as M}from"./DocumentPreview-DtQSW7TM.js";/* empty css                */import{S as $}from"./StatsCard-DmyvkCdH.js";import{u as O,a as A,H as L}from"./HitlFileAlert-DkebuoPV.js";/* empty css                             *//* empty css                 */import{f as Y,a as B,d as R}from"./helpers-De3g06u1.js";import{E as G}from"./index-CnzisJd6.js";import{E as N,a as J}from"./index-BsHaG_KP.js";import{E as W}from"./index-CNz3qB3a.js";import{E as X,a as K}from"./index-B6s8Nnm3.js";import{a as Z,E as Q}from"./index-QKZXHMAQ.js";import{E as ee}from"./index-BwsZcxV-.js";import{t as le}from"./tender-lE9zOws1.js";import{E as ae,a as te}from"./index-ZXEwf31d.js";import{E as se,a as oe}from"./index-CLnWWCfK.js";import{a as ie,E as ne}from"./index-Csos-qsJ.js";import{E as re}from"./index-DVu1qCus.js";import{E as ue}from"./strings-DBU9TC1F.js";import"./index-BgSxZtJR.js";import"./_commonjsHelpers-lGe4XDVY.js";import"./castArray-COSn9LfO.js";import"./index-C50U0V8Z.js";import"./_baseClone-BxWT40wp.js";import"./index-Cjozyviu.js";import"./index-C0O2dFA5.js";import"./project-BvI9efyp.js";import"./omit-CX340h9Z.js";import"./raf-D3yCAO_k.js";const de={class:"history-files-panel"},ce={class:"card-header"},pe={class:"header-actions"},me={class:"current-file-content"},ve={class:"collapse-header"},fe={class:"filename-cell"},_e=e(o({__name:"HistoryFilesPanel",props:{title:{default:""},currentFile:{},historyFiles:{},loading:{type:Boolean,default:!1},showRegenerate:{type:Boolean,default:!0},showStats:{type:Boolean,default:!0},statItems:{},currentFileMessage:{default:"è¯¥é¡¹ç›®å·²æœ‰ç”Ÿæˆæ–‡ä»¶"}},emits:["preview","download","regenerate","refresh"],setup(e){const l=i([]);return(a,t)=>{const s=h,o=W,i=X,F=K,I=G,C=Z,S=j,E=Q,P=ee,V=J,z=N,H=T;return p(),n("div",de,[e.currentFile?(p(),r(I,{key:0,shadow:"never",class:"current-file-card"},{header:c(()=>[m("div",ce,[m("span",null,_(e.title||"ðŸ“„ è¯¥é¡¹ç›®çš„ç”Ÿæˆæ–‡ä»¶"),1),m("div",pe,[d(s,{type:"primary",icon:v(y),size:"small",onClick:t[0]||(t[0]=l=>a.$emit("preview",e.currentFile))},{default:c(()=>[...t[5]||(t[5]=[f(" é¢„è§ˆæ–‡æ¡£ ",-1)])]),_:1},8,["icon"]),d(s,{type:"success",icon:v(g),size:"small",onClick:t[1]||(t[1]=l=>a.$emit("download",e.currentFile))},{default:c(()=>[...t[6]||(t[6]=[f(" ä¸‹è½½æ–‡æ¡£ ",-1)])]),_:1},8,["icon"]),e.showRegenerate?(p(),r(s,{key:0,type:"info",icon:v(w),size:"small",onClick:t[2]||(t[2]=e=>a.$emit("regenerate"))},{default:c(()=>[...t[7]||(t[7]=[f(" é‡æ–°ç”Ÿæˆ ",-1)])]),_:1},8,["icon"])):u("",!0)])])]),default:c(()=>[m("div",me,[d(o,{type:"info",title:e.currentFile.message||e.currentFileMessage,closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},null,8,["title"]),e.currentFile.stats&&e.showStats?(p(),r(v($),{key:0,stats:e.currentFile.stats,"stat-items":e.statItems},null,8,["stats","stat-items"])):u("",!0),d(F,{column:2,border:""},{default:c(()=>[d(i,{label:"æ–‡ä»¶è·¯å¾„"},{default:c(()=>[f(_(e.currentFile.outputFile||e.currentFile.file_path),1)]),_:1}),e.currentFile.generated_at||e.currentFile.process_time?(p(),r(i,{key:0,label:"ç”Ÿæˆæ—¶é—´"},{default:c(()=>[f(_(v(Y)(e.currentFile.generated_at||e.currentFile.process_time,"YYYY-MM-DD HH:mm:ss")),1)]),_:1})):u("",!0),e.currentFile.size?(p(),r(i,{key:1,label:"æ–‡ä»¶å¤§å°"},{default:c(()=>[f(_(v(B)(e.currentFile.size)),1)]),_:1})):u("",!0)]),_:1})])]),_:1})):u("",!0),d(z,{modelValue:l.value,"onUpdate:modelValue":t[4]||(t[4]=e=>l.value=e),class:"history-collapse"},{default:c(()=>[d(V,{name:"history"},{title:c(()=>[m("div",ve,[m("span",null,"ðŸ“‚ æŸ¥çœ‹æ‰€æœ‰åŽ†å²å¤„ç†æ–‡ä»¶ ("+_(e.historyFiles.length)+")",1),l.value.includes("history")?(p(),r(s,{key:0,type:"primary",size:"small",loading:e.loading,onClick:t[3]||(t[3]=x(e=>a.$emit("refresh"),["stop"])),style:{"margin-left":"16px"}},{default:c(()=>[...t[8]||(t[8]=[f(" åˆ·æ–°åˆ—è¡¨ ",-1)])]),_:1},8,["loading"])):u("",!0)])]),default:c(()=>[d(I,{shadow:"never",style:{border:"none"}},{default:c(()=>[k((p(),r(E,{data:e.historyFiles,border:"",stripe:"","max-height":"400"},{default:c(()=>[d(C,{type:"index",label:"åºå·",width:"60"}),d(C,{prop:"filename",label:"æ–‡ä»¶å","min-width":"300"},{default:c(({row:e})=>[m("div",fe,[d(S,null,{default:c(()=>[d(v(b))]),_:1}),m("span",null,_(e.filename),1)])]),_:1}),d(C,{prop:"size",label:"æ–‡ä»¶å¤§å°",width:"120"},{default:c(({row:e})=>[f(_(v(B)(e.size)),1)]),_:1}),d(C,{prop:"process_time",label:"å¤„ç†æ—¶é—´",width:"180"},{default:c(({row:e})=>[f(_(v(Y)(e.process_time||e.generated_at,"YYYY-MM-DD HH:mm:ss")),1)]),_:1}),d(C,{label:"æ“ä½œ",width:"200",fixed:"right"},{default:c(({row:e})=>[d(s,{type:"primary",size:"small",onClick:l=>a.$emit("preview",e)},{default:c(()=>[...t[9]||(t[9]=[f(" é¢„è§ˆ ",-1)])]),_:1},8,["onClick"]),d(s,{type:"success",size:"small",onClick:l=>a.$emit("download",e)},{default:c(()=>[...t[10]||(t[10]=[f(" ä¸‹è½½ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[H,e.loading]]),e.loading||0!==e.historyFiles.length?u("",!0):(p(),r(P,{key:0,description:"æš‚æ— åŽ†å²æ–‡ä»¶","image-size":100}))]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-8037c805"]]),ye={class:"tech-proposal"},he={class:"card-header"},ge={class:"action-controls"},we={class:"card-header"},ke={class:"card-header"},je={class:"requirement-categories"},be={class:"category-title"},xe={class:"category-content"},Fe={key:0,class:"category-summary"},Ie={key:1,class:"category-keywords"},Ce={key:2,class:"category-points"},Se={class:"card-header"},Ee={class:"ç« èŠ‚ç»“æž„"},Pe={class:"tree-node"},Ve={class:"node-title"},ze={key:2,class:"node-desc"},He={class:"card-header"},De={class:"header-actions"},Ue={class:"result-content"},qe={class:"output-files"},Te={class:"file-buttons"},Me=e(o({__name:"TechProposal",setup(e){const{projects:o,selectedProject:x,currentDocuments:T,loadProjects:Y,handleProjectChange:B,restoreProjectFromStore:W}=O(),{useHitlFile:X,hitlFileInfo:K,syncing:Z,synced:Q,loadFromHITL:ee,cancelHitlFile:de,syncToHitl:ce}=A({onFileLoaded:()=>{Me.value.tenderFiles=[]}}),pe=i([]),me=i(!1),ve=async()=>{},fe=async e=>{try{if(!e.downloadUrl)return void D.error("ä¸‹è½½åœ°å€æ— æ•ˆ");const l=e.filename||e.downloadUrl.split("/").pop()||"æŠ€æœ¯æ–¹æ¡ˆ.docx";R(e.downloadUrl,l),D.success("æ–‡ä»¶ä¸‹è½½ä¸­...")}catch(l){D.error(l.message||"ä¸‹è½½æ–‡ä»¶å¤±è´¥")}},Me=i({projectId:null,tenderFiles:[]}),$e=i({outputPrefix:"æŠ€æœ¯æ–¹æ¡ˆ",aiModel:"gpt-4o-mini",additionalOutputs:["includeAnalysis","includeMapping","includeSummary"]}),Oe=i(!1),Ae=i(0),Le=i(""),Ye=i(null),Be=i(!0),Re=i(null),Ge=i(!0),Ne=i(null),Je=i(null),We=i(!1),Xe=i(""),Ke=i(""),Ze=F(()=>{var e;return(null==(e=Re.value)?void 0:e.chapters)?Re.value.chapters:[]}),Qe=F(()=>Me.value.projectId&&(X.value||Me.value.tenderFiles.length>0)),el=async e=>{var l;const{file:a,onSuccess:t,onError:s}=e;if(!Me.value.projectId){return s(new Error("è¯·å…ˆé€‰æ‹©é¡¹ç›®")),void D.error("è¯·å…ˆé€‰æ‹©é¡¹ç›®")}if(!(null==(l=x.value)?void 0:l.company_id)){return s(new Error("é¡¹ç›®æ²¡æœ‰å…³è”å…¬å¸")),void D.error("é¡¹ç›®æ²¡æœ‰å…³è”å…¬å¸")}try{const e=new FormData;e.append("file",a),e.append("company_id",x.value.company_id.toString()),e.append("project_id",Me.value.projectId.toString());const l=await le.parseDocumentStructure(e);if(!l.success)throw new Error(l.message||"ä¸Šä¼ å¤±è´¥");t(l.data),D.success("æŠ€æœ¯éœ€æ±‚æ–‡æ¡£ä¸Šä¼ æˆåŠŸ")}catch(o){s(o),D.error(o.message||"æ–‡æ¡£ä¸Šä¼ å¤±è´¥")}},ll=()=>{D.success("æ–‡æ¡£ä¸Šä¼ æˆåŠŸ")},al=async()=>{await B(Me.value.projectId,{onClear:()=>{Me.value.tenderFiles=[],Ye.value=null,Re.value=null,Ne.value=null,Je.value=null,Le.value="",X.value&&de()},onDocumentsLoaded:e=>{e.technicalFile&&ee(e,"technicalFile"),e.techProposalFile&&(Je.value=e.techProposalFile,D.success("å·²åŠ è½½åŽ†å²æŠ€æœ¯æ–¹æ¡ˆæ–‡ä»¶"))}})},tl=async()=>{var e;if(Qe.value){Oe.value=!0,Ae.value=0,Le.value="",Ye.value=null,Re.value=null,Ne.value=null;try{const l=new FormData;if(X.value&&K.value)l.append("use_hitl_technical_file","true"),l.append("project_id",Me.value.projectId.toString());else{if(!(null==(e=Me.value.tenderFiles[0])?void 0:e.raw))throw new Error("è¯·ä¸Šä¼ æŠ€æœ¯éœ€æ±‚æ–‡æ¡£æˆ–ä½¿ç”¨HITLæŠ€æœ¯æ–‡ä»¶");l.append("tender_file",Me.value.tenderFiles[0].raw)}l.append("outputPrefix",$e.value.outputPrefix),l.append("companyId",x.value.company_id.toString()),l.append("projectName",x.value.project_name||""),l.append("projectId",Me.value.projectId.toString()),l.append("includeAnalysis",$e.value.additionalOutputs.includes("includeAnalysis")?"true":"false"),l.append("includeMapping",$e.value.additionalOutputs.includes("includeMapping")?"true":"false"),l.append("includeSummary",$e.value.additionalOutputs.includes("includeSummary")?"true":"false"),await sl(l),D.success("æŠ€æœ¯æ–¹æ¡ˆç”Ÿæˆå®Œæˆ")}catch(l){D.error(l.message||"ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•")}finally{Oe.value=!1}}else D.warning("è¯·é€‰æ‹©é¡¹ç›®å¹¶ä¸Šä¼ æŠ€æœ¯éœ€æ±‚æ–‡æ¡£")},sl=async e=>{var l,a,t;const s=await fetch("/api/generate-proposal-stream",{method:"POST",body:e});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const o=null==(l=s.body)?void 0:l.getReader();if(!o)throw new Error("æ— æ³•è¯»å–å“åº”æµ");const i=new TextDecoder;let n="";for(;;){const{done:e,value:l}=await o.read();if(e)break;n+=i.decode(l,{stream:!0});const s=n.split("\n");n=s.pop()||"";for(const o of s)if(o.startsWith("data: "))try{const e=JSON.parse(o.slice(6));if(void 0!==e.progress&&(Ae.value=e.progress),e.message&&(Le.value+=e.message+"\n"),"analysis_completed"===e.stage&&e.analysis_result&&(Ye.value=e.analysis_result),"outline_completed"===e.stage&&e.outline_data&&(Re.value=e.outline_data),"completed"===e.stage&&e.success&&(Ne.value=e,Je.value={outputFile:e.output_file,downloadUrl:null==(a=e.output_files)?void 0:a.proposal,stats:{requirements_count:e.requirements_count,sections_count:e.sections_count,matches_count:e.matches_count},message:"æŠ€æœ¯æ–¹æ¡ˆå·²ç”Ÿæˆ"},e.output_file&&Me.value.projectId&&await ce(Me.value.projectId,e.output_file,"tech_proposal")),"error"===e.stage)throw Le.value+=`\nâŒ é”™è¯¯: ${e.error||e.message}\n`,new Error(e.error||e.message||"ç”Ÿæˆå¤±è´¥")}catch(r){if(!(null==(t=r.message)?void 0:t.includes("JSON")))throw r}}},ol=()=>{Oe.value=!1,D.info("å·²åœæ­¢ç”Ÿæˆ")},il=e=>{var l,a;if(!(null==(a=null==(l=Ne.value)?void 0:l.output_files)?void 0:a[e]))return void D.warning("æ–‡ä»¶ä¸å­˜åœ¨");const t=Ne.value.output_files[e],s=t.split("/").pop()||`æŠ€æœ¯æ–¹æ¡ˆ_${e}.docx`;R(t,s),D.success("ä¸‹è½½å·²å¼€å§‹")},nl=()=>{var e,l,a;(null==(l=null==(e=Ne.value)?void 0:e.output_files)?void 0:l.proposal)?(Xe.value=Ne.value.output_files.proposal,Ke.value=`æŠ€æœ¯æ–¹æ¡ˆ-${(null==(a=x.value)?void 0:a.project_name)||"æ–‡æ¡£"}.docx`,We.value=!0):D.warning("æš‚æ— æ–‡æ¡£å¯é¢„è§ˆ")},rl=e=>{Xe.value=e.file_path||e.outputFile,Ke.value=e.filename||"æŠ€æœ¯æ–¹æ¡ˆ.docx",We.value=!0},ul=async()=>{var e;(null==(e=Ne.value)?void 0:e.output_file)?Me.value.projectId?await ce(Me.value.projectId,Ne.value.output_file,"tech_proposal"):D.error("é¡¹ç›®IDæ— æ•ˆ"):D.warning("æ²¡æœ‰å¯åŒæ­¥çš„æ–‡ä»¶")},dl=()=>{Je.value=null,Ne.value=null,Ye.value=null,Re.value=null,D.info("è¯·é…ç½®å‚æ•°åŽé‡æ–°ç”Ÿæˆ")},cl=()=>{Ye.value={document_summary:{total_requirements:45,mandatory_count:32,optional_count:13,complexity_level:"é«˜"},requirement_categories:[{category:"åŠŸèƒ½æ€§éœ€æ±‚",priority:"é«˜",requirements_count:20,summary:"ç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½è¦æ±‚",keywords:["ç”¨æˆ·ç®¡ç†","æƒé™æŽ§åˆ¶","æ•°æ®åˆ†æž"],key_points:["æ”¯æŒ10000å¹¶å‘ç”¨æˆ·è®¿é—®","å“åº”æ—¶é—´å°äºŽ3ç§’","ç³»ç»Ÿå¯ç”¨æ€§è¾¾åˆ°99.9%","æ”¯æŒå¤šè§’è‰²æƒé™ç®¡ç†"]},{category:"éžåŠŸèƒ½æ€§éœ€æ±‚",priority:"ä¸­",requirements_count:15,summary:"ç³»ç»Ÿæ€§èƒ½å’Œå®‰å…¨è¦æ±‚",keywords:["æ€§èƒ½","å®‰å…¨","å¯é æ€§"],key_points:["æ•°æ®åŠ å¯†å­˜å‚¨","å®šæœŸå¤‡ä»½æœºåˆ¶","ç¾éš¾æ¢å¤é¢„æ¡ˆ"]},{category:"æŠ€æœ¯è¦æ±‚",priority:"é«˜",requirements_count:10,summary:"æŠ€æœ¯æž¶æž„å’Œå®žæ–½è¦æ±‚",keywords:["æž¶æž„","æŠ€æœ¯æ ˆ","éƒ¨ç½²"],key_points:["é‡‡ç”¨å¾®æœåŠ¡æž¶æž„","æ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²","ä½¿ç”¨ä¸»æµå¼€å‘æ¡†æž¶"]}]},Re.value={outline_title:"æŠ€æœ¯æ–¹æ¡ˆåº”ç­”å¤§çº²",total_chapters:12,estimated_pages:45,generation_time:"2025-11-10 10:30:00",chapters:[{level:1,chapter_number:"1",title:"é¡¹ç›®æ¦‚è¿°",description:"é¡¹ç›®èƒŒæ™¯ã€ç›®æ ‡å’ŒèŒƒå›´",subsections:[{level:2,chapter_number:"1.1",title:"é¡¹ç›®èƒŒæ™¯"},{level:2,chapter_number:"1.2",title:"å»ºè®¾ç›®æ ‡"},{level:2,chapter_number:"1.3",title:"é¡¹ç›®èŒƒå›´"}]},{level:1,chapter_number:"2",title:"éœ€æ±‚åˆ†æž",description:"ç³»ç»ŸåŠŸèƒ½å’ŒéžåŠŸèƒ½éœ€æ±‚",subsections:[{level:2,chapter_number:"2.1",title:"åŠŸèƒ½éœ€æ±‚"},{level:2,chapter_number:"2.2",title:"æ€§èƒ½éœ€æ±‚"}]},{level:1,chapter_number:"3",title:"æŠ€æœ¯æ–¹æ¡ˆ",description:"æŠ€æœ¯æž¶æž„å’Œå®žæ–½æ–¹æ¡ˆ",subsections:[{level:2,chapter_number:"3.1",title:"æŠ€æœ¯æž¶æž„"},{level:2,chapter_number:"3.2",title:"æŠ€æœ¯é€‰åž‹"}]}]},Ne.value={success:!0,requirements_count:45,sections_count:12,matches_count:38,output_files:{proposal:"/api/downloads/test_proposal.docx",analysis:"/api/downloads/test_analysis.docx",mapping:"/api/downloads/test_mapping.xlsx",summary:"/api/downloads/test_summary.txt"},output_file:"/path/to/test_proposal.docx"},Je.value={outputFile:"/path/to/test_proposal.docx",downloadUrl:"/api/downloads/test_proposal.docx",stats:{requirements_count:45,sections_count:12,matches_count:38},message:"æŠ€æœ¯æ–¹æ¡ˆå·²ç”Ÿæˆï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰"},D.success("âœ… æ¨¡æ‹Ÿæ•°æ®åŠ è½½æˆåŠŸï¼Œæ‚¨å¯ä»¥æµ‹è¯•æ‰€æœ‰UIåŠŸèƒ½")};return I(async()=>{await Y();const e=await W({onClear:()=>{Me.value.tenderFiles=[],Ye.value=null,Re.value=null,Ne.value=null,Je.value=null,X.value&&de()},onDocumentsLoaded:e=>{e.technicalFile&&ee(e,"technicalFile"),e.techProposalFile&&(Je.value=e.techProposalFile)}});e&&(Me.value.projectId=e)}),(e,i)=>{const F=s,I=t,D=te,O=oe,A=E,Y=se,B=ae,R=G,W=h,le=a,ce=ne,sl=ie,pl=j,ml=re,vl=ue,fl=J,_l=N,yl=l;return p(),n("div",ye,[d(R,{class:"project-section",shadow:"never"},{header:c(()=>[...i[14]||(i[14]=[m("div",{class:"card-header"},[m("span",null,"Step 1: é€‰æ‹©é¡¹ç›®")],-1)])]),default:c(()=>[d(B,{model:Me.value,"label-width":"100px"},{default:c(()=>[d(Y,{gutter:20},{default:c(()=>[d(O,{span:12},{default:c(()=>[d(D,{label:"é¡¹ç›®"},{default:c(()=>[d(I,{modelValue:Me.value.projectId,"onUpdate:modelValue":i[0]||(i[0]=e=>Me.value.projectId=e),placeholder:"è¯·é€‰æ‹©é¡¹ç›®",filterable:"",onChange:al,style:{width:"100%"}},{default:c(()=>[(p(!0),n(C,null,S(v(o),e=>(p(),r(F,{key:e.id,label:`${e.project_name} (${e.project_number||"-"})`,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),d(O,{span:12},{default:c(()=>[d(D,{label:"å…¬å¸"},{default:c(()=>{var e;return[d(A,{value:(null==(e=v(x))?void 0:e.company_name)||"-",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),Me.value.projectId?(p(),r(R,{key:0,class:"upload-section",shadow:"never"},{header:c(()=>[m("div",he,[i[16]||(i[16]=m("span",null,"Step 2: ä¸Šä¼ æŠ€æœ¯éœ€æ±‚æ–‡æ¡£",-1)),v(T).technicalFile&&!v(X)?(p(),r(W,{key:0,type:"primary",size:"small",onClick:i[1]||(i[1]=e=>v(ee)(v(T),"technicalFile"))},{default:c(()=>[...i[15]||(i[15]=[f(" ä½¿ç”¨HITLæŠ€æœ¯éœ€æ±‚æ–‡ä»¶ ",-1)])]),_:1})):u("",!0)])]),default:c(()=>[v(X)?(p(),r(v(L),{key:0,"file-info":v(K),label:"ä½¿ç”¨HITLæŠ€æœ¯éœ€æ±‚æ–‡ä»¶:",onCancel:v(de)},null,8,["file-info","onCancel"])):u("",!0),v(X)?u("",!0):(p(),r(v(q),{key:1,modelValue:Me.value.tenderFiles,"onUpdate:modelValue":i[2]||(i[2]=e=>Me.value.tenderFiles=e),"http-request":el,accept:".pdf,.doc,.docx",limit:1,"max-size":50,drag:"","tip-text":"ä¸Šä¼ æŠ€æœ¯éœ€æ±‚æ–‡æ¡£ï¼Œæˆ–ä½¿ç”¨HITLæµç¨‹ä¸­æå–çš„æŠ€æœ¯éœ€æ±‚æ–‡ä»¶",onSuccess:ll},null,8,["modelValue"])),d(le,null,{default:c(()=>[...i[17]||(i[17]=[f("ç”Ÿæˆé€‰é¡¹",-1)])]),_:1}),d(B,{model:$e.value,"label-width":"140px",class:"config-form"},{default:c(()=>[d(Y,{gutter:20},{default:c(()=>[d(O,{span:12},{default:c(()=>[d(D,{label:"è¾“å‡ºæ–‡ä»¶å‰ç¼€"},{default:c(()=>[d(A,{modelValue:$e.value.outputPrefix,"onUpdate:modelValue":i[3]||(i[3]=e=>$e.value.outputPrefix=e),placeholder:"æŠ€æœ¯æ–¹æ¡ˆ"},null,8,["modelValue"])]),_:1})]),_:1}),d(O,{span:12},{default:c(()=>[d(D,{label:"AIæ¨¡åž‹"},{default:c(()=>[d(I,{modelValue:$e.value.aiModel,"onUpdate:modelValue":i[4]||(i[4]=e=>$e.value.aiModel=e),style:{width:"100%"}},{default:c(()=>[d(F,{label:"GPT-4O Miniï¼ˆæŽ¨èï¼‰",value:"gpt-4o-mini"}),d(F,{label:"GPT-4Oï¼ˆé«˜è´¨é‡ï¼‰",value:"gpt-4o"}),d(F,{label:"å§‹çš‡-GPT4oè¿·ä½ ç‰ˆ",value:"shihuang-gpt4o-mini"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),d(D,{label:"é™„åŠ è¾“å‡º"},{default:c(()=>[d(sl,{modelValue:$e.value.additionalOutputs,"onUpdate:modelValue":i[5]||(i[5]=e=>$e.value.additionalOutputs=e)},{default:c(()=>[d(ce,{label:"includeAnalysis"},{default:c(()=>[...i[18]||(i[18]=[f("éœ€æ±‚åˆ†æžæŠ¥å‘Š",-1)])]),_:1}),d(ce,{label:"includeMapping"},{default:c(()=>[...i[19]||(i[19]=[f("éœ€æ±‚åŒ¹é…è¡¨",-1)])]),_:1}),d(ce,{label:"includeSummary"},{default:c(()=>[...i[20]||(i[20]=[f("ç”Ÿæˆæ€»ç»“æŠ¥å‘Š",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),m("div",ge,[d(W,{type:"primary",size:"large",disabled:!Qe.value,loading:Oe.value,onClick:tl},{default:c(()=>[d(pl,null,{default:c(()=>[d(v(P))]),_:1}),i[21]||(i[21]=f(" ç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆ ",-1))]),_:1},8,["disabled","loading"]),v(false)?(p(),r(W,{key:0,type:"warning",size:"large",onClick:cl},{default:c(()=>[d(pl,null,{default:c(()=>[d(v(y))]),_:1}),i[22]||(i[22]=f(" ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®æµ‹è¯•UI ",-1))]),_:1})):u("",!0)])]),_:1})):u("",!0),Oe.value?(p(),r(R,{key:1,class:"generation-output",shadow:"never"},{header:c(()=>[m("div",we,[i[23]||(i[23]=m("span",null,"AIæ­£åœ¨ç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆ...",-1)),d(ml,{percentage:Ae.value,status:100===Ae.value?"success":void 0,style:{width:"300px"}},null,8,["percentage","status"])])]),default:c(()=>[d(v(U),{content:Le.value,"is-streaming":Oe.value,onStop:ol},null,8,["content","is-streaming"])]),_:1})):u("",!0),Ye.value?(p(),r(R,{key:2,class:"analysis-section",shadow:"never"},{header:c(()=>[m("div",ke,[i[24]||(i[24]=m("span",null,"éœ€æ±‚åˆ†æžç»“æžœ",-1)),d(W,{size:"small",onClick:i[6]||(i[6]=e=>Be.value=!Be.value)},{default:c(()=>[f(_(Be.value?"æ”¶èµ·":"å±•å¼€"),1)]),_:1})])]),default:c(()=>[k(m("div",null,[d(v($),{title:"æ–‡æ¡£æ‘˜è¦",stats:Ye.value.document_summary||{},"stat-items":[{key:"total_requirements",label:"æ€»éœ€æ±‚æ•°",suffix:"é¡¹"},{key:"mandatory_count",label:"å¼ºåˆ¶éœ€æ±‚",suffix:"é¡¹"},{key:"optional_count",label:"å¯é€‰éœ€æ±‚",suffix:"é¡¹"}]},null,8,["stats"]),m("div",je,[i[27]||(i[27]=m("h4",null,"éœ€æ±‚åˆ†ç±»",-1)),d(_l,{accordion:""},{default:c(()=>[(p(!0),n(C,null,S(Ye.value.requirement_categories,(e,l)=>(p(),r(fl,{key:l,name:l},{title:c(()=>{return[m("div",be,[m("span",null,_(e.category),1),d(vl,{type:(l=e.priority,{"é«˜":"danger",high:"danger","ä¸­":"warning",medium:"warning","ä½Ž":"info",low:"info"}[l]||"info"),size:"small"},{default:c(()=>[f(_(e.priority),1)]),_:2},1032,["type"]),d(vl,{type:"info",size:"small"},{default:c(()=>[f(_(e.requirements_count||0)+"é¡¹ ",1)]),_:2},1024)])];var l}),default:c(()=>[m("div",xe,[e.summary?(p(),n("p",Fe,_(e.summary),1)):u("",!0),e.keywords&&e.keywords.length>0?(p(),n("div",Ie,[i[25]||(i[25]=m("strong",null,"å…³é”®è¯ï¼š",-1)),(p(!0),n(C,null,S(e.keywords,e=>(p(),r(vl,{key:e,size:"small",style:{"margin-right":"8px"}},{default:c(()=>[f(_(e),1)]),_:2},1024))),128))])):u("",!0),e.key_points&&e.key_points.length>0?(p(),n("div",Ce,[i[26]||(i[26]=m("strong",null,"è¦ç‚¹ï¼š",-1)),m("ul",null,[(p(!0),n(C,null,S(e.key_points,(e,l)=>(p(),n("li",{key:l},_(e),1))),128))])])):u("",!0)])]),_:2},1032,["name"]))),128))]),_:1})])],512),[[V,Be.value]])]),_:1})):u("",!0),Re.value?(p(),r(R,{key:3,class:"outline-section",shadow:"never"},{header:c(()=>[m("div",Se,[i[28]||(i[28]=m("span",null,"æŠ€æœ¯æ–¹æ¡ˆå¤§çº²",-1)),d(W,{size:"small",onClick:i[7]||(i[7]=e=>Ge.value=!Ge.value)},{default:c(()=>[f(_(Ge.value?"æ”¶èµ·":"å±•å¼€"),1)]),_:1})])]),default:c(()=>[k(m("div",null,[d(v($),{title:"å¤§çº²æ¦‚è§ˆ",stats:Re.value,"stat-items":[{key:"total_chapters",label:"æ€»ç« èŠ‚æ•°",suffix:"ç« "},{key:"estimated_pages",label:"é¢„è®¡é¡µæ•°",suffix:"é¡µ"}],span:12},null,8,["stats"]),m("div",Ee,[i[29]||(i[29]=m("h4",null,"ç« èŠ‚ç»“æž„",-1)),d(yl,{data:Ze.value,props:{label:"title",children:"subsections"},"default-expand-all":"","node-key":"chapter_number"},{default:c(({node:e,data:l})=>[m("span",Pe,[1===l.level?(p(),r(pl,{key:0},{default:c(()=>[d(v(z))]),_:1})):(p(),r(pl,{key:1},{default:c(()=>[d(v(b))]),_:1})),m("span",Ve,_(l.chapter_number)+" "+_(l.title),1),l.description?(p(),n("span",ze,_(l.description),1)):u("",!0)])]),_:1},8,["data"])])],512),[[V,Ge.value]])]),_:1})):u("",!0),Ne.value?(p(),r(R,{key:4,class:"result-section",shadow:"never"},{header:c(()=>[m("div",He,[i[35]||(i[35]=m("span",null,"âœ… ç”Ÿæˆç»“æžœ",-1)),m("div",De,[d(W,{type:"primary",icon:v(y),onClick:nl},{default:c(()=>[...i[30]||(i[30]=[f(" é¢„è§ˆæ–‡æ¡£ ",-1)])]),_:1},8,["icon"]),d(W,{type:"success",icon:v(g),onClick:i[8]||(i[8]=e=>il("proposal"))},{default:c(()=>[...i[31]||(i[31]=[f(" ä¸‹è½½æŠ€æœ¯æ–¹æ¡ˆ ",-1)])]),_:1},8,["icon"]),v(Q)?(p(),r(vl,{key:1,type:"success",size:"large"},{default:c(()=>[...i[33]||(i[33]=[f(" å·²åŒæ­¥åˆ°æŠ•æ ‡é¡¹ç›® ",-1)])]),_:1})):(p(),r(W,{key:0,type:"info",icon:v(H),loading:v(Z),onClick:ul},{default:c(()=>[...i[32]||(i[32]=[f(" åŒæ­¥åˆ°æŠ•æ ‡é¡¹ç›® ",-1)])]),_:1},8,["icon","loading"])),d(W,{type:"primary",icon:v(w),onClick:tl},{default:c(()=>[...i[34]||(i[34]=[f(" é‡æ–°ç”Ÿæˆ ",-1)])]),_:1},8,["icon"])])])]),default:c(()=>{var e,l,a,t;return[m("div",Ue,[d(v($),{title:"ç”Ÿæˆç»Ÿè®¡",stats:Ne.value,"stat-items":[{key:"requirements_count",label:"éœ€æ±‚æ•°é‡",suffix:"é¡¹"},{key:"sections_count",label:"ç« èŠ‚æ•°é‡",suffix:"ç« "},{key:"matches_count",label:"åŒ¹é…æ•°é‡",suffix:"é¡¹"}]},null,8,["stats"]),m("div",qe,[i[40]||(i[40]=m("h4",null,"è¾“å‡ºæ–‡ä»¶",-1)),m("div",Te,[(null==(e=Ne.value.output_files)?void 0:e.proposal)?(p(),r(W,{key:0,type:"success",onClick:i[9]||(i[9]=e=>il("proposal"))},{default:c(()=>[d(pl,null,{default:c(()=>[d(v(g))]),_:1}),i[36]||(i[36]=f(" ä¸‹è½½æŠ€æœ¯æ–¹æ¡ˆ ",-1))]),_:1})):u("",!0),(null==(l=Ne.value.output_files)?void 0:l.analysis)?(p(),r(W,{key:1,type:"primary",onClick:i[10]||(i[10]=e=>il("analysis"))},{default:c(()=>[d(pl,null,{default:c(()=>[d(v(g))]),_:1}),i[37]||(i[37]=f(" ä¸‹è½½éœ€æ±‚åˆ†æž ",-1))]),_:1})):u("",!0),(null==(a=Ne.value.output_files)?void 0:a.mapping)?(p(),r(W,{key:2,type:"info",onClick:i[11]||(i[11]=e=>il("mapping"))},{default:c(()=>[d(pl,null,{default:c(()=>[d(v(g))]),_:1}),i[38]||(i[38]=f(" ä¸‹è½½åŒ¹é…è¡¨ ",-1))]),_:1})):u("",!0),(null==(t=Ne.value.output_files)?void 0:t.summary)?(p(),r(W,{key:3,type:"warning",onClick:i[12]||(i[12]=e=>il("summary"))},{default:c(()=>[d(pl,null,{default:c(()=>[d(v(g))]),_:1}),i[39]||(i[39]=f(" ä¸‹è½½ç”ŸæˆæŠ¥å‘Š ",-1))]),_:1})):u("",!0)])])])]}),_:1})):u("",!0),Me.value.projectId?(p(),r(v(_e),{key:5,title:"è¯¥é¡¹ç›®çš„æŠ€æœ¯æ–¹æ¡ˆæ–‡ä»¶","current-file":Je.value,"history-files":pe.value,loading:me.value,"show-stats":!1,onPreview:rl,onDownload:fe,onRegenerate:dl,onRefresh:ve},null,8,["current-file","history-files","loading"])):u("",!0),d(v(M),{modelValue:We.value,"onUpdate:modelValue":i[13]||(i[13]=e=>We.value=e),"file-url":Xe.value,"file-name":Ke.value},null,8,["modelValue","file-url","file-name"])])}}}),[["__scopeId","data-v-78e5f9d3"]]);export{Me as default};
