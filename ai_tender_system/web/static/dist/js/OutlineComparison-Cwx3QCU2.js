import{P as e,g as a,s as l,q as t,D as s,R as i,Q as n,ar as u,G as o,F as d,E as c,_ as r}from"./index.js";/* empty css                   *//* empty css                     *//* empty css                                                                          */import{E as m}from"./el-text-DFBF7ZCi.js";/* empty css               *//* empty css                *//* empty css                             */import{E as v,a as p}from"./el-select-CodEO2tF.js";import{u as f}from"./useProjectDocuments-Djdxj2zN.js";import{t as _}from"./tender-ZYcn_VXM.js";import{aq as y,am as g,an as h,aX as b,aw as x,as as j,bv as z,av as V,au as k,ar as w,aK as F,at as P,aV as C,aW as E,ay as D,aR as G,aS as M,aJ as U}from"./editor-DXll0Hem.js";/* empty css                *//* empty css                                                                        */import{D as T}from"./DocumentPreview-CyrDPP8g.js";/* empty css                    *//* empty css                */import{a as B,E as S}from"./index-Dhbgm4Y3.js";import{E as A}from"./index-B8i2o-55.js";import{E as I}from"./index-DtcGpiaq.js";import{v as O}from"./directive-Dw4PSiFE.js";import{E as R}from"./index-Dub1NZWM.js";import{E as q}from"./index-CLrB1tvP.js";import{c as K}from"./company-DX6fQVXW.js";import"./strings-BSMihvbA.js";import"./index-B7g7qGd9.js";import"./toNumber-C97Vx0Tx.js";import"./_baseFindIndex-BTqrMG7V.js";import"./_baseIteratee-BxfRPo3h.js";import"./project-BxbLQklh.js";const Q={class:"outline-comparison-wrapper"},W={class:"main-content"},X={style:{color:"var(--text-secondary)","font-size":"12px","margin-left":"8px"}},H={class:"document-item"},J={class:"document-header"},L={class:"document-info"},N={class:"document-item"},Y={class:"document-header"},Z={class:"document-info"},$={class:"card-header"},ee={class:"card-title"},ae={class:"card-header"},le={class:"card-title"},te={class:"action-section"},se={class:"card-header"},ie={class:"result-section"},ne={class:"result-title"},ue={class:"outline-content"},oe={key:0,class:"outline-text"},de={class:"result-meta"},ce={class:"result-section"},re={class:"result-title"},me={class:"outline-content"},ve={key:0,class:"outline-text"},pe={class:"result-meta"},fe=r(y({__name:"OutlineComparison",setup(r){const{projects:y,currentDocuments:fe,loadProjects:_e,handleProjectChange:ye}=f(),ge=y,he=g([]),be=g(null),xe=g(null),je=g(!1),ze=g(!1),Ve=g(!1),ke=g(""),we=g(""),Fe=g("正在加载提示词配置..."),Pe=g(!0),Ce=g(""),Ee=g(""),De=g(!1),Ge=g(!1),Me=g(""),Ue=g(""),Te=g(""),Be=g(""),Se=h(()=>be.value&&xe.value&&Ce.value&&Ee.value);function Ae(e){if(0===e)return"未知大小";const a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+["B","KB","MB","GB"][a]}async function Ie(e){if(je.value=!1,ze.value=!1,!e)return xe.value=null,void(await ye(null));await ye(e,{onClear:()=>{je.value=!1,ze.value=!1},onDocumentsLoaded:e=>{e.tenderFile&&(je.value=!0),e.technicalFile&&(ze.value=!0)}});const a=ge.value.find(a=>a.id===e);a&&a.company_id&&(xe.value=a.company_id)}async function Oe(){if(Se.value){De.value=!0,Ge.value=!1;try{c.info("大纲生成功能开发中..."),setTimeout(()=>{Me.value="第一章 项目概述\n1.1 项目背景\n1.2 项目目标\n第二章 技术方案\n2.1 系统架构\n2.2 技术选型",Ue.value="第一章 项目介绍\n1.1 背景分析\n1.2 目标设定\n第二章 解决方案\n2.1 架构设计\n2.2 技术栈",Te.value="2.3秒",Be.value="3.1秒",Ge.value=!0,De.value=!1},2e3)}catch(e){c.error("生成失败"),De.value=!1}}else c.warning("请完整填写所有配置项")}function Re(){be.value=null,xe.value=null,Ce.value="",Ee.value="",Ge.value=!1,Me.value="",Ue.value="",Te.value="",Be.value=""}function qe(){fe.value.technicalFile?(ke.value=fe.value.technicalFile.url,we.value=fe.value.technicalFile.name,Ve.value=!0):c.warning("技术文件不存在")}return b(()=>{!async function(){await _e()}(),async function(){try{const e=await K.getCompanies();e.success&&e.data&&(he.value=e.data)}catch(e){c.error("加载公司列表失败")}}(),async function(){Pe.value=!0;try{const e=await _.getOutlineGenerationPrompts();if(e.success&&e.data){const a=e.data.prompts||e.data;Fe.value=a.generate_outline||"未找到提示词配置"}else Fe.value="未找到提示词配置"}catch(e){c.error("加载提示词配置失败"),Fe.value="加载失败，请刷新页面重试"}finally{Pe.value=!1}}()}),(c,r)=>{const f=p,_=v,y=e,g=S,h=B,b=A,K=a,_e=I,ye=m,Ke=t,Qe=n,We=i,Xe=q,He=R,Je=O;return j(),x("div",Q,[r[25]||(r[25]=z('<div class="page-header" data-v-97b6cc04><div class="header-content" data-v-97b6cc04><div class="title-section" data-v-97b6cc04><i class="bi-diagram-3 header-icon" data-v-97b6cc04></i><div class="title-group" data-v-97b6cc04><h1 class="page-title" data-v-97b6cc04>大纲生成对比</h1><p class="page-description" data-v-97b6cc04>对比不同模型和提示词生成的技术方案大纲效果</p></div></div></div></div>',1)),V("div",W,[k(b,{class:"selection-card"},{default:P(()=>[k(h,{gutter:16},{default:P(()=>[k(g,{xs:24,sm:12},{default:P(()=>[k(y,{label:"选择项目"},{default:P(()=>[k(_,{modelValue:be.value,"onUpdate:modelValue":r[0]||(r[0]=e=>be.value=e),placeholder:"请选择项目",filterable:"",clearable:"",onChange:Ie},{default:P(()=>[(j(!0),x(C,null,E(D(ge),e=>(j(),w(f,{key:e.id,label:e.project_name,value:e.id},{default:P(()=>[V("span",null,G(e.project_name),1),V("span",X,G(e.company_name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),k(g,{xs:24,sm:12},{default:P(()=>[k(y,{label:"应答公司"},{default:P(()=>[k(_,{modelValue:xe.value,"onUpdate:modelValue":r[1]||(r[1]=e=>xe.value=e),placeholder:"请选择应答公司",filterable:"",clearable:""},{default:P(()=>[(j(!0),x(C,null,E(he.value,e=>(j(),w(f,{key:e.company_id,label:e.company_name||e.name,value:e.company_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),be.value&&(je.value||ze.value)?(j(),w(b,{key:0,class:"documents-card"},{header:P(()=>[...r[6]||(r[6]=[V("div",{class:"card-header"},[V("span",{class:"card-title"},[V("i",{class:"bi-folder2-open"}),M(" 项目文档 ")])],-1)])]),default:P(()=>[k(h,{gutter:16},{default:P(()=>[je.value&&D(fe).tenderFile?(j(),w(g,{key:0,xs:24,sm:12},{default:P(()=>[V("div",H,[V("div",J,[k(K,{class:"document-icon",color:"#409EFF"},{default:P(()=>[k(D(l))]),_:1}),r[7]||(r[7]=V("span",{class:"document-label"},"招标文档：",-1))]),V("div",L,[k(_e,{type:"info",size:"large"},{default:P(()=>[M(G(D(fe).tenderFile.name),1)]),_:1}),k(ye,{size:"small",type:"info",style:{"margin-left":"8px"}},{default:P(()=>[M(G(Ae(D(fe).tenderFile.size)),1)]),_:1})])])]),_:1})):F("",!0),ze.value&&D(fe).technicalFile?(j(),w(g,{key:1,xs:24,sm:12},{default:P(()=>[V("div",N,[V("div",Y,[k(K,{class:"document-icon",color:"#67C23A"},{default:P(()=>[k(D(l))]),_:1}),r[8]||(r[8]=V("span",{class:"document-label"},"技术需求文档：",-1))]),V("div",Z,[k(_e,{type:"success",size:"large"},{default:P(()=>[M(G(D(fe).technicalFile.name),1)]),_:1}),k(ye,{size:"small",type:"info",style:{"margin-left":"8px"}},{default:P(()=>[M(G(Ae(D(fe).technicalFile.size)),1)]),_:1}),k(Ke,{type:"primary",size:"small",plain:"",style:{"margin-left":"12px"},onClick:qe},{default:P(()=>[k(K,{style:{"margin-right":"4px"}},{default:P(()=>[k(D(s))]),_:1}),r[9]||(r[9]=M(" 预览 ",-1))]),_:1})])])]),_:1})):F("",!0)]),_:1})]),_:1})):F("",!0),k(h,{gutter:16,style:{"margin-top":"16px"}},{default:P(()=>[k(g,{xs:24,lg:12},{default:P(()=>[k(b,{class:"config-card"},{header:P(()=>[V("div",$,[V("span",ee,[k(_e,{type:"success",size:"small"},{default:P(()=>[...r[10]||(r[10]=[M("基准组",-1)])]),_:1}),r[11]||(r[11]=V("span",{style:{"margin-left":"8px"}},"当前配置",-1))])])]),default:P(()=>[k(We,{"label-position":"top"},{default:P(()=>[k(y,{label:"模型"},{default:P(()=>[k(Qe,{value:"gpt-4o-mini",disabled:""},{prepend:P(()=>[...r[12]||(r[12]=[V("i",{class:"bi-robot"},null,-1)])]),_:1})]),_:1}),k(y,{label:"提示词"},{extra:P(()=>[Pe.value?(j(),w(ye,{key:0,size:"small",type:"warning"},{default:P(()=>[...r[13]||(r[13]=[M(" 正在从后端加载真实提示词配置... ",-1)])]),_:1})):(j(),w(ye,{key:1,size:"small",type:"success"},{default:P(()=>[...r[14]||(r[14]=[M(" ✓ 已加载系统提示词模板。实际使用时，{analysis} 占位符会被替换为标书的具体需求分析结果，确保每个标书的大纲都是个性化的。 ",-1)])]),_:1}))]),default:P(()=>[U(k(Qe,{modelValue:Fe.value,"onUpdate:modelValue":r[2]||(r[2]=e=>Fe.value=e),type:"textarea",rows:12,placeholder:"当前使用的大纲生成提示词",disabled:""},null,8,["modelValue"]),[[Je,Pe.value]])]),_:1})]),_:1})]),_:1})]),_:1}),k(g,{xs:24,lg:12},{default:P(()=>[k(b,{class:"config-card"},{header:P(()=>[V("div",ae,[V("span",le,[k(_e,{type:"warning",size:"small"},{default:P(()=>[...r[15]||(r[15]=[M("对比组",-1)])]),_:1}),r[16]||(r[16]=V("span",{style:{"margin-left":"8px"}},"自定义配置",-1))])])]),default:P(()=>[k(We,{"label-position":"top"},{default:P(()=>[k(y,{label:"模型"},{default:P(()=>[k(_,{modelValue:Ce.value,"onUpdate:modelValue":r[3]||(r[3]=e=>Ce.value=e),placeholder:"选择模型"},{default:P(()=>[k(f,{label:"GPT5（最强推理）",value:"shihuang-gpt5"}),k(f,{label:"Claude Sonnet 4.5（标书专用）",value:"shihuang-claude-sonnet-45"}),k(f,{label:"GPT4o Mini（推荐）",value:"shihuang-gpt4o-mini"})]),_:1},8,["modelValue"])]),_:1}),k(y,{label:"提示词"},{extra:P(()=>[k(ye,{size:"small",type:"info"},{default:P(()=>[...r[17]||(r[17]=[M(" 自定义提示词，用于对比测试 ",-1)])]),_:1})]),default:P(()=>[k(Qe,{modelValue:Ee.value,"onUpdate:modelValue":r[4]||(r[4]=e=>Ee.value=e),type:"textarea",rows:12,placeholder:"输入自定义提示词..."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),V("div",te,[k(Ke,{type:"primary",size:"large",icon:D(u),loading:De.value,disabled:!Se.value,onClick:Oe},{default:P(()=>[...r[18]||(r[18]=[M(" 开始生成对比 ",-1)])]),_:1},8,["icon","loading","disabled"]),k(Ke,{size:"large",icon:D(o),onClick:Re},{default:P(()=>[...r[19]||(r[19]=[M(" 重置 ",-1)])]),_:1},8,["icon"])]),Ge.value?(j(),w(b,{key:1,class:"result-card"},{header:P(()=>[V("div",se,[r[21]||(r[21]=V("span",{class:"card-title"},[V("i",{class:"bi-bar-chart"}),M(" 生成结果对比 ")],-1)),k(Ke,{text:"",icon:D(d)},{default:P(()=>[...r[20]||(r[20]=[M("导出报告",-1)])]),_:1},8,["icon"])])]),default:P(()=>[k(h,{gutter:16},{default:P(()=>[k(g,{xs:24,lg:12},{default:P(()=>[V("div",ie,[V("h3",ne,[k(_e,{type:"success",size:"small"},{default:P(()=>[...r[22]||(r[22]=[M("基准组",-1)])]),_:1}),r[23]||(r[23]=M(" GPT-4o-mini ",-1))]),V("div",ue,[k(He,{"max-height":"600px"},{default:P(()=>[Me.value?(j(),x("div",oe,G(Me.value),1)):(j(),w(Xe,{key:1,description:"暂无结果"}))]),_:1})]),V("div",de,[k(ye,{size:"small",type:"info"},{default:P(()=>[M(" 生成时间: "+G(Te.value||"-"),1)]),_:1})])])]),_:1}),k(g,{xs:24,lg:12},{default:P(()=>[V("div",ce,[V("h3",re,[k(_e,{type:"warning",size:"small"},{default:P(()=>[...r[24]||(r[24]=[M("对比组",-1)])]),_:1}),M(" "+G(Ce.value||"未选择"),1)]),V("div",me,[k(He,{"max-height":"600px"},{default:P(()=>[Ue.value?(j(),x("div",ve,G(Ue.value),1)):(j(),w(Xe,{key:1,description:"暂无结果"}))]),_:1})]),V("div",pe,[k(ye,{size:"small",type:"info"},{default:P(()=>[M(" 生成时间: "+G(Be.value||"-"),1)]),_:1})])])]),_:1})]),_:1})]),_:1})):F("",!0)]),k(D(T),{modelValue:Ve.value,"onUpdate:modelValue":r[5]||(r[5]=e=>Ve.value=e),"file-url":ke.value,"file-name":we.value},null,8,["modelValue","file-url","file-name"])])}}}),[["__scopeId","data-v-97b6cc04"]]);export{fe as default};
