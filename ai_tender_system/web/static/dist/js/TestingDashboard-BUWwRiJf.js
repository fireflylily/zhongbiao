import{E as e,d as a,h as s,i as l,q as t,Q as i,an as n,p as r,al as c,r as o,G as u}from"./index.js";/* empty css                *//* empty css                                                        */import{E as d}from"./el-text-Kv3Vn9-t.js";import{E as v}from"./el-pagination-CQGtFIJ_.js";/* empty css               */import{E as p,a as f}from"./el-select-CldpbmUv.js";/* empty css                     *//* empty css                    *//* empty css                    */import{t as m}from"./test-runner-BDl9wZQx.js";/* empty css                */import{E as g,a as _}from"./el-tab-pane-CC1O_BHr.js";/* empty css                                                                            */import{C as h}from"./Card-SJ5b36FP.js";import{am as y,an as b,ao as w,aW as k,au as j,ar as x,av as C,ax as z,as as V,aw as T,az as S,aA as E,aC as I,aD as F,aq as D,aB as $,bF as U,ay as O,aF as P}from"./editor-Dt4gYtYt.js";/* empty css                         *//* empty css                   *//* empty css                             *//* empty css                */import{E as A}from"./el-skeleton-item-CU61G_rF.js";import{E as H}from"./index-CzbDvFem.js";import{E as M}from"./strings-BjAjE6k-.js";import{E as N}from"./index-rLTqmg7l.js";import{E as q}from"./index-zLnbxgQE.js";import{E as B,a as Q}from"./index-IU_h0TRZ.js";import{E as G}from"./index-BgAfl9sI.js";import"./index-CcWeoNg9.js";import"./toNumber-D5oObipZ.js";import"./_baseIteratee-BnEJjc-Z.js";import"./raf-BZHcGSIv.js";import"./clamp-BWjOrnxb.js";import"./flatMap-B-HSJstM.js";import"./map-7mKJdJp1.js";import"./_baseEach-BT2EtZBY.js";const J={class:"test-checklist"},L={key:0,class:"loading-state"},R={key:1,class:"error-state"},W={key:2,class:"checklist-content"},Y={class:"section-header"},K={class:"header-left"},X={class:"section-title"},Z={class:"header-right"},ee={class:"test-count"},ae={class:"test-list"},se={class:"test-info"},le={class:"test-details"},te={class:"test-name"},ie={class:"test-path"},ne={class:"test-actions"},re={class:"section-header"},ce={class:"header-left"},oe={class:"section-title"},ue={class:"test-list"},de={class:"test-info"},ve={class:"test-details"},pe={class:"test-name"},fe={class:"test-path"},me={key:0,class:"test-actions"},ge={class:"test-output"},_e={key:0,class:"output-content"},he=t(y({__name:"TestChecklist",setup(t){const i=b(!0),n=b(null),r=b(null),c=b({}),o=b({}),u=b({}),d=b(!1),v=b(!1),p=b(""),f=w(()=>{if(!r.value)return{total:0,passed:0};return{total:r.value.core_tests.tests.length,passed:r.value.core_tests.tests.filter(e=>{var a;return"passed"===(null==(a=c.value[e.full_path])?void 0:a.status)}).length}}),g=async()=>{try{const e=await m.getChecklistStatus();e.success&&(c.value=e.test_status)}catch(e){}},_=async e=>{try{o.value[e]=!0;const a=await m.runSingleTest(e);a.success&&a.passed?(l.success(`æµ‹è¯•é€šè¿‡: ${e.split("::")[1]||e}`),c.value[e]={available:!0,status:"passed",last_run:(new Date).toISOString()}):(l.error(`æµ‹è¯•å¤±è´¥: ${e.split("::")[1]||e}`),c.value[e]={available:!0,status:"failed",last_run:(new Date).toISOString()}),p.value=a.output||"",v.value=!0}catch(a){l.error(`è¿è¡Œå¤±è´¥: ${a.message}`)}finally{o.value[e]=!1}},h=async()=>{if(r.value){d.value=!0;for(const e of r.value.core_tests.tests)await _(e.full_path);d.value=!1,l.success("æ‰€æœ‰æ ¸å¿ƒæµ‹è¯•å·²å®Œæˆ")}},y=e=>{var a;const s=null==(a=c.value[e])?void 0:a.status;return"passed"===s?"bi-check-circle-fill":"failed"===s?"bi-x-circle-fill":"bi-circle"},U=e=>{var a;const s=null==(a=c.value[e])?void 0:a.status;return"passed"===s?"test-passed":"failed"===s?"test-failed":"test-unknown"},O=()=>{p.value&&navigator.clipboard.writeText(p.value).then(()=>{l.success("è¾“å‡ºå·²å¤åˆ¶åˆ°å‰ªè´´æ¿")})};return k(async()=>{await(async()=>{try{i.value=!0,n.value=null;const e=await m.getChecklist();e.success?r.value=e.checklist:n.value="åŠ è½½æµ‹è¯•æ¸…å•å¤±è´¥"}catch(e){n.value=e.message||"ç½‘ç»œé”™è¯¯"}finally{i.value=!1}})(),await g()}),(t,m)=>{const b=A,w=e,k=M,P=a,q=H,B=N,Q=s;return x(),j("div",J,[i.value?(x(),j("div",L,[z(b,{rows:5,animated:""})])):n.value?(x(),j("div",R,[z(w,{title:n.value,type:"error","show-icon":"",closable:!1},null,8,["title"])])):r.value?(x(),j("div",W,[z(q,{class:"checklist-section",shadow:"never"},{header:V(()=>[T("div",Y,[T("div",K,[m[3]||(m[3]=T("i",{class:"bi-shield-check section-icon"},null,-1)),T("span",X,I(r.value.core_tests.name),1),z(k,{type:"danger",size:"small",effect:"dark"},{default:V(()=>[...m[2]||(m[2]=[F("æ ¸å¿ƒ",-1)])]),_:1})]),T("div",Z,[T("span",ee,I(f.value.passed)+"/"+I(f.value.total),1),z(P,{size:"small",type:"primary",onClick:h,loading:d.value,disabled:d.value},{default:V(()=>[...m[4]||(m[4]=[T("i",{class:"bi-play-fill"},null,-1),F(" å…¨éƒ¨è¿è¡Œ ",-1)])]),_:1},8,["loading","disabled"])])])]),default:V(()=>[T("div",ae,[(x(!0),j(S,null,E(r.value.core_tests.tests,e=>{var a,s;return x(),j("div",{key:e.id,class:$(["test-item",U(e.full_path)])},[T("div",se,[T("i",{class:$([y(e.full_path),"test-status-icon"])},null,2),T("div",le,[T("div",te,I(e.name),1),T("div",ie,I(e.file),1)])]),T("div",ne,["passed"===(null==(a=c.value[e.full_path])?void 0:a.status)?(x(),D(k,{key:0,type:"success",size:"small",effect:"plain"},{default:V(()=>[...m[5]||(m[5]=[F(" âœ“ é€šè¿‡ ",-1)])]),_:1})):"failed"===(null==(s=c.value[e.full_path])?void 0:s.status)?(x(),D(k,{key:1,type:"danger",size:"small",effect:"plain"},{default:V(()=>[...m[6]||(m[6]=[F(" âœ— å¤±è´¥ ",-1)])]),_:1})):(x(),D(k,{key:2,type:"info",size:"small",effect:"plain"},{default:V(()=>[...m[7]||(m[7]=[F(" æœªè¿è¡Œ ",-1)])]),_:1})),z(P,{size:"small",onClick:a=>_(e.full_path),loading:o.value[e.full_path],disabled:o.value[e.full_path]},{default:V(()=>[...m[8]||(m[8]=[F(" è¿è¡Œ ",-1)])]),_:1},8,["onClick","loading","disabled"])])],2)}),128))])]),_:1}),(x(!0),j(S,null,E(r.value.test_suites,(e,a)=>(x(),j("div",{key:a,class:"suite-section"},[z(q,{shadow:"never"},{header:V(()=>[T("div",re,[T("div",ce,[m[9]||(m[9]=T("i",{class:"bi-folder-check section-icon"},null,-1)),T("span",oe,I(e.description),1),z(k,{size:"small",effect:"plain"},{default:V(()=>[F(I(e.tests.length)+" ä¸ªæµ‹è¯•",1)]),_:2},1024)]),z(P,{size:"small",type:"primary",plain:"",onClick:e=>(async e=>{l.info(`è¿è¡Œæµ‹è¯•å¥—ä»¶: ${e}`),u.value[e]=!0;try{const a=await fetch("/api/testing/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:"backend",test_path:"tests/"})}),s=await a.json();s.success?(l.success(`å¥—ä»¶ ${e} æµ‹è¯•å®Œæˆ`),await g()):l.error(`å¥—ä»¶è¿è¡Œå¤±è´¥: ${s.error}`)}catch(a){l.error(`è¿è¡Œå¤±è´¥: ${a.message}`)}finally{u.value[e]=!1}})(a),loading:u.value[a],disabled:u.value[a]},{default:V(()=>[...m[10]||(m[10]=[T("i",{class:"bi-play-fill"},null,-1),F(" è¿è¡Œå¥—ä»¶ ",-1)])]),_:1},8,["onClick","loading","disabled"])])]),default:V(()=>[T("div",ue,[(x(!0),j(S,null,E(e.tests,e=>(x(),j("div",{key:e.id,class:$(["test-item",{"is-directory":e.is_directory}])},[T("div",de,[T("i",{class:$([e.is_directory?"bi-folder":"bi-file-earmark-code","test-icon"])},null,2),T("div",ve,[T("div",pe,I(e.name),1),T("div",fe,I(e.file),1)])]),e.is_directory?C("",!0):(x(),j("div",me,[z(P,{size:"small",onClick:a=>_(e.full_path),loading:o.value[e.full_path],disabled:o.value[e.full_path]},{default:V(()=>[...m[11]||(m[11]=[F(" è¿è¡Œ ",-1)])]),_:1},8,["onClick","loading","disabled"])]))],2))),128))])]),_:2},1024)]))),128))])):C("",!0),z(Q,{modelValue:v.value,"onUpdate:modelValue":m[1]||(m[1]=e=>v.value=e),title:"æµ‹è¯•è¾“å‡º",width:"70%","close-on-click-modal":!1},{footer:V(()=>[z(P,{onClick:m[0]||(m[0]=e=>v.value=!1)},{default:V(()=>[...m[12]||(m[12]=[F("å…³é—­",-1)])]),_:1}),z(P,{type:"primary",onClick:O},{default:V(()=>[...m[13]||(m[13]=[F("å¤åˆ¶è¾“å‡º",-1)])]),_:1})]),default:V(()=>[T("div",ge,[p.value?(x(),j("pre",_e,I(p.value),1)):(x(),D(B,{key:1,description:"æ— è¾“å‡º"}))])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-558d203b"]]),ye={class:"automated-test"},be={class:"runner-content"},we={class:"quick-info-grid"},ke={class:"info-content"},je={class:"info-text"},xe={class:"info-value"},Ce={class:"info-content"},ze={class:"info-text"},Ve={class:"info-value"},Te={class:"info-content"},Se={class:"info-text"},Ee={class:"info-content"},Ie={class:"info-text"},Fe={class:"info-value small"},De={class:"control-panel"},$e={class:"run-options"},Ue={class:"test-env-selector"},Oe={key:0,class:"test-options"},Pe={key:1,class:"test-options"},Ae={key:0,class:"results-panel"},He={class:"stats-header"},Me={class:"test-stats"},Ne={class:"stat-item success"},qe={class:"stat-content"},Be={class:"stat-value"},Qe={class:"stat-item danger"},Ge={class:"stat-content"},Je={class:"stat-value"},Le={class:"stat-item warning"},Re={class:"stat-content"},We={class:"stat-value"},Ye={class:"stat-item info"},Ke={class:"stat-content"},Xe={class:"stat-value"},Ze={class:"stat-item"},ea={class:"stat-content"},aa={class:"stat-value"},sa={key:1,class:"coverage-section"},la={class:"coverage-header"},ta={class:"coverage-actions"},ia={class:"coverage-summary"},na={class:"summary-item"},ra={class:"summary-value"},ca={class:"summary-item"},oa={class:"summary-value success"},ua={class:"summary-item"},da={class:"summary-value danger"},va={class:"pagination-wrapper"},pa={class:"history-section"},fa={class:"history-header"},ma={class:"header-actions"},ga={key:0,class:"result-summary"},_a={class:"result-item success"},ha={class:"result-item danger"},ya={class:"result-item warning"},ba={key:1,class:"text-muted"},wa={key:0},ka={key:1,class:"text-muted"},ja={key:0,class:"empty-state"},xa={key:2,class:"logs-section"},Ca={class:"logs-header"},za={class:"header-actions"},Va={key:0,class:"logs-content"},Ta={key:1,class:"empty-logs"},Sa=t(y({__name:"TestingDashboard",setup(e){const s=b("checklist"),t=b(null),y=b("backend"),S=b("unit"),E=b(""),A=b(!0),J=b(!1),L=b(null),R=b(null),W=b(null),Y=b(null),K=b([]),X=b(null),Z=b(1),ee=b(20),ae=w(()=>{if(!Y.value)return[];const e=(Z.value-1)*ee.value,a=e+ee.value;return Y.value.files.slice(e,a)}),se=async()=>{try{const e=await m.getQuickInfo();e.success&&(t.value=e.info)}catch(e){}},le=async()=>{var e,a;if(!J.value)try{let e;if("frontend"===y.value){l.info("æ­£åœ¨è¿è¡Œå‰ç«¯Vitestæµ‹è¯•..."),e=await fetch("/api/testing/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:"frontend",test_module:E.value})});const a=await e.json();a.success?(l.success(`å‰ç«¯æµ‹è¯•å®Œæˆï¼é€šè¿‡: ${a.passed}, å¤±è´¥: ${a.failed}`),L.value={task_id:`frontend_${Date.now()}`,status:"completed",result:{passed:a.passed||0,failed:a.failed||0,skipped:a.skipped||0,errors:0,duration:0,total:a.total_tests||0},logs:a.output?a.output.split("\n"):[],test_type:"frontend",created_time:(new Date).toISOString()},await se()):l.error("å‰ç«¯æµ‹è¯•è¿è¡Œå¤±è´¥: "+(a.error||"æœªçŸ¥é”™è¯¯"))}else e=await m.runTests(S.value,A.value,!0),e.success&&(R.value=e.task_id,J.value=!0,l.success("æµ‹è¯•å·²å¼€å§‹è¿è¡Œ"),te())}catch(s){l.error((null==(a=null==(e=s.response)?void 0:e.data)?void 0:a.error)||"å¯åŠ¨æµ‹è¯•å¤±è´¥")}},te=()=>{W.value&&clearInterval(W.value),W.value=window.setInterval(async()=>{if(R.value)try{const e=await m.getTestStatus(R.value);e.success&&(L.value=e.task,await P(),X.value&&(X.value.scrollTop=X.value.scrollHeight),"completed"!==L.value.status&&"failed"!==L.value.status||(ie(),J.value=!1,A.value&&"completed"===L.value.status&&await ne(),await se(),await re(),"completed"===L.value.status?l.success("æµ‹è¯•è¿è¡Œå®Œæˆ"):l.error("æµ‹è¯•è¿è¡Œå¤±è´¥")))}catch(e){}},1e3)},ie=()=>{W.value&&(clearInterval(W.value),W.value=null)},ne=async()=>{try{const e=await m.getCoverageData();e.success&&(Y.value=e.coverage)}catch(e){}},re=async()=>{try{const e=await m.getTestHistory(20);e.success&&(K.value=e.history)}catch(e){}},ce=async()=>{try{await u.confirm("ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æµ‹è¯•åŽ†å²è®°å½•å—ï¼Ÿ","ç¡®è®¤æ¸…é™¤",{type:"warning"}),await m.clearHistory(),K.value=[],l.success("åŽ†å²è®°å½•å·²æ¸…é™¤")}catch(e){}},oe=()=>{var e;if(!(null==(e=L.value)?void 0:e.logs))return;const a=L.value.logs.join("\n");navigator.clipboard.writeText(a).then(()=>{l.success("æ—¥å¿—å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")})},ue=e=>e>=80?"coverage-excellent":e>=50?"coverage-good":e>=30?"coverage-fair":"coverage-poor",de=e=>e>=80?"#67C23A":e>=50?"#409EFF":e>=30?"#E6A23C":"#F56C6C",ve=e=>({pending:"ç­‰å¾…ä¸­",running:"è¿è¡Œä¸­",completed:"å·²å®Œæˆ",failed:"å¤±è´¥"}[e]||e),pe=e=>{const a="test"===e?"/api/testing/view/report":"/api/testing/view/coverage";window.open(a,"_blank")},fe=e=>{ee.value=e,Z.value=1},me=e=>{Z.value=e};return k(async()=>{await se(),await re(),await ne()}),U(()=>{ie()}),(e,u)=>{const m=a,b=_,w=H,k=n,U=i,P=q,R=f,W=p,te=M,ie=G,ne=Q,ge=B,_e=v,Sa=d,Ea=N,Ia=g;return x(),j("div",ye,[z(O(h),{title:"ðŸ§ª è‡ªåŠ¨åŒ–æµ‹è¯•è¿è¡Œå™¨"},{extra:V(()=>[z(m,{onClick:se,icon:O(o),circle:"",size:"small",title:"åˆ·æ–°"},null,8,["icon"])]),default:V(()=>[z(Ia,{modelValue:s.value,"onUpdate:modelValue":u[8]||(u[8]=e=>s.value=e),class:"test-tabs"},{default:V(()=>[z(b,{label:"æµ‹è¯•æ¸…å•",name:"checklist"},{default:V(()=>[z(he)]),_:1}),z(b,{label:"æµ‹è¯•è¿è¡Œå™¨",name:"runner"},{default:V(()=>{var e;return[T("div",be,[T("div",we,[z(w,{class:"info-card",shadow:"hover"},{default:V(()=>{var e;return[T("div",ke,[u[10]||(u[10]=T("i",{class:"bi-list-check info-icon"},null,-1)),T("div",je,[u[9]||(u[9]=T("div",{class:"info-label"},"æ€»æµ‹è¯•æ•°",-1)),T("div",xe,I((null==(e=t.value)?void 0:e.total_tests)||0),1)])])]}),_:1}),z(w,{class:"info-card",shadow:"hover"},{default:V(()=>{var e;return[T("div",Ce,[u[12]||(u[12]=T("i",{class:"bi-file-earmark-code info-icon"},null,-1)),T("div",ze,[u[11]||(u[11]=T("div",{class:"info-label"},"æµ‹è¯•æ–‡ä»¶",-1)),T("div",Ve,I((null==(e=t.value)?void 0:e.test_files)||0),1)])])]}),_:1}),z(w,{class:"info-card",shadow:"hover"},{default:V(()=>{var e,a;return[T("div",Te,[u[14]||(u[14]=T("i",{class:"bi-pie-chart info-icon"},null,-1)),T("div",Se,[u[13]||(u[13]=T("div",{class:"info-label"},"æµ‹è¯•è¦†ç›–çŽ‡",-1)),T("div",{class:$(["info-value",ue((null==(e=t.value)?void 0:e.coverage_percent)||0)])},I(((null==(a=t.value)?void 0:a.coverage_percent)||0).toFixed(2))+"% ",3)])])]}),_:1}),z(w,{class:"info-card",shadow:"hover"},{default:V(()=>{var e;return[T("div",Ee,[u[16]||(u[16]=T("i",{class:"bi-clock-history info-icon"},null,-1)),T("div",Ie,[u[15]||(u[15]=T("div",{class:"info-label"},"æœ€åŽè¿è¡Œ",-1)),T("div",Fe,I((null==(e=t.value)?void 0:e.last_run)||"æœªè¿è¡Œ"),1)])])]}),_:1})]),T("div",De,[z(w,{shadow:"never"},{header:V(()=>[...u[17]||(u[17]=[T("span",null,"è¿è¡Œæµ‹è¯•",-1)])]),default:V(()=>[T("div",$e,[T("div",Ue,[u[20]||(u[20]=T("span",{class:"selector-label"},"æµ‹è¯•çŽ¯å¢ƒ:",-1)),z(U,{modelValue:y.value,"onUpdate:modelValue":u[0]||(u[0]=e=>y.value=e),disabled:J.value,size:"default"},{default:V(()=>[z(k,{value:"backend"},{default:V(()=>[...u[18]||(u[18]=[F("ðŸ åŽç«¯æµ‹è¯•",-1)])]),_:1}),z(k,{value:"frontend"},{default:V(()=>[...u[19]||(u[19]=[F("ðŸŽ¨ å‰ç«¯æµ‹è¯•",-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),"backend"===y.value?(x(),j("div",Oe,[z(U,{modelValue:S.value,"onUpdate:modelValue":u[1]||(u[1]=e=>S.value=e),disabled:J.value},{default:V(()=>[z(k,{value:"unit"},{default:V(()=>[...u[21]||(u[21]=[F("å•å…ƒæµ‹è¯•",-1)])]),_:1}),z(k,{value:"integration"},{default:V(()=>[...u[22]||(u[22]=[F("é›†æˆæµ‹è¯•",-1)])]),_:1}),z(k,{value:"all"},{default:V(()=>[...u[23]||(u[23]=[F("å…¨éƒ¨æµ‹è¯•",-1)])]),_:1})]),_:1},8,["modelValue","disabled"]),z(P,{modelValue:A.value,"onUpdate:modelValue":u[2]||(u[2]=e=>A.value=e),disabled:J.value},{default:V(()=>[...u[24]||(u[24]=[F(" ç”Ÿæˆè¦†ç›–çŽ‡æŠ¥å‘Š ",-1)])]),_:1},8,["modelValue","disabled"])])):C("",!0),"frontend"===y.value?(x(),j("div",Pe,[z(W,{modelValue:E.value,"onUpdate:modelValue":u[3]||(u[3]=e=>E.value=e),placeholder:"é€‰æ‹©æ¨¡å—ï¼ˆç•™ç©º=å…¨éƒ¨ï¼‰",clearable:"",disabled:J.value,style:{width:"300px"}},{default:V(()=>[z(R,{label:"å…¨éƒ¨å‰ç«¯æµ‹è¯•",value:""}),z(R,{label:"å•†åŠ¡åº”ç­”æ¨¡å—",value:"Business/Response"}),z(R,{label:"æŠ€æœ¯æ–¹æ¡ˆæ¨¡å—",value:"Business/TechProposal"}),z(R,{label:"å·¥å…·å‡½æ•°",value:"utils"}),z(R,{label:"APIè°ƒç”¨",value:"api"})]),_:1},8,["modelValue","disabled"])])):C("",!0),z(m,{type:"primary",icon:J.value?O(r):O(c),loading:J.value,onClick:le,size:"large"},{default:V(()=>[F(I(J.value?"æµ‹è¯•è¿è¡Œä¸­...":"frontend"===y.value?"è¿è¡Œå‰ç«¯æµ‹è¯•":"è¿è¡ŒåŽç«¯æµ‹è¯•"),1)]),_:1},8,["icon","loading"])])]),_:1})]),(null==(e=L.value)?void 0:e.result)?(x(),j("div",Ae,[z(w,{shadow:"never",class:"stats-card"},{header:V(()=>[T("div",He,[u[25]||(u[25]=T("span",null,"æµ‹è¯•ç»“æžœ",-1)),z(te,{type:L.value.result.passed?"success":"danger",effect:"dark"},{default:V(()=>[F(I(L.value.result.passed?"âœ… é€šè¿‡":"âŒ å¤±è´¥"),1)]),_:1},8,["type"])])]),default:V(()=>{var e;return[T("div",Me,[T("div",Ne,[u[27]||(u[27]=T("i",{class:"bi-check-circle"},null,-1)),T("div",qe,[u[26]||(u[26]=T("div",{class:"stat-label"},"é€šè¿‡",-1)),T("div",Be,I(L.value.result.passed),1)])]),T("div",Qe,[u[29]||(u[29]=T("i",{class:"bi-x-circle"},null,-1)),T("div",Ge,[u[28]||(u[28]=T("div",{class:"stat-label"},"å¤±è´¥",-1)),T("div",Je,I(L.value.result.failed),1)])]),T("div",Le,[u[31]||(u[31]=T("i",{class:"bi-skip-forward-circle"},null,-1)),T("div",Re,[u[30]||(u[30]=T("div",{class:"stat-label"},"è·³è¿‡",-1)),T("div",We,I(L.value.result.skipped),1)])]),T("div",Ye,[u[33]||(u[33]=T("i",{class:"bi-exclamation-circle"},null,-1)),T("div",Ke,[u[32]||(u[32]=T("div",{class:"stat-label"},"é”™è¯¯",-1)),T("div",Xe,I(L.value.result.errors),1)])]),T("div",Ze,[u[35]||(u[35]=T("i",{class:"bi-stopwatch"},null,-1)),T("div",ea,[u[34]||(u[34]=T("div",{class:"stat-label"},"è€—æ—¶",-1)),T("div",aa,I(null==(e=L.value.result.duration)?void 0:e.toFixed(2))+"s",1)])])])]}),_:1})])):C("",!0),Y.value?(x(),j("div",sa,[z(w,{shadow:"never"},{header:V(()=>[T("div",la,[u[37]||(u[37]=T("span",null,"æµ‹è¯•è¦†ç›–çŽ‡",-1)),T("div",ta,[z(m,{size:"small",onClick:u[4]||(u[4]=e=>pe("coverage")),type:"primary",plain:""},{default:V(()=>[...u[36]||(u[36]=[F(" ðŸ“Š æŸ¥çœ‹å®Œæ•´HTMLæŠ¥å‘Š ",-1)])]),_:1}),z(ie,{percentage:Y.value.coverage_percent,color:de(Y.value.coverage_percent),"stroke-width":20,"text-inside":"",style:{flex:"1","max-width":"300px"}},null,8,["percentage","color"])])])]),default:V(()=>[T("div",ia,[T("div",na,[u[38]||(u[38]=T("span",{class:"summary-label"},"æ€»ä»£ç è¡Œæ•°:",-1)),T("span",ra,I(Y.value.total_statements),1)]),T("div",ca,[u[39]||(u[39]=T("span",{class:"summary-label"},"å·²è¦†ç›–:",-1)),T("span",oa,I(Y.value.covered_statements),1)]),T("div",ua,[u[40]||(u[40]=T("span",{class:"summary-label"},"æœªè¦†ç›–:",-1)),T("span",da,I(Y.value.missing_statements),1)])]),z(ge,{data:ae.value,border:"",stripe:"","max-height":"400"},{default:V(()=>[z(ne,{prop:"file",label:"æ–‡ä»¶","min-width":"300","show-overflow-tooltip":""}),z(ne,{prop:"statements",label:"æ€»è¡Œæ•°",width:"100",align:"center"}),z(ne,{prop:"covered",label:"å·²è¦†ç›–",width:"100",align:"center"}),z(ne,{prop:"missing",label:"æœªè¦†ç›–",width:"100",align:"center"}),z(ne,{label:"è¦†ç›–çŽ‡",width:"150",align:"center"},{default:V(({row:e})=>[z(ie,{percentage:e.coverage,color:de(e.coverage),"stroke-width":6,"show-text":!1},null,8,["percentage","color"]),T("span",{class:$(ue(e.coverage)),style:{"margin-left":"8px"}},I(e.coverage.toFixed(1))+"% ",3)]),_:1})]),_:1},8,["data"]),T("div",va,[z(_e,{"current-page":Z.value,"onUpdate:currentPage":u[5]||(u[5]=e=>Z.value=e),"page-size":ee.value,"onUpdate:pageSize":u[6]||(u[6]=e=>ee.value=e),"page-sizes":[10,20,50,100],total:Y.value.files.length,layout:"total, sizes, prev, pager, next",onSizeChange:fe,onCurrentChange:me},null,8,["current-page","page-size","total"])])]),_:1})])):C("",!0),T("div",pa,[z(w,{shadow:"never"},{header:V(()=>[T("div",fa,[u[43]||(u[43]=T("span",null,"æµ‹è¯•åŽ†å²",-1)),T("div",ma,[z(m,{size:"small",onClick:re},{default:V(()=>[...u[41]||(u[41]=[F("åˆ·æ–°",-1)])]),_:1}),z(m,{size:"small",type:"danger",onClick:ce},{default:V(()=>[...u[42]||(u[42]=[F("æ¸…é™¤",-1)])]),_:1})])])]),default:V(()=>[z(ge,{data:K.value,border:"",stripe:""},{default:V(()=>[z(ne,{label:"ä»»åŠ¡ID",width:"200","show-overflow-tooltip":""},{default:V(({row:e})=>[z(Sa,{size:"small",type:"info"},{default:V(()=>[F(I(e.task_id),1)]),_:2},1024)]),_:1}),z(ne,{prop:"test_type",label:"æµ‹è¯•ç±»åž‹",width:"120",align:"center"},{default:V(({row:e})=>[z(te,{size:"small",effect:"plain"},{default:V(()=>{return[F(I((a=e.test_type,{unit:"å•å…ƒæµ‹è¯•",integration:"é›†æˆæµ‹è¯•",all:"å…¨éƒ¨æµ‹è¯•"}[a]||a)),1)];var a}),_:2},1024)]),_:1}),z(ne,{label:"çŠ¶æ€",width:"100",align:"center"},{default:V(({row:e})=>{return[z(te,{type:(a=e.status,{pending:"info",running:"warning",completed:"success",failed:"danger"}[a]||"info"),size:"small"},{default:V(()=>[F(I(ve(e.status)),1)]),_:2},1032,["type"])];var a}),_:1}),z(ne,{label:"ç»“æžœ",width:"200",align:"center"},{default:V(({row:e})=>[e.result?(x(),j("div",ga,[T("span",_a,"âœ“ "+I(e.result.passed),1),T("span",ha,"âœ— "+I(e.result.failed),1),T("span",ya,"âŠ™ "+I(e.result.skipped),1)])):(x(),j("span",ba,"-"))]),_:1}),z(ne,{prop:"created_time",label:"åˆ›å»ºæ—¶é—´",width:"180"}),z(ne,{label:"è€—æ—¶",width:"100",align:"center"},{default:V(({row:e})=>{var a;return[e.result?(x(),j("span",wa,I(null==(a=e.result.duration)?void 0:a.toFixed(2))+"s",1)):(x(),j("span",ka,"-"))]}),_:1}),z(ne,{label:"æ“ä½œ",width:"120",fixed:"right",align:"center"},{default:V(({row:e})=>[z(m,{size:"small",onClick:a=>{return s=e,L.value=s,void l.info("å·²åŠ è½½æµ‹è¯•è¯¦æƒ…");var s}},{default:V(()=>[...u[44]||(u[44]=[F("æŸ¥çœ‹",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),0===K.value.length?(x(),j("div",ja,[z(Ea,{description:"æš‚æ— æµ‹è¯•åŽ†å²"})])):C("",!0)]),_:1})]),L.value?(x(),j("div",xa,[z(w,{shadow:"never",class:"logs-card"},{header:V(()=>[T("div",Ca,[u[48]||(u[48]=T("span",null,"ðŸ“ æµ‹è¯•æ—¥å¿—",-1)),T("div",za,[J.value?(x(),D(te,{key:0,type:"info",effect:"plain"},{default:V(()=>[...u[45]||(u[45]=[T("i",{class:"bi-arrow-clockwise rotating"},null,-1),F(" è¿è¡Œä¸­... ",-1)])]),_:1})):C("",!0),z(m,{size:"small",onClick:u[7]||(u[7]=e=>pe("test")),type:"success",plain:""},{default:V(()=>[...u[46]||(u[46]=[F(" ðŸ“„ æŸ¥çœ‹HTMLæµ‹è¯•æŠ¥å‘Š ",-1)])]),_:1}),z(m,{size:"small",onClick:oe},{default:V(()=>[...u[47]||(u[47]=[F("å¤åˆ¶æ—¥å¿—",-1)])]),_:1})])])]),default:V(()=>[T("div",{class:"logs-container",ref_key:"logsContainer",ref:X},[L.value.logs&&L.value.logs.length>0?(x(),j("pre",Va,I(L.value.logs.join("\n")),1)):(x(),j("div",Ta,[...u[49]||(u[49]=[T("i",{class:"bi-terminal"},null,-1),T("p",null,"ç­‰å¾…æµ‹è¯•å¼€å§‹...",-1)])]))],512)]),_:1})])):C("",!0)])]}),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),[["__scopeId","data-v-3c56158f"]]);export{Sa as default};
