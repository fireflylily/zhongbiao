import{_ as e}from"./_plugin-vue_export-helper-BZqs1yfm.js";import"./HistoryFilesPanel.vue_vue_type_style_index_0_scoped_8037c805_lang-DZHVYQUE.js";/* empty css                */import{d as a,r as t,x as s,c as l,o,g as r,a2 as i,w as u,C as p,e as d,B as c,a0 as n,H as m,F as f,aF as x,t as g,bS as _,bs as v,k as y,bT as h,l as b,aW as k,bU as w,aA as F}from"./index.js";import{E as V}from"./index-C50U0V8Z.js";import{E as $}from"./index-DVu1qCus.js";const j={class:"document-uploader"},T={key:1,class:"upload-drag-area"},z={key:0,class:"upload-hint"},B={key:0,class:"upload-tip"},S={class:"upload-file-item"},q={class:"file-name"},D=e(a({__name:"DocumentUploader",props:{uploadUrl:{default:"/api/upload"},uploadHeaders:{},uploadData:{},httpRequest:{},accept:{default:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx"},limit:{default:10},maxSize:{default:50},multiple:{type:Boolean,default:!1},drag:{type:Boolean,default:!1},showFileList:{type:Boolean,default:!0},triggerText:{default:"选择文件"},tipText:{default:""},modelValue:{}},emits:["update:modelValue","success","error","exceed","remove"],setup(e,{expose:a,emit:D}){const H=e,L=D,U=t(),C=s({get:()=>H.modelValue||[],set:e=>L("update:modelValue",e)}),R=e=>{var a;if(H.maxSize&&e.size/1024/1024>H.maxSize)return F.error(`文件大小不能超过 ${H.maxSize}MB`),!1;if(H.accept){const t=H.accept.split(",").map(e=>e.trim()),s="."+(null==(a=e.name.split(".").pop())?void 0:a.toLowerCase());if(!t.some(e=>s===e.toLowerCase()))return F.error(`不支持的文件格式：${s}`),!1}return!0},E=(e,a,t)=>{},W=(e,a,t)=>{L("success",a,t),L("update:modelValue",t)},A=(e,a,t)=>{F.error("文件上传失败："+e.message),L("error",e,a,t)},I=(e,a)=>{F.warning(`最多只能上传 ${H.limit} 个文件`),L("exceed",e,a)},M=(e,a)=>{L("remove",e,a),L("update:modelValue",a)};return a({clearFiles:()=>{var e;null==(e=U.value)||e.clearFiles(),L("update:modelValue",[])},submit:()=>{var e;null==(e=U.value)||e.submit()},abort:e=>{var a;null==(a=U.value)||a.abort(e)}}),(a,t)=>{const s=b,F=m,D=$,H=V;return o(),l("div",j,[r(H,i({ref_key:"uploadRef",ref:U,action:e.uploadUrl,"http-request":e.httpRequest,headers:e.uploadHeaders,data:e.uploadData,accept:e.accept,limit:e.limit,multiple:e.multiple,drag:e.drag,"show-file-list":e.showFileList,"before-upload":R,"on-progress":E,"on-success":W,"on-error":A,"on-exceed":I,"on-remove":M,"file-list":C.value},a.$attrs),{default:u(()=>[p(a.$slots,"trigger",{},()=>[e.drag?(o(),l("div",T,[r(F,{class:"upload-icon"},{default:u(()=>[r(f(w))]),_:1}),t[0]||(t[0]=d("div",{class:"upload-text"},[y(" 将文件拖到此处，或"),d("em",null,"点击上传")],-1)),e.accept?(o(),l("div",z," 支持的文件格式："+g(e.accept),1)):n("",!0)])):(o(),c(s,{key:0,type:"primary",icon:f(k)},{default:u(()=>[y(g(e.triggerText),1)]),_:1},8,["icon"]))],!0)]),tip:u(()=>[p(a.$slots,"tip",{},()=>[e.tipText?(o(),l("div",B,[r(F,null,{default:u(()=>[r(f(h))]),_:1}),y(" "+g(e.tipText),1)])):n("",!0)],!0)]),file:u(({file:e})=>[p(a.$slots,"file",{file:e},()=>[d("div",S,[r(F,{class:"file-icon"},{default:u(()=>[r(f(x))]),_:1}),d("span",q,g(e.name),1),"uploading"===e.status?(o(),c(D,{key:0,percentage:e.percentage,"stroke-width":2},null,8,["percentage"])):n("",!0),"success"===e.status?(o(),c(F,{key:1,class:"status-icon success"},{default:u(()=>[r(f(_))]),_:1})):n("",!0),"fail"===e.status?(o(),c(F,{key:2,class:"status-icon error"},{default:u(()=>[r(f(v))]),_:1})):n("",!0)])],!0)]),_:3},16,["action","http-request","headers","data","accept","limit","multiple","drag","show-file-list","file-list"])])}}}),[["__scopeId","data-v-c562b838"]]);export{D};
