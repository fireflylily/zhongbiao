import{_ as e}from"./_plugin-vue_export-helper-BZqs1yfm.js";import"./DocumentPreview.vue_vue_type_style_index_0_scoped_e3ac2352_lang-aAcHzWd0.js";/* empty css                */import{d as a,r as t,x as s,c as l,o,g as r,a2 as i,w as u,C as p,e as d,B as c,a0 as n,H as m,F as f,be as x,t as g,bf as v,bg as _,k as y,bh as h,l as b,bi as k,bj as w,aA as j}from"./index.js";import{E as V}from"./index-IN6Zpv5z.js";import{E as $}from"./index-DzZX4pf4.js";const z={class:"document-uploader"},B={key:1,class:"upload-drag-area"},D={key:0,class:"upload-hint"},F={key:0,class:"upload-tip"},L={class:"upload-file-item"},S={class:"file-name"},T=e(a({__name:"DocumentUploader",props:{uploadUrl:{default:"/api/upload"},uploadHeaders:{},uploadData:{},httpRequest:{},accept:{default:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx"},limit:{default:10},maxSize:{default:50},multiple:{type:Boolean,default:!1},drag:{type:Boolean,default:!1},showFileList:{type:Boolean,default:!0},triggerText:{default:"选择文件"},tipText:{default:""},modelValue:{}},emits:["update:modelValue","success","error","exceed","remove"],setup(e,{expose:a,emit:T}){const q=e,C=T,H=t(),R=s({get:()=>q.modelValue||[],set:e=>C("update:modelValue",e)}),U=e=>{var a;if(q.maxSize&&e.size/1024/1024>q.maxSize)return j.error(`文件大小不能超过 ${q.maxSize}MB`),!1;if(q.accept){const t=q.accept.split(",").map(e=>e.trim()),s="."+(null==(a=e.name.split(".").pop())?void 0:a.toLowerCase());if(!t.some(e=>s===e.toLowerCase()))return j.error(`不支持的文件格式：${s}`),!1}return!0},E=(e,a,t)=>{},A=(e,a,t)=>{j.success("文件上传成功"),C("success",a,t),C("update:modelValue",t)},I=(e,a,t)=>{j.error("文件上传失败："+e.message),C("error",e,a,t)},M=(e,a)=>{j.warning(`最多只能上传 ${q.limit} 个文件`),C("exceed",e,a)},N=(e,a)=>{C("remove",e,a),C("update:modelValue",a)};return a({clearFiles:()=>{var e;null==(e=H.value)||e.clearFiles(),C("update:modelValue",[])},submit:()=>{var e;null==(e=H.value)||e.submit()},abort:e=>{var a;null==(a=H.value)||a.abort(e)}}),(a,t)=>{const s=b,j=m,T=$,q=V;return o(),l("div",z,[r(q,i({ref_key:"uploadRef",ref:H,action:e.uploadUrl,"http-request":e.httpRequest,headers:e.uploadHeaders,data:e.uploadData,accept:e.accept,limit:e.limit,multiple:e.multiple,drag:e.drag,"show-file-list":e.showFileList,"before-upload":U,"on-progress":E,"on-success":A,"on-error":I,"on-exceed":M,"on-remove":N,"file-list":R.value},a.$attrs),{default:u(()=>[p(a.$slots,"trigger",{},()=>[e.drag?(o(),l("div",B,[r(j,{class:"upload-icon"},{default:u(()=>[r(f(w))]),_:1}),t[0]||(t[0]=d("div",{class:"upload-text"},[y(" 将文件拖到此处，或"),d("em",null,"点击上传")],-1)),e.accept?(o(),l("div",D," 支持的文件格式："+g(e.accept),1)):n("",!0)])):(o(),c(s,{key:0,type:"primary",icon:f(k)},{default:u(()=>[y(g(e.triggerText),1)]),_:1},8,["icon"]))],!0)]),tip:u(()=>[p(a.$slots,"tip",{},()=>[e.tipText?(o(),l("div",F,[r(j,null,{default:u(()=>[r(f(h))]),_:1}),y(" "+g(e.tipText),1)])):n("",!0)],!0)]),file:u(({file:e})=>[p(a.$slots,"file",{file:e},()=>[d("div",L,[r(j,{class:"file-icon"},{default:u(()=>[r(f(x))]),_:1}),d("span",S,g(e.name),1),"uploading"===e.status?(o(),c(T,{key:0,percentage:e.percentage,"stroke-width":2},null,8,["percentage"])):n("",!0),"success"===e.status?(o(),c(j,{key:1,class:"status-icon success"},{default:u(()=>[r(f(v))]),_:1})):n("",!0),"fail"===e.status?(o(),c(j,{key:2,class:"status-icon error"},{default:u(()=>[r(f(_))]),_:1})):n("",!0)])],!0)]),_:3},16,["action","http-request","headers","data","accept","limit","multiple","drag","show-file-list","file-list"])])}}}),[["__scopeId","data-v-87e531bf"]]);export{T as D};
