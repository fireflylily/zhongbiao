import{dO as e,aL as a,cP as t,dX as l,bf as s,dj as n,cT as o,dY as r,bS as i,de as u,c1 as d,bU as v,df as c,cJ as b,bY as p,av as f,be as m,dZ as h,bg as g,aM as y,aO as w,aP as P,aQ as C,aV as $,cp as x,bq as R,d_ as N,d$ as E,aw as k,e0 as T,cq as S,aZ as B,aX as F,e1 as A,e2 as V,cF as j,cH as L,c0 as _,c5 as O,c2 as M,dF as W,a$ as z,cg as K,ct as X,dy as Y,dg as q,di as Z,e3 as H,bJ as I,e4 as J,b4 as U,aN as D,b5 as Q,bZ as G,dk as ee}from"./index.js";import{c as ae,r as te}from"./raf-CSK_qRxG.js";import{c as le}from"./strings-CAibmfqB.js";import{t as se}from"./toNumber-D1BjzJ77.js";const ne=(r,i)=>{const u=e({}),d=e([]),v=new WeakMap,c=()=>{d.value=((e,a,t)=>n(e.subTree).filter(e=>{var t;return o(e)&&(null==(t=e.type)?void 0:t.name)===a&&!!e.component}).map(e=>e.component.uid).map(e=>t[e]).filter(e=>!!e))(r,i,u.value)},b=e=>e.render(),p=a({setup:(e,{slots:a})=>()=>(c(),a.default?t(b,{render:a.default}):null)});return{children:d,addChild:e=>{u.value[e.uid]=e,l(u),s(()=>{const a=e.getVnode().el,t=a.parentNode;if(!v.has(t)){v.set(t,[]);const e=t.insertBefore.bind(t);t.insertBefore=(a,s)=>(v.get(t).some(e=>a===e||s===e)&&l(u),e(a,s))}v.get(t).push(a)})},removeChild:e=>{delete u.value[e.uid],l(u);const a=e.getVnode().el,t=a.parentNode,s=v.get(t),n=s.indexOf(a);s.splice(n,1)},ChildrenSorter:p}},oe="horizontal",re="vertical",ie={[oe]:"deltaX",[re]:"deltaY"},ue=Symbol("tabsRootContextKey"),de=i({tabs:{type:d(Array),default:()=>u([])},tabRefs:{type:d(Object),default:()=>u({})}}),ve="ElTabBar",ce=a({name:ve});var be=v(a({...ce,props:de,setup(e,{expose:a}){const t=e,l=c(ue);l||b(ve,"<el-tabs><el-tab-bar /></el-tabs>");const s=p("tabs"),n=f(),o=f(),r=()=>o.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(l.props.tabPosition)?"width":"height",n="width"===s?"x":"y",o="x"===n?"left":"top";return t.tabs.every(l=>{if(x(l.paneName))return!1;const n=t.tabRefs[l.paneName];if(!n)return!1;if(!l.active)return!0;e=n[`offset${le(o)}`],a=n[`client${le(s)}`];const r=window.getComputedStyle(n);return"width"===s&&(a-=Number.parseFloat(r.paddingLeft)+Number.parseFloat(r.paddingRight),e+=Number.parseFloat(r.paddingLeft)),!1}),{[s]:`${a}px`,transform:`translate${le(n)}(${e}px)`}})(),i=[];m(()=>t.tabs,async()=>{await R(),r(),i.forEach(e=>e.stop()),i.length=0,Object.values(t.tabRefs).forEach(e=>{i.push(h(e,r))})},{immediate:!0});const u=h(n,()=>r());return g(()=>{i.forEach(e=>e.stop()),i.length=0,u.stop()}),a({ref:n,update:r}),(e,a)=>(w(),y("div",{ref_key:"barRef",ref:n,class:C([$(s).e("active-bar"),$(s).is($(l).props.tabPosition)]),style:P(o.value)},null,6))}}),[["__file","tab-bar.vue"]]);const pe=i({panes:{type:d(Array),default:()=>u([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),fe="ElTabNav",me=a({name:fe,props:pe,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(a,{expose:t,emit:n}){const o=c(ue);o||b(fe,"<el-tabs><tab-nav /></el-tabs>");const i=p("tabs"),u=N(),d=E(),v=f(),g=f(),y=f(),w=f({}),P=f(),C=f(!1),$=f(0),x=f(!1),O=f(!0),M=e(),W=k(()=>["top","bottom"].includes(o.props.tabPosition)),z=k(()=>W.value?"width":"height"),K=k(()=>({transform:`translate${"width"===z.value?"X":"Y"}(-${$.value}px)`})),{width:X,height:Y}=T(v),{width:q,height:Z}=T(g,{width:0,height:0},{box:"border-box"}),H=k(()=>W.value?X.value:Y.value),I=k(()=>W.value?q.value:Z.value),{onWheel:J}=(({atEndEdge:e,atStartEdge:a,layout:t},l)=>{let s,n=0;const o=t=>t<0&&a.value||t>0&&e.value;return{hasReachedEdge:o,onWheel:e=>{ae(s);const a=e[ie[t.value]];o(n)&&o(n+a)||(n+=a,r()||e.preventDefault(),s=te(()=>{l(n),n=0}))}}})({atStartEdge:k(()=>$.value<=0),atEndEdge:k(()=>I.value-$.value<=H.value),layout:k(()=>W.value?"horizontal":"vertical")},e=>{var a,t,l;$.value=(a=$.value+e,t=0,void 0===(l=I.value-H.value)&&(l=t,t=void 0),void 0!==l&&(l=(l=se(l))==l?l:0),void 0!==t&&(t=(t=se(t))==t?t:0),function(e,a,t){return e==e&&(void 0!==t&&(e=e<=t?e:t),void 0!==a&&(e=e>=a?e:a)),e}(se(a),t,l))}),U=()=>{if(!v.value)return;const e=v.value[`offset${le(z.value)}`],a=$.value;if(!a)return;const t=a>e?a-e:0;$.value=t},D=()=>{if(!v.value||!g.value)return;const e=g.value[`offset${le(z.value)}`],a=v.value[`offset${le(z.value)}`],t=$.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;$.value=l},Q=async()=>{const e=g.value;if(!(C.value&&y.value&&v.value&&e))return;await R();const t=w.value[a.currentName];if(!t)return;const l=v.value,s=t.getBoundingClientRect(),n=l.getBoundingClientRect(),o=W.value?e.offsetWidth-n.width:e.offsetHeight-n.height,r=$.value;let i=r;W.value?(s.left<n.left&&(i=r-(n.left-s.left)),s.right>n.right&&(i=r+s.right-n.right)):(s.top<n.top&&(i=r-(n.top-s.top)),s.bottom>n.bottom&&(i=r+(s.bottom-n.bottom))),i=Math.max(i,0),$.value=Math.min(i,o)},G=()=>{var e;if(!g.value||!v.value)return;a.stretch&&(null==(e=P.value)||e.update());const t=g.value[`offset${le(z.value)}`],l=v.value[`offset${le(z.value)}`],s=$.value;l<t?(C.value=C.value||{},C.value.prev=s,C.value.next=s+l<t,t-s<l&&($.value=t-l)):(C.value=!1,s>0&&($.value=0))},ee=e=>{let a=0;switch(j(e)){case L.left:case L.up:a=-1;break;case L.right:case L.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),ne()},ne=()=>{O.value&&(x.value=!0)},oe=()=>x.value=!1;return m(u,e=>{"hidden"===e?O.value=!1:"visible"===e&&setTimeout(()=>O.value=!0,50)}),m(d,e=>{e?setTimeout(()=>O.value=!0,50):O.value=!1}),h(y,G),s(()=>setTimeout(()=>Q(),0)),S(()=>G()),t({scrollToActiveTab:Q,removeFocus:oe,focusActiveTab:async()=>{await R();const e=w.value[a.currentName];null==e||e.focus({preventScroll:!0})},tabListRef:g,tabBarRef:P,scheduleRender:()=>l(M)}),()=>{const e=C.value?[B("span",{class:[i.e("nav-prev"),i.is("disabled",!C.value.prev)],onClick:U},[B(F,null,{default:()=>[B(A,null,null)]})]),B("span",{class:[i.e("nav-next"),i.is("disabled",!C.value.next)],onClick:D},[B(F,null,{default:()=>[B(V,null,null)]})])]:null,t=a.panes.map((e,t)=>{var l,s,r,u;const d=e.uid,v=e.props.disabled,c=null!=(s=null!=(l=e.props.name)?l:e.index)?s:`${t}`,b=!v&&(e.isClosable||!1!==e.props.closable&&a.editable);e.index=`${t}`;const p=b?B(F,{class:"is-icon-close",onClick:a=>n("tabRemove",e,a)},{default:()=>[B(_,null,null)]}):null,f=(null==(u=(r=e.slots).label)?void 0:u.call(r))||e.props.label,m=!v&&e.active?0:-1;return B("div",{ref:e=>((e,a)=>{w.value[a]=e})(e,c),class:[i.e("item"),i.is(o.props.tabPosition),i.is("active",e.active),i.is("disabled",v),i.is("closable",b),i.is("focus",x.value)],id:`tab-${c}`,key:`tab-${d}`,"aria-controls":`pane-${c}`,role:"tab","aria-selected":e.active,tabindex:m,onFocus:()=>ne(),onBlur:()=>oe(),onClick:a=>{oe(),n("tabClick",e,c,a)},onKeydown:a=>{const t=j(a);!b||t!==L.delete&&t!==L.backspace||n("tabRemove",e,a)}},[f,p])});return M.value,B("div",{ref:y,class:[i.e("nav-wrap"),i.is("scrollable",!!C.value),i.is(o.props.tabPosition)]},[e,B("div",{class:i.e("nav-scroll"),ref:v},[a.panes.length>0?B("div",{class:[i.e("nav"),i.is(o.props.tabPosition),i.is("stretch",a.stretch&&["top","bottom"].includes(o.props.tabPosition))],ref:g,style:K.value,role:"tablist",onKeydown:ee,onWheel:J},[a.type?null:B(be,{ref:P,tabs:[...a.panes],tabRefs:w.value},null),t]):null])])}}}),he=i({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:d(Function),default:()=>!0},stretch:Boolean}),ge=e=>O(e)||M(e);var ye=a({name:"ElTabs",props:he,emits:{[X]:e=>ge(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>ge(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>ge(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const n=p("tabs"),o=k(()=>["left","right"].includes(e.tabPosition)),{children:r,addChild:i,removeChild:u,ChildrenSorter:d}=ne(Y(),"ElTabPane"),v=f(),c=f(null!=(s=e.modelValue)?s:"0"),b=async(t,l=!1)=>{var s,n,o,i;if(c.value!==t&&!x(t))try{let u;if(e.beforeLeave){const a=e.beforeLeave(t,c.value);u=a instanceof Promise?await a:a}else u=!0;if(!1!==u){const e=null==(s=r.value.find(e=>e.paneName===c.value))?void 0:s.isFocusInsidePane();c.value=t,l&&(a(X,t),a("tabChange",t)),null==(o=null==(n=v.value)?void 0:n.removeFocus)||o.call(n),e&&(null==(i=v.value)||i.focusActiveTab())}}catch(u){}},h=(e,t,l)=>{e.props.disabled||(a("tabClick",e,l),b(t,!0))},g=(e,t)=>{e.props.disabled||x(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},y=()=>{a("edit",void 0,"add"),a("tabAdd")},w=e=>{const a=j(e);[L.enter,L.numpadEnter].includes(a)&&y()},P=a=>{const t=a.el.firstChild,l=["bottom","right"].includes(e.tabPosition)?a.children[0].el:a.children[1].el;t!==l&&t.before(l)};return m(()=>e.modelValue,e=>b(e)),m(c,async()=>{var e;await R(),null==(e=v.value)||e.scrollToActiveTab()}),q(ue,{props:e,currentName:c,registerPane:i,unregisterPane:u,nav$:v}),l({currentName:c,get tabNavRef(){return W(v.value,["scheduleRender"])}}),()=>{const a=t["add-icon"],l=e.editable||e.addable?B("div",{class:[n.e("new-tab"),o.value&&n.e("new-tab-vertical")],tabindex:"0",onClick:y,onKeydown:w},[a?z(t,"add-icon"):B(F,{class:n.is("icon-plus")},{default:()=>[B(K,null,null)]})]):null,s=B("div",{class:[n.e("header"),o.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[B(d,null,{default:()=>B(me,{ref:v,currentName:c.value,editable:e.editable,type:e.type,panes:r.value,stretch:e.stretch,onTabClick:h,onTabRemove:g},null),$stable:!0}),l]),i=B("div",{class:n.e("content")},[z(t,"default")]);return B("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:"card"===e.type,[n.m("border-card")]:"border-card"===e.type}],onVnodeMounted:P,onVnodeUpdated:P},[i,s])}}});const we=i({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),Pe="ElTabPane",Ce=a({name:Pe});var $e=v(a({...Ce,props:we,setup(e){const a=e,t=Y(),l=Z(),s=c(ue);s||b(Pe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=p("tab-pane"),o=f(),r=f(),i=k(()=>{var e;return null!=(e=a.closable)?e:s.props.closable}),u=H(()=>{var e;return s.currentName.value===(null!=(e=a.name)?e:r.value)}),d=f(u.value),v=k(()=>{var e;return null!=(e=a.name)?e:r.value}),h=H(()=>!a.lazy||d.value||u.value);m(u,e=>{e&&(d.value=!0)});const P=I({uid:t.uid,getVnode:()=>t.vnode,slots:l,props:a,paneName:v,active:u,index:r,isClosable:i,isFocusInsidePane:()=>{var e;return null==(e=o.value)?void 0:e.contains(document.activeElement)}});return s.registerPane(P),g(()=>{s.unregisterPane(P)}),J(()=>{var e;l.label&&(null==(e=s.nav$.value)||e.scheduleRender())}),(e,a)=>$(h)?U((w(),y("div",{key:0,id:`pane-${$(v)}`,ref_key:"paneRef",ref:o,class:C($(n).b()),role:"tabpanel","aria-hidden":!$(u),"aria-labelledby":`tab-${$(v)}`},[z(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Q,$(u)]]):D("v-if",!0)}}),[["__file","tab-pane.vue"]]);const xe=G(ye,{TabPane:$e}),Re=ee($e);export{xe as E,Re as a};
