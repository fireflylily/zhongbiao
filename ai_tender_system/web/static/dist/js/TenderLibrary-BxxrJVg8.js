import{a9 as e,V as a,aE as l,aG as t,aH as o,aI as s,aX as d,a8 as u,b0 as r,W as i,b1 as n,t as c,a1 as p,u as v,b2 as m,e as f,aN as _,aP as b,b3 as y,b4 as h,w as g,O as V,N as x,v as w,ap as j,b5 as k,Q as C,U,d as z,A as E,R as S,P as T,S as $,T as I,h as M,_ as P}from"./index.js";/* empty css                             */import{E as D}from"./el-date-picker-panel-B7FzZJRO.js";/* empty css                     *//* empty css                                                                          *//* empty css                *//* empty css                    */import{a as F,E as q}from"./el-tab-pane-BUj78z1R.js";import{E as B}from"./el-pagination-Bqdl1fQI.js";/* empty css               */import{E as H,a as A}from"./el-select-CEg_eSdx.js";/* empty css                */import{am as L,bQ as N,an as O,ao as R,bH as Y,bD as K,bV as J,bC as Q,ap as W,au as X,ar as G,av as Z,az as ee,aA as ae,aB as le,ay as te,ax as oe,as as se,at as de,aq as ue,aI as re,aW as ie,aJ as ne,aC as ce,bu as pe,aX as ve,aw as me,bw as fe,aD as _e}from"./editor-DtHwR8yc.js";import{L as be}from"./Loading-CEvPa6xQ.js";import{E as ye}from"./Empty-CGgUzHTC.js";/* empty css                                                        *//* empty css                   *//* empty css                */import{E as he}from"./index-DYtF0M78.js";import{E as ge,a as Ve}from"./index-2X3NYXDr.js";import{E as xe}from"./index-BkIdrdH2.js";import{E as we}from"./index-DL_Xf39J.js";import{c as je}from"./clamp-DrSLy8WN.js";import{E as ke}from"./index-d1_Vt82Z.js";import{E as Ce,a as Ue}from"./index-CE7xJF-F.js";import"./advancedFormat-D4FWZjeo.js";import"./index-BCSTGAKU.js";import"./index-BuyGakHy.js";import"./index-CzeRX9sj.js";import"./toNumber-D7Yc6kTN.js";import"./raf-BZHcGSIv.js";import"./strings-BND1Cqg8.js";import"./_baseFindIndex-BTqrMG7V.js";import"./_baseIteratee-ByQT0QPi.js";import"./index-B1D0B4Gf.js";import"./flatMap-BdIFri63.js";import"./map-l56HRvAj.js";import"./_baseEach-Dq22CNAR.js";import"./cloneDeep-syPWYH98.js";const ze=a({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:u([Array,Object]),default:()=>d(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:u([Array,Object]),default:()=>[r,r,r]},voidIcon:{type:i,default:()=>n},disabledVoidIcon:{type:i,default:()=>r},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:u(Array),default:()=>d(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:s,clearable:Boolean,...o(["ariaLabel"])}),Ee={[t]:a=>e(a),[l]:a=>e(a)},Se=L({name:"ElRate"});const Te=g(c(L({...Se,props:ze,emits:Ee,setup(e,{expose:a,emit:o}){const s=e;function d(e,a){const l=e=>K(e),t=Object.keys(a).map(e=>+e).filter(t=>{const o=a[t];return!!l(o)&&o.excluded?e<t:e<=t}).sort((e,a)=>e-a),o=a[t[0]];return l(o)&&o.value||o}const u=N(y,void 0),r=N(h,void 0),i=p(),n=v("rate"),{inputId:c,isLabeledByFormItem:g}=m(s,{formItemContext:r}),V=O(s.modelValue),x=O(-1),w=O(!0),j=O([]),k=R(()=>j.value.map(e=>e.$el.clientWidth)),C=R(()=>[n.b(),n.m(i.value)]),U=R(()=>s.disabled||(null==u?void 0:u.disabled)),z=R(()=>n.cssVarBlock({"void-color":s.voidColor,"disabled-void-color":s.disabledVoidColor,"fill-color":$.value})),E=R(()=>{let e="";return s.showScore?e=s.scoreTemplate.replace(/\{\s*value\s*\}/,U.value?`${s.modelValue}`:`${V.value}`):s.showText&&(e=s.texts[Math.ceil(V.value)-1]),e}),S=R(()=>100*s.modelValue-100*Math.floor(s.modelValue)),T=R(()=>Y(s.colors)?{[s.lowThreshold]:s.colors[0],[s.highThreshold]:{value:s.colors[1],excluded:!0},[s.max]:s.colors[2]}:s.colors),$=R(()=>{const e=d(V.value,T.value);return K(e)?"":e}),I=R(()=>{let e="";return U.value?e=`${S.value}%`:s.allowHalf&&(e="50%"),{color:$.value,width:e}}),M=R(()=>{let e=Y(s.icons)?[...s.icons]:{...s.icons};return e=J(e),Y(e)?{[s.lowThreshold]:e[0],[s.highThreshold]:{value:e[1],excluded:!0},[s.max]:e[2]}:e}),P=R(()=>d(s.modelValue,M.value)),D=R(()=>U.value?Q(s.disabledVoidIcon)?s.disabledVoidIcon:J(s.disabledVoidIcon):Q(s.voidIcon)?s.voidIcon:J(s.voidIcon)),F=R(()=>d(V.value,M.value));function q(e){const a=U.value&&S.value>0&&e-1<s.modelValue&&e>s.modelValue,l=s.allowHalf&&w.value&&e-.5<=V.value&&e>V.value;return a||l}function B(e){s.clearable&&e===s.modelValue&&(e=0),o(l,e),s.modelValue!==e&&o(t,e)}function H(e){if(U.value)return;const a=_(e),d=s.allowHalf?.5:1;let u=V.value;switch(a){case b.up:case b.right:u+=d;break;case b.left:case b.down:u-=d}return u=je(u,0,s.max),u!==V.value?(e.stopPropagation(),e.preventDefault(),o(l,u),o(t,u),u):void 0}function A(e,a){U.value||(s.allowHalf&&a?(w.value=2*a.offsetX<=k.value[e-1],V.value=w.value?e-.5:e):V.value=e,x.value=e)}function L(){U.value||(s.allowHalf&&(w.value=s.modelValue!==Math.floor(s.modelValue)),V.value=s.modelValue,x.value=-1)}return W(()=>s.modelValue,e=>{V.value=e,w.value=s.modelValue!==Math.floor(s.modelValue)}),s.modelValue||o(l,0),a({setCurrentValue:A,resetCurrentValue:L}),(e,a)=>{var l;return G(),X("div",{id:te(c),class:le([te(C),te(n).is("disabled",te(U))]),role:"slider","aria-label":te(g)?void 0:e.ariaLabel||"rating","aria-labelledby":te(g)?null==(l=te(r))?void 0:l.labelId:void 0,"aria-valuenow":V.value,"aria-valuetext":te(E)||void 0,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0",style:ne(te(z)),onKeydown:H},[(G(!0),X(ee,null,ae(e.max,(e,a)=>(G(),X("span",{key:a,class:le(te(n).e("item")),onMousemove:a=>A(e,a),onMouseleave:L,onClick:a=>{return l=e,void(U.value||(s.allowHalf&&w.value?B(V.value):B(l)));var l}},[oe(te(f),{ref_for:!0,ref_key:"iconRefs",ref:j,class:le([te(n).e("icon"),{hover:x.value===e},te(n).is("active",e<=V.value),te(n).is("focus-visible",e===Math.ceil(V.value||1))])},{default:se(()=>[de((G(),ue(re(te(F)),null,null,512)),[[ie,!q(e)&&e<=V.value]]),de((G(),ue(re(te(D)),null,null,512)),[[ie,!q(e)&&e>V.value]]),de((G(),ue(re(te(D)),{class:le([te(n).em("decimal","box")])},null,8,["class"])),[[ie,q(e)]]),de(oe(te(f),{style:ne(te(I)),class:le([te(n).e("icon"),te(n).e("decimal")])},{default:se(()=>[(G(),ue(re(te(P))))]),_:2},1032,["style","class"]),[[ie,q(e)]])]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),e.showText||e.showScore?(G(),X("span",{key:0,class:le(te(n).e("text")),style:ne({color:e.textColor})},ce(te(E)),7)):Z("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}}),[["__file","rate.vue"]])),$e={class:"tender-library"},Ie={class:"stats-bar"},Me={class:"stat-content"},Pe={class:"stat-icon docs"},De={class:"stat-info"},Fe={class:"stat-value"},qe={class:"stat-content"},Be={class:"stat-icon excerpts"},He={class:"stat-info"},Ae={class:"stat-value"},Le={class:"stat-content"},Ne={class:"stat-icon won"},Oe={class:"stat-info"},Re={class:"stat-value"},Ye={class:"tab-toolbar"},Ke={key:3,class:"pagination-wrapper"},Je={class:"tab-toolbar"},Qe={key:2,class:"excerpts-list"},We={class:"excerpt-header"},Xe={class:"excerpt-title"},Ge={class:"chapter-title"},Ze={class:"excerpt-meta"},ea={class:"doc-name"},aa={class:"excerpt-content"},la={class:"excerpt-footer"},ta={class:"excerpt-tags"},oa={class:"excerpt-actions"},sa={key:3,class:"pagination-wrapper"},da={class:"excerpt-full-content"},ua={class:"content-box"},ra="/api/tender-library",ia=P(L({__name:"TenderLibrary",setup(e){const{success:a,error:l}=V(),t=x(),o=R(()=>t.currentCompanyId||1),s=pe({docCount:0,excerptCount:0,wonCount:0}),d=O("documents"),u=O(!1),r=O([]),i=O(""),n=O(""),c=O(1),p=O(10),v=O(0),m=O(!1),_=O([]),b=O(""),y=O(""),h=O(!1),g=O(1),P=O(10),L=O(0),N=O(!1),Y=O(),K=O(),J=pe({file:null,project_name:"",bid_result:"待定",bid_date:"",notes:""}),Q={project_name:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},le=O(!1),de=O(!1),re=pe({tender_doc_id:null,project_name:"",bid_result:"",bid_date:"",notes:""}),ie=O(!1),ne=O(!1),je=O("view"),ze=O(null),Ee=pe({excerpt_id:null,chapter_title:"",category:"",quality_score:0,tags:"",content:""}),Se=async()=>{u.value=!0;try{const e=new URLSearchParams({company_id:String(o.value),page:String(c.value),page_size:String(p.value)});i.value&&e.append("keyword",i.value),n.value&&e.append("bid_result",n.value);const a=await fetch(`${ra}/documents?${e}`),t=await a.json();t.success?(r.value=t.data||[],v.value=t.total||0,s.docCount=v.value,s.wonCount=r.value.filter(e=>"中标"===e.bid_result).length):l("加载失败",t.error||"未知错误")}catch(e){l("加载失败",e instanceof Error?e.message:"未知错误")}finally{u.value=!1}},ia=async()=>{m.value=!0;try{const e=new URLSearchParams({company_id:String(o.value),page:String(g.value),page_size:String(P.value)});b.value&&e.append("keyword",b.value),y.value&&e.append("category",y.value),h.value&&e.append("won_only","true");const a=await fetch(`${ra}/excerpts?${e}`),t=await a.json();t.success?(_.value=t.data||[],L.value=t.total||0,s.excerptCount=L.value):l("加载失败",t.error||"未知错误")}catch(e){l("加载失败",e instanceof Error?e.message:"未知错误")}finally{m.value=!1}},na=()=>{J.file=null,J.project_name="",J.bid_result="待定",J.bid_date="",J.notes="",Y.value&&Y.value.clearFiles(),N.value=!0},ca=(e,a)=>{e&&e.raw&&(J.file=e.raw)},pa=()=>{J.file=null},va=async()=>{if(J.file){le.value=!0;try{const e=new FormData;e.append("file",J.file),e.append("company_id",String(o.value)),e.append("project_name",J.project_name),e.append("bid_result",J.bid_result),J.bid_date&&e.append("bid_date",J.bid_date),J.notes&&e.append("notes",J.notes);const t=await fetch(`${ra}/documents/upload`,{method:"POST",body:e}),s=await t.json();s.success?(a("上传成功",s.message),N.value=!1,Se()):l("上传失败",s.error||"未知错误")}catch(e){l("上传失败",e instanceof Error?e.message:"未知错误")}finally{le.value=!1}}else l("请选择文件")},ma=async()=>{ie.value=!0;try{const e=await fetch(`${ra}/documents/${re.tender_doc_id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(re)}),t=await e.json();t.success?(a("保存成功"),de.value=!1,Se()):l("保存失败",t.error||"未知错误")}catch(e){l("保存失败",e instanceof Error?e.message:"未知错误")}finally{ie.value=!1}},fa=async()=>{ie.value=!0;try{const e=await fetch(`${ra}/excerpts/${Ee.excerpt_id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ee)}),t=await e.json();t.success?(a("保存成功"),ne.value=!1,ia()):l("保存失败",t.error||"未知错误")}catch(e){l("保存失败",e instanceof Error?e.message:"未知错误")}finally{ie.value=!1}},_a=e=>"中标"===e?"success":"未中标"===e?"danger":"info";return ve(()=>{Se(),ia()}),W(d,e=>{"documents"===e?Se():ia()}),W(o,()=>{Se(),ia()}),(e,t)=>{const o=f,V=he,x=C,O=A,R=H,W=z,pe=Ve,ve=xe,ba=ge,ya=B,ha=F,ga=we,Va=Te,xa=q,wa=ke,ja=T,ka=I,Ca=$,Ua=D,za=S,Ea=M,Sa=Ue,Ta=Ce;return G(),X("div",$e,[me("div",Ie,[oe(V,{class:"stat-card"},{default:se(()=>[me("div",Me,[me("div",Pe,[oe(o,{size:32,color:"#409eff"},{default:se(()=>[oe(te(w))]),_:1})]),me("div",De,[t[30]||(t[30]=me("div",{class:"stat-label"},"标书文档",-1)),me("div",Fe,ce(s.docCount),1)])])]),_:1}),oe(V,{class:"stat-card"},{default:se(()=>[me("div",qe,[me("div",Be,[oe(o,{size:32,color:"#67c23a"},{default:se(()=>[oe(te(j))]),_:1})]),me("div",He,[t[31]||(t[31]=me("div",{class:"stat-label"},"素材片段",-1)),me("div",Ae,ce(s.excerptCount),1)])])]),_:1}),oe(V,{class:"stat-card"},{default:se(()=>[me("div",Le,[me("div",Ne,[oe(o,{size:32,color:"#e6a23c"},{default:se(()=>[oe(te(k))]),_:1})]),me("div",Oe,[t[32]||(t[32]=me("div",{class:"stat-label"},"中标标书",-1)),me("div",Re,ce(s.wonCount),1)])])]),_:1})]),oe(xa,{modelValue:d.value,"onUpdate:modelValue":t[9]||(t[9]=e=>d.value=e),type:"border-card"},{default:se(()=>[oe(ha,{label:"标书文档",name:"documents"},{default:se(()=>[me("div",Ye,[oe(x,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),placeholder:"搜索文档名称...",clearable:"",style:{width:"200px"},onKeyup:fe(Se,["enter"])},{prefix:se(()=>[oe(o,null,{default:se(()=>[oe(te(U))]),_:1})]),_:1},8,["modelValue"]),oe(R,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),placeholder:"投标结果",clearable:"",style:{width:"120px"},onChange:Se},{default:se(()=>[oe(O,{label:"全部",value:""}),oe(O,{label:"中标",value:"中标"}),oe(O,{label:"未中标",value:"未中标"}),oe(O,{label:"待定",value:"待定"})]),_:1},8,["modelValue"]),oe(W,{type:"primary",onClick:na},{default:se(()=>[oe(o,null,{default:se(()=>[oe(te(E))]),_:1}),t[33]||(t[33]=_e(" 上传标书 ",-1))]),_:1})]),u.value?(G(),ue(te(be),{key:0,text:"加载中..."})):r.value.length?(G(),ue(ba,{key:2,data:r.value,stripe:""},{default:se(()=>[oe(pe,{prop:"doc_name",label:"文档名称","min-width":"200","show-overflow-tooltip":""}),oe(pe,{prop:"project_name",label:"项目名称",width:"180","show-overflow-tooltip":""}),oe(pe,{prop:"bid_result",label:"投标结果",width:"100",align:"center"},{default:se(({row:e})=>[oe(ve,{type:_a(e.bid_result)},{default:se(()=>[_e(ce(e.bid_result||"待定"),1)]),_:2},1032,["type"])]),_:1}),oe(pe,{prop:"excerpt_count",label:"片段数",width:"80",align:"center"}),oe(pe,{prop:"bid_date",label:"投标日期",width:"120"}),oe(pe,{prop:"created_at",label:"上传时间",width:"160"}),oe(pe,{label:"操作",width:"200",fixed:"right"},{default:se(({row:e})=>[oe(W,{link:"",type:"primary",size:"small",onClick:a=>{return l=e,void window.open(`/api/documents/${l.doc_id}/preview`,"_blank");var l}},{default:se(()=>[...t[34]||(t[34]=[_e(" 查看 ",-1)])]),_:1},8,["onClick"]),oe(W,{link:"",type:"success",size:"small",onClick:t=>(async e=>{if(confirm(`确定要从 "${e.doc_name}" 提取素材片段吗？`))try{const t=await fetch(`${ra}/documents/${e.tender_doc_id}/extract`,{method:"POST"}),o=await t.json();o.success?(a("提取完成",`成功提取 ${o.extracted_count||0} 个片段`),Se(),ia()):l("提取失败",o.error||"未知错误")}catch(t){l("提取失败",t instanceof Error?t.message:"未知错误")}})(e)},{default:se(()=>[...t[35]||(t[35]=[_e(" 提取 ",-1)])]),_:1},8,["onClick"]),oe(W,{link:"",type:"warning",size:"small",onClick:a=>{return l=e,re.tender_doc_id=l.tender_doc_id,re.project_name=l.project_name||"",re.bid_result=l.bid_result||"待定",re.bid_date=l.bid_date||"",re.notes=l.notes||"",void(de.value=!0);var l}},{default:se(()=>[...t[36]||(t[36]=[_e(" 编辑 ",-1)])]),_:1},8,["onClick"]),oe(W,{link:"",type:"danger",size:"small",onClick:t=>(async e=>{if(confirm(`确定要删除 "${e.doc_name}" 吗？关联的素材片段也会被删除。`))try{const t=await fetch(`${ra}/documents/${e.tender_doc_id}`,{method:"DELETE"}),o=await t.json();o.success?(a("删除成功"),Se(),ia()):l("删除失败",o.error||"未知错误")}catch(t){l("删除失败",t instanceof Error?t.message:"未知错误")}})(e)},{default:se(()=>[...t[37]||(t[37]=[_e(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])):(G(),ue(te(ye),{key:1,type:"no-data",description:"暂无标书文档"})),v.value>p.value?(G(),X("div",Ke,[oe(ya,{"current-page":c.value,"onUpdate:currentPage":t[2]||(t[2]=e=>c.value=e),"page-size":p.value,"onUpdate:pageSize":t[3]||(t[3]=e=>p.value=e),total:v.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onSizeChange:Se,onCurrentChange:Se},null,8,["current-page","page-size","total"])])):Z("",!0)]),_:1}),oe(ha,{label:"素材片段",name:"excerpts"},{default:se(()=>[me("div",Je,[oe(x,{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=e=>b.value=e),placeholder:"搜索素材内容...",clearable:"",style:{width:"250px"},onKeyup:fe(ia,["enter"])},{prefix:se(()=>[oe(o,null,{default:se(()=>[oe(te(U))]),_:1})]),_:1},8,["modelValue"]),oe(R,{modelValue:y.value,"onUpdate:modelValue":t[5]||(t[5]=e=>y.value=e),placeholder:"分类",clearable:"",style:{width:"120px"},onChange:ia},{default:se(()=>[oe(O,{label:"全部",value:""}),oe(O,{label:"技术方案",value:"技术方案"}),oe(O,{label:"项目管理",value:"项目管理"}),oe(O,{label:"售后服务",value:"售后服务"}),oe(O,{label:"企业资质",value:"企业资质"}),oe(O,{label:"团队介绍",value:"团队介绍"})]),_:1},8,["modelValue"]),oe(ga,{modelValue:h.value,"onUpdate:modelValue":t[6]||(t[6]=e=>h.value=e),onChange:ia},{default:se(()=>[...t[38]||(t[38]=[_e("仅中标",-1)])]),_:1},8,["modelValue"])]),m.value?(G(),ue(te(be),{key:0,text:"加载中..."})):_.value.length?(G(),X("div",Qe,[(G(!0),X(ee,null,ae(_.value,e=>(G(),ue(V,{key:e.excerpt_id,class:"excerpt-card",shadow:"hover"},{header:se(()=>{return[me("div",We,[me("div",Xe,[me("span",Ge,ce(e.chapter_title||"无标题"),1),oe(ve,{size:"small",type:(a=e.category,{"技术方案":"primary","项目管理":"success","售后服务":"warning","企业资质":"info","团队介绍":""}[a]||"info")},{default:se(()=>[_e(ce(e.category||"未分类"),1)]),_:2},1032,["type"]),"中标"===e.bid_result?(G(),ue(ve,{key:0,size:"small",type:"success"},{default:se(()=>[...t[39]||(t[39]=[_e(" 中标 ",-1)])]),_:1})):Z("",!0)]),me("div",Ze,[me("span",ea,ce(e.doc_name),1),oe(Va,{modelValue:e.quality_score,"onUpdate:modelValue":a=>e.quality_score=a,disabled:"",max:5,size:"small",colors:["#99A9BF","#F7BA2A","#FF9900"]},null,8,["modelValue","onUpdate:modelValue"])])])];var a}),default:se(()=>{var o,s;return[me("div",aa,ce(null==(o=e.content)?void 0:o.substring(0,300))+ce((null==(s=e.content)?void 0:s.length)>300?"...":""),1),me("div",la,[me("div",ta,[(G(!0),X(ee,null,ae((e.tags||"").split(",").filter(Boolean).slice(0,3),e=>(G(),ue(ve,{key:e,size:"small",type:"info"},{default:se(()=>[_e(ce(e),1)]),_:2},1024))),128))]),me("div",oa,[oe(W,{link:"",type:"primary",size:"small",onClick:a=>(e=>{ze.value=e,je.value="view",ne.value=!0})(e)},{default:se(()=>[...t[40]||(t[40]=[_e(" 查看全文 ",-1)])]),_:1},8,["onClick"]),oe(W,{link:"",type:"primary",size:"small",onClick:t=>(async e=>{try{await navigator.clipboard.writeText(e.content||""),a("已复制到剪贴板")}catch(t){l("复制失败")}})(e)},{default:se(()=>[...t[41]||(t[41]=[_e(" 复制 ",-1)])]),_:1},8,["onClick"]),oe(W,{link:"",type:"warning",size:"small",onClick:a=>(e=>{ze.value=e,Ee.excerpt_id=e.excerpt_id,Ee.chapter_title=e.chapter_title||"",Ee.category=e.category||"",Ee.quality_score=e.quality_score||0,Ee.tags=e.tags||"",Ee.content=e.content||"",je.value="edit",ne.value=!0})(e)},{default:se(()=>[...t[42]||(t[42]=[_e(" 编辑 ",-1)])]),_:1},8,["onClick"])])])]}),_:2},1024))),128))])):(G(),ue(te(ye),{key:1,type:"no-data",description:"暂无素材片段"})),L.value>P.value?(G(),X("div",sa,[oe(ya,{"current-page":g.value,"onUpdate:currentPage":t[7]||(t[7]=e=>g.value=e),"page-size":P.value,"onUpdate:pageSize":t[8]||(t[8]=e=>P.value=e),total:L.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onSizeChange:ia,onCurrentChange:ia},null,8,["current-page","page-size","total"])])):Z("",!0)]),_:1})]),_:1},8,["modelValue"]),oe(Ea,{modelValue:N.value,"onUpdate:modelValue":t[15]||(t[15]=e=>N.value=e),title:"上传标书文档",width:"600px"},{footer:se(()=>[oe(W,{onClick:t[14]||(t[14]=e=>N.value=!1)},{default:se(()=>[...t[48]||(t[48]=[_e("取消",-1)])]),_:1}),oe(W,{type:"primary",onClick:va,loading:le.value},{default:se(()=>[...t[49]||(t[49]=[_e(" 上传 ",-1)])]),_:1},8,["loading"])]),default:se(()=>[oe(za,{model:J,rules:Q,ref_key:"uploadFormRef",ref:K,"label-width":"100px"},{default:se(()=>[oe(ja,{label:"文档文件",prop:"file"},{default:se(()=>[oe(wa,{ref_key:"uploadRef",ref:Y,"auto-upload":!1,limit:1,"on-change":ca,"on-remove":pa,accept:".docx,.doc,.pdf"},{trigger:se(()=>[oe(W,{type:"primary"},{default:se(()=>[...t[43]||(t[43]=[_e("选择文件",-1)])]),_:1})]),tip:se(()=>[...t[44]||(t[44]=[me("div",{class:"el-upload__tip"},"支持 .docx, .doc, .pdf 格式",-1)])]),_:1},512)]),_:1}),oe(ja,{label:"项目名称",prop:"project_name"},{default:se(()=>[oe(x,{modelValue:J.project_name,"onUpdate:modelValue":t[10]||(t[10]=e=>J.project_name=e),placeholder:"投标项目名称"},null,8,["modelValue"])]),_:1}),oe(ja,{label:"投标结果",prop:"bid_result"},{default:se(()=>[oe(Ca,{modelValue:J.bid_result,"onUpdate:modelValue":t[11]||(t[11]=e=>J.bid_result=e)},{default:se(()=>[oe(ka,{label:"中标"},{default:se(()=>[...t[45]||(t[45]=[_e("中标",-1)])]),_:1}),oe(ka,{label:"未中标"},{default:se(()=>[...t[46]||(t[46]=[_e("未中标",-1)])]),_:1}),oe(ka,{label:"待定"},{default:se(()=>[...t[47]||(t[47]=[_e("待定",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),oe(ja,{label:"投标日期",prop:"bid_date"},{default:se(()=>[oe(Ua,{modelValue:J.bid_date,"onUpdate:modelValue":t[12]||(t[12]=e=>J.bid_date=e),type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),oe(ja,{label:"备注",prop:"notes"},{default:se(()=>[oe(x,{modelValue:J.notes,"onUpdate:modelValue":t[13]||(t[13]=e=>J.notes=e),type:"textarea",rows:2,placeholder:"可选备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),oe(Ea,{modelValue:de.value,"onUpdate:modelValue":t[21]||(t[21]=e=>de.value=e),title:"编辑标书信息",width:"500px"},{footer:se(()=>[oe(W,{onClick:t[20]||(t[20]=e=>de.value=!1)},{default:se(()=>[...t[53]||(t[53]=[_e("取消",-1)])]),_:1}),oe(W,{type:"primary",onClick:ma,loading:ie.value},{default:se(()=>[...t[54]||(t[54]=[_e(" 保存 ",-1)])]),_:1},8,["loading"])]),default:se(()=>[oe(za,{model:re,"label-width":"100px"},{default:se(()=>[oe(ja,{label:"项目名称"},{default:se(()=>[oe(x,{modelValue:re.project_name,"onUpdate:modelValue":t[16]||(t[16]=e=>re.project_name=e)},null,8,["modelValue"])]),_:1}),oe(ja,{label:"投标结果"},{default:se(()=>[oe(Ca,{modelValue:re.bid_result,"onUpdate:modelValue":t[17]||(t[17]=e=>re.bid_result=e)},{default:se(()=>[oe(ka,{label:"中标"},{default:se(()=>[...t[50]||(t[50]=[_e("中标",-1)])]),_:1}),oe(ka,{label:"未中标"},{default:se(()=>[...t[51]||(t[51]=[_e("未中标",-1)])]),_:1}),oe(ka,{label:"待定"},{default:se(()=>[...t[52]||(t[52]=[_e("待定",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),oe(ja,{label:"投标日期"},{default:se(()=>[oe(Ua,{modelValue:re.bid_date,"onUpdate:modelValue":t[18]||(t[18]=e=>re.bid_date=e),type:"date","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),oe(ja,{label:"备注"},{default:se(()=>[oe(x,{modelValue:re.notes,"onUpdate:modelValue":t[19]||(t[19]=e=>re.notes=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),oe(Ea,{modelValue:ne.value,"onUpdate:modelValue":t[29]||(t[29]=e=>ne.value=e),title:"view"===je.value?"素材详情":"编辑素材",width:"700px"},{footer:se(()=>[oe(W,{onClick:t[27]||(t[27]=e=>ne.value=!1)},{default:se(()=>[...t[56]||(t[56]=[_e("关闭",-1)])]),_:1}),"view"===je.value?(G(),ue(W,{key:0,type:"primary",onClick:t[28]||(t[28]=e=>je.value="edit")},{default:se(()=>[...t[57]||(t[57]=[_e(" 编辑 ",-1)])]),_:1})):(G(),ue(W,{key:1,type:"primary",onClick:fa,loading:ie.value},{default:se(()=>[...t[58]||(t[58]=[_e(" 保存 ",-1)])]),_:1},8,["loading"]))]),default:se(()=>{var e;return["view"===je.value?(G(),X(ee,{key:0},[oe(Ta,{column:2,border:""},{default:se(()=>[oe(Sa,{label:"章节标题",span:2},{default:se(()=>{var e;return[_e(ce(null==(e=ze.value)?void 0:e.chapter_title),1)]}),_:1}),oe(Sa,{label:"分类"},{default:se(()=>{var e;return[_e(ce((null==(e=ze.value)?void 0:e.category)||"未分类"),1)]}),_:1}),oe(Sa,{label:"质量评分"},{default:se(()=>{var e;return[oe(Va,{"model-value":null==(e=ze.value)?void 0:e.quality_score,disabled:"",max:5},null,8,["model-value"])]}),_:1}),oe(Sa,{label:"来源文档",span:2},{default:se(()=>{var e;return[_e(ce(null==(e=ze.value)?void 0:e.doc_name),1)]}),_:1}),oe(Sa,{label:"投标结果"},{default:se(()=>{var e;return[oe(ve,{type:_a(null==(e=ze.value)?void 0:e.bid_result)},{default:se(()=>{var e;return[_e(ce((null==(e=ze.value)?void 0:e.bid_result)||"待定"),1)]}),_:1},8,["type"])]}),_:1}),oe(Sa,{label:"标签"},{default:se(()=>{var e;return[_e(ce((null==(e=ze.value)?void 0:e.tags)||"无"),1)]}),_:1})]),_:1}),me("div",da,[t[55]||(t[55]=me("h4",null,"素材内容",-1)),me("div",ua,ce(null==(e=ze.value)?void 0:e.content),1)])],64)):(G(),ue(za,{key:1,model:Ee,"label-width":"100px"},{default:se(()=>[oe(ja,{label:"章节标题"},{default:se(()=>[oe(x,{modelValue:Ee.chapter_title,"onUpdate:modelValue":t[22]||(t[22]=e=>Ee.chapter_title=e)},null,8,["modelValue"])]),_:1}),oe(ja,{label:"分类"},{default:se(()=>[oe(R,{modelValue:Ee.category,"onUpdate:modelValue":t[23]||(t[23]=e=>Ee.category=e),style:{width:"100%"}},{default:se(()=>[oe(O,{label:"技术方案",value:"技术方案"}),oe(O,{label:"项目管理",value:"项目管理"}),oe(O,{label:"售后服务",value:"售后服务"}),oe(O,{label:"企业资质",value:"企业资质"}),oe(O,{label:"团队介绍",value:"团队介绍"})]),_:1},8,["modelValue"])]),_:1}),oe(ja,{label:"质量评分"},{default:se(()=>[oe(Va,{modelValue:Ee.quality_score,"onUpdate:modelValue":t[24]||(t[24]=e=>Ee.quality_score=e),max:5},null,8,["modelValue"])]),_:1}),oe(ja,{label:"标签"},{default:se(()=>[oe(x,{modelValue:Ee.tags,"onUpdate:modelValue":t[25]||(t[25]=e=>Ee.tags=e),placeholder:"逗号分隔的标签"},null,8,["modelValue"])]),_:1}),oe(ja,{label:"内容"},{default:se(()=>[oe(x,{modelValue:Ee.content,"onUpdate:modelValue":t[26]||(t[26]=e=>Ee.content=e),type:"textarea",rows:10},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]))]}),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-6aa88a14"]]);export{ia as default};
