import{e,E as a,n as l,R as t,P as o,Q as s,q as n,g as r,ae as i,D as u,F as d,y as c,M as p,_ as m}from"./index.js";/* empty css                                                                          *//* empty css                             *//* empty css                *//* empty css                    *//* empty css                     */import{E as v}from"./el-text-CIVxKMll.js";/* empty css               *//* empty css                */import{E as _,a as f}from"./el-select-C9o-AACO.js";/* empty css                *//* empty css                                                                        */import{ap as y,am as j,an as h,aW as w,av as g,ar as b,at as F,aq as x,aJ as I,as as V,aR as k,aU as E,aV as D,ax as P,au as S,aQ as C}from"./editor-CZjPbfOV.js";import{D as R}from"./DocumentUploader-Uog00Y5M.js";import{D as U}from"./DocumentPreview-DZsr1SMJ.js";import{R as q}from"./RichTextEditor-B4vfat1z.js";import{u as N,H as T,b as H,E as $,S as W,a as z,d as J}from"./helpers-BbPuAodW.js";import{t as L}from"./tender-ZYcn_VXM.js";import{c as O}from"./company-DX6fQVXW.js";import{u as M}from"./project-BV8XA5yV.js";import{u as B}from"./useProjectDocuments-BF5if9C5.js";import{a as A,E as Q}from"./index-B_1bNbFG.js";import{E as G}from"./index-DgL8sT1k.js";import{E as Y,a as Z}from"./index-CMv7nVh-.js";import{E as K}from"./strings-DJcURSVo.js";import{E as X,a as ee}from"./index-BD95_Z3Y.js";import{E as ae}from"./index-HBf7YtLN.js";import"./index-DXP9jmAU.js";import"./toNumber-CU4OoPoC.js";import"./_baseIteratee--ghgRM4z.js";import"./imageCompressor-CTkRt5bg.js";import"./index-B-MyBJlZ.js";import"./index-CjQ1irBn.js";import"./cloneDeep-syPWYH98.js";/* empty css                   */import"./directive-Bx4Bncqq.js";import"./index-B_RVpXRM.js";import"./index-DWyHgBtB.js";import"./index-qDoqLyIC.js";import"./index-D5O2TROd.js";import"./flatMap-MHcQtZLg.js";import"./map-TpIQimNd.js";import"./_baseEach-BmaHGmee.js";import"./index-DzFGJ3Ky.js";import"./raf-B6jWGkGX.js";const le={async processBusinessResponse(a){const l=new FormData;return l.append("company_id",a.company_id.toString()),l.append("project_name",a.project_name),a.tender_no&&l.append("tender_no",a.tender_no),a.date_text&&l.append("date_text",a.date_text),l.append("hitl_file_path",a.hitl_file_path),l.append("use_mcp",!1!==a.use_mcp?"true":"false"),e.post("/process-business-response",l,{headers:{"Content-Type":"multipart/form-data"}})}},te={class:"business-response"},oe={class:"upload-item"},se={class:"upload-item"},ne={class:"generation-controls"},re={class:"card-header"},ie={class:"header-actions"},ue={class:"result-content"},de={key:0,class:"qualifications-details-section"},ce={style:{margin:"8px 0 0 20px",padding:"0"}},pe={class:"file-info-section"},me=m(y({__name:"Response",setup(e){M();const{projects:m,selectedProject:y,loadProjects:me,handleProjectChange:ve,restoreProjectFromStore:_e}=B(),{useHitlFile:fe,hitlFileInfo:ye,syncing:je,synced:he,loadFromHITL:we,cancelHitlFile:ge,syncToHitl:be}=N({onFileLoaded:()=>{ke.value.templateFiles=[]}}),{useHitlFile:Fe,hitlFileInfo:xe,loadFromHITL:Ie,cancelHitlFile:Ve}=N({onFileLoaded:()=>{ke.value.tenderFiles=[]}}),ke=j({projectId:null,companyId:null,projectName:"æ–°é¡¹ç›®",projectNumber:`PRJ-${Date.now()}`,tenderFiles:[],templateFiles:[]}),Ee=j([]);h(()=>Ee.value.find(e=>e.company_id===ke.value.companyId));const De=h(()=>ke.value.projectId&&(ke.value.templateFiles.length>0||fe.value)),Pe=j(!1),Se=j(0),Ce=j(""),Re=j(null),Ue=j(!1),qe=j(null),Ne=j(""),Te=j(!1),He=j(!1),$e=j([]),We=async e=>{var l;const{file:t,onSuccess:o,onError:s}=e;try{if(!ke.value.projectId){if(!ke.value.companyId)throw new Error("è¯·å…ˆé€‰æ‹©å…¬å¸");a.info("æ­£åœ¨åˆ›å»ºæ–°é¡¹ç›®...");const e=await L.createProject({company_id:ke.value.companyId,project_name:ke.value.projectName||"æ–°é¡¹ç›®",project_number:ke.value.projectNumber||`PRJ-${Date.now()}`});ke.value.projectId=e.project_id,await me(),a.success("æ–°é¡¹ç›®å·²åˆ›å»º"),await Le()}const e=null==(l=y.value)?void 0:l.company_id;if(!e)throw new Error("é¡¹ç›®æ²¡æœ‰å…³è”å…¬å¸");const s=new FormData;s.append("file",t),s.append("company_id",e.toString()),s.append("project_id",ke.value.projectId.toString());const n=await L.parseDocumentStructure(s);if(!n.success)throw new Error(n.message||"ä¸Šä¼ å¤±è´¥");o(n.data),a.success("å•†åŠ¡åº”ç­”æ¨¡æ¿ä¸Šä¼ æˆåŠŸ")}catch(n){s(n),a.error(n.message||"æ¨¡æ¿ä¸Šä¼ å¤±è´¥")}},ze=async e=>{var l;const{file:t,onSuccess:o,onError:s}=e;try{if(!ke.value.projectId){if(!ke.value.companyId)throw new Error("è¯·å…ˆé€‰æ‹©å…¬å¸");a.info("æ­£åœ¨åˆ›å»ºæ–°é¡¹ç›®...");const e=await L.createProject({company_id:ke.value.companyId,project_name:ke.value.projectName||"æ–°é¡¹ç›®",project_number:ke.value.projectNumber||`PRJ-${Date.now()}`});ke.value.projectId=e.project_id,await me(),a.success("æ–°é¡¹ç›®å·²åˆ›å»º"),await Le()}const e=null==(l=y.value)?void 0:l.company_id;if(!e)throw new Error("é¡¹ç›®æ²¡æœ‰å…³è”å…¬å¸");const s=new FormData;s.append("file",t),s.append("company_id",e.toString()),s.append("project_id",ke.value.projectId.toString());const n=await L.parseDocumentStructure(s);if(!n.success)throw new Error(n.message||"ä¸Šä¼ å¤±è´¥");o(n.data),a.success("æ‹›æ ‡æ–‡æ¡£ä¸Šä¼ æˆåŠŸ")}catch(n){s(n),a.error(n.message||"æ‹›æ ‡æ–‡æ¡£ä¸Šä¼ å¤±è´¥")}},Je=async()=>{try{const e=await O.getCompanies();Ee.value=e.data||[]}catch(e){a.error("åŠ è½½å…¬å¸åˆ—è¡¨å¤±è´¥")}},Le=async()=>{await ve(ke.value.projectId,{onClear:()=>{Re.value=null,Ce.value="",ke.value.tenderFiles=[],ke.value.templateFiles=[],Ue.value=!1,Ne.value="",$e.value=[],fe.value&&ge(),Fe.value&&Ve()},onDocumentsLoaded:e=>{e.tenderFile&&Ie(e,"tenderFile"),e.templateFile&&we(e,"templateFile"),e.businessResponseFile&&(Re.value=e.businessResponseFile,Ue.value=!1,a.info('æ£€æµ‹åˆ°å†å²å•†åŠ¡åº”ç­”æ–‡ä»¶ï¼Œç‚¹å‡»"åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€"å¯ç¼–è¾‘'))}}),ke.value.projectId||(ke.value.projectNumber=`PRJ-${Date.now()}`)},Oe=()=>{a.success("æ‹›æ ‡æ–‡æ¡£ä¸Šä¼ æˆåŠŸ")},Me=()=>{a.success("å•†åŠ¡åº”ç­”æ¨¡æ¿ä¸Šä¼ æˆåŠŸ")},Be=async()=>{var e;if(ke.value.projectId){Pe.value=!0,Se.value=0,Ce.value="",Re.value=null,Ue.value=!0,Ne.value='<h1>ğŸ“„ å•†åŠ¡åº”ç­”æ–‡æ¡£</h1><p style="color: #909399;">AIæ­£åœ¨ç”Ÿæˆå†…å®¹ï¼Œè¯·ç¨å€™...</p>',setTimeout(()=>{var e;null==(e=document.querySelector(".editor-section"))||e.scrollIntoView({behavior:"smooth",block:"start"})},100);try{Ce.value="æ­£åœ¨åŠ è½½é¡¹ç›®ä¿¡æ¯...\n";const l=(await L.getProject(ke.value.projectId)).data,t=null==(e=l.step1_data)?void 0:e.response_file_path;if(!t)throw new Error("æœªæ‰¾åˆ°å•†åŠ¡åº”ç­”æ¨¡æ¿æ–‡ä»¶è·¯å¾„ï¼Œè¯·å…ˆåœ¨æ ‡ä¹¦ç®¡ç†ä¸­ä¸Šä¼ æ¨¡æ¿");Ce.value+="æ­£åœ¨å¤„ç†å•†åŠ¡åº”ç­”æ–‡æ¡£...\n",Se.value=30;const o=await le.processBusinessResponse({company_id:l.company_id,project_name:l.project_name,tender_no:l.project_number||"",date_text:l.bidding_time||"",hitl_file_path:t,use_mcp:!0});Se.value=80,Ce.value+="å¤„ç†å®Œæˆï¼Œæ­£åœ¨ç”Ÿæˆç»“æœ...\n";const s=o.data?o.data:o;if(!s.success)throw new Error(s.message||s.error||"å¤„ç†å¤±è´¥");Se.value=100,Ce.value+=s.message+"\n",Re.value={success:!0,outputFile:s.output_file,downloadUrl:s.download_url,stats:s.stats||{},message:s.message},await Ae(s.output_file),a.success("å•†åŠ¡åº”ç­”ç”Ÿæˆå®Œæˆï¼å¯ä»¥ç¼–è¾‘äº†"),s.output_file&&ke.value.projectId&&await be(ke.value.projectId,s.output_file,"business_response")}catch(l){Ce.value+=`\nâŒ é”™è¯¯: ${l.message}\n`,qe.value&&qe.value.appendContent(`<p style="color: red;">âŒ é”™è¯¯: ${l.message}</p>`),a.error(l.message||"ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•")}finally{Pe.value=!1,Se.value<100&&(Se.value=0)}}else a.warning("è¯·å…ˆé€‰æ‹©é¡¹ç›®")},Ae=async e=>{try{Ne.value='<p style="color: #409EFF;">æ­£åœ¨è½¬æ¢Wordæ–‡æ¡£ä¸ºå¯ç¼–è¾‘æ ¼å¼...</p>';const a=await fetch("/api/editor/convert-word-to-html",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:e})}),l=await a.json();if(!l.success||!l.html_content)throw new Error(l.error||"è½¬æ¢å¤±è´¥");Ne.value=l.html_content,qe.value&&qe.value.setContent(l.html_content)}catch(l){Ne.value=`\n      <h1>ğŸ“„ å•†åŠ¡åº”ç­”æ–‡æ¡£</h1>\n      <div style="padding: 20px; background: #FFF3E0; border-left: 4px solid #FF9800; margin: 16px 0;">\n        <p><strong>âš ï¸ æç¤ºï¼š</strong>Wordæ–‡æ¡£è½¬æ¢å¤±è´¥</p>\n        <p>åŸå› ï¼š${l.message}</p>\n        <p>æ‚¨å¯ä»¥ï¼š</p>\n        <ul>\n          <li>ç›´æ¥åœ¨æ­¤ç¼–è¾‘å™¨ä¸­è¾“å…¥å†…å®¹</li>\n          <li>æˆ–ç‚¹å‡»ä¸‹æ–¹"æŸ¥çœ‹åŸå§‹ç”Ÿæˆç»“æœ"ä¸‹è½½Wordæ–‡æ¡£æŸ¥çœ‹</li>\n        </ul>\n      </div>\n      <p>å¼€å§‹ç¼–è¾‘æ‚¨çš„å†…å®¹...</p>\n    `,a.warning("Wordè½¬æ¢HTMLå¤±è´¥ï¼Œè¯·ä½¿ç”¨ä¸‹è½½åŠŸèƒ½æˆ–æ‰‹åŠ¨è¾“å…¥")}},Qe=async e=>{var l,t;if(ke.value.projectId){Te.value=!0;try{const a=await fetch("/api/editor/save-html-to-word",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html_content:e,project_id:ke.value.projectId,document_type:"business_response",original_file:null==(l=Re.value)?void 0:l.outputFile})}),o=await a.json();if(!o.success)throw new Error(o.error||"ä¿å­˜å¤±è´¥");Re.value={success:!0,outputFile:o.output_file,downloadUrl:o.download_url,stats:(null==(t=Re.value)?void 0:t.stats)||{},message:"æ–‡æ¡£å·²ä¿å­˜"},o.output_file&&await be(ke.value.projectId,o.output_file,"business_response")}catch(o){throw o}finally{Te.value=!1}}else a.error("é¡¹ç›®IDæ— æ•ˆ")},Ge=()=>{Re.value?Re.value.downloadUrl?He.value=!0:a.warning("æ–‡æ¡£åœ°å€æ— æ•ˆ"):a.warning("æš‚æ— æ–‡æ¡£å¯é¢„è§ˆ")},Ye=async()=>{var e;if(Re.value)try{const l=Re.value.downloadUrl,t=`å•†åŠ¡åº”ç­”-${(null==(e=y.value)?void 0:e.project_name)||"æ–‡æ¡£"}-${Date.now()}.docx`;await J(l,t),a.success("Wordæ–‡æ¡£ä¸‹è½½æˆåŠŸ")}catch(l){a.error(l.message||"æ–‡æ¡£ä¸‹è½½å¤±è´¥ï¼Œè¯·é‡è¯•")}else a.warning("æš‚æ— æ–‡æ¡£å¯ä¸‹è½½")},Ze=async()=>{var e;(null==(e=Re.value)?void 0:e.outputFile)?ke.value.projectId?await be(ke.value.projectId,Re.value.outputFile,"business_response"):a.error("é¡¹ç›®IDæ— æ•ˆ"):a.warning("æ²¡æœ‰å¯åŒæ­¥çš„æ–‡ä»¶")},Ke=e=>{if(!e)return"-";let a=e;try{a=decodeURIComponent(e)}catch{}const l=a.split("/");return l[l.length-1]||"-"},Xe=async()=>{var e;if(null==(e=Re.value)?void 0:e.outputFile)try{Ue.value=!0,await Ae(Re.value.outputFile),a.success("å†å²æ–‡ä»¶å·²åŠ è½½åˆ°ç¼–è¾‘å™¨"),setTimeout(()=>{var e;null==(e=document.querySelector(".editor-section"))||e.scrollIntoView({behavior:"smooth",block:"start"})},100)}catch(l){a.error("æ‰“å¼€å†å²æ–‡ä»¶å¤±è´¥: "+l.message)}else a.error("å†å²æ–‡ä»¶ä¿¡æ¯æ— æ•ˆ")};return w(async()=>{await Promise.all([me(),Je()]);const e=await _e({onClear:()=>{Re.value=null,Ce.value="",ke.value.tenderFiles=[],ke.value.templateFiles=[],Ue.value=!1,Ne.value="",fe.value&&ge(),Fe.value&&Ve()},onDocumentsLoaded:e=>{e.tenderFile&&Ie(e,"tenderFile"),e.templateFile&&we(e,"templateFile"),e.businessResponseFile&&(Re.value=e.businessResponseFile,Ue.value=!1,a.info('æ£€æµ‹åˆ°å†å²å•†åŠ¡åº”ç­”æ–‡ä»¶ï¼Œç‚¹å‡»"åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€"å¯ç¼–è¾‘'))}});e&&(ke.value.projectId=e)}),(e,a)=>{var j,h;const w=l,N=f,J=_,L=o,O=Q,M=s,B=A,le=t,me=G,ve=n,_e=K,we=Z,be=v,Ie=r,Se=Y,Ce=ee,Te=ae,Je=X,Ae=$,ea=z;return b(),g("div",te,[F(me,{class:"project-section",shadow:"never"},{header:V(()=>[...a[9]||(a[9]=[S("div",{class:"card-header"},[S("span",null,"Step 1: é€‰æ‹©é¡¹ç›®")],-1)])]),default:V(()=>[F(w,{type:"info",closable:!1,style:{"margin-bottom":"16px"}},{default:V(()=>[...a[10]||(a[10]=[k(" ğŸ’¡ æç¤ºï¼šå¯é€‰æ‹©ç°æœ‰é¡¹ç›®ï¼Œæˆ–é€‰æ‹©å…¬å¸åæ–°å»ºé¡¹ç›®å¹¶ä¸Šä¼ æ–‡æ¡£ ",-1)])]),_:1}),F(le,{model:ke.value,"label-width":"100px"},{default:V(()=>[F(B,{gutter:20},{default:V(()=>[F(O,{span:12},{default:V(()=>[F(L,{label:"é¡¹ç›®"},{default:V(()=>[F(J,{modelValue:ke.value.projectId,"onUpdate:modelValue":a[0]||(a[0]=e=>ke.value.projectId=e),placeholder:"è¯·é€‰æ‹©é¡¹ç›®æˆ–ç›´æ¥æ–°å»º",filterable:"",clearable:"",onChange:Le,style:{width:"100%"}},{default:V(()=>[(b(!0),g(E,null,D(P(m),e=>(b(),x(N,{key:e.id,label:`${e.project_name} (${e.project_number||"-"})`,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),F(O,{span:12},{default:V(()=>[F(L,{label:"å…¬å¸"},{default:V(()=>{var e;return[ke.value.projectId?(b(),x(M,{key:0,value:(null==(e=P(y))?void 0:e.company_name)||"-",disabled:""},null,8,["value"])):(b(),x(J,{key:1,modelValue:ke.value.companyId,"onUpdate:modelValue":a[1]||(a[1]=e=>ke.value.companyId=e),placeholder:"è¯·é€‰æ‹©å…¬å¸ï¼ˆå¿…å¡«ï¼‰",filterable:"",style:{width:"100%"}},{default:V(()=>[(b(!0),g(E,null,D(Ee.value,e=>(b(),x(N,{key:e.company_id,label:e.company_name,value:e.company_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]))]}),_:1})]),_:1})]),_:1}),ke.value.projectId?I("",!0):(b(),x(B,{key:0,gutter:20},{default:V(()=>[F(O,{span:12},{default:V(()=>[F(L,{label:"é¡¹ç›®åç§°"},{default:V(()=>[F(M,{modelValue:ke.value.projectName,"onUpdate:modelValue":a[2]||(a[2]=e=>ke.value.projectName=e),placeholder:"æ–°é¡¹ç›®"},null,8,["modelValue"])]),_:1})]),_:1}),F(O,{span:12},{default:V(()=>[F(L,{label:"é¡¹ç›®ç¼–å·"},{default:V(()=>[F(M,{modelValue:ke.value.projectNumber,"onUpdate:modelValue":a[3]||(a[3]=e=>ke.value.projectNumber=e),placeholder:"PRJ-..."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}))]),_:1},8,["model"])]),_:1}),F(me,{class:"upload-section",shadow:"never"},{header:V(()=>[...a[11]||(a[11]=[S("div",{class:"card-header"},[S("span",null,"Step 2: ä¸Šä¼ ç›¸å…³æ–‡æ¡£")],-1)])]),default:V(()=>[F(B,{gutter:20},{default:V(()=>[F(O,{span:12},{default:V(()=>[S("div",oe,[a[12]||(a[12]=S("h4",null,[k("å•†åŠ¡åº”ç­”æ¨¡æ¿ "),S("span",{class:"required"},"*")],-1)),P(fe)?(b(),x(P(T),{key:0,"file-info":P(ye),label:"å•†åŠ¡åº”ç­”æ¨¡æ¿:",onCancel:P(ge)},null,8,["file-info","onCancel"])):I("",!0),P(fe)?I("",!0):(b(),x(P(R),{key:1,modelValue:ke.value.templateFiles,"onUpdate:modelValue":a[4]||(a[4]=e=>ke.value.templateFiles=e),"http-request":We,accept:".doc,.docx",limit:1,"max-size":100,drag:"","tip-text":"å¿…é¡»ä¸Šä¼ å•†åŠ¡åº”ç­”æ¨¡æ¿ï¼Œç”¨äºç”Ÿæˆåº”ç­”æ–‡æ¡£",onSuccess:Me},null,8,["modelValue"]))])]),_:1}),F(O,{span:12},{default:V(()=>[S("div",se,[a[13]||(a[13]=S("h4",null,"æ‹›æ ‡æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰",-1)),P(Fe)?(b(),x(P(T),{key:0,"file-info":P(xe),label:"æ‹›æ ‡æ–‡æ¡£:",onCancel:P(Ve)},null,8,["file-info","onCancel"])):I("",!0),P(Fe)?I("",!0):(b(),x(P(R),{key:1,modelValue:ke.value.tenderFiles,"onUpdate:modelValue":a[5]||(a[5]=e=>ke.value.tenderFiles=e),"http-request":ze,accept:".pdf,.doc,.docx",limit:5,"max-size":50,drag:"","tip-text":"å¯é€‰ä¸Šä¼ æ‹›æ ‡æ–‡æ¡£ä½œä¸ºå‚è€ƒï¼Œæ”¯æŒPDFã€Wordæ ¼å¼ï¼Œæœ€å¤§50MB",onSuccess:Oe},null,8,["modelValue"]))])]),_:1})]),_:1}),S("div",ne,[F(ve,{type:"primary",size:"large",disabled:!De.value,loading:Pe.value,onClick:Be},{default:V(()=>[...a[14]||(a[14]=[k(" å¼€å§‹ç”Ÿæˆå•†åŠ¡åº”ç­” ",-1)])]),_:1},8,["disabled","loading"])])]),_:1}),Re.value&&!Ue.value?(b(),x(P(H),{key:0,title:"ğŸ“„ è¯¥é¡¹ç›®å·²æœ‰å•†åŠ¡åº”ç­”æ–‡ä»¶","current-file":Re.value,"history-files":[],"show-editor-open":!0,"show-stats":!0,"current-file-message":"æ£€æµ‹åˆ°è¯¥é¡¹ç›®çš„å†å²å•†åŠ¡åº”ç­”æ–‡ä»¶",onOpenInEditor:Xe,onPreview:Ge,onDownload:Ye,onRegenerate:Be},null,8,["current-file"])):I("",!0),Ue.value?(b(),x(me,{key:1,class:"editor-section",shadow:"never"},{default:V(()=>[F(P(q),{ref_key:"editorRef",ref:qe,modelValue:Ne.value,"onUpdate:modelValue":a[6]||(a[6]=e=>Ne.value=e),title:"å•†åŠ¡åº”ç­”æ–‡æ¡£",streaming:Pe.value,height:1e3,onSave:Qe,onPreview:Ge,onExport:Ye},null,8,["modelValue","streaming"])]),_:1})):I("",!0),Ue.value&&Re.value?(b(),x(ea,{key:2,modelValue:$e.value,"onUpdate:modelValue":a[7]||(a[7]=e=>$e.value=e),class:"result-collapse"},{default:V(()=>[F(Ae,{name:"result",title:"ğŸ“„ æŸ¥çœ‹åŸå§‹ç”Ÿæˆç»“æœ"},{default:V(()=>[F(me,{class:"result-section",shadow:"never"},{header:V(()=>[S("div",re,[S("span",null,C(Re.value.isHistory?"ğŸ“„ å†å²åº”ç­”æ–‡ä»¶":"âœ… ç”Ÿæˆç»“æœ"),1),S("div",ie,[F(ve,{type:"primary",icon:P(u),onClick:Ge},{default:V(()=>[...a[15]||(a[15]=[k(" é¢„è§ˆæ–‡æ¡£ ",-1)])]),_:1},8,["icon"]),F(ve,{type:"success",icon:P(d),onClick:Ye},{default:V(()=>[...a[16]||(a[16]=[k(" ä¸‹è½½Wordæ–‡æ¡£ ",-1)])]),_:1},8,["icon"]),P(he)?(b(),x(_e,{key:1,type:"success",size:"large"},{default:V(()=>[...a[18]||(a[18]=[k(" å·²åŒæ­¥åˆ°æŠ•æ ‡é¡¹ç›® ",-1)])]),_:1})):(b(),x(ve,{key:0,type:"info",icon:P(c),loading:P(je),onClick:Ze},{default:V(()=>[...a[17]||(a[17]=[k(" åŒæ­¥åˆ°æŠ•æ ‡é¡¹ç›® ",-1)])]),_:1},8,["icon","loading"])),F(ve,{type:"primary",icon:P(p),onClick:Be},{default:V(()=>[...a[19]||(a[19]=[k(" é‡æ–°ç”Ÿæˆ ",-1)])]),_:1},8,["icon"])])])]),default:V(()=>{var e,l,t,o;return[S("div",ue,[F(w,{type:Re.value.isHistory?"info":"success",title:Re.value.message,closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},null,8,["type","title"]),F(P(W),{title:"å¤„ç†ç»Ÿè®¡",stats:Re.value.stats},null,8,["stats"]),(null==(l=null==(e=Re.value.stats)?void 0:e.qualifications_details)?void 0:l.length)>0?(b(),g("div",de,[a[22]||(a[22]=S("h4",null,"ğŸ“‹ èµ„è´¨å¤„ç†è¯¦æƒ…",-1)),F(Se,{data:Re.value.stats.qualifications_details,border:"",stripe:"",style:{"margin-top":"16px"}},{default:V(()=>[F(we,{type:"index",label:"#",width:"60",align:"center"}),F(we,{prop:"display_title",label:"èµ„è´¨åç§°","min-width":"200"},{default:V(({row:e})=>[S("div",null,[S("strong",null,C(e.display_title),1),"id_card"===e.resource_type?(b(),x(_e,{key:0,type:"info",size:"small",style:{"margin-left":"8px"}},{default:V(()=>[...a[20]||(a[20]=[k(" èº«ä»½è¯ ",-1)])]),_:1})):I("",!0)])]),_:1}),F(we,{prop:"qual_name",label:"ç±»åˆ«",width:"120",align:"center"},{default:V(({row:e})=>{return[F(_e,{type:(a=e.qual_name,{"åŸºæœ¬èµ„è´¨":"danger","ä¿¡ç”¨è¯æ˜":"success","èº«ä»½è¯æ˜":"primary","è´¢åŠ¡æ–‡ä»¶":"warning","ä¿¡æ¯å®‰å…¨":"info","ç”µä¿¡èµ„è´¨":"warning","ITæœåŠ¡":"info","è´¨é‡ç®¡ç†":"success","è½¯ä»¶èƒ½åŠ›":"info","è¡Œä¸šèµ„è´¨":"warning","çŸ¥è¯†äº§æƒ":""}[a]||""),size:"small"},{default:V(()=>[k(C(e.qual_name),1)]),_:2},1032,["type"])];var a}),_:1}),F(we,{prop:"total_pages",label:"å›¾ç‰‡æ•°",width:"100",align:"center"},{default:V(({row:e})=>[F(be,{type:"primary",size:"large"},{default:V(()=>[S("strong",null,C(e.total_pages),1),k(" "+C("id_card"===e.resource_type?"é¢":"é¡µ"),1)]),_:2},1024)]),_:1}),F(we,{label:"çŠ¶æ€",width:"80",align:"center"},{default:V(()=>[F(Ie,{color:"#67c23a",size:20},{default:V(()=>[F(P(i))]),_:1})]),_:1})]),_:1},8,["data"]),(null==(o=null==(t=Re.value.stats)?void 0:t.missing_qualifications)?void 0:o.length)>0?(b(),x(w,{key:0,type:"warning",closable:!1,style:{"margin-top":"16px"}},{title:V(()=>[...a[21]||(a[21]=[k(" ä»¥ä¸‹èµ„è´¨æ¨¡æ¿æœ‰å ä½ç¬¦ä½†æœªä¸Šä¼ æ–‡ä»¶ ",-1)])]),default:V(()=>[S("ul",ce,[(b(!0),g(E,null,D(Re.value.stats.missing_qualifications,(e,a)=>(b(),g("li",{key:a},C(e.qual_name||e.qual_key),1))),128))])]),_:1})):I("",!0)])):I("",!0),S("div",pe,[a[23]||(a[23]=S("h4",null,"ç”Ÿæˆæ–‡ä»¶",-1)),F(Je,{column:2,border:""},{default:V(()=>[F(Ce,{label:"æ–‡ä»¶å"},{default:V(()=>[k(C(Ke(Re.value.outputFile)),1)]),_:1}),F(Ce,{label:"ä¸‹è½½åœ°å€"},{default:V(()=>[F(Te,{href:Re.value.downloadUrl,type:"primary"},{default:V(()=>[k(C(Ke(Re.value.downloadUrl)),1)]),_:1},8,["href"])]),_:1})]),_:1})])])]}),_:1})]),_:1})]),_:1},8,["modelValue"])):I("",!0),F(P(U),{modelValue:He.value,"onUpdate:modelValue":a[8]||(a[8]=e=>He.value=e),"file-url":null==(j=Re.value)?void 0:j.downloadUrl,"file-name":`å•†åŠ¡åº”ç­”-${(null==(h=P(y))?void 0:h.project_name)||"æ–‡æ¡£"}.docx`},null,8,["modelValue","file-url","file-name"])])}}}),[["__scopeId","data-v-4a21aed6"]]);export{me as default};
