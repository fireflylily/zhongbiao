const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/Login-C0Ul7b7v.js","js/vendor-UMr2cBTC.js","css/vendor-CAPwXG7J.css","css/Login-B-iG05V3.css","js/MainLayout-ymhKZl6-.js","js/DocumentPreview-T-9M55_P.js","css/DocumentPreview-9T0r9oCV.css","js/project-ByeBFM8-.js","js/tender-ZYcn_VXM.js","css/MainLayout-LeVYZ3lC.css","js/Dashboard-4RXzQD8Z.js","js/Loading-BSu0R5TQ.js","css/HistoryFilesPanel-B2DyCtW2.css","js/Empty-Pev__wTU.js","js/Card-BGQFi86M.js","js/IconButton-C7istleu.js","css/Dashboard-DWQ9ZF9m.css","js/Management-C13PflgE.js","js/company-DX6fQVXW.js","css/Management-CrXiPZGq.css","js/ManagementDetail-B3L4TV7C.js","js/PageHeader-CVTfhGQy.js","css/ManagementDetail-BCiJUyDL.css","js/Response-Ce_GDuPG.js","js/DocumentUploader-DKr6uQ2D.js","js/imageCompressor-CTkRt5bg.js","js/RichTextEditor-ClY3fAHT.js","js/helpers-BrX8Jn4T.js","js/useProjectDocuments-V2iiB3g0.js","css/Response-CC7GrIEZ.css","js/PointToPoint-wxn7vY76.js","js/SSEStreamViewer-C_7UHYuw.js","css/PointToPoint-CSt6Rd2x.css","js/TechProposal-Aeejhqh0.js","css/TechProposal-IHnJHU4d.css","js/FinalTender-KkLXQy8C.js","css/FinalTender-DLoB7eCZ.css","js/Scoring-CSNcA5rD.js","css/Scoring-Cd8V3IVR.css","js/CompanyLibrary-BswR26UB.js","css/CompanyLibrary-CgZmVZcL.css","js/CompanyDetail-tY1JM8Mx.js","css/CompanyDetail-BMu1pgsR.css","js/CaseLibrary-BWLJEnW5.js","js/formatters-D-henrcx.js","css/CaseLibrary-D7uxqcDz.css","js/CaseDetail-nY6brk-Z.js","css/CaseDetail-D1M0_4O0.css","js/DocumentLibrary-CagZGw9A.js","css/DocumentLibrary-RUyYXmpT.css","js/ResumeLibrary-mR5c3cQX.js","js/validators-BHjNrE0Y.js","css/ResumeLibrary-DWgHM5Fv.css","js/ResumeDetail-CVX_4OHP.js","css/ResumeDetail-C2PXieTn.css","js/ParserComparison-CTjMg2jA.js","css/ParserComparison-CeZSTNRu.css","js/EditorTest-ENYdaT0X.js","css/EditorTest-DL1IYzqW.css","js/OutlineComparison-BZma41Ap.js","css/OutlineComparison-DW1eMxn2.css","js/UserManagement-Bf36Xez_.js","css/UserManagement-BmqDzzgM.css","js/Processing-lNRIOqC6.js","css/Processing-D4pjUHzW.css","js/Status-CQ8FiVpB.js","css/Status-DPS3juPa.css","js/Help--DfwacSD.js","css/Help-2wyDC7FD.css","js/Forbidden-CxUw8e7D.js","css/Forbidden-DUz6m6MJ.css","js/NotFound-CaH2f8AF.js","css/NotFound-CZ1R5832.css","js/ServerError-D8L70Q2l.js","css/ServerError-CO_65ZoE.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,n)=>((t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n)(t,"symbol"!=typeof a?a+"":a,n);import{a,d as n,u as o,r,b as s,c as i,e as u,o as l,f as c,E as d,w as m,g as p,h as g,i as h,j as f,k as v,l as y,m as _,n as w,p as b,t as T,q as k,s as I,v as E,x as A,y as P,z as S,A as L,B as C,F as j,_ as D,C as R,D as O,G as N,H as M,I as V,J as B,K as x,L as q}from"./vendor-UMr2cBTC.js";function U(e){e.interceptors.request.use(e=>{var t,a;const n=null==(t=e.method)?void 0:t.toUpperCase();if(["POST","PUT","DELETE","PATCH"].includes(n||"")){const t=function(){const e=document.cookie.match(/csrf_token=([^;]+)/);if(e)return e[1];const t=document.querySelector('meta[name="csrf-token"]');if(t)return t.getAttribute("content");return null}();t&&(e.headers["X-CSRFToken"]=t)}return"GET"===(null==(a=e.method)?void 0:a.toUpperCase())&&(e.params={...e.params,_t:Date.now()}),e},e=>Promise.reject(e))}function H(e,t=3,a=1e3){e.interceptors.response.use(e=>{const t=e.data;if(t&&"object"==typeof t&&"success"in t&&!1===t.success){const a={message:t.message||t.error||"请求失败",code:t.code||e.status,details:t};return Promise.reject(a)}return e},async n=>{var o;const r=n.config;if(!r)return Promise.reject(n);if(r.retryConfig||(r.retryConfig={count:0,maxRetries:t,retryDelay:a}),r.retryConfig.count<r.retryConfig.maxRetries&&function(e){if(!e.response)return!0;const t=e.response.status;return t>=500&&t<600}(n)){r.retryConfig.count+=1;const t=function(e,t=1e3){return Math.min(t*Math.pow(2,e),1e4)}(r.retryConfig.count,r.retryConfig.retryDelay);return await(s=t,new Promise(e=>setTimeout(e,s))),e.request(r)}var s;const i={message:"请求失败",code:(null==(o=n.response)?void 0:o.status)||0};if(n.response){const e=n.response.data;switch(e&&"object"==typeof e?(i.message=e.message||e.error||`服务器错误 (${n.response.status})`,i.code=e.code||n.response.status,i.details=e):i.message="string"==typeof e?e:`HTTP ${n.response.status}: ${n.response.statusText}`,n.response.status){case 401:i.message="未授权，请重新登录";break;case 403:i.message=(null==e?void 0:e.message)||"无权限访问";break;case 404:i.message=(null==e?void 0:e.message)||"请求的资源不存在";break;case 422:i.message=(null==e?void 0:e.message)||"请求参数验证失败";break;case 500:i.message=(null==e?void 0:e.message)||"服务器内部错误";break;case 502:i.message="网关错误";break;case 503:i.message="服务暂时不可用";break;case 504:i.message="网关超时"}}else n.request?(i.message="网络连接失败，请检查网络设置",i.code=0):(i.message=n.message||"请求配置错误",i.code=-1);return Promise.reject(i)})}function F(e,t={}){const{maxRetries:a=3,retryDelay:n=1e3}=t;U(e),H(e,a,n)}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const $={baseURL:"/api",timeout:3e4,withCredentials:!0,retryCount:3,retryDelay:1e3};const K=new class{constructor(e={}){t(this,"instance"),t(this,"config"),this.config={...$,...e},this.instance=function(e={}){const t={...$,...e};return a.create({baseURL:t.baseURL,timeout:t.timeout,withCredentials:t.withCredentials,headers:{"Content-Type":"application/json"}})}(this.config),F(this.instance,{maxRetries:this.config.retryCount,retryDelay:this.config.retryDelay})}getInstance(){return this.instance}async get(e,t,a){return(await this.instance.get(e,{params:t,...a})).data}async post(e,t,a){return(await this.instance.post(e,t,a)).data}async put(e,t,a){return(await this.instance.put(e,t,a)).data}async delete(e,t){return(await this.instance.delete(e,t)).data}async patch(e,t,a){return(await this.instance.patch(e,t,a)).data}async upload(e,t,a){return(await this.instance.post(e,t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:a})).data}async download(e,t,a){const n=await this.instance.get(e,{responseType:"blob",onDownloadProgress:a});if(t){const e=n.data,a=window.URL.createObjectURL(e),o=document.createElement("a");o.href=a,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a)}return n.data}setHeader(e,t){this.instance.defaults.headers.common[e]=t}removeHeader(e){delete this.instance.defaults.headers.common[e]}setAuthToken(e){this.setHeader("Authorization",`Bearer ${e}`)}clearAuthToken(){this.removeHeader("Authorization")}};const z={class:"feedback-button-wrapper"},J={class:"context-info"},G={key:0},W={key:1},X={key:2},Q={key:3},Y={class:"dialog-footer"},Z=(e,t)=>{const a=e.__vccOpts||e;for(const[n,o]of t)a[n]=o;return a},ee=Z(n({__name:"FeedbackButton",setup(e){const t=o(),a=r(!1),n=r(!1),C=r(),j=s({content:"",feedbackType:"general",priority:"medium"}),D={content:[{required:!0,message:"请输入问题描述",trigger:"blur"},{min:10,message:"问题描述至少10个字符",trigger:"blur"}],feedbackType:[{required:!0,message:"请选择反馈类型",trigger:"change"}],priority:[{required:!0,message:"请选择优先级",trigger:"change"}]},R=i(()=>{var e;const a=localStorage.getItem("username")||"游客",n=(null==(e=t.meta)?void 0:e.title)||t.name||"未知页面",o=t.path,r=t.params.projectId?Number(t.params.projectId):t.query.projectId?Number(t.query.projectId):void 0,s=localStorage.getItem("currentProjectName")||void 0,i=localStorage.getItem("companyName")||void 0;return{username:a,projectId:r,projectName:s,companyId:localStorage.getItem("companyId")?Number(localStorage.getItem("companyId")):void 0,companyName:i,pageRoute:o,pageTitle:n}}),O=i(()=>!!(R.value.username||R.value.projectName||R.value.companyName||R.value.pageTitle)),N=()=>{j.content.trim()?S.confirm("您有未提交的反馈内容，确定要关闭吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{M(),a.value=!1}).catch(()=>{}):(M(),a.value=!1)},M=()=>{var e;null==(e=C.value)||e.resetFields(),j.content="",j.feedbackType="general",j.priority="medium"},V=async()=>{var e,t,o;if(C.value)try{if(!(await C.value.validate()))return;n.value=!0;const e={content:j.content,feedbackType:j.feedbackType,priority:j.priority,...R.value},t=await(o=e,K.post("/api/feedback/submit",o));t.data.success?(L.success(t.data.message||"反馈提交成功，感谢您的宝贵意见！"),M(),a.value=!1):L.error("提交失败，请稍后重试")}catch(r){L.error((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.error)||"提交失败，请稍后重试")}finally{n.value=!1}};return(e,t)=>{const o=p,r=d,s=_,i=A,S=E,L=I,M=P,B=k,x=f;return l(),u("div",z,[c(r,{content:"问题登记",placement:"right"},{default:m(()=>[c(o,{class:"feedback-floating-button",type:"primary",icon:g(h),circle:"",size:"large",onClick:t[0]||(t[0]=e=>a.value=!0)},null,8,["icon"])]),_:1}),c(x,{modelValue:a.value,"onUpdate:modelValue":t[4]||(t[4]=e=>a.value=e),title:"问题登记",width:"600px","before-close":N},{footer:m(()=>[w("div",Y,[c(o,{onClick:N},{default:m(()=>[...t[15]||(t[15]=[b("取消",-1)])]),_:1}),c(o,{type:"primary",loading:n.value,onClick:V},{default:m(()=>[...t[16]||(t[16]=[b(" 提交 ",-1)])]),_:1},8,["loading"])])]),default:m(()=>[O.value?(l(),v(s,{key:0,title:"以下信息将与您的反馈一起提交",type:"info",closable:!1,class:"context-alert"},{default:m(()=>[w("div",J,[R.value.username?(l(),u("p",G,[t[5]||(t[5]=w("strong",null,"当前用户:",-1)),b(" "+T(R.value.username),1)])):y("",!0),R.value.projectName?(l(),u("p",W,[t[6]||(t[6]=w("strong",null,"所属项目:",-1)),b(" "+T(R.value.projectName),1)])):y("",!0),R.value.companyName?(l(),u("p",X,[t[7]||(t[7]=w("strong",null,"所属公司:",-1)),b(" "+T(R.value.companyName),1)])):y("",!0),R.value.pageTitle?(l(),u("p",Q,[t[8]||(t[8]=w("strong",null,"当前页面:",-1)),b(" "+T(R.value.pageTitle),1)])):y("",!0)])]),_:1})):y("",!0),c(B,{ref_key:"formRef",ref:C,model:j,rules:D,"label-width":"100px",class:"feedback-form"},{default:m(()=>[c(L,{label:"反馈类型",prop:"feedbackType"},{default:m(()=>[c(S,{modelValue:j.feedbackType,"onUpdate:modelValue":t[1]||(t[1]=e=>j.feedbackType=e)},{default:m(()=>[c(i,{value:"bug"},{default:m(()=>[...t[9]||(t[9]=[b("Bug反馈",-1)])]),_:1}),c(i,{value:"suggestion"},{default:m(()=>[...t[10]||(t[10]=[b("功能建议",-1)])]),_:1}),c(i,{value:"general"},{default:m(()=>[...t[11]||(t[11]=[b("一般问题",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),c(L,{label:"优先级",prop:"priority"},{default:m(()=>[c(S,{modelValue:j.priority,"onUpdate:modelValue":t[2]||(t[2]=e=>j.priority=e)},{default:m(()=>[c(i,{value:"low"},{default:m(()=>[...t[12]||(t[12]=[b("低",-1)])]),_:1}),c(i,{value:"medium"},{default:m(()=>[...t[13]||(t[13]=[b("中",-1)])]),_:1}),c(i,{value:"high"},{default:m(()=>[...t[14]||(t[14]=[b("高",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),c(L,{label:"问题描述",prop:"content"},{default:m(()=>[c(M,{modelValue:j.content,"onUpdate:modelValue":t[3]||(t[3]=e=>j.content=e),type:"textarea",rows:6,placeholder:"请详细描述您遇到的问题或建议...",maxlength:"2000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-a5aa5b81"]]),te=n({__name:"App",setup:e=>(e,t)=>{const a=C("router-view");return l(),u(j,null,[c(a),c(ee)],64)}}),ae=[{path:"/login",name:"Login",component:()=>D(()=>import("./Login-C0Ul7b7v.js"),__vite__mapDeps([0,1,2,3])),meta:{requiresAuth:!1,title:"登录",hideBreadcrumb:!0,showInMenu:!1}},{path:"/",component:()=>D(()=>import("./MainLayout-ymhKZl6-.js"),__vite__mapDeps([4,1,2,5,6,7,8,9])),meta:{requiresAuth:!0},redirect:{name:"Home"},children:[{path:"",name:"Home",component:()=>D(()=>import("./Dashboard-4RXzQD8Z.js"),__vite__mapDeps([10,1,2,7,8,11,12,13,14,15,16,6])),meta:{title:"工作台",icon:"bi-house",category:"workspace",order:1,affix:!0,description:"项目总览和快捷入口"}},{path:"tender-management",name:"TenderManagement",component:()=>D(()=>import("./Management-C13PflgE.js"),__vite__mapDeps([17,1,2,11,12,13,14,15,8,18,19,6])),meta:{title:"投标管理",icon:"bi-file-earmark-text",category:"project",order:2,keepAlive:!0,description:"HITL人机协同系统"}},{path:"tender-management/:id",name:"TenderManagementDetail",component:()=>D(()=>import("./ManagementDetail-B3L4TV7C.js"),__vite__mapDeps([20,1,2,11,12,21,5,6,8,18,7,22])),meta:{title:"项目详情",icon:"bi-file-earmark-text",parent:"TenderManagement",showInMenu:!1,hideBreadcrumb:!1,description:"查看项目详细信息和资格要求"}},{path:"business-response",name:"BusinessResponse",component:()=>D(()=>import("./Response-Ce_GDuPG.js"),__vite__mapDeps([23,1,2,24,25,12,5,6,26,27,8,18,7,28,29])),meta:{title:"商务应答",icon:"bi-briefcase",category:"ai-tools",order:3,description:"智能生成商务应答文档"}},{path:"point-to-point",name:"PointToPoint",component:()=>D(()=>import("./PointToPoint-wxn7vY76.js"),__vite__mapDeps([30,1,2,31,12,24,25,5,6,26,27,8,28,7,32])),meta:{title:"点对点应答",icon:"bi-arrow-left-right",category:"ai-tools",order:4,description:"针对招标要求逐点响应"}},{path:"tech-proposal",name:"TechProposal",component:()=>D(()=>import("./TechProposal-Aeejhqh0.js"),__vite__mapDeps([33,1,2,31,12,24,25,5,6,26,27,8,28,7,34])),meta:{title:"技术方案",icon:"bi-file-code",category:"ai-tools",order:5,description:"AI生成技术方案大纲"}},{path:"final-tender",name:"FinalTender",component:()=>D(()=>import("./FinalTender-KkLXQy8C.js"),__vite__mapDeps([35,1,2,11,12,21,28,8,7,36,6])),meta:{title:"最终标书",icon:"bi-file-earmark-zip",category:"ai-tools",order:6,description:"智能整合生成最终投标文件"}},{path:"tender-scoring",name:"TenderScoring",component:()=>D(()=>import("./Scoring-CSNcA5rD.js"),__vite__mapDeps([37,1,2,31,12,8,38,6])),meta:{title:"标书评分",icon:"bi-star",category:"ai-tools",order:6,description:"AI辅助标书评分和风险分析"}},{path:"knowledge",name:"Knowledge",redirect:{name:"CompanyLibrary"},meta:{title:"知识中心",icon:"bi-book",order:7,description:"AI系统的大脑和资料库"},children:[{path:"company-library",name:"CompanyLibrary",component:()=>D(()=>import("./CompanyLibrary-BswR26UB.js"),__vite__mapDeps([39,1,2,11,12,13,14,18,40,6])),meta:{title:"企业库",icon:"bi-building",order:1,parent:"Knowledge",keepAlive:!0,description:"管理企业基本信息和资质证书"}},{path:"company/:id",name:"CompanyDetail",component:()=>D(()=>import("./CompanyDetail-tY1JM8Mx.js"),__vite__mapDeps([41,1,2,11,12,18,14,24,25,42,6])),meta:{title:"企业详情",icon:"bi-building",parent:"Knowledge",showInMenu:!1,hideBreadcrumb:!1,description:"查看和编辑企业详细信息"}},{path:"case-library",name:"CaseLibrary",component:()=>D(()=>import("./CaseLibrary-BWLJEnW5.js"),__vite__mapDeps([43,1,2,11,12,13,14,44,18,45,6])),meta:{title:"案例库",icon:"bi-archive",order:2,parent:"Knowledge",keepAlive:!0,description:"管理历史项目案例"}},{path:"case/:id",name:"CaseDetail",component:()=>D(()=>import("./CaseDetail-nY6brk-Z.js"),__vite__mapDeps([46,1,2,11,12,44,13,25,18,47,6])),meta:{title:"案例详情",icon:"bi-archive",parent:"Knowledge",showInMenu:!1,hideBreadcrumb:!1,description:"查看和编辑案例详细信息"}},{path:"document-library",name:"DocumentLibrary",component:()=>D(()=>import("./DocumentLibrary-CagZGw9A.js"),__vite__mapDeps([48,1,2,13,12,14,49,6])),meta:{title:"文档库",icon:"bi-folder",order:3,parent:"Knowledge",keepAlive:!0,description:"管理企业知识文档"}},{path:"resume-library",name:"ResumeLibrary",component:()=>D(()=>import("./ResumeLibrary-mR5c3cQX.js"),__vite__mapDeps([50,1,2,11,12,13,14,44,51,52,6])),meta:{title:"简历库",icon:"bi-person-badge",order:4,parent:"Knowledge",keepAlive:!0,description:"管理人员简历信息"}},{path:"resume/:id",name:"ResumeDetail",component:()=>D(()=>import("./ResumeDetail-CVX_4OHP.js"),__vite__mapDeps([53,1,2,11,12,44,51,13,25,54,6])),meta:{title:"简历详情",icon:"bi-person-badge",parent:"Knowledge",showInMenu:!1,hideBreadcrumb:!1,description:"查看和编辑简历详细信息"}}]},{path:"abtest",name:"ABTest",redirect:{name:"ParserComparison"},meta:{title:"AB测试",icon:"bi-bug",category:"abtest",order:8,description:"开发调试工具（仅管理员可见）"},children:[{path:"parser-comparison",name:"ParserComparison",component:()=>D(()=>import("./ParserComparison-CTjMg2jA.js"),__vite__mapDeps([55,1,2,14,12,56,6])),meta:{title:"目录解析对比",icon:"bi-file-earmark-diff",order:1,parent:"ABTest",description:"对比不同解析方法的准确率",requiresAuth:!1}},{path:"editor-test",name:"EditorTest",component:()=>D(()=>import("./EditorTest-ENYdaT0X.js"),__vite__mapDeps([57,1,2,26,12,58,6])),meta:{title:"编辑器测试",icon:"bi-pencil-square",order:2,parent:"ABTest",description:"Umo Editor功能测试"}},{path:"outline-comparison",name:"OutlineComparison",component:()=>D(()=>import("./OutlineComparison-BZma41Ap.js"),__vite__mapDeps([59,1,2,28,8,7,5,6,18,60,12])),meta:{title:"大纲生成对比",icon:"bi-diagram-3",order:3,parent:"ABTest",description:"对比不同大纲生成算法的效果"}},{path:"user-management",name:"UserManagement",component:()=>D(()=>import("./UserManagement-Bf36Xez_.js"),__vite__mapDeps([61,1,2,62])),meta:{title:"用户管理",icon:"bi-people",order:4,parent:"ABTest",description:"用户和角色管理"}}]}]},{path:"/tender-processing/:projectId?",name:"TenderProcessing",component:()=>D(()=>import("./Processing-lNRIOqC6.js"),__vite__mapDeps([63,1,2,13,12,14,64,6])),meta:{requiresAuth:!0,title:"投标处理",icon:"bi-gear",showInMenu:!1,hideBreadcrumb:!1,customClass:"tender-processing-page"}},{path:"/system-status",name:"SystemStatus",component:()=>D(()=>import("./Status-CQ8FiVpB.js"),__vite__mapDeps([65,1,2,66])),meta:{requiresAuth:!0,title:"系统状态",icon:"bi-hdd",showInMenu:!1}},{path:"/help",name:"Help",component:()=>D(()=>import("./Help--DfwacSD.js"),__vite__mapDeps([67,1,2,13,12,14,68,6])),meta:{requiresAuth:!1,title:"帮助中心",icon:"bi-question-circle",showInMenu:!1}},{path:"/403",name:"Forbidden",component:()=>D(()=>import("./Forbidden-CxUw8e7D.js"),__vite__mapDeps([69,1,2,70])),meta:{requiresAuth:!1,title:"403 - 无权限访问",hideBreadcrumb:!0,showInMenu:!1}},{path:"/404",name:"NotFound",component:()=>D(()=>import("./NotFound-CaH2f8AF.js"),__vite__mapDeps([71,1,2,72])),meta:{requiresAuth:!1,title:"404 - 页面未找到",hideBreadcrumb:!0,showInMenu:!1}},{path:"/500",name:"ServerError",component:()=>D(()=>import("./ServerError-D8L70Q2l.js"),__vite__mapDeps([73,1,2,74])),meta:{requiresAuth:!1,title:"500 - 服务器错误",hideBreadcrumb:!0,showInMenu:!1}},{path:"/:pathMatch(.*)*",redirect:{name:"NotFound"}}],ne={"#home":"/","#project-overview":"/project-overview","#tender-management":"/tender-management","#business-response":"/business-response","#point-to-point":"/point-to-point","#tech-proposal":"/tech-proposal","#check-export":"/check-export","#tender-scoring":"/tender-scoring","#knowledge-company-library":"/knowledge/company-library","#knowledge-case-library":"/knowledge/case-library","#knowledge-document-library":"/knowledge/document-library","#knowledge-resume-library":"/knowledge/resume-library"},oe={async login(e){var t;const a=await K.post("/auth/login",e);return(null==(t=a.data)?void 0:t.token)&&(localStorage.setItem("auth_token",a.data.token),K.setAuthToken(a.data.token)),a},async logout(){const e=await K.post("/auth/logout");return localStorage.removeItem("auth_token"),K.clearAuthToken(),e},getCurrentUser:async()=>K.get("/auth/user"),updateCurrentUser:async e=>K.put("/auth/user",e),changePassword:async e=>K.post("/auth/change-password",e),resetPassword:async(e,t)=>K.post("/auth/reset-password",{user_id:e,new_password:t}),verifyToken:async()=>K.get("/auth/verify-token"),async refreshToken(){var e;const t=await K.post("/auth/refresh-token");return(null==(e=t.data)?void 0:e.token)&&(localStorage.setItem("auth_token",t.data.token),K.setAuthToken(t.data.token)),t},restoreAuth(){const e=localStorage.getItem("auth_token");e&&K.setAuthToken(e)}};F(K.getInstance(),{maxRetries:3,retryDelay:1e3});const re=R("user",()=>{const e=r(null),t=r(null),a=r([]),n=r(!1),o=r(null),s=i(()=>!!e.value&&!!t.value),u=i(()=>!!t.value),l=i(()=>{var t;return(null==(t=e.value)?void 0:t.id)||null}),c=i(()=>{var t;return(null==(t=e.value)?void 0:t.username)||""}),d=i(()=>{var t;return(null==(t=e.value)?void 0:t.email)||""}),m=i(()=>e=>a.value.includes(e)),p=i(()=>{var t;return"admin"===(null==(t=e.value)?void 0:t.role)||a.value.includes("admin")});async function g(){n.value=!0;try{await oe.logout()}catch(r){}finally{e.value=null,t.value=null,a.value=[],o.value=null,f(),n.value=!1}}function h(){try{e.value&&localStorage.setItem("user",JSON.stringify(e.value)),t.value&&localStorage.setItem("auth_token",t.value),a.value.length>0&&localStorage.setItem("user_permissions",JSON.stringify(a.value))}catch(n){}}function f(){localStorage.removeItem("user"),localStorage.removeItem("auth_token"),localStorage.removeItem("user_permissions")}return{currentUser:e,token:t,permissions:a,loading:n,error:o,isLoggedIn:s,hasToken:u,userId:l,username:c,userEmail:d,hasPermission:m,isAdmin:p,login:async function(a){n.value=!0,o.value=null;try{const n=await oe.login(a);return n.success&&n.data?(e.value=n.data.user,t.value=n.data.token||null,h(),!0):(o.value=n.message||"登录失败",!1)}catch(r){return o.value=r.message||"登录失败",!1}finally{n.value=!1}},logout:g,fetchCurrentUser:async function(){n.value=!0,o.value=null;try{const t=await oe.getCurrentUser();t.success&&t.data&&(e.value=t.data,h())}catch(t){o.value=t.message||"获取用户信息失败"}finally{n.value=!1}},updateUser:async function(t){n.value=!0,o.value=null;try{const a=await oe.updateCurrentUser(t);return a.success&&a.data?(e.value=a.data,h(),!0):(o.value=a.message||"更新失败",!1)}catch(a){return o.value=a.message||"更新失败",!1}finally{n.value=!1}},changePassword:async function(e,t){n.value=!0,o.value=null;try{const a=await oe.changePassword({old_password:e,new_password:t});return!!a.success||(o.value=a.message||"密码修改失败",!1)}catch(a){return o.value=a.message||"密码修改失败",!1}finally{n.value=!1}},verifyToken:async function(){var a;if(!t.value)return!1;try{const t=await oe.verifyToken();return t.success&&(null==(a=t.data)?void 0:a.valid)?(t.data.user&&(e.value=t.data.user,h()),!0):(await g(),!1)}catch(n){return await g(),!1}},refreshToken:async function(){try{const a=await oe.refreshToken();return!(!a.success||!a.data)&&(t.value=a.data.token,a.data.user&&(e.value=a.data.user),h(),!0)}catch(a){return!1}},setPermissions:function(e){a.value=e,h()},restoreFromStorage:function(){try{const n=localStorage.getItem("user"),o=localStorage.getItem("auth_token"),r=localStorage.getItem("user_permissions");n&&(e.value=JSON.parse(n)),o&&(t.value=o,oe.restoreAuth()),r&&(a.value=JSON.parse(r))}catch(n){}},saveToStorage:h,clearStorage:f,$reset:function(){e.value=null,t.value=null,a.value=[],n.value=!1,o.value=null,f()}}}),se=R("settings",()=>{const e=r("light"),t=r("zh-CN"),a=r(!0),n=r(!0),o=r(!1),s=r(!0),u=r(!0),l=r(!1),c=r(!0),d=r(!0),m=r("fade"),p=i(()=>"dark"===e.value),g=i(()=>"light"===e.value),h=i(()=>"zh-CN"===t.value),f=i(()=>"en-US"===t.value);function v(t){e.value=t,y(),A()}function y(){const t=document.documentElement;"dark"===e.value?t.classList.add("dark"):t.classList.remove("dark"),t.setAttribute("data-theme",e.value)}function _(e){t.value=e,w(),A()}function w(){document.documentElement.setAttribute("lang",t.value)}function b(e){a.value=e,A()}function T(e){n.value=e,A()}function k(e){o.value=e,I(),A()}function I(){const e=document.documentElement;o.value?e.classList.add("compact-mode"):e.classList.remove("compact-mode")}function E(e){s.value=e,A()}function A(){try{const r={theme:e.value,language:t.value,autoSave:a.value,showHelpTooltips:n.value,compactMode:o.value,showSidebar:s.value,showBreadcrumb:u.value,showTabs:l.value,showFooter:c.value,fixedHeader:d.value,pageTransition:m.value};localStorage.setItem("app_settings",JSON.stringify(r))}catch(r){}}function P(){e.value="light",t.value="zh-CN",a.value=!0,n.value=!0,o.value=!1,s.value=!0,u.value=!0,l.value=!1,c.value=!0,d.value=!0,m.value="fade",y(),w(),I(),A()}return O(e,()=>{y()}),O(t,()=>{w()}),O(o,()=>{I()}),{theme:e,language:t,autoSave:a,showHelpTooltips:n,compactMode:o,showSidebar:s,showBreadcrumb:u,showTabs:l,showFooter:c,fixedHeader:d,pageTransition:m,isDarkMode:p,isLightMode:g,isChineseLanguage:h,isEnglishLanguage:f,setTheme:v,toggleTheme:function(){v("light"===e.value?"dark":"light")},setLanguage:_,setAutoSave:b,toggleAutoSave:function(){b(!a.value)},setShowHelpTooltips:T,toggleHelpTooltips:function(){T(!n.value)},setCompactMode:k,toggleCompactMode:function(){k(!o.value)},setShowSidebar:E,toggleSidebar:function(){E(!s.value)},setShowBreadcrumb:function(e){u.value=e,A()},setShowTabs:function(e){l.value=e,A()},setShowFooter:function(e){c.value=e,A()},setFixedHeader:function(e){d.value=e,A()},setPageTransition:function(e){m.value=e,A()},updateSettings:function(e){void 0!==e.theme&&v(e.theme),void 0!==e.language&&_(e.language),void 0!==e.autoSave&&b(e.autoSave),void 0!==e.showHelpTooltips&&T(e.showHelpTooltips),void 0!==e.compactMode&&k(e.compactMode)},restoreFromStorage:function(){try{const r=localStorage.getItem("app_settings");if(r){const i=JSON.parse(r);e.value=i.theme||"light",t.value=i.language||"zh-CN",a.value=void 0===i.autoSave||i.autoSave,n.value=void 0===i.showHelpTooltips||i.showHelpTooltips,o.value=i.compactMode||!1,s.value=void 0===i.showSidebar||i.showSidebar,u.value=void 0===i.showBreadcrumb||i.showBreadcrumb,l.value=i.showTabs||!1,c.value=void 0===i.showFooter||i.showFooter,d.value=void 0===i.fixedHeader||i.fixedHeader,m.value=i.pageTransition||"fade",y(),w(),I()}}catch(r){}},saveToStorage:A,resetToDefaults:P,$reset:function(){P()}}}),ie=R("notification",()=>{const e=r([]),t=r(5),a=i(()=>e.value.length),n=i(()=>e.value.length>0),o=i(()=>e.value.length),s=i(()=>e.value.slice(0,t.value));function u(a,n,o,r){const s=`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i={id:s,type:a,title:n,message:o,duration:r||3e3,timestamp:new Date};return e.value.unshift(i),e.value.length>t.value&&(e.value=e.value.slice(0,t.value)),i.duration&&i.duration>0&&setTimeout(()=>{l(s)},i.duration),s}function l(t){const a=e.value.findIndex(e=>e.id===t);-1!==a&&e.value.splice(a,1)}return{notifications:e,maxNotifications:t,notificationsCount:a,hasNotifications:n,unreadCount:o,recentNotifications:s,addNotification:u,success:function(e,t="",a){return u("success",e,t,a)},error:function(e,t="",a){return u("error",e,t,a||5e3)},warning:function(e,t="",a){return u("warning",e,t,a)},info:function(e,t="",a){return u("info",e,t,a)},removeNotification:l,clearAll:function(){e.value=[]},clearByType:function(t){e.value=e.value.filter(e=>e.type!==t)},setMaxNotifications:function(a){t.value=a,e.value.length>a&&(e.value=e.value.slice(0,a))},getNotification:function(t){return e.value.find(e=>e.id===t)||null},$reset:function(){e.value=[],t.value=5}}});function ue(){const e=ie();function t(t){M({title:t.title||"通知",message:t.message,type:t.type||"info",duration:t.duration||4500,showClose:!1!==t.showClose,dangerouslyUseHTMLString:t.dangerouslyUseHTMLString||!1});const a=t.type||"info";e.addNotification(a,t.title||"通知",t.message,t.duration)}return{success:function(t,a){let n,o;"string"==typeof a?(n=`${t}: ${a}`,o=3e3):(n=t,o=a||3e3),L.success({message:n,duration:o,showClose:!0}),e.success("操作成功",n,o)},error:function(t,a){let n,o;"string"==typeof a?(n=`${t}: ${a}`,o=5e3):(n=t,o=a||5e3),L.error({message:n,duration:o,showClose:!0}),e.error("操作失败",n,o)},warning:function(t,a){let n,o;"string"==typeof a?(n=`${t}: ${a}`,o=3e3):(n=t,o=a||3e3),L.warning({message:n,duration:o,showClose:!0}),e.warning("警告",n,o)},info:function(t,a){let n,o;"string"==typeof a?(n=`${t}: ${a}`,o=3e3):(n=t,o=a||3e3),L.info({message:n,duration:o,showClose:!0}),e.info("提示",n,o)},notify:t,notifySuccess:function(e,a){t({title:e,message:a,type:"success",duration:4500})},notifyError:function(e,a){t({title:e,message:a,type:"error",duration:6e3})},notifyWarning:function(e,a){t({title:e,message:a,type:"warning",duration:4500})},notifyInfo:function(e,a){t({title:e,message:a,type:"info",duration:4500})},confirm:async function(e){try{return await S.confirm(e.message,e.title||"确认",{confirmButtonText:e.confirmButtonText||"确定",cancelButtonText:e.cancelButtonText||"取消",type:e.type||"warning",distinguishCancelAndClose:!0}),!0}catch(t){return!1}},alert:async function(e,t="提示"){await S.alert(e,t,{confirmButtonText:"确定",type:"info"})},prompt:async function(e,t="输入"){try{const{value:a}=await S.prompt(e,t,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/.+/,inputErrorMessage:"输入不能为空"});return a||""}catch{return""}}}}function le(e){const t=[],a=e.matched.filter(e=>{var t,a;return(null==(t=e.meta)?void 0:t.title)&&!(null==(a=e.meta)?void 0:a.hideBreadcrumb)});return a.forEach((e,n)=>{t.push({title:e.meta.title,path:n===a.length-1?void 0:e.path,icon:e.meta.icon,disabled:n===a.length-1})}),t}function ce(e,t=""){const a=[];return e.forEach(e=>{var n,o;if(!1===(null==(n=e.meta)?void 0:n.showInMenu))return;if(!(null==(o=e.meta)?void 0:o.title))return;const r=t+(e.path.startsWith("/")?e.path:`/${e.path}`),s={name:e.name,path:r,title:e.meta.title,icon:e.meta.icon,order:e.meta.order,meta:e.meta,children:[]};e.children&&e.children.length>0&&(s.children=ce(e.children,r)),a.push(s)}),a.sort((e,t)=>(e.order||999)-(t.order||999)),a}function de(){"undefined"!=typeof window&&window.NProgress&&window.NProgress.done()}function me(e,t){let a=document.querySelector(`meta[name="${e}"]`);a||(a=document.createElement("meta"),a.setAttribute("name",e),document.head.appendChild(a)),a.setAttribute("content",t)}N();const pe=V({history:B("/"),routes:ae,scrollBehavior:(e,t,a)=>a||(e.hash?{el:e.hash,behavior:"smooth",top:80}:!e.meta.keepScrollPosition&&{top:0,behavior:"smooth"}),strict:!1,sensitive:!1});var ge;(function(e){e.beforeEach(async(e,t,a)=>{if(se().showProgress&&"undefined"!=typeof window&&window.NProgress&&window.NProgress.start(),function(e,t){const a=function(e){return e&&ne[e]?ne[e]:null}(window.location.hash);return!!a&&(t({path:a,replace:!0}),!0)}(0,a))return;const n=await async function(e,t,a){const n=re();if(!1===e.meta.requiresAuth)return!0;if(!n.isLoggedIn){if(n.restoreFromStorage(),n.hasToken)try{if(await n.verifyToken())return!0}catch(o){}if(!n.isLoggedIn)return a({name:"Login",query:{redirect:e.fullPath},replace:!0}),!1}try{if(!(await n.verifyToken()))return await n.logout(),a({name:"Login",query:{redirect:e.fullPath},replace:!0}),!1}catch(o){return await n.logout(),a({name:"Login",query:{redirect:e.fullPath},replace:!0}),!1}return!0}(e,0,a);n?(function(e){const t=function(e,t="元景AI智能标书生成平台"){var a;const n=null==(a=e.meta)?void 0:a.title;return n?`${n} - ${t}`:t}(e);document.title=t,e.meta.description&&me("description",e.meta.description),e.meta.keywords&&Array.isArray(e.meta.keywords)&&me("keywords",e.meta.keywords.join(", "))}(e),a()):de()})})(ge=pe),function(e){e.afterEach((e,t)=>{de(),function(e,t){t.name,e.name}(e,t),function(e){"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("pageview",{detail:{path:e.path,name:e.name,title:e.meta.title}}))}(e)})}(ge),function(e){e.onError(e=>{const{error:t}=ue();de(),e.message.includes("Failed to fetch dynamically imported module")?t("页面加载失败，请刷新页面重试"):e.message.includes("Redirected when going from")?t("路由配置错误，请联系管理员"):t("页面加载失败")})}(ge),async function(){await async function(){try{await a.get("/api/csrf-token",{withCredentials:!0})}catch(e){}}();const e=x(te);e.use(N()),e.use(pe);try{e.use(q,{toolbar:{defaultMode:"ribbon"}})}catch(t){}e.mount("#app")}();export{Z as _,ue as a,ie as b,le as c,se as d,K as e,ce as g,re as u};
