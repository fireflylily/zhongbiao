const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/Login-DNwXa8IN.js","js/element-plus-IkZgpaz4.js","js/vendor-CdA3MjAt.js","js/onnxruntime-DkHy2lK3.js","css/vendor-CTYNMfMW.css","css/element-plus-vte5PF6W.css","js/umo-editor-BmhDOXHm.js","js/mermaid-e-fO57px.js","js/echarts-Cqw1j_Z-.js","css/umo-editor-Cc4lFSKO.css","css/Login-B-iG05V3.css","js/MainLayout-CUR2fYyO.js","js/DocumentPreview-BbjmwCia.js","css/DocumentPreview-9T0r9oCV.css","js/project-C4LB9E9r.js","js/tender-2TSD_jRl.js","css/MainLayout-LeVYZ3lC.css","js/Dashboard-BDWgEsMi.js","js/Loading-CmykbBZp.js","css/HistoryFilesPanel-2M1k14Sk.css","js/Empty-BNVBwC0L.js","js/Card-BYP2BB2j.js","js/IconButton-Dlyej4ti.js","css/Dashboard-DWQ9ZF9m.css","js/Management-DrES3-Q2.js","js/company-B1QhkZBS.js","css/Management-JwABVeLJ.css","js/ManagementDetail-B8XbFEyE.js","js/PageHeader-DUEP1VLZ.js","css/ManagementDetail-BCiJUyDL.css","js/Response-DzH7udbL.js","js/DocumentUploader-BBjdsRhi.js","js/imageCompressor-D9CndpqW.js","js/RichTextEditor-BDdJ_J7M.js","js/helpers-Btlcunlb.js","js/useProjectDocuments-BId2nzjv.js","css/Response-xNSxdViI.css","js/PointToPoint-VLHMiurV.js","js/SSEStreamViewer-BoeXFWk-.js","css/PointToPoint-9Q6I8aVc.css","js/TechProposal-CrvZXZvA.js","css/TechProposal-B92qprx9.css","js/FinalTender-suadP8VK.js","css/FinalTender-DLoB7eCZ.css","js/Scoring-C4Qysnv2.js","css/Scoring-zfjWaxZF.css","js/CompanyLibrary-BbJRmwtv.js","css/CompanyLibrary-CgZmVZcL.css","js/CompanyDetail-CcyTdHOi.js","css/CompanyDetail-tGzSr_gf.css","js/CaseLibrary-SPelYylg.js","js/formatters-D7k9w9WL.js","css/CaseLibrary-D7uxqcDz.css","js/CaseDetail-DFjqNkTI.js","css/CaseDetail-Dd1P6GeN.css","js/DocumentLibrary-Dh-_VzTe.js","css/DocumentLibrary-RUyYXmpT.css","js/ResumeLibrary-CVBW6Cgx.js","js/validators-DLLuJPij.js","css/ResumeLibrary-DWgHM5Fv.css","js/ResumeDetail-CDU-iMX_.js","css/ResumeDetail-C2PXieTn.css","js/ParserComparison-BBBhNxfR.js","css/ParserComparison-CeZSTNRu.css","js/EditorTest-C8519Soi.js","css/EditorTest-DL1IYzqW.css","js/OutlineComparison-FTf9-vCH.js","css/OutlineComparison-DW1eMxn2.css","js/UserManagement-CKQfj6BG.js","css/UserManagement-BmqDzzgM.css","js/Processing-DnyIlRBG.js","css/Processing-D4pjUHzW.css","js/Status-M_peSNhW.js","css/Status-CODNVQ4A.css","js/Help-BIw6S6NB.js","css/Help-2wyDC7FD.css","js/Forbidden-DNh_1tOb.js","css/Forbidden-DUz6m6MJ.css","js/NotFound-B3Atkxi3.js","css/NotFound-CZ1R5832.css","js/ServerError-BbzOUcO8.js","css/ServerError-CO_65ZoE.css"])))=>i.map(i=>d[i]);
var he=Object.defineProperty;var ve=(e,t,n)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var G=(e,t,n)=>ve(e,typeof t!="symbol"?t+"":t,n);import{gc as ee,bT as te,gd as ye,bt as w,ch as _e,bu as I,bU as U,bV as M,c8 as b,c0 as k,bv as we,b$ as be,c3 as $,bY as O,c5 as N,c6 as H,cU as Te,c7 as ke,ge as W,bA as J,gf as oe,gg as Ee,gh as Ae,dc as Ie}from"./vendor-CdA3MjAt.js";import{E as Se,a as Pe,e as Re,b as Ce,c as Le,d as Ne,f as Be,g as Ve,h as De,i as xe,j,k as q,l as Me}from"./element-plus-IkZgpaz4.js";import{B as qe}from"./umo-editor-BmhDOXHm.js";import{_ as v}from"./mermaid-e-fO57px.js";import"./onnxruntime-DkHy2lK3.js";import"./echarts-Cqw1j_Z-.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Oe(e){return new Promise(t=>setTimeout(t,e))}function Ue(e,t=1e3){return Math.min(t*Math.pow(2,e),1e4)}function $e(e){if(!e.response)return!0;const t=e.response.status;return t>=500&&t<600}function Fe(e){e.interceptors.request.use(t=>{var o,r;const n=(o=t.method)==null?void 0:o.toUpperCase();if(["POST","PUT","DELETE","PATCH"].includes(n||"")){const s=je();s&&(t.headers["X-CSRFToken"]=s)}return((r=t.method)==null?void 0:r.toUpperCase())==="GET"&&(t.params={...t.params,_t:Date.now()}),t},t=>(console.error("[API Request Error]",t),Promise.reject(t)))}function He(e,t=3,n=1e3){e.interceptors.response.use(o=>{const r=o.data;if(r&&typeof r=="object"&&"success"in r&&r.success===!1){const s={message:r.message||r.error||"请求失败",code:r.code||o.status,details:r};return Promise.reject(s)}return o},async o=>{var d,c,A;const r=o.config;if(!r)return Promise.reject(o);if(r.retryConfig||(r.retryConfig={count:0,maxRetries:t,retryDelay:n}),r.retryConfig.count<r.retryConfig.maxRetries&&$e(o)){r.retryConfig.count+=1;const m=Ue(r.retryConfig.count,r.retryConfig.retryDelay);return console.warn(`[API Retry] 第${r.retryConfig.count}次重试，延迟${m}ms`,{url:r.url,method:r.method}),await Oe(m),e.request(r)}console.error("[API Response Error]",{url:r.url,method:r.method,status:(d=o.response)==null?void 0:d.status,message:o.message,data:(c=o.response)==null?void 0:c.data});const s={message:"请求失败",code:((A=o.response)==null?void 0:A.status)||0};if(o.response){const m=o.response.data;switch(m&&typeof m=="object"?(s.message=m.message||m.error||`服务器错误 (${o.response.status})`,s.code=m.code||o.response.status,s.details=m):typeof m=="string"?s.message=m:s.message=`HTTP ${o.response.status}: ${o.response.statusText}`,o.response.status){case 401:s.message="未授权，请重新登录";break;case 403:s.message=(m==null?void 0:m.message)||"无权限访问";break;case 404:s.message=(m==null?void 0:m.message)||"请求的资源不存在";break;case 422:s.message=(m==null?void 0:m.message)||"请求参数验证失败";break;case 500:s.message=(m==null?void 0:m.message)||"服务器内部错误";break;case 502:s.message="网关错误";break;case 503:s.message="服务暂时不可用";break;case 504:s.message="网关超时";break}}else o.request?(s.message="网络连接失败，请检查网络设置",s.code=0):(s.message=o.message||"请求配置错误",s.code=-1);return Promise.reject(s)})}function ne(e,t={}){const{maxRetries:n=3,retryDelay:o=1e3}=t;Fe(e),He(e,n,o)}const re={baseURL:"/api",timeout:3e4,withCredentials:!0,retryCount:3,retryDelay:1e3};function je(){const e=document.cookie.match(/csrf_token=([^;]+)/);if(e)return e[1];const t=document.querySelector('meta[name="csrf-token"]');return t?t.getAttribute("content"):null}function ze(e={}){const t={...re,...e};return ee.create({baseURL:t.baseURL,timeout:t.timeout,withCredentials:t.withCredentials,headers:{"Content-Type":"application/json"}})}class Ke{constructor(t={}){G(this,"instance");G(this,"config");this.config={...re,...t},this.instance=ze(this.config),ne(this.instance,{maxRetries:this.config.retryCount,retryDelay:this.config.retryDelay})}getInstance(){return this.instance}async get(t,n,o){return(await this.instance.get(t,{params:n,...o})).data}async post(t,n,o){return(await this.instance.post(t,n,o)).data}async put(t,n,o){return(await this.instance.put(t,n,o)).data}async delete(t,n){return(await this.instance.delete(t,n)).data}async patch(t,n,o){return(await this.instance.patch(t,n,o)).data}async upload(t,n,o){return(await this.instance.post(t,n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:o})).data}async download(t,n,o){const r=await this.instance.get(t,{responseType:"blob",onDownloadProgress:o});if(n){const s=r.data,d=window.URL.createObjectURL(s),c=document.createElement("a");c.href=d,c.download=n,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(d)}return r.data}setHeader(t,n){this.instance.defaults.headers.common[t]=n}removeHeader(t){delete this.instance.defaults.headers.common[t]}setAuthToken(t){this.setHeader("Authorization",`Bearer ${t}`)}clearAuthToken(){this.removeHeader("Authorization")}}const R=new Ke;function Ge(e){return R.post("/api/feedback/submit",e)}const Je={class:"feedback-button-wrapper"},We={class:"context-info"},Xe={key:0},Ye={key:1},Qe={key:2},Ze={key:3},et={class:"dialog-footer"},tt=te({__name:"FeedbackButton",setup(e){const t=ye(),n=w(!1),o=w(!1),r=w(),s=_e({content:"",feedbackType:"general",priority:"medium"}),d={content:[{required:!0,message:"请输入问题描述",trigger:"blur"},{min:10,message:"问题描述至少10个字符",trigger:"blur"}],feedbackType:[{required:!0,message:"请选择反馈类型",trigger:"change"}],priority:[{required:!0,message:"请选择优先级",trigger:"change"}]},c=I(()=>{var _;const T=localStorage.getItem("username")||"游客",a=((_=t.meta)==null?void 0:_.title)||t.name||"未知页面",l=t.path,p=t.params.projectId?Number(t.params.projectId):t.query.projectId?Number(t.query.projectId):void 0,g=localStorage.getItem("currentProjectName")||void 0,f=localStorage.getItem("companyName")||void 0,y=localStorage.getItem("companyId")?Number(localStorage.getItem("companyId")):void 0;return{username:T,projectId:p,projectName:g,companyId:y,companyName:f,pageRoute:l,pageTitle:a}}),A=I(()=>!!(c.value.username||c.value.projectName||c.value.companyName||c.value.pageTitle)),m=()=>{s.content.trim()?j.confirm("您有未提交的反馈内容，确定要关闭吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{S(),n.value=!1}).catch(()=>{}):(S(),n.value=!1)},S=()=>{var T;(T=r.value)==null||T.resetFields(),s.content="",s.feedbackType="general",s.priority="medium"},V=async()=>{var T,a;if(r.value)try{if(!await r.value.validate())return;o.value=!0;const p={content:s.content,feedbackType:s.feedbackType,priority:s.priority,...c.value},g=await Ge(p);g.data.success?(q.success(g.data.message||"反馈提交成功，感谢您的宝贵意见！"),S(),n.value=!1):q.error("提交失败，请稍后重试")}catch(l){console.error("提交反馈失败:",l),q.error(((a=(T=l.response)==null?void 0:T.data)==null?void 0:a.error)||"提交失败，请稍后重试")}finally{o.value=!1}};return(T,a)=>{const l=Pe,p=Se,g=Le,f=De,y=Ve,_=Be,P=xe,B=Ne,L=Ce;return M(),U("div",Je,[b(p,{content:"问题登记",placement:"right"},{default:k(()=>[b(l,{class:"feedback-floating-button",type:"primary",icon:we(Re),circle:"",size:"large",onClick:a[0]||(a[0]=i=>n.value=!0)},null,8,["icon"])]),_:1}),b(L,{modelValue:n.value,"onUpdate:modelValue":a[4]||(a[4]=i=>n.value=i),title:"问题登记",width:"600px","before-close":m},{footer:k(()=>[O("div",et,[b(l,{onClick:m},{default:k(()=>[...a[15]||(a[15]=[N("取消",-1)])]),_:1}),b(l,{type:"primary",loading:o.value,onClick:V},{default:k(()=>[...a[16]||(a[16]=[N(" 提交 ",-1)])]),_:1},8,["loading"])])]),default:k(()=>[A.value?(M(),be(g,{key:0,title:"以下信息将与您的反馈一起提交",type:"info",closable:!1,class:"context-alert"},{default:k(()=>[O("div",We,[c.value.username?(M(),U("p",Xe,[a[5]||(a[5]=O("strong",null,"当前用户:",-1)),N(" "+H(c.value.username),1)])):$("",!0),c.value.projectName?(M(),U("p",Ye,[a[6]||(a[6]=O("strong",null,"所属项目:",-1)),N(" "+H(c.value.projectName),1)])):$("",!0),c.value.companyName?(M(),U("p",Qe,[a[7]||(a[7]=O("strong",null,"所属公司:",-1)),N(" "+H(c.value.companyName),1)])):$("",!0),c.value.pageTitle?(M(),U("p",Ze,[a[8]||(a[8]=O("strong",null,"当前页面:",-1)),N(" "+H(c.value.pageTitle),1)])):$("",!0)])]),_:1})):$("",!0),b(B,{ref_key:"formRef",ref:r,model:s,rules:d,"label-width":"100px",class:"feedback-form"},{default:k(()=>[b(_,{label:"反馈类型",prop:"feedbackType"},{default:k(()=>[b(y,{modelValue:s.feedbackType,"onUpdate:modelValue":a[1]||(a[1]=i=>s.feedbackType=i)},{default:k(()=>[b(f,{value:"bug"},{default:k(()=>[...a[9]||(a[9]=[N("Bug反馈",-1)])]),_:1}),b(f,{value:"suggestion"},{default:k(()=>[...a[10]||(a[10]=[N("功能建议",-1)])]),_:1}),b(f,{value:"general"},{default:k(()=>[...a[11]||(a[11]=[N("一般问题",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),b(_,{label:"优先级",prop:"priority"},{default:k(()=>[b(y,{modelValue:s.priority,"onUpdate:modelValue":a[2]||(a[2]=i=>s.priority=i)},{default:k(()=>[b(f,{value:"low"},{default:k(()=>[...a[12]||(a[12]=[N("低",-1)])]),_:1}),b(f,{value:"medium"},{default:k(()=>[...a[13]||(a[13]=[N("中",-1)])]),_:1}),b(f,{value:"high"},{default:k(()=>[...a[14]||(a[14]=[N("高",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),b(_,{label:"问题描述",prop:"content"},{default:k(()=>[b(P,{modelValue:s.content,"onUpdate:modelValue":a[3]||(a[3]=i=>s.content=i),type:"textarea",rows:6,placeholder:"请详细描述您遇到的问题或建议...",maxlength:"2000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ot=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},nt=ot(tt,[["__scopeId","data-v-a5aa5b81"]]),rt=te({__name:"App",setup(e){return(t,n)=>{const o=Te("router-view");return M(),U(ke,null,[b(o),b(nt)],64)}}}),at=[{path:"/login",name:"Login",component:()=>v(()=>import("./Login-DNwXa8IN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])),meta:{requiresAuth:!1,title:"登录",hideBreadcrumb:!0,showInMenu:!1}},{path:"/",component:()=>v(()=>import("./MainLayout-CUR2fYyO.js"),__vite__mapDeps([11,2,3,4,1,5,12,6,7,8,9,13,14,15,16])),meta:{requiresAuth:!0},redirect:{name:"Home"},children:[{path:"",name:"Home",component:()=>v(()=>import("./Dashboard-BDWgEsMi.js"),__vite__mapDeps([17,1,2,3,4,5,14,15,18,19,20,21,22,6,7,8,9,23,13])),meta:{title:"工作台",icon:"bi-house",category:"workspace",order:1,affix:!0,requiresAuth:!1,description:"项目总览和快捷入口"}},{path:"tender-management",name:"TenderManagement",component:()=>v(()=>import("./Management-DrES3-Q2.js"),__vite__mapDeps([24,1,2,3,4,5,18,19,20,21,22,6,7,8,9,15,25,26,13])),meta:{title:"投标管理",icon:"bi-file-earmark-text",category:"project",order:2,keepAlive:!0,description:"HITL人机协同系统"}},{path:"tender-management/:id",name:"TenderManagementDetail",component:()=>v(()=>import("./ManagementDetail-B8XbFEyE.js"),__vite__mapDeps([27,1,2,3,4,5,18,19,28,12,6,7,8,9,13,15,25,14,29])),meta:{title:"项目详情",icon:"bi-file-earmark-text",parent:"TenderManagement",showInMenu:!1,hideBreadcrumb:!1,description:"查看项目详细信息和资格要求"}},{path:"business-response",name:"BusinessResponse",component:()=>v(()=>import("./Response-DzH7udbL.js"),__vite__mapDeps([30,1,2,3,4,5,31,32,19,12,6,7,8,9,13,33,34,15,25,14,35,36])),meta:{title:"商务应答",icon:"bi-briefcase",category:"ai-tools",order:3,description:"智能生成商务应答文档"}},{path:"point-to-point",name:"PointToPoint",component:()=>v(()=>import("./PointToPoint-VLHMiurV.js"),__vite__mapDeps([37,1,2,3,4,5,38,19,31,32,12,6,7,8,9,13,33,34,15,35,14,39])),meta:{title:"点对点应答",icon:"bi-arrow-left-right",category:"ai-tools",order:4,description:"针对招标要求逐点响应"}},{path:"tech-proposal",name:"TechProposal",component:()=>v(()=>import("./TechProposal-CrvZXZvA.js"),__vite__mapDeps([40,1,2,3,4,5,38,19,31,32,12,6,7,8,9,13,33,34,15,35,14,41])),meta:{title:"技术方案",icon:"bi-file-code",category:"ai-tools",order:5,description:"AI生成技术方案大纲"}},{path:"final-tender",name:"FinalTender",component:()=>v(()=>import("./FinalTender-suadP8VK.js"),__vite__mapDeps([42,1,2,3,4,5,18,19,28,6,7,8,9,35,15,14,43,13])),meta:{title:"最终标书",icon:"bi-file-earmark-zip",category:"ai-tools",order:6,description:"智能整合生成最终投标文件"}},{path:"tender-scoring",name:"TenderScoring",component:()=>v(()=>import("./Scoring-C4Qysnv2.js"),__vite__mapDeps([44,1,2,3,4,5,38,19,6,7,8,9,15,45,13])),meta:{title:"标书评分",icon:"bi-star",category:"ai-tools",order:6,description:"AI辅助标书评分和风险分析"}},{path:"knowledge",name:"Knowledge",redirect:{name:"CompanyLibrary"},meta:{title:"知识中心",icon:"bi-book",order:7,description:"AI系统的大脑和资料库"},children:[{path:"company-library",name:"CompanyLibrary",component:()=>v(()=>import("./CompanyLibrary-BbJRmwtv.js"),__vite__mapDeps([46,1,2,3,4,5,18,19,20,21,6,7,8,9,25,47,13])),meta:{title:"企业库",icon:"bi-building",order:1,parent:"Knowledge",keepAlive:!0,description:"管理企业基本信息和资质证书"}},{path:"company/:id",name:"CompanyDetail",component:()=>v(()=>import("./CompanyDetail-CcyTdHOi.js"),__vite__mapDeps([48,1,2,3,4,5,18,19,6,7,8,9,25,21,31,32,49,13])),meta:{title:"企业详情",icon:"bi-building",parent:"Knowledge",showInMenu:!1,hideBreadcrumb:!1,description:"查看和编辑企业详细信息"}},{path:"case-library",name:"CaseLibrary",component:()=>v(()=>import("./CaseLibrary-SPelYylg.js"),__vite__mapDeps([50,1,2,3,4,5,18,19,20,21,6,7,8,9,51,25,52,13])),meta:{title:"案例库",icon:"bi-archive",order:2,parent:"Knowledge",keepAlive:!0,description:"管理历史项目案例"}},{path:"case/:id",name:"CaseDetail",component:()=>v(()=>import("./CaseDetail-DFjqNkTI.js"),__vite__mapDeps([53,1,2,3,4,5,18,19,6,7,8,9,51,20,32,25,54,13])),meta:{title:"案例详情",icon:"bi-archive",parent:"Knowledge",showInMenu:!1,hideBreadcrumb:!1,description:"查看和编辑案例详细信息"}},{path:"document-library",name:"DocumentLibrary",component:()=>v(()=>import("./DocumentLibrary-Dh-_VzTe.js"),__vite__mapDeps([55,1,2,3,4,5,20,19,21,6,7,8,9,56,13])),meta:{title:"文档库",icon:"bi-folder",order:3,parent:"Knowledge",keepAlive:!0,description:"管理企业知识文档"}},{path:"resume-library",name:"ResumeLibrary",component:()=>v(()=>import("./ResumeLibrary-CVBW6Cgx.js"),__vite__mapDeps([57,1,2,3,4,5,18,19,20,21,6,7,8,9,51,58,59,13])),meta:{title:"简历库",icon:"bi-person-badge",order:4,parent:"Knowledge",keepAlive:!0,description:"管理人员简历信息"}},{path:"resume/:id",name:"ResumeDetail",component:()=>v(()=>import("./ResumeDetail-CDU-iMX_.js"),__vite__mapDeps([60,1,2,3,4,5,18,19,6,7,8,9,51,58,20,32,61,13])),meta:{title:"简历详情",icon:"bi-person-badge",parent:"Knowledge",showInMenu:!1,hideBreadcrumb:!1,description:"查看和编辑简历详细信息"}}]},{path:"abtest",name:"ABTest",redirect:{name:"ParserComparison"},meta:{title:"AB测试",icon:"bi-bug",category:"abtest",order:8,description:"开发调试工具（仅管理员可见）"},children:[{path:"parser-comparison",name:"ParserComparison",component:()=>v(()=>import("./ParserComparison-BBBhNxfR.js"),__vite__mapDeps([62,1,2,3,4,5,21,19,6,7,8,9,63,13])),meta:{title:"目录解析对比",icon:"bi-file-earmark-diff",order:1,parent:"ABTest",description:"对比不同解析方法的准确率",requiresAuth:!1}},{path:"editor-test",name:"EditorTest",component:()=>v(()=>import("./EditorTest-C8519Soi.js"),__vite__mapDeps([64,1,2,3,4,5,6,7,8,9,33,19,65,13])),meta:{title:"编辑器测试",icon:"bi-pencil-square",order:2,parent:"ABTest",description:"Umo Editor功能测试"}},{path:"outline-comparison",name:"OutlineComparison",component:()=>v(()=>import("./OutlineComparison-FTf9-vCH.js"),__vite__mapDeps([66,1,2,3,4,5,35,15,14,12,6,7,8,9,13,25,67,19])),meta:{title:"大纲生成对比",icon:"bi-diagram-3",order:3,parent:"ABTest",description:"对比不同大纲生成算法的效果"}},{path:"user-management",name:"UserManagement",component:()=>v(()=>import("./UserManagement-CKQfj6BG.js"),__vite__mapDeps([68,1,2,3,4,5,6,7,8,9,69])),meta:{title:"用户管理",icon:"bi-people",order:4,parent:"ABTest",description:"用户和角色管理"}}]}]},{path:"/tender-processing/:projectId?",name:"TenderProcessing",component:()=>v(()=>import("./Processing-DnyIlRBG.js"),__vite__mapDeps([70,1,2,3,4,5,20,19,21,6,7,8,9,71,13])),meta:{requiresAuth:!0,title:"投标处理",icon:"bi-gear",showInMenu:!1,hideBreadcrumb:!1,customClass:"tender-processing-page"}},{path:"/system-status",name:"SystemStatus",component:()=>v(()=>import("./Status-M_peSNhW.js"),__vite__mapDeps([72,1,2,3,4,5,6,7,8,9,73])),meta:{requiresAuth:!0,title:"系统状态",icon:"bi-hdd",showInMenu:!1,permission:"admin:view"}},{path:"/help",name:"Help",component:()=>v(()=>import("./Help-BIw6S6NB.js"),__vite__mapDeps([74,1,2,3,4,5,20,19,21,6,7,8,9,75,13])),meta:{requiresAuth:!1,title:"帮助中心",icon:"bi-question-circle",showInMenu:!1}},{path:"/403",name:"Forbidden",component:()=>v(()=>import("./Forbidden-DNh_1tOb.js"),__vite__mapDeps([76,1,2,3,4,5,6,7,8,9,77])),meta:{requiresAuth:!1,title:"403 - 无权限访问",hideBreadcrumb:!0,showInMenu:!1}},{path:"/404",name:"NotFound",component:()=>v(()=>import("./NotFound-B3Atkxi3.js"),__vite__mapDeps([78,1,2,3,4,5,6,7,8,9,79])),meta:{requiresAuth:!1,title:"404 - 页面未找到",hideBreadcrumb:!0,showInMenu:!1}},{path:"/500",name:"ServerError",component:()=>v(()=>import("./ServerError-BbzOUcO8.js"),__vite__mapDeps([80,1,2,3,4,5,6,7,8,9,81])),meta:{requiresAuth:!1,title:"500 - 服务器错误",hideBreadcrumb:!0,showInMenu:!1}},{path:"/:pathMatch(.*)*",redirect:{name:"NotFound"}}],Q={"#home":"/","#project-overview":"/project-overview","#tender-management":"/tender-management","#business-response":"/business-response","#point-to-point":"/point-to-point","#tech-proposal":"/tech-proposal","#check-export":"/check-export","#tender-scoring":"/tender-scoring","#knowledge-company-library":"/knowledge/company-library","#knowledge-case-library":"/knowledge/case-library","#knowledge-document-library":"/knowledge/document-library","#knowledge-resume-library":"/knowledge/resume-library"},x={async login(e){var n;const t=await R.post("/auth/login",e);return(n=t.data)!=null&&n.token&&(localStorage.setItem("auth_token",t.data.token),R.setAuthToken(t.data.token)),t},async logout(){const e=await R.post("/auth/logout");return localStorage.removeItem("auth_token"),R.clearAuthToken(),e},async getCurrentUser(){return R.get("/auth/user")},async updateCurrentUser(e){return R.put("/auth/user",e)},async changePassword(e){return R.post("/auth/change-password",e)},async resetPassword(e,t){return R.post("/auth/reset-password",{user_id:e,new_password:t})},async verifyToken(){return R.get("/auth/verify-token")},async refreshToken(){var t;const e=await R.post("/auth/refresh-token");return(t=e.data)!=null&&t.token&&(localStorage.setItem("auth_token",e.data.token),R.setAuthToken(e.data.token)),e},restoreAuth(){const e=localStorage.getItem("auth_token");e&&R.setAuthToken(e)}};ne(R.getInstance(),{maxRetries:3,retryDelay:1e3});const ae=W("user",()=>{const e=w(null),t=w(null),n=w([]),o=w(!1),r=w(null),s=I(()=>!!e.value&&!!t.value),d=I(()=>{var i;return((i=e.value)==null?void 0:i.id)||null}),c=I(()=>{var i;return((i=e.value)==null?void 0:i.username)||""}),A=I(()=>{var i;return((i=e.value)==null?void 0:i.email)||""}),m=I(()=>i=>n.value.includes(i)),S=I(()=>{var i;return((i=e.value)==null?void 0:i.role)==="admin"||n.value.includes("admin")});async function V(i){o.value=!0,r.value=null;try{const h=await x.login(i);return h.success&&h.data?(e.value=h.data.user,t.value=h.data.token||null,P(),!0):(r.value=h.message||"登录失败",!1)}catch(h){return r.value=h.message||"登录失败",!1}finally{o.value=!1}}async function T(){o.value=!0;try{await x.logout()}catch(i){console.error("登出请求失败:",i)}finally{e.value=null,t.value=null,n.value=[],r.value=null,B(),o.value=!1}}async function a(){o.value=!0,r.value=null;try{const i=await x.getCurrentUser();i.success&&i.data&&(e.value=i.data,P())}catch(i){r.value=i.message||"获取用户信息失败",console.error("获取用户信息失败:",i)}finally{o.value=!1}}async function l(i){o.value=!0,r.value=null;try{const h=await x.updateCurrentUser(i);return h.success&&h.data?(e.value=h.data,P(),!0):(r.value=h.message||"更新失败",!1)}catch(h){return r.value=h.message||"更新失败",!1}finally{o.value=!1}}async function p(i,h){o.value=!0,r.value=null;try{const D=await x.changePassword({old_password:i,new_password:h});return D.success?!0:(r.value=D.message||"密码修改失败",!1)}catch(D){return r.value=D.message||"密码修改失败",!1}finally{o.value=!1}}async function g(){var i;if(!t.value)return!1;try{const h=await x.verifyToken();return h.success&&((i=h.data)!=null&&i.valid)?(h.data.user&&(e.value=h.data.user,P()),!0):(await T(),!1)}catch(h){return console.error("Token验证失败:",h),await T(),!1}}async function f(){try{const i=await x.refreshToken();return i.success&&i.data?(t.value=i.data.token,i.data.user&&(e.value=i.data.user),P(),!0):!1}catch(i){return console.error("Token刷新失败:",i),!1}}function y(i){n.value=i,P()}function _(){try{const i=localStorage.getItem("user"),h=localStorage.getItem("auth_token"),D=localStorage.getItem("user_permissions");i&&(e.value=JSON.parse(i)),h&&(t.value=h,x.restoreAuth()),D&&(n.value=JSON.parse(D))}catch(i){console.error("恢复用户状态失败:",i)}}function P(){try{e.value&&localStorage.setItem("user",JSON.stringify(e.value)),t.value&&localStorage.setItem("auth_token",t.value),n.value.length>0&&localStorage.setItem("user_permissions",JSON.stringify(n.value))}catch(i){console.error("保存用户状态失败:",i)}}function B(){localStorage.removeItem("user"),localStorage.removeItem("auth_token"),localStorage.removeItem("user_permissions")}function L(){e.value=null,t.value=null,n.value=[],o.value=!1,r.value=null,B()}return{currentUser:e,token:t,permissions:n,loading:o,error:r,isLoggedIn:s,userId:d,username:c,userEmail:A,hasPermission:m,isAdmin:S,login:V,logout:T,fetchCurrentUser:a,updateUser:l,changePassword:p,verifyToken:g,refreshToken:f,setPermissions:y,restoreFromStorage:_,saveToStorage:P,clearStorage:B,$reset:L}}),st=W("settings",()=>{const e=w("light"),t=w("zh-CN"),n=w(!0),o=w(!0),r=w(!1),s=w(!0),d=w(!0),c=w(!1),A=w(!0),m=w(!0),S=w("fade"),V=I(()=>e.value==="dark"),T=I(()=>e.value==="light"),a=I(()=>t.value==="zh-CN"),l=I(()=>t.value==="en-US");function p(u){e.value=u,f(),C()}function g(){p(e.value==="light"?"dark":"light")}function f(){const u=document.documentElement;e.value==="dark"?u.classList.add("dark"):u.classList.remove("dark"),u.setAttribute("data-theme",e.value)}function y(u){t.value=u,_(),C()}function _(){document.documentElement.setAttribute("lang",t.value)}function P(u){n.value=u,C()}function B(){P(!n.value)}function L(u){o.value=u,C()}function i(){L(!o.value)}function h(u){r.value=u,F(),C()}function D(){h(!r.value)}function F(){const u=document.documentElement;r.value?u.classList.add("compact-mode"):u.classList.remove("compact-mode")}function X(u){s.value=u,C()}function ie(){X(!s.value)}function ue(u){d.value=u,C()}function le(u){c.value=u,C()}function ce(u){A.value=u,C()}function de(u){m.value=u,C()}function me(u){S.value=u,C()}function pe(u){u.theme!==void 0&&p(u.theme),u.language!==void 0&&y(u.language),u.autoSave!==void 0&&P(u.autoSave),u.showHelpTooltips!==void 0&&L(u.showHelpTooltips),u.compactMode!==void 0&&h(u.compactMode)}function fe(){try{const u=localStorage.getItem("app_settings");if(u){const E=JSON.parse(u);e.value=E.theme||"light",t.value=E.language||"zh-CN",n.value=E.autoSave!==void 0?E.autoSave:!0,o.value=E.showHelpTooltips!==void 0?E.showHelpTooltips:!0,r.value=E.compactMode||!1,s.value=E.showSidebar!==void 0?E.showSidebar:!0,d.value=E.showBreadcrumb!==void 0?E.showBreadcrumb:!0,c.value=E.showTabs||!1,A.value=E.showFooter!==void 0?E.showFooter:!0,m.value=E.fixedHeader!==void 0?E.fixedHeader:!0,S.value=E.pageTransition||"fade",f(),_(),F()}}catch(u){console.error("恢复设置失败:",u)}}function C(){try{const u={theme:e.value,language:t.value,autoSave:n.value,showHelpTooltips:o.value,compactMode:r.value,showSidebar:s.value,showBreadcrumb:d.value,showTabs:c.value,showFooter:A.value,fixedHeader:m.value,pageTransition:S.value};localStorage.setItem("app_settings",JSON.stringify(u))}catch(u){console.error("保存设置失败:",u)}}function Y(){e.value="light",t.value="zh-CN",n.value=!0,o.value=!0,r.value=!1,s.value=!0,d.value=!0,c.value=!1,A.value=!0,m.value=!0,S.value="fade",f(),_(),F(),C()}function ge(){Y()}return J(e,()=>{f()}),J(t,()=>{_()}),J(r,()=>{F()}),{theme:e,language:t,autoSave:n,showHelpTooltips:o,compactMode:r,showSidebar:s,showBreadcrumb:d,showTabs:c,showFooter:A,fixedHeader:m,pageTransition:S,isDarkMode:V,isLightMode:T,isChineseLanguage:a,isEnglishLanguage:l,setTheme:p,toggleTheme:g,setLanguage:y,setAutoSave:P,toggleAutoSave:B,setShowHelpTooltips:L,toggleHelpTooltips:i,setCompactMode:h,toggleCompactMode:D,setShowSidebar:X,toggleSidebar:ie,setShowBreadcrumb:ue,setShowTabs:le,setShowFooter:ce,setFixedHeader:de,setPageTransition:me,updateSettings:pe,restoreFromStorage:fe,saveToStorage:C,resetToDefaults:Y,$reset:ge}}),it=W("notification",()=>{const e=w([]),t=w(5),n=I(()=>e.value.length),o=I(()=>e.value.length>0),r=I(()=>e.value.length),s=I(()=>e.value.slice(0,t.value));function d(f,y,_,P){const B=`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,L={id:B,type:f,title:y,message:_,duration:P||3e3,timestamp:new Date};return e.value.unshift(L),e.value.length>t.value&&(e.value=e.value.slice(0,t.value)),L.duration&&L.duration>0&&setTimeout(()=>{V(B)},L.duration),B}function c(f,y="",_){return d("success",f,y,_)}function A(f,y="",_){return d("error",f,y,_||5e3)}function m(f,y="",_){return d("warning",f,y,_)}function S(f,y="",_){return d("info",f,y,_)}function V(f){const y=e.value.findIndex(_=>_.id===f);y!==-1&&e.value.splice(y,1)}function T(){e.value=[]}function a(f){e.value=e.value.filter(y=>y.type!==f)}function l(f){t.value=f,e.value.length>f&&(e.value=e.value.slice(0,f))}function p(f){return e.value.find(y=>y.id===f)||null}function g(){e.value=[],t.value=5}return{notifications:e,maxNotifications:t,notificationsCount:n,hasNotifications:o,unreadCount:r,recentNotifications:s,addNotification:d,success:c,error:A,warning:m,info:S,removeNotification:V,clearAll:T,clearByType:a,setMaxNotifications:l,getNotification:p,$reset:g}});oe();function z(){const e=it();function t(a,l){let p,g;typeof l=="string"?(p=`${a}: ${l}`,g=3e3):(p=a,g=l||3e3),q.success({message:p,duration:g,showClose:!0}),e.success("操作成功",p,g)}function n(a,l){let p,g;typeof l=="string"?(p=`${a}: ${l}`,g=5e3):(p=a,g=l||5e3),q.error({message:p,duration:g,showClose:!0}),e.error("操作失败",p,g)}function o(a,l){let p,g;typeof l=="string"?(p=`${a}: ${l}`,g=3e3):(p=a,g=l||3e3),q.warning({message:p,duration:g,showClose:!0}),e.warning("警告",p,g)}function r(a,l){let p,g;typeof l=="string"?(p=`${a}: ${l}`,g=3e3):(p=a,g=l||3e3),q.info({message:p,duration:g,showClose:!0}),e.info("提示",p,g)}function s(a){Me({title:a.title||"通知",message:a.message,type:a.type||"info",duration:a.duration||4500,showClose:a.showClose!==!1,dangerouslyUseHTMLString:a.dangerouslyUseHTMLString||!1});const l=a.type||"info";e.addNotification(l,a.title||"通知",a.message,a.duration)}function d(a,l){s({title:a,message:l,type:"success",duration:4500})}function c(a,l){s({title:a,message:l,type:"error",duration:6e3})}function A(a,l){s({title:a,message:l,type:"warning",duration:4500})}function m(a,l){s({title:a,message:l,type:"info",duration:4500})}async function S(a){try{return await j.confirm(a.message,a.title||"确认",{confirmButtonText:a.confirmButtonText||"确定",cancelButtonText:a.cancelButtonText||"取消",type:a.type||"warning",distinguishCancelAndClose:!0}),!0}catch{return!1}}async function V(a,l="提示"){await j.alert(a,l,{confirmButtonText:"确定",type:"info"})}async function T(a,l="输入"){try{const{value:p}=await j.prompt(a,l,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/.+/,inputErrorMessage:"输入不能为空"});return p||""}catch{return""}}return{success:t,error:n,warning:o,info:r,notify:s,notifySuccess:d,notifyError:c,notifyWarning:A,notifyInfo:m,confirm:S,alert:V,prompt:T}}function Bt(e){const t=[],n=e.matched.filter(o=>{var r,s;return((r=o.meta)==null?void 0:r.title)&&!((s=o.meta)!=null&&s.hideBreadcrumb)});return n.forEach((o,r)=>{t.push({title:o.meta.title,path:r===n.length-1?void 0:o.path,icon:o.meta.icon,disabled:r===n.length-1})}),t}function ut(e,t=""){const n=[];return e.forEach(o=>{var d,c;if(((d=o.meta)==null?void 0:d.showInMenu)===!1||!((c=o.meta)!=null&&c.title))return;const r=t+(o.path.startsWith("/")?o.path:`/${o.path}`),s={name:o.name,path:r,title:o.meta.title,icon:o.meta.icon,order:o.meta.order,meta:o.meta,children:[]};o.children&&o.children.length>0&&(s.children=ut(o.children,r)),n.push(s)}),n.sort((o,r)=>(o.order||999)-(r.order||999)),n}function lt(e,t){var o;const n=(o=e.meta)==null?void 0:o.permission;return n?typeof n=="string"?t.includes(n):Array.isArray(n)?n.some(r=>t.includes(r)):!1:!0}function ct(e){return e&&Q[e]?Q[e]:null}function dt(e,t="元景AI智能标书生成平台"){var o;const n=(o=e.meta)==null?void 0:o.title;return n?`${n} - ${t}`:t}function mt(e){pt(e),ft(e),gt(e)}function pt(e){e.beforeEach(async(t,n,o)=>{if(ht(),vt(t,o))return;if(!await yt(t,n,o)){K();return}if(!_t(t,o)){K();return}wt(t),o()})}function ft(e){e.afterEach((t,n)=>{K(),bt(t,n),Tt(t)})}function gt(e){e.onError(t=>{console.error("[Router] Navigation error:",t);const{error:n}=z();K(),t.message.includes("Failed to fetch dynamically imported module")?n("页面加载失败，请刷新页面重试"):t.message.includes("Redirected when going from")?n("路由配置错误，请联系管理员"):n("页面加载失败")})}function ht(){st().showProgress&&typeof window<"u"&&window.NProgress&&window.NProgress.start()}function K(){typeof window<"u"&&window.NProgress&&window.NProgress.done()}function vt(e,t){const n=window.location.hash,o=ct(n);return o?(console.log(`[Router] 重定向旧hash路由: ${n} → ${o}`),t({path:o,replace:!0}),!0):!1}async function yt(e,t,n){const o=ae(),r=e.matched;let s;for(let d=r.length-1;d>=0;d--){const c=r[d];if(c.meta.requiresAuth!==void 0){s=c.meta.requiresAuth;break}}if(s===!1||s===void 0)return!0;if(!o.isLoggedIn&&(o.restoreFromStorage(),!o.isLoggedIn)){console.warn(`[Router] 未登录，重定向到登录页: ${e.path}`);const{warning:d}=z();return d("请先登录"),n({name:"Login",query:{redirect:e.fullPath},replace:!0}),!1}try{if(!await o.verifyToken()){console.warn("[Router] Token失效，重定向到登录页");const{warning:c}=z();return c("登录已过期，请重新登录"),await o.logout(),n({name:"Login",query:{redirect:e.fullPath},replace:!0}),!1}}catch(d){return console.error("[Router] Token验证失败:",d),await o.logout(),n({name:"Login",query:{redirect:e.fullPath},replace:!0}),!1}return!0}function _t(e,t){const n=ae();if(!e.meta.permission)return!0;const o=n.permissions;if(!lt(e,o)){console.warn(`[Router] 无权限访问: ${e.path}`,{required:e.meta.permission,userPermissions:o});const{error:s}=z();return s("您没有权限访问此页面"),t({name:"Forbidden",replace:!0}),!1}return!0}function wt(e){const t=dt(e);document.title=t,e.meta.description&&Z("description",e.meta.description),e.meta.keywords&&Array.isArray(e.meta.keywords)&&Z("keywords",e.meta.keywords.join(", "))}function Z(e,t){let n=document.querySelector(`meta[name="${e}"]`);n||(n=document.createElement("meta"),n.setAttribute("name",e),document.head.appendChild(n)),n.setAttribute("content",t)}function bt(e,t){const n=t.name||"unknown",o=e.name||"unknown";console.log(`[Router] ${String(n)} → ${String(o)}`,{from:t.path,to:e.path,params:e.params,query:e.query})}function Tt(e){typeof window<"u"&&window.dispatchEvent(new CustomEvent("pageview",{detail:{path:e.path,name:e.name,title:e.meta.title}}))}const kt=(e,t,n)=>n||(e.hash?{el:e.hash,behavior:"smooth",top:80}:e.meta.keepScrollPosition?!1:{top:0,behavior:"smooth"}),se=Ee({history:Ae("/"),routes:at,scrollBehavior:kt,strict:!1,sensitive:!1});mt(se);async function Et(){try{await ee.get("/api/csrf-token",{withCredentials:!0}),console.log("[CSRF] Token initialized successfully")}catch(e){console.error("[CSRF] Failed to initialize token:",e)}}async function At(){await Et();const e=Ie(rt);e.use(oe()),e.use(se);try{e.use(qe,{toolbar:{defaultMode:"ribbon"}}),console.log("[App] Umo Editor v8.x 注册成功")}catch(t){console.error("[App] Umo Editor 注册失败:",t)}e.mount("#app")}At();export{ot as _,z as a,it as b,Bt as c,st as d,R as e,ut as g,ae as u};
