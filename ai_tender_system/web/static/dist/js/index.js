const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/Login-DXM12qWd.js","js/element-plus-ZLeSHaWT.js","js/vue-core-CiAVTOOY.js","js/vendor-ZqVwfHSb.js","js/utils-CTJnFPw-.js","css/vendor-CTYNMfMW.css","css/element-plus-CsO-miTJ.css","css/Login-B-iG05V3.css","js/MainLayout-BEC8ww9e.js","js/DocumentPreview-C2RSkj1M.js","js/umo-editor-zkeZL3VF.js","css/umo-editor-Cc4lFSKO.css","css/DocumentPreview-9T0r9oCV.css","js/project-DAr3RjR2.js","js/tender-ZYcn_VXM.js","css/MainLayout-LeVYZ3lC.css","js/Dashboard-DP-1b1yb.js","js/Loading-BvtdKuLc.js","css/HistoryFilesPanel-B2DyCtW2.css","js/Empty-CJhqXSjL.js","js/Card-Dwkx9QfB.js","js/IconButton-BwurBQue.js","css/Dashboard-DWQ9ZF9m.css","js/Management-COHPLQtN.js","js/company-DX6fQVXW.js","css/Management-CrXiPZGq.css","js/ManagementDetail-D03wMslx.js","js/PageHeader-C8PosvJu.js","css/ManagementDetail-BCiJUyDL.css","js/Response-DYjkZCOP.js","js/DocumentUploader-CIZaBxgJ.js","js/imageCompressor-CTkRt5bg.js","js/RichTextEditor-C5_Afe7b.js","js/helpers-C_fgYmnZ.js","js/useProjectDocuments-Bd39Ghee.js","css/Response-CC7GrIEZ.css","js/PointToPoint-Bgl-1ff2.js","js/SSEStreamViewer-DKhL2Yz8.js","css/PointToPoint-CSt6Rd2x.css","js/TechProposal-xS54Pjrs.js","css/TechProposal-IHnJHU4d.css","js/FinalTender-CwHNBmzw.js","css/FinalTender-DLoB7eCZ.css","js/Scoring-CVdfi_T2.js","css/Scoring-Cd8V3IVR.css","js/CompanyLibrary-CjzcsK4s.js","css/CompanyLibrary-CgZmVZcL.css","js/CompanyDetail-BPeyEDK6.js","css/CompanyDetail-BMu1pgsR.css","js/CaseLibrary-DmySmXf5.js","js/formatters-D-henrcx.js","css/CaseLibrary-D7uxqcDz.css","js/CaseDetail-9P0C_V1M.js","css/CaseDetail-D1M0_4O0.css","js/DocumentLibrary-DeP6zinI.js","css/DocumentLibrary-RUyYXmpT.css","js/ResumeLibrary-AlUFg7xi.js","js/validators-BHjNrE0Y.js","css/ResumeLibrary-DWgHM5Fv.css","js/ResumeDetail-BOifuENV.js","css/ResumeDetail-C2PXieTn.css","js/ParserComparison-BYXQdaES.js","css/ParserComparison-CeZSTNRu.css","js/EditorTest-Dd65K9E-.js","css/EditorTest-DL1IYzqW.css","js/OutlineComparison-Df-D45u8.js","css/OutlineComparison-DW1eMxn2.css","js/UserManagement-DrnvS6e0.js","css/UserManagement-BmqDzzgM.css","js/Processing-DLcGzSyi.js","css/Processing-D4pjUHzW.css","js/Status-BCi8jh-E.js","css/Status-DPS3juPa.css","js/Help-C12Klx7S.js","css/Help-2wyDC7FD.css","js/Forbidden-B53qOzV-.js","css/Forbidden-DUz6m6MJ.css","js/NotFound-DpWtTIOg.js","css/NotFound-CZ1R5832.css","js/ServerError-BY8wQ-bV.js","css/ServerError-CO_65ZoE.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,n)=>((t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n)(t,"symbol"!=typeof a?a+"":a,n);import{v as a,r as n,W as o,c as r,aJ as i,x as s,O as u,F as l,y as c,u as d,E as m,I as p,B as g,K as h,L as f,ag as v,M as y,aK as _,w,aL as b,aM as T,aN as k,ar as I}from"./vue-core-CiAVTOOY.js";import{m as E}from"./utils-CTJnFPw-.js";import{E as A,a as P,b as L,c as S,e as C,d as j,f as D,g as R,h as O,i as N,j as M,k as V,l as B}from"./element-plus-ZLeSHaWT.js";import{bE as x}from"./vendor-ZqVwfHSb.js";function U(e){e.interceptors.request.use(e=>{var t,a;const n=null==(t=e.method)?void 0:t.toUpperCase();if(["POST","PUT","DELETE","PATCH"].includes(n||"")){const t=function(){const e=document.cookie.match(/csrf_token=([^;]+)/);if(e)return e[1];const t=document.querySelector('meta[name="csrf-token"]');if(t)return t.getAttribute("content");return null}();t&&(e.headers["X-CSRFToken"]=t)}return"GET"===(null==(a=e.method)?void 0:a.toUpperCase())&&(e.params={...e.params,_t:Date.now()}),e},e=>Promise.reject(e))}function q(e,t=3,a=1e3){e.interceptors.response.use(e=>{const t=e.data;if(t&&"object"==typeof t&&"success"in t&&!1===t.success){const a={message:t.message||t.error||"请求失败",code:t.code||e.status,details:t};return Promise.reject(a)}return e},async n=>{var o;const r=n.config;if(!r)return Promise.reject(n);if(r.retryConfig||(r.retryConfig={count:0,maxRetries:t,retryDelay:a}),r.retryConfig.count<r.retryConfig.maxRetries&&function(e){if(!e.response)return!0;const t=e.response.status;return t>=500&&t<600}(n)){r.retryConfig.count+=1;const t=function(e,t=1e3){return Math.min(t*Math.pow(2,e),1e4)}(r.retryConfig.count,r.retryConfig.retryDelay);return await(i=t,new Promise(e=>setTimeout(e,i))),e.request(r)}var i;const s={message:"请求失败",code:(null==(o=n.response)?void 0:o.status)||0};if(n.response){const e=n.response.data;switch(e&&"object"==typeof e?(s.message=e.message||e.error||`服务器错误 (${n.response.status})`,s.code=e.code||n.response.status,s.details=e):s.message="string"==typeof e?e:`HTTP ${n.response.status}: ${n.response.statusText}`,n.response.status){case 401:s.message="未授权，请重新登录";break;case 403:s.message=(null==e?void 0:e.message)||"无权限访问";break;case 404:s.message=(null==e?void 0:e.message)||"请求的资源不存在";break;case 422:s.message=(null==e?void 0:e.message)||"请求参数验证失败";break;case 500:s.message=(null==e?void 0:e.message)||"服务器内部错误";break;case 502:s.message="网关错误";break;case 503:s.message="服务暂时不可用";break;case 504:s.message="网关超时"}}else n.request?(s.message="网络连接失败，请检查网络设置",s.code=0):(s.message=n.message||"请求配置错误",s.code=-1);return Promise.reject(s)})}function H(e,t={}){const{maxRetries:a=3,retryDelay:n=1e3}=t;U(e),q(e,a,n)}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const F={baseURL:"/api",timeout:3e4,withCredentials:!0,retryCount:3,retryDelay:1e3};const $=new class{constructor(e={}){t(this,"instance"),t(this,"config"),this.config={...F,...e},this.instance=function(e={}){const t={...F,...e};return E.create({baseURL:t.baseURL,timeout:t.timeout,withCredentials:t.withCredentials,headers:{"Content-Type":"application/json"}})}(this.config),H(this.instance,{maxRetries:this.config.retryCount,retryDelay:this.config.retryDelay})}getInstance(){return this.instance}async get(e,t,a){return(await this.instance.get(e,{params:t,...a})).data}async post(e,t,a){return(await this.instance.post(e,t,a)).data}async put(e,t,a){return(await this.instance.put(e,t,a)).data}async delete(e,t){return(await this.instance.delete(e,t)).data}async patch(e,t,a){return(await this.instance.patch(e,t,a)).data}async upload(e,t,a){return(await this.instance.post(e,t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:a})).data}async download(e,t,a){const n=await this.instance.get(e,{responseType:"blob",onDownloadProgress:a});if(t){const e=n.data,a=window.URL.createObjectURL(e),o=document.createElement("a");o.href=a,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a)}return n.data}setHeader(e,t){this.instance.defaults.headers.common[e]=t}removeHeader(e){delete this.instance.defaults.headers.common[e]}setAuthToken(e){this.setHeader("Authorization",`Bearer ${e}`)}clearAuthToken(){this.removeHeader("Authorization")}};const K={class:"feedback-button-wrapper"},z={class:"context-info"},J={key:0},W={key:1},G={key:2},X={key:3},Q={class:"dialog-footer"},Y=(e,t)=>{const a=e.__vccOpts||e;for(const[n,o]of t)a[n]=o;return a},Z=Y(a({__name:"FeedbackButton",setup(e){const t=i(),a=n(!1),v=n(!1),y=n(),_=o({content:"",feedbackType:"general",priority:"medium"}),w={content:[{required:!0,message:"请输入问题描述",trigger:"blur"},{min:10,message:"问题描述至少10个字符",trigger:"blur"}],feedbackType:[{required:!0,message:"请选择反馈类型",trigger:"change"}],priority:[{required:!0,message:"请选择优先级",trigger:"change"}]},b=r(()=>{var e;const a=localStorage.getItem("username")||"游客",n=(null==(e=t.meta)?void 0:e.title)||t.name||"未知页面",o=t.path,r=t.params.projectId?Number(t.params.projectId):t.query.projectId?Number(t.query.projectId):void 0,i=localStorage.getItem("currentProjectName")||void 0,s=localStorage.getItem("companyName")||void 0;return{username:a,projectId:r,projectName:i,companyId:localStorage.getItem("companyId")?Number(localStorage.getItem("companyId")):void 0,companyName:s,pageRoute:o,pageTitle:n}}),T=r(()=>!!(b.value.username||b.value.projectName||b.value.companyName||b.value.pageTitle)),k=()=>{_.content.trim()?L.confirm("您有未提交的反馈内容，确定要关闭吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{I(),a.value=!1}).catch(()=>{}):(I(),a.value=!1)},I=()=>{var e;null==(e=y.value)||e.resetFields(),_.content="",_.feedbackType="general",_.priority="medium"},E=async()=>{var e,t,n;if(y.value)try{if(!(await y.value.validate()))return;v.value=!0;const e={content:_.content,feedbackType:_.feedbackType,priority:_.priority,...b.value},t=await(n=e,$.post("/api/feedback/submit",n));t.data.success?(V.success(t.data.message||"反馈提交成功，感谢您的宝贵意见！"),I(),a.value=!1):V.error("提交失败，请稍后重试")}catch(o){V.error((null==(t=null==(e=o.response)?void 0:e.data)?void 0:t.error)||"提交失败，请稍后重试")}finally{v.value=!1}};return(e,t)=>{const n=S,o=A,r=j,i=N,I=O,L=R,V=M,B=D,x=P;return c(),s("div",K,[u(o,{content:"问题登记",placement:"right"},{default:l(()=>[u(n,{class:"feedback-floating-button",type:"primary",icon:d(C),circle:"",size:"large",onClick:t[0]||(t[0]=e=>a.value=!0)},null,8,["icon"])]),_:1}),u(x,{modelValue:a.value,"onUpdate:modelValue":t[4]||(t[4]=e=>a.value=e),title:"问题登记",width:"600px","before-close":k},{footer:l(()=>[g("div",Q,[u(n,{onClick:k},{default:l(()=>[...t[15]||(t[15]=[h("取消",-1)])]),_:1}),u(n,{type:"primary",loading:v.value,onClick:E},{default:l(()=>[...t[16]||(t[16]=[h(" 提交 ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[T.value?(c(),m(r,{key:0,title:"以下信息将与您的反馈一起提交",type:"info",closable:!1,class:"context-alert"},{default:l(()=>[g("div",z,[b.value.username?(c(),s("p",J,[t[5]||(t[5]=g("strong",null,"当前用户:",-1)),h(" "+f(b.value.username),1)])):p("",!0),b.value.projectName?(c(),s("p",W,[t[6]||(t[6]=g("strong",null,"所属项目:",-1)),h(" "+f(b.value.projectName),1)])):p("",!0),b.value.companyName?(c(),s("p",G,[t[7]||(t[7]=g("strong",null,"所属公司:",-1)),h(" "+f(b.value.companyName),1)])):p("",!0),b.value.pageTitle?(c(),s("p",X,[t[8]||(t[8]=g("strong",null,"当前页面:",-1)),h(" "+f(b.value.pageTitle),1)])):p("",!0)])]),_:1})):p("",!0),u(B,{ref_key:"formRef",ref:y,model:_,rules:w,"label-width":"100px",class:"feedback-form"},{default:l(()=>[u(L,{label:"反馈类型",prop:"feedbackType"},{default:l(()=>[u(I,{modelValue:_.feedbackType,"onUpdate:modelValue":t[1]||(t[1]=e=>_.feedbackType=e)},{default:l(()=>[u(i,{value:"bug"},{default:l(()=>[...t[9]||(t[9]=[h("Bug反馈",-1)])]),_:1}),u(i,{value:"suggestion"},{default:l(()=>[...t[10]||(t[10]=[h("功能建议",-1)])]),_:1}),u(i,{value:"general"},{default:l(()=>[...t[11]||(t[11]=[h("一般问题",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),u(L,{label:"优先级",prop:"priority"},{default:l(()=>[u(I,{modelValue:_.priority,"onUpdate:modelValue":t[2]||(t[2]=e=>_.priority=e)},{default:l(()=>[u(i,{value:"low"},{default:l(()=>[...t[12]||(t[12]=[h("低",-1)])]),_:1}),u(i,{value:"medium"},{default:l(()=>[...t[13]||(t[13]=[h("中",-1)])]),_:1}),u(i,{value:"high"},{default:l(()=>[...t[14]||(t[14]=[h("高",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),u(L,{label:"问题描述",prop:"content"},{default:l(()=>[u(V,{modelValue:_.content,"onUpdate:modelValue":t[3]||(t[3]=e=>_.content=e),type:"textarea",rows:6,placeholder:"请详细描述您遇到的问题或建议...",maxlength:"2000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-a5aa5b81"]]),ee=a({__name:"App",setup:e=>(e,t)=>{const a=v("router-view");return c(),s(y,null,[u(a),u(Z)],64)}}),te=[{path:"/login",name:"Login",component:()=>x(()=>import("./Login-DXM12qWd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),meta:{requiresAuth:!1,title:"登录",hideBreadcrumb:!0,showInMenu:!1}},{path:"/",component:()=>x(()=>import("./MainLayout-BEC8ww9e.js"),__vite__mapDeps([8,2,3,4,5,1,6,9,10,11,12,13,14,15])),meta:{requiresAuth:!0},redirect:{name:"Home"},children:[{path:"",name:"Home",component:()=>x(()=>import("./Dashboard-DP-1b1yb.js"),__vite__mapDeps([16,1,2,3,4,5,6,13,14,17,18,19,20,21,10,11,22,12])),meta:{title:"工作台",icon:"bi-house",category:"workspace",order:1,affix:!0,description:"项目总览和快捷入口"}},{path:"tender-management",name:"TenderManagement",component:()=>x(()=>import("./Management-COHPLQtN.js"),__vite__mapDeps([23,1,2,3,4,5,6,17,18,19,20,21,10,11,14,24,25,12])),meta:{title:"投标管理",icon:"bi-file-earmark-text",category:"project",order:2,keepAlive:!0,description:"HITL人机协同系统"}},{path:"tender-management/:id",name:"TenderManagementDetail",component:()=>x(()=>import("./ManagementDetail-D03wMslx.js"),__vite__mapDeps([26,1,2,3,4,5,6,17,18,27,9,10,11,12,14,24,13,28])),meta:{title:"项目详情",icon:"bi-file-earmark-text",parent:"TenderManagement",showInMenu:!1,hideBreadcrumb:!1,description:"查看项目详细信息和资格要求"}},{path:"business-response",name:"BusinessResponse",component:()=>x(()=>import("./Response-DYjkZCOP.js"),__vite__mapDeps([29,1,2,3,4,5,6,30,31,18,9,10,11,12,32,33,14,24,13,34,35])),meta:{title:"商务应答",icon:"bi-briefcase",category:"ai-tools",order:3,description:"智能生成商务应答文档"}},{path:"point-to-point",name:"PointToPoint",component:()=>x(()=>import("./PointToPoint-Bgl-1ff2.js"),__vite__mapDeps([36,1,2,3,4,5,6,37,18,30,31,9,10,11,12,32,33,14,34,13,38])),meta:{title:"点对点应答",icon:"bi-arrow-left-right",category:"ai-tools",order:4,description:"针对招标要求逐点响应"}},{path:"tech-proposal",name:"TechProposal",component:()=>x(()=>import("./TechProposal-xS54Pjrs.js"),__vite__mapDeps([39,1,2,3,4,5,6,37,18,30,31,9,10,11,12,32,33,14,34,13,40])),meta:{title:"技术方案",icon:"bi-file-code",category:"ai-tools",order:5,description:"AI生成技术方案大纲"}},{path:"final-tender",name:"FinalTender",component:()=>x(()=>import("./FinalTender-CwHNBmzw.js"),__vite__mapDeps([41,1,2,3,4,5,6,17,18,27,10,11,34,14,13,42,12])),meta:{title:"最终标书",icon:"bi-file-earmark-zip",category:"ai-tools",order:6,description:"智能整合生成最终投标文件"}},{path:"tender-scoring",name:"TenderScoring",component:()=>x(()=>import("./Scoring-CVdfi_T2.js"),__vite__mapDeps([43,1,2,3,4,5,6,37,18,10,11,14,44,12])),meta:{title:"标书评分",icon:"bi-star",category:"ai-tools",order:6,description:"AI辅助标书评分和风险分析"}},{path:"knowledge",name:"Knowledge",redirect:{name:"CompanyLibrary"},meta:{title:"知识中心",icon:"bi-book",order:7,description:"AI系统的大脑和资料库"},children:[{path:"company-library",name:"CompanyLibrary",component:()=>x(()=>import("./CompanyLibrary-CjzcsK4s.js"),__vite__mapDeps([45,1,2,3,4,5,6,17,18,19,20,10,11,24,46,12])),meta:{title:"企业库",icon:"bi-building",order:1,parent:"Knowledge",keepAlive:!0,description:"管理企业基本信息和资质证书"}},{path:"company/:id",name:"CompanyDetail",component:()=>x(()=>import("./CompanyDetail-BPeyEDK6.js"),__vite__mapDeps([47,1,2,3,4,5,6,17,18,10,11,24,20,30,31,48,12])),meta:{title:"企业详情",icon:"bi-building",parent:"Knowledge",showInMenu:!1,hideBreadcrumb:!1,description:"查看和编辑企业详细信息"}},{path:"case-library",name:"CaseLibrary",component:()=>x(()=>import("./CaseLibrary-DmySmXf5.js"),__vite__mapDeps([49,1,2,3,4,5,6,17,18,19,20,10,11,50,24,51,12])),meta:{title:"案例库",icon:"bi-archive",order:2,parent:"Knowledge",keepAlive:!0,description:"管理历史项目案例"}},{path:"case/:id",name:"CaseDetail",component:()=>x(()=>import("./CaseDetail-9P0C_V1M.js"),__vite__mapDeps([52,1,2,3,4,5,6,17,18,10,11,50,19,31,24,53,12])),meta:{title:"案例详情",icon:"bi-archive",parent:"Knowledge",showInMenu:!1,hideBreadcrumb:!1,description:"查看和编辑案例详细信息"}},{path:"document-library",name:"DocumentLibrary",component:()=>x(()=>import("./DocumentLibrary-DeP6zinI.js"),__vite__mapDeps([54,1,2,3,4,5,6,19,18,20,10,11,55,12])),meta:{title:"文档库",icon:"bi-folder",order:3,parent:"Knowledge",keepAlive:!0,description:"管理企业知识文档"}},{path:"resume-library",name:"ResumeLibrary",component:()=>x(()=>import("./ResumeLibrary-AlUFg7xi.js"),__vite__mapDeps([56,1,2,3,4,5,6,17,18,19,20,10,11,50,57,58,12])),meta:{title:"简历库",icon:"bi-person-badge",order:4,parent:"Knowledge",keepAlive:!0,description:"管理人员简历信息"}},{path:"resume/:id",name:"ResumeDetail",component:()=>x(()=>import("./ResumeDetail-BOifuENV.js"),__vite__mapDeps([59,1,2,3,4,5,6,17,18,10,11,50,57,19,31,60,12])),meta:{title:"简历详情",icon:"bi-person-badge",parent:"Knowledge",showInMenu:!1,hideBreadcrumb:!1,description:"查看和编辑简历详细信息"}}]},{path:"abtest",name:"ABTest",redirect:{name:"ParserComparison"},meta:{title:"AB测试",icon:"bi-bug",category:"abtest",order:8,description:"开发调试工具（仅管理员可见）"},children:[{path:"parser-comparison",name:"ParserComparison",component:()=>x(()=>import("./ParserComparison-BYXQdaES.js"),__vite__mapDeps([61,1,2,3,4,5,6,20,18,10,11,62,12])),meta:{title:"目录解析对比",icon:"bi-file-earmark-diff",order:1,parent:"ABTest",description:"对比不同解析方法的准确率",requiresAuth:!1}},{path:"editor-test",name:"EditorTest",component:()=>x(()=>import("./EditorTest-Dd65K9E-.js"),__vite__mapDeps([63,1,2,3,4,5,6,10,11,32,18,64,12])),meta:{title:"编辑器测试",icon:"bi-pencil-square",order:2,parent:"ABTest",description:"Umo Editor功能测试"}},{path:"outline-comparison",name:"OutlineComparison",component:()=>x(()=>import("./OutlineComparison-Df-D45u8.js"),__vite__mapDeps([65,1,2,3,4,5,6,34,14,13,9,10,11,12,24,66,18])),meta:{title:"大纲生成对比",icon:"bi-diagram-3",order:3,parent:"ABTest",description:"对比不同大纲生成算法的效果"}},{path:"user-management",name:"UserManagement",component:()=>x(()=>import("./UserManagement-DrnvS6e0.js"),__vite__mapDeps([67,1,2,3,4,5,6,68])),meta:{title:"用户管理",icon:"bi-people",order:4,parent:"ABTest",description:"用户和角色管理"}}]}]},{path:"/tender-processing/:projectId?",name:"TenderProcessing",component:()=>x(()=>import("./Processing-DLcGzSyi.js"),__vite__mapDeps([69,1,2,3,4,5,6,19,18,20,10,11,70,12])),meta:{requiresAuth:!0,title:"投标处理",icon:"bi-gear",showInMenu:!1,hideBreadcrumb:!1,customClass:"tender-processing-page"}},{path:"/system-status",name:"SystemStatus",component:()=>x(()=>import("./Status-BCi8jh-E.js"),__vite__mapDeps([71,1,2,3,4,5,6,72])),meta:{requiresAuth:!0,title:"系统状态",icon:"bi-hdd",showInMenu:!1}},{path:"/help",name:"Help",component:()=>x(()=>import("./Help-C12Klx7S.js"),__vite__mapDeps([73,1,2,3,4,5,6,19,18,20,10,11,74,12])),meta:{requiresAuth:!1,title:"帮助中心",icon:"bi-question-circle",showInMenu:!1}},{path:"/403",name:"Forbidden",component:()=>x(()=>import("./Forbidden-B53qOzV-.js"),__vite__mapDeps([75,1,2,3,4,5,6,76])),meta:{requiresAuth:!1,title:"403 - 无权限访问",hideBreadcrumb:!0,showInMenu:!1}},{path:"/404",name:"NotFound",component:()=>x(()=>import("./NotFound-DpWtTIOg.js"),__vite__mapDeps([77,1,2,3,4,5,6,78])),meta:{requiresAuth:!1,title:"404 - 页面未找到",hideBreadcrumb:!0,showInMenu:!1}},{path:"/500",name:"ServerError",component:()=>x(()=>import("./ServerError-BY8wQ-bV.js"),__vite__mapDeps([79,1,2,3,4,5,6,80])),meta:{requiresAuth:!1,title:"500 - 服务器错误",hideBreadcrumb:!0,showInMenu:!1}},{path:"/:pathMatch(.*)*",redirect:{name:"NotFound"}}],ae={"#home":"/","#project-overview":"/project-overview","#tender-management":"/tender-management","#business-response":"/business-response","#point-to-point":"/point-to-point","#tech-proposal":"/tech-proposal","#check-export":"/check-export","#tender-scoring":"/tender-scoring","#knowledge-company-library":"/knowledge/company-library","#knowledge-case-library":"/knowledge/case-library","#knowledge-document-library":"/knowledge/document-library","#knowledge-resume-library":"/knowledge/resume-library"},ne={async login(e){var t;const a=await $.post("/auth/login",e);return(null==(t=a.data)?void 0:t.token)&&(localStorage.setItem("auth_token",a.data.token),$.setAuthToken(a.data.token)),a},async logout(){const e=await $.post("/auth/logout");return localStorage.removeItem("auth_token"),$.clearAuthToken(),e},getCurrentUser:async()=>$.get("/auth/user"),updateCurrentUser:async e=>$.put("/auth/user",e),changePassword:async e=>$.post("/auth/change-password",e),resetPassword:async(e,t)=>$.post("/auth/reset-password",{user_id:e,new_password:t}),verifyToken:async()=>$.get("/auth/verify-token"),async refreshToken(){var e;const t=await $.post("/auth/refresh-token");return(null==(e=t.data)?void 0:e.token)&&(localStorage.setItem("auth_token",t.data.token),$.setAuthToken(t.data.token)),t},restoreAuth(){const e=localStorage.getItem("auth_token");e&&$.setAuthToken(e)}};H($.getInstance(),{maxRetries:3,retryDelay:1e3});const oe=_("user",()=>{const e=n(null),t=n(null),a=n([]),o=n(!1),i=n(null),s=r(()=>!!e.value&&!!t.value),u=r(()=>!!t.value),l=r(()=>{var t;return(null==(t=e.value)?void 0:t.id)||null}),c=r(()=>{var t;return(null==(t=e.value)?void 0:t.username)||""}),d=r(()=>{var t;return(null==(t=e.value)?void 0:t.email)||""}),m=r(()=>e=>a.value.includes(e)),p=r(()=>{var t;return"admin"===(null==(t=e.value)?void 0:t.role)||a.value.includes("admin")});async function g(){o.value=!0;try{await ne.logout()}catch(n){}finally{e.value=null,t.value=null,a.value=[],i.value=null,f(),o.value=!1}}function h(){try{e.value&&localStorage.setItem("user",JSON.stringify(e.value)),t.value&&localStorage.setItem("auth_token",t.value),a.value.length>0&&localStorage.setItem("user_permissions",JSON.stringify(a.value))}catch(n){}}function f(){localStorage.removeItem("user"),localStorage.removeItem("auth_token"),localStorage.removeItem("user_permissions")}return{currentUser:e,token:t,permissions:a,loading:o,error:i,isLoggedIn:s,hasToken:u,userId:l,username:c,userEmail:d,hasPermission:m,isAdmin:p,login:async function(a){o.value=!0,i.value=null;try{const n=await ne.login(a);return n.success&&n.data?(e.value=n.data.user,t.value=n.data.token||null,h(),!0):(i.value=n.message||"登录失败",!1)}catch(n){return i.value=n.message||"登录失败",!1}finally{o.value=!1}},logout:g,fetchCurrentUser:async function(){o.value=!0,i.value=null;try{const t=await ne.getCurrentUser();t.success&&t.data&&(e.value=t.data,h())}catch(t){i.value=t.message||"获取用户信息失败"}finally{o.value=!1}},updateUser:async function(t){o.value=!0,i.value=null;try{const a=await ne.updateCurrentUser(t);return a.success&&a.data?(e.value=a.data,h(),!0):(i.value=a.message||"更新失败",!1)}catch(a){return i.value=a.message||"更新失败",!1}finally{o.value=!1}},changePassword:async function(e,t){o.value=!0,i.value=null;try{const a=await ne.changePassword({old_password:e,new_password:t});return!!a.success||(i.value=a.message||"密码修改失败",!1)}catch(a){return i.value=a.message||"密码修改失败",!1}finally{o.value=!1}},verifyToken:async function(){var a;if(!t.value)return!1;try{const t=await ne.verifyToken();return t.success&&(null==(a=t.data)?void 0:a.valid)?(t.data.user&&(e.value=t.data.user,h()),!0):(await g(),!1)}catch(n){return await g(),!1}},refreshToken:async function(){try{const a=await ne.refreshToken();return!(!a.success||!a.data)&&(t.value=a.data.token,a.data.user&&(e.value=a.data.user),h(),!0)}catch(a){return!1}},setPermissions:function(e){a.value=e,h()},restoreFromStorage:function(){try{const n=localStorage.getItem("user"),o=localStorage.getItem("auth_token"),r=localStorage.getItem("user_permissions");n&&(e.value=JSON.parse(n)),o&&(t.value=o,ne.restoreAuth()),r&&(a.value=JSON.parse(r))}catch(n){}},saveToStorage:h,clearStorage:f,$reset:function(){e.value=null,t.value=null,a.value=[],o.value=!1,i.value=null,f()}}}),re=_("settings",()=>{const e=n("light"),t=n("zh-CN"),a=n(!0),o=n(!0),i=n(!1),s=n(!0),u=n(!0),l=n(!1),c=n(!0),d=n(!0),m=n("fade"),p=r(()=>"dark"===e.value),g=r(()=>"light"===e.value),h=r(()=>"zh-CN"===t.value),f=r(()=>"en-US"===t.value);function v(t){e.value=t,y(),P()}function y(){const t=document.documentElement;"dark"===e.value?t.classList.add("dark"):t.classList.remove("dark"),t.setAttribute("data-theme",e.value)}function _(e){t.value=e,b(),P()}function b(){document.documentElement.setAttribute("lang",t.value)}function T(e){a.value=e,P()}function k(e){o.value=e,P()}function I(e){i.value=e,E(),P()}function E(){const e=document.documentElement;i.value?e.classList.add("compact-mode"):e.classList.remove("compact-mode")}function A(e){s.value=e,P()}function P(){try{const n={theme:e.value,language:t.value,autoSave:a.value,showHelpTooltips:o.value,compactMode:i.value,showSidebar:s.value,showBreadcrumb:u.value,showTabs:l.value,showFooter:c.value,fixedHeader:d.value,pageTransition:m.value};localStorage.setItem("app_settings",JSON.stringify(n))}catch(n){}}function L(){e.value="light",t.value="zh-CN",a.value=!0,o.value=!0,i.value=!1,s.value=!0,u.value=!0,l.value=!1,c.value=!0,d.value=!0,m.value="fade",y(),b(),E(),P()}return w(e,()=>{y()}),w(t,()=>{b()}),w(i,()=>{E()}),{theme:e,language:t,autoSave:a,showHelpTooltips:o,compactMode:i,showSidebar:s,showBreadcrumb:u,showTabs:l,showFooter:c,fixedHeader:d,pageTransition:m,isDarkMode:p,isLightMode:g,isChineseLanguage:h,isEnglishLanguage:f,setTheme:v,toggleTheme:function(){v("light"===e.value?"dark":"light")},setLanguage:_,setAutoSave:T,toggleAutoSave:function(){T(!a.value)},setShowHelpTooltips:k,toggleHelpTooltips:function(){k(!o.value)},setCompactMode:I,toggleCompactMode:function(){I(!i.value)},setShowSidebar:A,toggleSidebar:function(){A(!s.value)},setShowBreadcrumb:function(e){u.value=e,P()},setShowTabs:function(e){l.value=e,P()},setShowFooter:function(e){c.value=e,P()},setFixedHeader:function(e){d.value=e,P()},setPageTransition:function(e){m.value=e,P()},updateSettings:function(e){void 0!==e.theme&&v(e.theme),void 0!==e.language&&_(e.language),void 0!==e.autoSave&&T(e.autoSave),void 0!==e.showHelpTooltips&&k(e.showHelpTooltips),void 0!==e.compactMode&&I(e.compactMode)},restoreFromStorage:function(){try{const n=localStorage.getItem("app_settings");if(n){const r=JSON.parse(n);e.value=r.theme||"light",t.value=r.language||"zh-CN",a.value=void 0===r.autoSave||r.autoSave,o.value=void 0===r.showHelpTooltips||r.showHelpTooltips,i.value=r.compactMode||!1,s.value=void 0===r.showSidebar||r.showSidebar,u.value=void 0===r.showBreadcrumb||r.showBreadcrumb,l.value=r.showTabs||!1,c.value=void 0===r.showFooter||r.showFooter,d.value=void 0===r.fixedHeader||r.fixedHeader,m.value=r.pageTransition||"fade",y(),b(),E()}}catch(n){}},saveToStorage:P,resetToDefaults:L,$reset:function(){L()}}}),ie=_("notification",()=>{const e=n([]),t=n(5),a=r(()=>e.value.length),o=r(()=>e.value.length>0),i=r(()=>e.value.length),s=r(()=>e.value.slice(0,t.value));function u(a,n,o,r){const i=`notification_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s={id:i,type:a,title:n,message:o,duration:r||3e3,timestamp:new Date};return e.value.unshift(s),e.value.length>t.value&&(e.value=e.value.slice(0,t.value)),s.duration&&s.duration>0&&setTimeout(()=>{l(i)},s.duration),i}function l(t){const a=e.value.findIndex(e=>e.id===t);-1!==a&&e.value.splice(a,1)}return{notifications:e,maxNotifications:t,notificationsCount:a,hasNotifications:o,unreadCount:i,recentNotifications:s,addNotification:u,success:function(e,t="",a){return u("success",e,t,a)},error:function(e,t="",a){return u("error",e,t,a||5e3)},warning:function(e,t="",a){return u("warning",e,t,a)},info:function(e,t="",a){return u("info",e,t,a)},removeNotification:l,clearAll:function(){e.value=[]},clearByType:function(t){e.value=e.value.filter(e=>e.type!==t)},setMaxNotifications:function(a){t.value=a,e.value.length>a&&(e.value=e.value.slice(0,a))},getNotification:function(t){return e.value.find(e=>e.id===t)||null},$reset:function(){e.value=[],t.value=5}}});function se(){const e=ie();function t(t){B({title:t.title||"通知",message:t.message,type:t.type||"info",duration:t.duration||4500,showClose:!1!==t.showClose,dangerouslyUseHTMLString:t.dangerouslyUseHTMLString||!1});const a=t.type||"info";e.addNotification(a,t.title||"通知",t.message,t.duration)}return{success:function(t,a){let n,o;"string"==typeof a?(n=`${t}: ${a}`,o=3e3):(n=t,o=a||3e3),V.success({message:n,duration:o,showClose:!0}),e.success("操作成功",n,o)},error:function(t,a){let n,o;"string"==typeof a?(n=`${t}: ${a}`,o=5e3):(n=t,o=a||5e3),V.error({message:n,duration:o,showClose:!0}),e.error("操作失败",n,o)},warning:function(t,a){let n,o;"string"==typeof a?(n=`${t}: ${a}`,o=3e3):(n=t,o=a||3e3),V.warning({message:n,duration:o,showClose:!0}),e.warning("警告",n,o)},info:function(t,a){let n,o;"string"==typeof a?(n=`${t}: ${a}`,o=3e3):(n=t,o=a||3e3),V.info({message:n,duration:o,showClose:!0}),e.info("提示",n,o)},notify:t,notifySuccess:function(e,a){t({title:e,message:a,type:"success",duration:4500})},notifyError:function(e,a){t({title:e,message:a,type:"error",duration:6e3})},notifyWarning:function(e,a){t({title:e,message:a,type:"warning",duration:4500})},notifyInfo:function(e,a){t({title:e,message:a,type:"info",duration:4500})},confirm:async function(e){try{return await L.confirm(e.message,e.title||"确认",{confirmButtonText:e.confirmButtonText||"确定",cancelButtonText:e.cancelButtonText||"取消",type:e.type||"warning",distinguishCancelAndClose:!0}),!0}catch(t){return!1}},alert:async function(e,t="提示"){await L.alert(e,t,{confirmButtonText:"确定",type:"info"})},prompt:async function(e,t="输入"){try{const{value:a}=await L.prompt(e,t,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/.+/,inputErrorMessage:"输入不能为空"});return a||""}catch{return""}}}}function ue(e){const t=[],a=e.matched.filter(e=>{var t,a;return(null==(t=e.meta)?void 0:t.title)&&!(null==(a=e.meta)?void 0:a.hideBreadcrumb)});return a.forEach((e,n)=>{t.push({title:e.meta.title,path:n===a.length-1?void 0:e.path,icon:e.meta.icon,disabled:n===a.length-1})}),t}function le(e,t=""){const a=[];return e.forEach(e=>{var n,o;if(!1===(null==(n=e.meta)?void 0:n.showInMenu))return;if(!(null==(o=e.meta)?void 0:o.title))return;const r=t+(e.path.startsWith("/")?e.path:`/${e.path}`),i={name:e.name,path:r,title:e.meta.title,icon:e.meta.icon,order:e.meta.order,meta:e.meta,children:[]};e.children&&e.children.length>0&&(i.children=le(e.children,r)),a.push(i)}),a.sort((e,t)=>(e.order||999)-(t.order||999)),a}function ce(){"undefined"!=typeof window&&window.NProgress&&window.NProgress.done()}function de(e,t){let a=document.querySelector(`meta[name="${e}"]`);a||(a=document.createElement("meta"),a.setAttribute("name",e),document.head.appendChild(a)),a.setAttribute("content",t)}b();const me=T({history:k("/"),routes:te,scrollBehavior:(e,t,a)=>a||(e.hash?{el:e.hash,behavior:"smooth",top:80}:!e.meta.keepScrollPosition&&{top:0,behavior:"smooth"}),strict:!1,sensitive:!1});var pe;(function(e){e.beforeEach(async(e,t,a)=>{if(re().showProgress&&"undefined"!=typeof window&&window.NProgress&&window.NProgress.start(),function(e,t){const a=function(e){return e&&ae[e]?ae[e]:null}(window.location.hash);return!!a&&(t({path:a,replace:!0}),!0)}(0,a))return;const n=await async function(e,t,a){const n=oe();if(!1===e.meta.requiresAuth)return!0;if(!n.isLoggedIn){if(n.restoreFromStorage(),n.hasToken)try{if(await n.verifyToken())return!0}catch(o){}if(!n.isLoggedIn)return a({name:"Login",query:{redirect:e.fullPath},replace:!0}),!1}try{if(!(await n.verifyToken()))return await n.logout(),a({name:"Login",query:{redirect:e.fullPath},replace:!0}),!1}catch(o){return await n.logout(),a({name:"Login",query:{redirect:e.fullPath},replace:!0}),!1}return!0}(e,0,a);n?(function(e){const t=function(e,t="元景AI智能标书生成平台"){var a;const n=null==(a=e.meta)?void 0:a.title;return n?`${n} - ${t}`:t}(e);document.title=t,e.meta.description&&de("description",e.meta.description),e.meta.keywords&&Array.isArray(e.meta.keywords)&&de("keywords",e.meta.keywords.join(", "))}(e),a()):ce()})})(pe=me),function(e){e.afterEach((e,t)=>{ce(),function(e,t){t.name,e.name}(e,t),function(e){"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("pageview",{detail:{path:e.path,name:e.name,title:e.meta.title}}))}(e)})}(pe),function(e){e.onError(e=>{const{error:t}=se();ce(),e.message.includes("Failed to fetch dynamically imported module")?t("页面加载失败，请刷新页面重试"):e.message.includes("Redirected when going from")?t("路由配置错误，请联系管理员"):t("页面加载失败")})}(pe),async function(){await async function(){try{await E.get("/api/csrf-token",{withCredentials:!0})}catch(e){}}();const e=I(ee);e.use(b()),e.use(me),e.mount("#app")}();export{Y as _,se as a,ie as b,ue as c,re as d,$ as e,le as g,oe as u};
