import{q as e,n as l,Q as s,a$ as a,E as i,I as t,_ as c,aZ as o,M as u}from"./index.js";/* empty css                *//* empty css                                                                          *//* empty css               */import{E as n,a as r}from"./el-select-BRmwHaPV.js";/* empty css                     */import{L as d}from"./Loading-DL9BB2_h.js";import{P as p}from"./PageHeader-_Ra4a2cc.js";/* empty css                                                                        */import{aq as v,am as m,an as _,aV as f,aw as b,as as y,ar as h,aX as k,av as g,aK as j,aS as x,aA as w,aR as z,au as F,at as V,aY as I,ay as P}from"./editor-B2OO2pov.js";/* empty css                             *//* empty css                   *//* empty css                *//* empty css                    *//* empty css                */import{E as C}from"./el-skeleton-item-JBW1JKrq.js";import{E as D}from"./index-nzMCCPZ_.js";import{E}from"./index-DxEuAmkt.js";import{E as R}from"./index-2BvDutB9.js";import{E as U,a as q}from"./index-N8cx6dDB.js";import{E as $}from"./index-CwnLIWpN.js";import{u as S}from"./useProjectDocuments-CWPtTqxz.js";import{u as T}from"./project-CTyJA4Mq.js";import{E as W}from"./index-CVQCSiPO.js";import{E as B}from"./index-DOF8wyI3.js";import"./index-C2wRk8Ho.js";import"./strings-AttvWK4d.js";import"./index-C3Wd-RFA.js";import"./toNumber-BHhAPexX.js";import"./_baseFindIndex-BTqrMG7V.js";import"./_baseIteratee-C8pVAKYE.js";import"./tender-Bln5F12J.js";const L={class:"document-merge-panel"},N={class:"merge-section"},M={class:"files-status"},A={class:"status-icon"},O={key:0,class:"bi bi-check-circle-fill text-success"},G={key:1,class:"bi bi-x-circle-fill text-danger"},H={class:"file-info"},J={class:"file-name"},K={class:"file-meta"},Q={key:1,class:"text-muted"},Z={key:0,class:"file-actions"},X={class:"status-icon"},Y={key:0,class:"bi bi-check-circle-fill text-success"},ee={key:1,class:"bi bi-dash-circle text-warning"},le={class:"file-info"},se={class:"file-name"},ae={class:"file-meta"},ie={key:1,class:"text-muted"},te={key:0,class:"file-actions"},ce={class:"status-icon"},oe={key:0,class:"bi bi-check-circle-fill text-success"},ue={key:1,class:"bi bi-x-circle-fill text-danger"},ne={class:"file-info"},re={class:"file-name"},de={class:"file-meta"},pe={key:1,class:"text-muted"},ve={key:0,class:"file-actions"},me={key:0},_e={key:1},fe={key:0,class:"merge-section"},be={class:"config-group"},ye={class:"doc-order-list"},he={class:"doc-order-item fixed"},ke={key:0,class:"doc-order-item"},ge={class:"doc-order-item"},je={class:"order-number"},xe={class:"config-group"},we={class:"options-list"},ze={class:"config-group"},Fe={class:"index-template-preview"},Ve={class:"score-items-preview"},Ie={class:"config-group"},Pe={key:1,class:"merge-section"},Ce={key:0,class:"action-area"},De={key:1,class:"merge-progress"},Ee={class:"progress-message"},Re={class:"progress-details"},Ue={key:0,class:"current"},qe={key:2,class:"merge-result"},$e={class:"result-info"},Se={class:"stats-list"},Te={key:0},We={key:1},Be={key:2},Le={class:"processing-details"},Ne={key:0},Me={key:1},Ae={key:2},Oe={key:3},Ge={class:"action-buttons"},He=c(v({__name:"DocumentMergePanel",props:{projectId:{},currentDocuments:{}},setup(c){const o=c,u=m(!0),n=m({}),r=m({required:!1,type:"none"}),d=m({include_p2p:!0,doc_order:["business","p2p","tech"],generate_toc:!0,remove_blanks:!0,unify_styles:!0,add_section_breaks:!0,output_filename:""}),p=m(!1),v=m(!1),P=m(0),S=m(""),T=m(""),W=m(""),B=m([]),He=m(null),Je=m(!0),Ke=_(()=>n.value.business&&n.value.tech),Qe=async()=>{var e,l;try{v.value=!0;const e={business:n.value.business.file_path,tech:n.value.tech.file_path};d.value.include_p2p&&n.value.p2p&&(e.p2p=n.value.p2p.file_path);const l=await a.post(`/api/projects/${o.projectId}/merge-documents`,{file_paths:e,config:{...d.value,index_config:r.value}});if(l.data.success){const e=l.data.task_id||o.projectId;p.value=!0,v.value=!1,Ze(e)}}catch(s){i.error((null==(l=null==(e=s.response)?void 0:e.data)?void 0:l.error)||"启动整合失败"),v.value=!1}},Ze=e=>{const l=new EventSource(`/api/merge-status/${e}`);l.onmessage=e=>{try{const s=JSON.parse(e.data);if(P.value=s.progress_percentage||0,T.value=s.current_step||"",s.current_step&&!B.value.includes(s.current_step)&&(W.value&&B.value.push(W.value),W.value=s.current_step),"completed"===s.overall_status){if(S.value="success",P.value=100,s.options){const e="string"==typeof s.options?JSON.parse(s.options):s.options;He.value={filename:d.value.output_filename+".docx",file_path:e.merged_document_path,file_size:e.file_size||0,stats:e.stats,created_at:(new Date).toLocaleString("zh-CN")}}p.value=!1,l.close(),i.success("文档整合完成！")}else"failed"===s.overall_status&&(S.value="exception",p.value=!1,l.close(),i.error("文档整合失败："+s.current_step))}catch(s){}},l.onerror=()=>{l.close(),p.value&&(i.error("进度监听中断"),p.value=!1)}},Xe=()=>{t.confirm("确定要重新整合吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{He.value=null,P.value=0,S.value="",T.value="",W.value="",B.value=[]}).catch(()=>{})},Ye=e=>{if(!e)return"";if(e.startsWith("/api/"))return e;let l=e;const s="/Users/lvhe/Downloads/zhongbiao/zhongbiao/";return l.startsWith(s)&&(l=l.substring(42)),l.startsWith("ai_tender_system/data/")?l=l.substring(22):l.startsWith("data/")&&(l=l.substring(5)),`/api/files/serve/${l}`},el=()=>{var e;if(null==(e=He.value)?void 0:e.file_path){const e=Ye(He.value.file_path)+"?download=true";window.open(e,"_blank")}},ll=()=>{var e;if(null==(e=He.value)?void 0:e.file_path){const e=Ye(He.value.file_path);window.open(e,"_blank")}},sl=()=>{var e;(null==(e=He.value)?void 0:e.file_path)&&(i.success("正在打开编辑器..."),i.info("编辑功能开发中..."))},al=e=>{const l=n.value[e];if(null==l?void 0:l.file_path){const e=Ye(l.file_path);window.open(e,"_blank")}},il=e=>e?e<1024?e+" B":e<1048576?(e/1024).toFixed(2)+" KB":(e/1048576).toFixed(2)+" MB":"--";return f(()=>{(async()=>{var e,l,s,t,c,p;try{if(u.value=!0,o.currentDocuments){const a=o.currentDocuments;return n.value={},a.businessResponseFile&&(n.value.business={status:"ready",file_path:a.businessResponseFile.outputFile,file_name:(null==(e=a.businessResponseFile.outputFile)?void 0:e.split("/").pop())||"商务应答文件.docx",file_size:(null==(l=a.businessResponseFile.stats)?void 0:l.file_size)||0}),a.p2pResponseFile&&(n.value.p2p={status:"ready",file_path:a.p2pResponseFile.outputFile,file_name:(null==(s=a.p2pResponseFile.outputFile)?void 0:s.split("/").pop())||"点对点应答文件.docx",file_size:(null==(t=a.p2pResponseFile.stats)?void 0:t.file_size)||0}),a.techProposalFile&&(n.value.tech={status:"ready",file_path:a.techProposalFile.outputFile,file_name:(null==(c=a.techProposalFile.outputFile)?void 0:c.split("/").pop())||"技术方案文件.docx",file_size:(null==(p=a.techProposalFile.stats)?void 0:p.file_size)||0}),d.value={include_p2p:!!n.value.p2p,doc_order:n.value.p2p?["business","p2p","tech"]:["business","tech"],generate_toc:!0,remove_blanks:!0,unify_styles:!0,add_section_breaks:!0,output_filename:`项目${o.projectId}_最终标书`},void(u.value=!1)}const i=await a.get(`/api/projects/${o.projectId}/merge-config`);if(i.data.success){const e=i.data.data;n.value=e.files||{},r.value=e.index_requirement||{required:!1,type:"none"},e.default_config&&(d.value={...e.default_config})}}catch(v){i.error("加载配置失败")}finally{u.value=!1}})()}),(a,i)=>{const t=C,c=e,o=l,m=D,_=E,f=s,Ze=R,Ye=q,tl=U,cl=$;return y(),b("div",L,[u.value?(y(),h(t,{key:0,rows:10,animated:""})):(y(),b(k,{key:1},[g("section",N,[i[18]||(i[18]=g("div",{class:"section-header"},[g("h3",null,[g("i",{class:"bi bi-file-check"}),x(" 步骤 1/3：文件状态检查")])],-1)),g("div",M,[g("div",{class:w(["file-status-item",{"file-ready":n.value.business}])},[g("div",A,[n.value.business?(y(),b("i",O)):(y(),b("i",G))]),g("div",H,[i[11]||(i[11]=g("h4",null,"商务应答文件",-1)),n.value.business?(y(),b(k,{key:0},[g("p",J,z(n.value.business.file_name),1),g("p",K,z(il(n.value.business.file_size)),1)],64)):(y(),b("p",Q,"未生成"))]),n.value.business?(y(),b("div",Z,[F(c,{size:"small",onClick:i[0]||(i[0]=e=>al("business"))},{default:V(()=>[...i[12]||(i[12]=[g("i",{class:"bi bi-eye"},null,-1),x(" 预览 ",-1)])]),_:1})])):j("",!0)],2),g("div",{class:w(["file-status-item",{"file-ready":n.value.p2p}])},[g("div",X,[n.value.p2p?(y(),b("i",Y)):(y(),b("i",ee))]),g("div",le,[i[13]||(i[13]=g("h4",null,"技术点对点应答",-1)),n.value.p2p?(y(),b(k,{key:0},[g("p",se,z(n.value.p2p.file_name),1),g("p",ae,z(il(n.value.p2p.file_size)),1)],64)):(y(),b("p",ie,"未生成（可选）"))]),n.value.p2p?(y(),b("div",te,[F(c,{size:"small",onClick:i[1]||(i[1]=e=>al("p2p"))},{default:V(()=>[...i[14]||(i[14]=[g("i",{class:"bi bi-eye"},null,-1),x(" 预览 ",-1)])]),_:1})])):j("",!0)],2),g("div",{class:w(["file-status-item",{"file-ready":n.value.tech}])},[g("div",ce,[n.value.tech?(y(),b("i",oe)):(y(),b("i",ue))]),g("div",ne,[i[15]||(i[15]=g("h4",null,"技术方案文件",-1)),n.value.tech?(y(),b(k,{key:0},[g("p",re,z(n.value.tech.file_name),1),g("p",de,z(il(n.value.tech.file_size)),1)],64)):(y(),b("p",pe,"未生成"))]),n.value.tech?(y(),b("div",ve,[F(c,{size:"small",onClick:i[2]||(i[2]=e=>al("tech"))},{default:V(()=>[...i[16]||(i[16]=[g("i",{class:"bi bi-eye"},null,-1),x(" 预览 ",-1)])]),_:1})])):j("",!0)],2)]),Ke.value?j("",!0):(y(),h(o,{key:0,type:"warning",closable:!1,"show-icon":"",class:"mt-3"},{title:V(()=>[...i[17]||(i[17]=[x(" 无法整合：缺少必需的文件 ",-1)])]),default:V(()=>[n.value.business?j("",!0):(y(),b("p",me,"• 商务应答文件未生成，请先完成商务应答")),n.value.tech?j("",!0):(y(),b("p",_e,"• 技术方案文件未生成，请先完成技术方案"))]),_:1}))]),Ke.value?(y(),b("section",fe,[i[42]||(i[42]=g("div",{class:"section-header"},[g("h3",null,[g("i",{class:"bi bi-sliders"}),x(" 步骤 2/3：整合配置")])],-1)),g("div",be,[i[27]||(i[27]=g("h4",null,[g("i",{class:"bi bi-files"}),x(" 文档组成与顺序")],-1)),g("div",ye,[g("div",he,[i[20]||(i[20]=g("span",{class:"order-number"},"1",-1)),i[21]||(i[21]=g("span",{class:"doc-name"},"商务应答",-1)),F(m,{size:"small",type:"info"},{default:V(()=>[...i[19]||(i[19]=[x("固定第一部分",-1)])]),_:1})]),n.value.p2p?(y(),b("div",ke,[i[23]||(i[23]=g("span",{class:"order-number"},"2",-1)),i[24]||(i[24]=g("span",{class:"doc-name"},"点对点应答",-1)),F(_,{modelValue:d.value.include_p2p,"onUpdate:modelValue":i[3]||(i[3]=e=>d.value.include_p2p=e)},{default:V(()=>[...i[22]||(i[22]=[x("包含此部分",-1)])]),_:1},8,["modelValue"])])):j("",!0),g("div",ge,[g("span",je,z(n.value.p2p?"3":"2"),1),i[26]||(i[26]=g("span",{class:"doc-name"},"技术方案",-1)),F(m,{size:"small",type:"success"},{default:V(()=>[...i[25]||(i[25]=[x("✓ 包含",-1)])]),_:1})])])]),g("div",xe,[i[32]||(i[32]=g("h4",null,[g("i",{class:"bi bi-palette"}),x(" 格式与目录选项")],-1)),g("div",we,[F(_,{modelValue:d.value.generate_toc,"onUpdate:modelValue":i[4]||(i[4]=e=>d.value.generate_toc=e)},{default:V(()=>[...i[28]||(i[28]=[x(" 自动生成目录（基于1-3级标题，带页码） ",-1)])]),_:1},8,["modelValue"]),F(_,{modelValue:d.value.remove_blanks,"onUpdate:modelValue":i[5]||(i[5]=e=>d.value.remove_blanks=e)},{default:V(()=>[...i[29]||(i[29]=[x(" 删除空白页和空白段落 ",-1)])]),_:1},8,["modelValue"]),F(_,{modelValue:d.value.unify_styles,"onUpdate:modelValue":i[6]||(i[6]=e=>d.value.unify_styles=e)},{default:V(()=>[...i[30]||(i[30]=[x(" 统一页眉页脚格式 ",-1)])]),_:1},8,["modelValue"]),F(_,{modelValue:d.value.add_section_breaks,"onUpdate:modelValue":i[7]||(i[7]=e=>d.value.add_section_breaks=e)},{default:V(()=>[...i[31]||(i[31]=[x(" 每部分间添加分节符 ",-1)])]),_:1},8,["modelValue"])])]),g("div",ze,[i[39]||(i[39]=g("h4",null,[g("i",{class:"bi bi-list-ol"}),x(" 索引设置")],-1)),r.value.required?"fixed_format"===r.value.type?(y(),h(o,{key:1,type:"warning",closable:!1,"show-icon":""},{title:V(()=>[...i[34]||(i[34]=[x(" 招标文件要求提供固定格式索引 ",-1)])]),default:V(()=>[g("div",Fe,[g("pre",null,z(r.value.template),1)]),F(_,{modelValue:Je.value,"onUpdate:modelValue":i[8]||(i[8]=e=>Je.value=e),disabled:"",checked:""},{default:V(()=>[...i[35]||(i[35]=[x(" 自动生成索引（必需） ",-1)])]),_:1},8,["modelValue"])]),_:1})):"score_based"===r.value.type?(y(),h(o,{key:2,type:"success",closable:!1,"show-icon":""},{title:V(()=>[...i[36]||(i[36]=[x(" 招标文件要求以评分标准建立索引 ",-1)])]),default:V(()=>[g("div",Ve,[i[37]||(i[37]=g("p",null,"将基于以下评分项生成索引：",-1)),g("ul",null,[(y(!0),b(k,null,I(r.value.score_items,e=>(y(),b("li",{key:e},z(e),1))),128))])]),F(_,{modelValue:Je.value,"onUpdate:modelValue":i[9]||(i[9]=e=>Je.value=e),disabled:"",checked:""},{default:V(()=>[...i[38]||(i[38]=[x(" 自动生成评分标准索引（必需） ",-1)])]),_:1},8,["modelValue"])]),_:1})):j("",!0):(y(),h(o,{key:0,type:"info",closable:!1,"show-icon":""},{title:V(()=>[...i[33]||(i[33]=[x(" 招标文件未要求提供索引，无需生成 ",-1)])]),_:1}))]),g("div",Ie,[i[41]||(i[41]=g("h4",null,[g("i",{class:"bi bi-file-earmark-text"}),x(" 文档名称")],-1)),F(f,{modelValue:d.value.output_filename,"onUpdate:modelValue":i[10]||(i[10]=e=>d.value.output_filename=e),placeholder:"请输入最终标书文件名",maxlength:"100","show-word-limit":""},{suffix:V(()=>[...i[40]||(i[40]=[x(".docx",-1)])]),_:1},8,["modelValue"])])])):j("",!0),Ke.value?(y(),b("section",Pe,[i[58]||(i[58]=g("div",{class:"section-header"},[g("h3",null,[g("i",{class:"bi bi-rocket-takeoff"}),x(" 步骤 3/3：开始整合")])],-1)),p.value||He.value?j("",!0):(y(),b("div",Ce,[F(c,{type:"primary",size:"large",loading:v.value,onClick:Qe},{default:V(()=>[...i[43]||(i[43]=[g("i",{class:"bi bi-play-fill"},null,-1),x(" 开始整合 ",-1)])]),_:1},8,["loading"])])),p.value?(y(),b("div",De,[F(Ze,{percentage:P.value,status:S.value},null,8,["percentage","status"]),g("p",Ee,z(T.value),1),g("div",Re,[i[46]||(i[46]=g("h5",null,"处理详情：",-1)),g("ul",null,[(y(!0),b(k,null,I(B.value,(e,l)=>(y(),b("li",{key:l,class:"completed"},[i[44]||(i[44]=g("i",{class:"bi bi-check-circle-fill"},null,-1)),x(" "+z(e),1)]))),128)),W.value?(y(),b("li",Ue,[i[45]||(i[45]=g("i",{class:"bi bi-arrow-right-circle-fill"},null,-1)),x(" "+z(W.value),1)])):j("",!0)])])])):j("",!0),He.value?(y(),b("div",qe,[F(cl,{icon:"success",title:"整合完成！","sub-title":"您的最终标书已生成"},{extra:V(()=>{var e,l,s,a,t,o;return[g("div",$e,[i[55]||(i[55]=g("h4",null,[g("i",{class:"bi bi-file-earmark-check"}),x(" 文件信息")],-1)),F(tl,{column:2,border:""},{default:V(()=>[F(Ye,{label:"文件名"},{default:V(()=>[x(z(He.value.filename),1)]),_:1}),F(Ye,{label:"文件大小"},{default:V(()=>[x(z(il(He.value.file_size)),1)]),_:1}),F(Ye,{label:"总页数"},{default:V(()=>{var e;return[x(z((null==(e=He.value.stats)?void 0:e.total_pages)||"--")+" 页 ",1)]}),_:1}),F(Ye,{label:"生成时间"},{default:V(()=>[x(z(He.value.created_at),1)]),_:1})]),_:1}),i[56]||(i[56]=g("h4",{class:"mt-3"},[g("i",{class:"bi bi-bar-chart"}),x(" 文件组成统计")],-1)),g("ul",Se,[(null==(e=He.value.stats)?void 0:e.toc_pages)?(y(),b("li",Te," 目录："+z(He.value.stats.toc_pages)+" 页 ",1)):j("",!0),g("li",null,"商务应答："+z((null==(l=He.value.stats)?void 0:l.business_pages)||"--")+" 页",1),d.value.include_p2p?(y(),b("li",We," 点对点应答："+z((null==(s=He.value.stats)?void 0:s.p2p_pages)||"--")+" 页 ",1)):j("",!0),g("li",null,"技术方案："+z((null==(a=He.value.stats)?void 0:a.tech_pages)||"--")+" 页",1),(null==(t=He.value.stats)?void 0:t.index_pages)?(y(),b("li",Be," 索引："+z(He.value.stats.index_pages)+" 页 ",1)):j("",!0)]),i[57]||(i[57]=g("h4",{class:"mt-3"},[g("i",{class:"bi bi-tools"}),x(" 处理详情")],-1)),g("ul",Le,[(null==(o=He.value.stats)?void 0:o.removed_blanks)?(y(),b("li",Ne,[i[47]||(i[47]=g("i",{class:"bi bi-check-circle text-success"},null,-1)),x(" 已删除 "+z(He.value.stats.removed_blanks)+" 个空白段落 ",1)])):j("",!0),d.value.generate_toc?(y(),b("li",Me,[...i[48]||(i[48]=[g("i",{class:"bi bi-check-circle text-success"},null,-1),x(" 已生成多级目录 ",-1)])])):j("",!0),r.value.required?(y(),b("li",Ae,[i[49]||(i[49]=g("i",{class:"bi bi-check-circle text-success"},null,-1)),x(" 已生成"+z("score_based"===r.value.type?"评分标准":"固定格式")+"索引 ",1)])):j("",!0),d.value.unify_styles?(y(),b("li",Oe,[...i[50]||(i[50]=[g("i",{class:"bi bi-check-circle text-success"},null,-1),x(" 已统一页眉页脚 ",-1)])])):j("",!0)]),g("div",Ge,[F(c,{type:"primary",size:"large",onClick:el},{default:V(()=>[...i[51]||(i[51]=[g("i",{class:"bi bi-download"},null,-1),x(" 下载Word版 ",-1)])]),_:1}),F(c,{type:"success",size:"large",onClick:ll},{default:V(()=>[...i[52]||(i[52]=[g("i",{class:"bi bi-eye"},null,-1),x(" 在线预览 ",-1)])]),_:1}),F(c,{type:"warning",size:"large",onClick:sl},{default:V(()=>[...i[53]||(i[53]=[g("i",{class:"bi bi-pencil-square"},null,-1),x(" 在线编辑 ",-1)])]),_:1}),F(c,{size:"large",onClick:Xe},{default:V(()=>[...i[54]||(i[54]=[g("i",{class:"bi bi-arrow-clockwise"},null,-1),x(" 重新整合 ",-1)])]),_:1})])])]}),_:1})])):j("",!0)])):j("",!0)],64))])}}}),[["__scopeId","data-v-4f5ce16e"]]),Je={class:"final-tender-page"},Ke={class:"selector-content"},Qe={class:"project-option"},Ze={class:"project-name"},Xe={class:"project-status"},Ye={class:"project-info"},el={class:"project-header"},ll={class:"project-meta"},sl=c(v({__name:"FinalTender",setup(l){const s=o(),a=u();T();const{projects:t,loading:c,selectedProject:v,currentDocuments:_,hasProjects:w,loadProjects:C,handleProjectChange:E,restoreProjectFromStore:R}=S(),U=m({projectId:null}),q=async()=>{await E(U.value.projectId,{onClear:()=>{},onDocumentsLoaded:e=>{const l=!!e.businessResponseFile,s=!!e.techProposalFile;l&&s||i.warning("该项目缺少商务应答或技术方案文件，无法整合")}}),U.value.projectId&&a.replace({name:"FinalTender",query:{projectId:U.value.projectId.toString()}})},$=()=>{U.value.projectId=null,a.replace({name:"FinalTender"})},L=()=>{C()};return f(async()=>{await C();const e=await R({onClear:()=>{},onDocumentsLoaded:e=>{}});e&&(U.value.projectId=e);const l=s.query.projectId;if(l&&!e){const e=Number(l);t.value.some(l=>l.id===e)&&(U.value.projectId=e,await q())}}),(l,s)=>{const a=e,i=D,o=r,u=n,m=W,f=B;return y(),b("div",Je,[F(P(p),{title:"最终标书","show-back":!1},{actions:V(()=>[F(a,{onClick:L},{default:V(()=>[...s[2]||(s[2]=[g("i",{class:"bi bi-arrow-clockwise"},null,-1),x(" 刷新 ",-1)])]),_:1})]),_:1}),P(c)?(y(),h(P(d),{key:0,text:"加载项目列表..."})):(y(),b(k,{key:1},[U.value.projectId?j("",!0):(y(),h(f,{key:0,class:"project-selector-card",shadow:"never"},{default:V(()=>[g("div",Ke,[s[4]||(s[4]=g("div",{class:"selector-icon"},[g("i",{class:"bi bi-folder2-open"})],-1)),s[5]||(s[5]=g("h3",null,"请选择要整合的项目",-1)),s[6]||(s[6]=g("p",{class:"text-muted"}," 从下方列表中选择一个已完成商务应答和技术方案的项目 ",-1)),F(u,{modelValue:U.value.projectId,"onUpdate:modelValue":s[0]||(s[0]=e=>U.value.projectId=e),placeholder:"选择项目",size:"large",filterable:"",class:"project-select",onChange:q},{default:V(()=>[(y(!0),b(k,null,I(P(t),e=>(y(),h(o,{key:e.id,label:`${e.project_name} (${e.project_number||"-"})`,value:e.id},{default:V(()=>[g("div",Qe,[g("span",Ze,z(e.project_name),1),g("div",Xe,[F(i,{type:"info",size:"small"},{default:V(()=>[x(z(e.company_name),1)]),_:2},1024)])])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),P(w)?j("",!0):(y(),h(m,{key:0,description:"暂无项目","image-size":120},{extra:V(()=>[F(a,{type:"primary",onClick:s[1]||(s[1]=e=>l.$router.push({name:"TenderManagement"}))},{default:V(()=>[...s[3]||(s[3]=[g("i",{class:"bi bi-folder-plus"},null,-1),x(" 前往项目管理 ",-1)])]),_:1})]),_:1}))])]),_:1})),U.value.projectId&&P(v)?(y(),b(k,{key:1},[F(f,{class:"current-project-card",shadow:"never"},{default:V(()=>[g("div",Ye,[g("div",el,[g("h3",null,[s[7]||(s[7]=g("i",{class:"bi bi-folder-check"},null,-1)),x(" "+z(P(v).project_name),1)]),F(a,{size:"small",text:"",onClick:$},{default:V(()=>[...s[8]||(s[8]=[g("i",{class:"bi bi-arrow-left-right"},null,-1),x(" 切换项目 ",-1)])]),_:1})]),g("p",ll," 公司："+z(P(v).company_name)+" | 项目编号："+z(P(v).project_number||"-")+" | 创建时间："+z(P(v).created_at),1)])]),_:1}),(y(),h(He,{"project-id":U.value.projectId,"current-documents":P(_),key:U.value.projectId},null,8,["project-id","current-documents"]))],64)):j("",!0)],64))])}}}),[["__scopeId","data-v-73089cec"]]);export{sl as default};
