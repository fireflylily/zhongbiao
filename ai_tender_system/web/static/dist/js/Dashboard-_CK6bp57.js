import{_ as e}from"./_plugin-vue_export-helper-BZqs1yfm.js";import{E as a}from"./el-tag-Bqv51Q1S.js";import{a as t,E as l}from"./el-select-DifvCuS7.js";import{E as n}from"./el-scrollbar-CIZTQeWR.js";/* empty css                   *//* empty css                 */import{E as i,a as s}from"./el-table-column-BD7A42cI.js";import"./el-checkbox-BGKkTKtQ.js";import{E as r}from"./el-link-CYUhxsNf.js";import{E as o,a as u}from"./el-col-DR3qk7qZ.js";import{m as c,p,_ as d,d as g,K as v,x as m,c as f,o as b,B as y,t as h,w as _,G as S,F as x,H as j,N as C,s as P,n as k,at as z,v as w,r as N,A as T,g as I,a6 as B,aB as M,I as E,aH as $,am as O,e as D,E as q,aI as A,a0 as L,aJ as F,aK as U,aL as H,j as J,q as K,O as Y,aM as G,aN as V,M as Q,aw as R,ah as W,aO as X,af as Z,aP as ee,J as ae,aQ as te,C as le,k as ne,D as ie,P as se,aR as re,ay as oe,aS as ue,a as ce,L as pe,l as de,i as ge}from"./index.js";import{t as ve}from"./tender-Z_tK6YyL.js";import{L as me}from"./Loading-CAB1YVrd.js";import{E as fe}from"./Empty-zwxEoS1s.js";import{P as be}from"./PageHeader-BjzQIq6-.js";import{C as ye}from"./Card-DZyKkX6c.js";/* empty css                */import"./DocumentUploader.vue_vue_type_style_index_0_scoped_1530a3ce_lang-kpO4p46J.js";import{d as he}from"./dayjs.min-BaR58MNQ.js";import"./strings-DTR7aduZ.js";import"./castArray-Bpm97oyT.js";import"./index-C9x2piTf.js";import"./_baseClone-DjpDAVKO.js";import"./omit-CrzxF80D.js";import"./raf-C3W2Tojd.js";import"./index-2qkNUAPG.js";const _e=Symbol("elPaginationKey"),Se=c({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:p}}),xe={click:e=>e instanceof MouseEvent},je=g({name:"ElPaginationPrev"});var Ce=d(g({...je,props:Se,emits:xe,setup(e){const a=e,{t:t}=v(),l=m(()=>a.disabled||a.currentPage<=1);return(e,a)=>(b(),f("button",{type:"button",class:"btn-prev",disabled:x(l),"aria-label":e.prevText||x(t)("el.pagination.prev"),"aria-disabled":x(l),onClick:a=>e.$emit("click",a)},[e.prevText?(b(),f("span",{key:0},h(e.prevText),1)):(b(),y(x(j),{key:1},{default:_(()=>[(b(),y(S(e.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}}),[["__file","prev.vue"]]);const Pe=c({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:p}}),ke=g({name:"ElPaginationNext"});var ze=d(g({...ke,props:Pe,emits:["click"],setup(e){const a=e,{t:t}=v(),l=m(()=>a.disabled||a.currentPage===a.pageCount||0===a.pageCount);return(e,a)=>(b(),f("button",{type:"button",class:"btn-next",disabled:x(l),"aria-label":e.nextText||x(t)("el.pagination.next"),"aria-disabled":x(l),onClick:a=>e.$emit("click",a)},[e.nextText?(b(),f("span",{key:0},h(e.nextText),1)):(b(),y(x(j),{key:1},{default:_(()=>[(b(),y(S(e.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}}),[["__file","next.vue"]]);const we=()=>C(_e,{}),Ne=c({pageSize:{type:Number,required:!0},pageSizes:{type:k(Array),default:()=>z([10,20,30,40,50,100])},popperClass:{type:String},popperStyle:{type:k([String,Object])},disabled:Boolean,teleported:Boolean,size:{type:String,values:P},appendSizeTo:String}),Te=g({name:"ElPaginationSizes"});var Ie=d(g({...Te,props:Ne,emits:["page-size-change"],setup(e,{emit:a}){const n=e,{t:i}=v(),s=w("pagination"),r=we(),o=N(n.pageSize);T(()=>n.pageSizes,(e,t)=>{if(!$(e,t)&&O(e)){const t=e.includes(n.pageSize)?n.pageSize:n.pageSizes[0];a("page-size-change",t)}}),T(()=>n.pageSize,e=>{o.value=e});const u=m(()=>n.pageSizes);function c(e){var a;e!==o.value&&(o.value=e,null==(a=r.handleSizeChange)||a.call(r,Number(e)))}return(e,a)=>(b(),f("span",{class:E(x(s).e("sizes"))},[I(x(l),{"model-value":o.value,disabled:e.disabled,"popper-class":e.popperClass,"popper-style":e.popperStyle,size:e.size,teleported:e.teleported,"validate-event":!1,"append-to":e.appendSizeTo,onChange:c},{default:_(()=>[(b(!0),f(B,null,M(x(u),e=>(b(),y(x(t),{key:e,value:e,label:e+x(i)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","popper-style","size","teleported","append-to"])],2))}}),[["__file","sizes.vue"]]);const Be=c({size:{type:String,values:P}}),Me=g({name:"ElPaginationJumper"});var Ee=d(g({...Me,props:Be,setup(e){const{t:a}=v(),t=w("pagination"),{pageCount:l,disabled:n,currentPage:i,changeEvent:s}=we(),r=N(),o=m(()=>{var e;return null!=(e=r.value)?e:null==i?void 0:i.value});function u(e){r.value=e?+e:""}function c(e){e=Math.trunc(+e),null==s||s(e),r.value=void 0}return(e,i)=>(b(),f("span",{class:E(x(t).e("jump")),disabled:x(n)},[D("span",{class:E([x(t).e("goto")])},h(x(a)("el.pagination.goto")),3),I(x(q),{size:e.size,class:E([x(t).e("editor"),x(t).is("in-pagination")]),min:1,max:x(l),disabled:x(n),"model-value":x(o),"validate-event":!1,"aria-label":x(a)("el.pagination.page"),type:"number","onUpdate:modelValue":u,onChange:c},null,8,["size","class","max","disabled","model-value","aria-label"]),D("span",{class:E([x(t).e("classifier")])},h(x(a)("el.pagination.pageClassifier")),3)],10,["disabled"]))}}),[["__file","jumper.vue"]]);const $e=c({total:{type:Number,default:1e3}}),Oe=g({name:"ElPaginationTotal"});var De=d(g({...Oe,props:$e,setup(e){const{t:a}=v(),t=w("pagination"),{disabled:l}=we();return(e,n)=>(b(),f("span",{class:E(x(t).e("total")),disabled:x(l)},h(x(a)("el.pagination.total",{total:e.total})),11,["disabled"]))}}),[["__file","total.vue"]]);const qe=c({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),Ae=g({name:"ElPaginationPager"});var Le=d(g({...Ae,props:qe,emits:[A],setup(e,{emit:a}){const t=e,l=w("pager"),n=w("icon"),{t:i}=v(),s=N(!1),r=N(!1),o=N(!1),u=N(!1),c=N(!1),p=N(!1),d=m(()=>{const e=t.pagerCount,a=(e-1)/2,l=Number(t.currentPage),n=Number(t.pageCount);let i=!1,s=!1;n>e&&(l>e-a&&(i=!0),l<n-a&&(s=!0));const r=[];if(i&&!s){for(let a=n-(e-2);a<n;a++)r.push(a)}else if(!i&&s)for(let t=2;t<e;t++)r.push(t);else if(i&&s){const a=Math.floor(e/2)-1;for(let e=l-a;e<=l+a;e++)r.push(e)}else for(let t=2;t<n;t++)r.push(t);return r}),g=m(()=>["more","btn-quickprev",n.b(),l.is("disabled",t.disabled)]),_=m(()=>["more","btn-quicknext",n.b(),l.is("disabled",t.disabled)]),S=m(()=>t.disabled?-1:0);function j(e=!1){t.disabled||(e?o.value=!0:u.value=!0)}function C(e=!1){e?c.value=!0:p.value=!0}function P(e){const l=e.target;if("li"===l.tagName.toLowerCase()&&Array.from(l.classList).includes("number")){const e=Number(l.textContent);e!==t.currentPage&&a(A,e)}else"li"===l.tagName.toLowerCase()&&Array.from(l.classList).includes("more")&&k(e)}function k(e){const l=e.target;if("ul"===l.tagName.toLowerCase()||t.disabled)return;let n=Number(l.textContent);const i=t.pageCount,s=t.currentPage,r=t.pagerCount-2;l.className.includes("more")&&(l.className.includes("quickprev")?n=s-r:l.className.includes("quicknext")&&(n=s+r)),Number.isNaN(+n)||(n<1&&(n=1),n>i&&(n=i)),n!==s&&a(A,n)}return T(()=>[t.pageCount,t.pagerCount,t.currentPage],([e,a,t])=>{const l=(a-1)/2;let n=!1,i=!1;e>a&&(n=t>a-l,i=t<e-l),o.value&&(o.value=n),u.value&&(u.value=i),s.value=n,r.value=i},{immediate:!0}),(e,a)=>(b(),f("ul",{class:E(x(l).b()),onClick:k,onKeyup:J(P,["enter"])},[e.pageCount>0?(b(),f("li",{key:0,class:E([[x(l).is("active",1===e.currentPage),x(l).is("disabled",e.disabled)],"number"]),"aria-current":1===e.currentPage,"aria-label":x(i)("el.pagination.currentPage",{pager:1}),tabindex:x(S)}," 1 ",10,["aria-current","aria-label","tabindex"])):L("v-if",!0),s.value?(b(),f("li",{key:1,class:E(x(g)),tabindex:x(S),"aria-label":x(i)("el.pagination.prevPages",{pager:e.pagerCount-2}),onMouseenter:e=>j(!0),onMouseleave:e=>o.value=!1,onFocus:e=>C(!0),onBlur:e=>c.value=!1},[!o.value&&!c.value||e.disabled?(b(),y(x(U),{key:1})):(b(),y(x(F),{key:0}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):L("v-if",!0),(b(!0),f(B,null,M(x(d),a=>(b(),f("li",{key:a,class:E([[x(l).is("active",e.currentPage===a),x(l).is("disabled",e.disabled)],"number"]),"aria-current":e.currentPage===a,"aria-label":x(i)("el.pagination.currentPage",{pager:a}),tabindex:x(S)},h(a),11,["aria-current","aria-label","tabindex"]))),128)),r.value?(b(),f("li",{key:2,class:E(x(_)),tabindex:x(S),"aria-label":x(i)("el.pagination.nextPages",{pager:e.pagerCount-2}),onMouseenter:e=>j(),onMouseleave:e=>u.value=!1,onFocus:e=>C(),onBlur:e=>p.value=!1},[!u.value&&!p.value||e.disabled?(b(),y(x(U),{key:1})):(b(),y(x(H),{key:0}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):L("v-if",!0),e.pageCount>1?(b(),f("li",{key:3,class:E([[x(l).is("active",e.currentPage===e.pageCount),x(l).is("disabled",e.disabled)],"number"]),"aria-current":e.currentPage===e.pageCount,"aria-label":x(i)("el.pagination.currentPage",{pager:e.pageCount}),tabindex:x(S)},h(e.pageCount),11,["aria-current","aria-label","tabindex"])):L("v-if",!0)],42,["onKeyup"]))}}),[["__file","pager.vue"]]);const Fe=e=>"number"!=typeof e,Ue=c({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>K(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2==1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:k(Array),default:()=>z([10,20,30,40,50,100])},popperClass:{type:String,default:""},popperStyle:{type:k([String,Object])},prevText:{type:String,default:""},prevIcon:{type:p,default:()=>ee},nextText:{type:String,default:""},nextIcon:{type:p,default:()=>Z},teleported:{type:Boolean,default:!0},small:Boolean,size:X,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),He="ElPagination";const Je=ae(g({name:He,props:Ue,emits:{"update:current-page":e=>K(e),"update:page-size":e=>K(e),"size-change":e=>K(e),change:(e,a)=>K(e)&&K(a),"current-change":e=>K(e),"prev-click":e=>K(e),"next-click":e=>K(e)},setup(e,{emit:a,slots:t}){const{t:l}=v(),n=w("pagination"),i=Y().vnode.props||{},s=G(),r=m(()=>{var a;return e.small?"small":null!=(a=e.size)?a:s.value});V({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},m(()=>!!e.small));const o="onUpdate:currentPage"in i||"onUpdate:current-page"in i||"onCurrentChange"in i,u="onUpdate:pageSize"in i||"onUpdate:page-size"in i||"onSizeChange"in i,c=m(()=>{if(Fe(e.total)&&Fe(e.pageCount))return!1;if(!Fe(e.currentPage)&&!o)return!1;if(e.layout.includes("sizes"))if(Fe(e.pageCount)){if(!Fe(e.total)&&!Fe(e.pageSize)&&!u)return!1}else if(!u)return!1;return!0}),p=N(Fe(e.defaultPageSize)?10:e.defaultPageSize),d=N(Fe(e.defaultCurrentPage)?1:e.defaultCurrentPage),g=m({get:()=>Fe(e.pageSize)?p.value:e.pageSize,set(t){Fe(e.pageSize)&&(p.value=t),u&&(a("update:page-size",t),a("size-change",t))}}),f=m(()=>{let a=0;return Fe(e.pageCount)?Fe(e.total)||(a=Math.max(1,Math.ceil(e.total/g.value))):a=e.pageCount,a}),b=m({get:()=>Fe(e.currentPage)?d.value:e.currentPage,set(t){let l=t;t<1?l=1:t>f.value&&(l=f.value),Fe(e.currentPage)&&(d.value=l),o&&(a("update:current-page",l),a("current-change",l))}});function y(e){b.value=e}function h(){e.disabled||(b.value-=1,a("prev-click",b.value))}function _(){e.disabled||(b.value+=1,a("next-click",b.value))}function S(e,a){e&&(e.props||(e.props={}),e.props.class=[e.props.class,a].join(" "))}return T(f,e=>{b.value>e&&(b.value=e)}),T([b,g],e=>{a(A,...e)},{flush:"post"}),Q(_e,{pageCount:f,disabled:m(()=>e.disabled),currentPage:b,changeEvent:y,handleSizeChange:function(e){g.value=e;const a=f.value;b.value>a&&(b.value=a)}}),()=>{var a,i;if(!c.value)return R(He,l("el.pagination.deprecationWarning")),null;if(!e.layout)return null;if(e.hideOnSinglePage&&f.value<=1)return null;const s=[],o=[],u=W("div",{class:n.e("rightwrapper")},o),p={prev:W(Ce,{disabled:e.disabled,currentPage:b.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:h}),jumper:W(Ee,{size:r.value}),pager:W(Le,{currentPage:b.value,pageCount:f.value,pagerCount:e.pagerCount,onChange:y,disabled:e.disabled}),next:W(ze,{disabled:e.disabled,currentPage:b.value,pageCount:f.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:_}),sizes:W(Ie,{pageSize:g.value,pageSizes:e.pageSizes,popperClass:e.popperClass,popperStyle:e.popperStyle,disabled:e.disabled,teleported:e.teleported,size:r.value,appendSizeTo:e.appendSizeTo}),slot:null!=(i=null==(a=null==t?void 0:t.default)?void 0:a.call(t))?i:null,total:W(De,{total:Fe(e.total)?0:e.total})},d=e.layout.split(",").map(e=>e.trim());let v=!1;return d.forEach(e=>{"->"!==e?v?o.push(p[e]):s.push(p[e]):v=!0}),S(s[0],n.is("first")),S(s[s.length-1],n.is("last")),v&&o.length>0&&(S(o[0],n.is("first")),S(o[o.length-1],n.is("last")),s.push(u)),W("div",{class:[n.b(),n.is("background",e.background),n.m(r.value)]},s)}}})),Ke=c({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:k([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:k([String,Object,Array])}}),Ye=g({name:"ElStatistic"});const Ge=ae(d(g({...Ye,props:Ke,setup(e,{expose:a}){const t=e,l=w("statistic"),n=m(()=>{const{value:e,formatter:a,precision:l,decimalSeparator:n,groupSeparator:i}=t;if(te(a))return a(e);if(!K(e)||Number.isNaN(e))return e;let[s,r=""]=String(e).split(".");return r=r.padEnd(l,"0").slice(0,l>0?l:0),s=s.replace(/\B(?=(\d{3})+(?!\d))/g,i),[s,r].join(r?n:"")});return a({displayValue:n}),(e,a)=>(b(),f("div",{class:E(x(l).b())},[e.$slots.title||e.title?(b(),f("div",{key:0,class:E(x(l).e("head"))},[le(e.$slots,"title",{},()=>[ne(h(e.title),1)])],2)):L("v-if",!0),D("div",{class:E(x(l).e("content"))},[e.$slots.prefix||e.prefix?(b(),f("div",{key:0,class:E(x(l).e("prefix"))},[le(e.$slots,"prefix",{},()=>[D("span",null,h(e.prefix),1)])],2)):L("v-if",!0),D("span",{class:E(x(l).e("number")),style:ie(e.valueStyle)},h(x(n)),7),e.$slots.suffix||e.suffix?(b(),f("div",{key:1,class:E(x(l).e("suffix"))},[le(e.$slots,"suffix",{},()=>[D("span",null,h(e.suffix),1)])],2)):L("v-if",!0)],2)],2))}}),[["__file","statistic.vue"]])),Ve=g({name:"ElTimeline",setup(e,{slots:a}){const t=w("timeline");return Q("timeline",a),()=>W("ul",{class:[t.b()]},[le(a,"default")])}}),Qe=c({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:p},hollow:Boolean}),Re=g({name:"ElTimelineItem"});var We=d(g({...Re,props:Qe,setup(e){const a=e,t=w("timeline-item"),l=m(()=>[t.e("node"),t.em("node",a.size||""),t.em("node",a.type||""),t.is("hollow",a.hollow)]);return(e,a)=>(b(),f("li",{class:E([x(t).b(),{[x(t).e("center")]:e.center}])},[D("div",{class:E(x(t).e("tail"))},null,2),e.$slots.dot?L("v-if",!0):(b(),f("div",{key:0,class:E(x(l)),style:ie({backgroundColor:e.color})},[e.icon?(b(),y(x(j),{key:0,class:E(x(t).e("icon"))},{default:_(()=>[(b(),y(S(e.icon)))]),_:1},8,["class"])):L("v-if",!0)],6)),e.$slots.dot?(b(),f("div",{key:1,class:E(x(t).e("dot"))},[le(e.$slots,"dot")],2)):L("v-if",!0),D("div",{class:E(x(t).e("wrapper"))},[e.hideTimestamp||"top"!==e.placement?L("v-if",!0):(b(),f("div",{key:0,class:E([x(t).e("timestamp"),x(t).is("top")])},h(e.timestamp),3)),D("div",{class:E(x(t).e("content"))},[le(e.$slots,"default")],2),e.hideTimestamp||"bottom"!==e.placement?L("v-if",!0):(b(),f("div",{key:1,class:E([x(t).e("timestamp"),x(t).is("bottom")])},h(e.timestamp),3))],2)],2))}}),[["__file","timeline-item.vue"]]);const Xe=ae(Ve,{TimelineItem:We}),Ze=se(We),ea=re("project",()=>{const e=N(null),a=N([]),t=N(!1),l=N(null),n=N({page:1,pageSize:10,total:0}),i=m(()=>{var a;return(null==(a=e.value)?void 0:a.id)||null}),s=m(()=>{var a;return(null==(a=e.value)?void 0:a.name)||""}),r=m(()=>{var a;return(null==(a=e.value)?void 0:a.project_number)||""}),o=m(()=>{var a;return(null==(a=e.value)?void 0:a.status)||null}),u=m(()=>!!e.value),c=m(()=>a.value.length),p=m(()=>a.value.map(e=>({label:`${e.name} (${e.project_number})`,value:e.id}))),d=m(()=>Math.ceil(n.value.total/n.value.pageSize));function g(a){e.value=a,y()}function v(){e.value=null,localStorage.removeItem("current_project")}async function f(e){t.value=!0,l.value=null,(null==e?void 0:e.page)&&(n.value.page=e.page),(null==e?void 0:e.page_size)&&(n.value.pageSize=e.page_size);try{const e=await ve.getProjects({page:n.value.page,page_size:n.value.pageSize});e.success&&e.data&&(a.value=e.data.items||e.data,n.value.total=e.data.total||a.value.length)}catch(i){l.value=i.message||"获取项目列表失败"}finally{t.value=!1}}async function b(e){t.value=!0,l.value=null;try{const t=await ve.getProject(e);if(t.success&&t.data){const l=a.value.findIndex(a=>a.id===e);return-1!==l&&Object.assign(a.value[l],{name:t.data.name,status:t.data.status,project_number:t.data.project_number}),t.data}return l.value=t.message||"获取项目详情失败",null}catch(n){return l.value=n.message||"获取项目详情失败",null}finally{t.value=!1}}function y(){try{e.value&&localStorage.setItem("current_project",JSON.stringify(e.value))}catch(a){}}return{currentProject:e,projects:a,loading:t,error:l,pagination:n,projectId:i,projectName:s,projectNumber:r,projectStatus:o,hasCurrentProject:u,projectsCount:c,projectsOptions:p,totalPages:d,setCurrentProject:g,setCurrentProjectById:async function(e){t.value=!0,l.value=null;try{const a=await ve.getProject(e);return a.success&&a.data?(g(a.data),!0):(l.value=a.message||"获取项目详情失败",!1)}catch(a){return l.value=a.message||"获取项目详情失败",!1}finally{t.value=!1}},clearCurrentProject:v,fetchProjects:f,fetchProject:b,createProject:async function(e){t.value=!0,l.value=null;try{const t=await ve.createProject(e);return t.success&&t.data?(a.value.unshift(t.data),n.value.total+=1,t.data):(l.value=t.message||"创建项目失败",null)}catch(i){return l.value=i.message||"创建项目失败",null}finally{t.value=!1}},updateProject:async function(n,i){var s;t.value=!0,l.value=null;try{const t=await ve.updateProject(n,i);if(t.success&&t.data){const l=a.value.findIndex(e=>e.id===n);return-1!==l&&Object.assign(a.value[l],t.data),(null==(s=e.value)?void 0:s.id)===n&&(Object.assign(e.value,t.data),y()),!0}return l.value=t.message||"更新项目失败",!1}catch(r){return l.value=r.message||"更新项目失败",!1}finally{t.value=!1}},deleteProject:async function(i){var s;t.value=!0,l.value=null;try{const t=await ve.deleteProject(i);return t.success?(a.value=a.value.filter(e=>e.id!==i),n.value.total=Math.max(0,n.value.total-1),(null==(s=e.value)?void 0:s.id)===i&&v(),!0):(l.value=t.message||"删除项目失败",!1)}catch(r){return l.value=r.message||"删除项目失败",!1}finally{t.value=!1}},refreshCurrentProject:async function(){var a;if(!(null==(a=e.value)?void 0:a.id))return;const t=await b(e.value.id);t&&(e.value=t,y())},setPagination:function(e,a){n.value.page=e,n.value.pageSize=a},nextPage:async function(){n.value.page<d.value&&(n.value.page+=1,await f())},prevPage:async function(){n.value.page>1&&(n.value.page-=1,await f())},restoreFromStorage:function(){try{const a=localStorage.getItem("current_project");a&&(e.value=JSON.parse(a))}catch(a){}},saveToStorage:y,$reset:function(){e.value=null,a.value=[],t.value=!1,l.value=null,n.value={page:1,pageSize:10,total:0},localStorage.removeItem("current_project")}}}),aa=["disabled"],ta=e(g({__name:"IconButton",props:{icon:{default:"bi-question-circle"},tooltip:{default:""},tooltipPlacement:{default:"top"},type:{default:"default"},size:{default:"default"},circle:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},badge:{default:""},badgeMax:{default:99},badgeType:{default:"danger"}},emits:["click"],setup(e,{emit:a}){const t=e,l=a,i=m(()=>({[`icon-button--${t.type}`]:!0,[`icon-button--${t.size}`]:!0,"icon-button--circle":t.circle,"is-disabled":t.disabled,"is-loading":t.loading})),s=m(()=>({large:20,default:18,small:16}[t.size])),r=m(()=>({fontSize:`${s.value}px`}));function o(e){t.disabled||t.loading||l("click",e)}return(a,t)=>{const l=j,u=oe,c=n;return b(),y(c,{content:e.tooltip,placement:e.tooltipPlacement,disabled:!e.tooltip},{default:_(()=>[I(u,{value:e.badge,hidden:!e.badge,max:e.badgeMax,type:e.badgeType},{default:_(()=>[D("button",{class:E(["icon-button",i.value]),disabled:e.disabled||e.loading,onClick:o},[e.loading?(b(),y(l,{key:0,class:"is-loading",size:s.value},{default:_(()=>[(b(),y(S(x(ue))))]),_:1},8,["size"])):(b(),f("i",{key:1,class:E([e.icon,"icon-button-icon"]),style:ie(r.value)},null,6))],10,aa)]),_:1},8,["value","hidden","max","type"])]),_:1},8,["content","placement","disabled"])}}}),[["__scopeId","data-v-628ec5f8"]]),la={class:"dashboard-page"},na={class:"quick-actions"},ia=["onClick"],sa={class:"action-label"},ra={class:"pagination-wrapper"},oa={class:"activity-content"},ua=e(g({__name:"Dashboard",setup(e){const t=ge(),l=ea(),{success:n,error:c,confirm:p}=ce(),d=N(!1),g=N(!1),v=N(!1),m=N({totalProjects:0,inProgressProjects:0,wonThisMonth:0,pendingTasks:0}),S=N([]),j=N(1),C=N(10),P=N(0),k=N([]),z=[{name:"start-tender",label:"开始投标",icon:"bi bi-play-circle-fill",color:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",route:"/tender-management"},{name:"business-response",label:"商务应答",icon:"bi bi-briefcase-fill",color:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",route:"/business-response"},{name:"point-to-point",label:"点对点应答",icon:"bi bi-arrow-left-right",color:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",route:"/point-to-point"},{name:"tech-proposal",label:"技术方案",icon:"bi bi-file-code-fill",color:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",route:"/tech-proposal"},{name:"tender-scoring",label:"标书评分",icon:"bi bi-star-fill",color:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",route:"/tender-scoring"},{name:"knowledge",label:"知识中心",icon:"bi bi-book-fill",color:"linear-gradient(135deg, #30cfd0 0%, #330867 100%)",route:"/knowledge/company-library"}];async function w(){g.value=!0;try{const e=await ve.getProjects({page:j.value,page_size:C.value});e.success&&e.data&&(Array.isArray(e.data)?(S.value=e.data,P.value=e.data.length):e.data.items&&(S.value=e.data.items,P.value=e.data.total||0))}catch(e){c("加载项目列表失败: "+e.message)}finally{g.value=!1}}async function T(){await w(),n("刷新成功")}function $(){t.push("/tender-management")}function O(e){l.setCurrentProject(e),t.push(`/tender-processing/${e.id}`)}function q(e){C.value=e,j.value=1,w()}function A(e){j.value=e,w()}function L(e){return{pending:"待处理",in_progress:"进行中",completed:"已完成",won:"已中标",lost:"未中标",archived:"已归档"}[e]||e}function F(e){return{document_upload:"bi bi-file-earmark-arrow-up",business_response:"bi bi-briefcase-fill",tech_proposal:"bi bi-file-code-fill",project_won:"bi bi-trophy-fill",project_lost:"bi bi-x-circle-fill"}[e]||"bi bi-circle-fill"}function U(e){return e?he(e).format("YYYY-MM-DD HH:mm"):"-"}return pe(()=>{!async function(){d.value=!0;try{setTimeout(()=>{m.value={totalProjects:156,inProgressProjects:23,wonThisMonth:8,pendingTasks:12},d.value=!1},500)}catch(e){c("加载统计数据失败: "+e.message),d.value=!1}}(),w(),async function(){v.value=!0;try{setTimeout(()=>{k.value=[{id:1,type:"document_upload",description:"上传了招标文档《某市政府采购项目招标文件.pdf》",created_at:new Date(Date.now()-72e5).toISOString()},{id:2,type:"business_response",description:"商务应答文档生成完成",created_at:new Date(Date.now()-18e6).toISOString()},{id:3,type:"tech_proposal",description:"技术方案已提交审核",created_at:new Date(Date.now()-864e5).toISOString()},{id:4,type:"project_won",description:'项目"智慧城市建设项目"中标',created_at:new Date(Date.now()-1728e5).toISOString()}],v.value=!1},300)}catch(e){c("加载活动记录失败: "+e.message),v.value=!1}}()}),(e,N)=>{const H=de,J=Ge,K=u,Y=o,G=r,V=s,Q=a,R=i,W=Je,X=Ze,Z=Xe;return b(),f("div",la,[I(x(be),{title:"工作台",description:"欢迎使用AI智能标书生成平台"},{actions:_(()=>[I(H,{type:"primary",icon:"Plus",onClick:$},{default:_(()=>[...N[2]||(N[2]=[ne(" 新建项目 ",-1)])]),_:1})]),_:1}),I(Y,{gutter:16,class:"kpi-cards"},{default:_(()=>[I(K,{xs:12,sm:12,md:6,lg:6},{default:_(()=>[I(x(ye),{shadow:"hover",loading:d.value},{default:_(()=>[I(J,{title:"总项目数",value:m.value.totalProjects},{prefix:_(()=>[...N[3]||(N[3]=[D("i",{class:"bi bi-folder-fill statistic-icon",style:{color:"#409eff"}},null,-1)])]),_:1},8,["value"])]),_:1},8,["loading"])]),_:1}),I(K,{xs:12,sm:12,md:6,lg:6},{default:_(()=>[I(x(ye),{shadow:"hover",loading:d.value},{default:_(()=>[I(J,{title:"进行中项目",value:m.value.inProgressProjects},{prefix:_(()=>[...N[4]||(N[4]=[D("i",{class:"bi bi-clock-fill statistic-icon",style:{color:"#e6a23c"}},null,-1)])]),_:1},8,["value"])]),_:1},8,["loading"])]),_:1}),I(K,{xs:12,sm:12,md:6,lg:6},{default:_(()=>[I(x(ye),{shadow:"hover",loading:d.value},{default:_(()=>[I(J,{title:"本月中标",value:m.value.wonThisMonth},{prefix:_(()=>[...N[5]||(N[5]=[D("i",{class:"bi bi-trophy-fill statistic-icon",style:{color:"#67c23a"}},null,-1)])]),_:1},8,["value"])]),_:1},8,["loading"])]),_:1}),I(K,{xs:12,sm:12,md:6,lg:6},{default:_(()=>[I(x(ye),{shadow:"hover",loading:d.value},{default:_(()=>[I(J,{title:"待处理任务",value:m.value.pendingTasks},{prefix:_(()=>[...N[6]||(N[6]=[D("i",{class:"bi bi-list-task statistic-icon",style:{color:"#f56c6c"}},null,-1)])]),_:1},8,["value"])]),_:1},8,["loading"])]),_:1})]),_:1}),I(x(ye),{title:"快捷入口",class:"quick-actions-card"},{default:_(()=>[D("div",na,[(b(),f(B,null,M(z,e=>D("div",{key:e.name,class:"action-item",onClick:a=>function(e){t.push(e.route)}(e)},[D("div",{class:"action-icon",style:ie({background:e.color})},[D("i",{class:E(e.icon)},null,2)],4),D("div",sa,h(e.label),1)],8,ia)),64))])]),_:1}),I(x(ye),{title:"进行中的项目",class:"projects-card"},{actions:_(()=>[I(x(ta),{icon:"bi-arrow-clockwise",tooltip:"刷新",onClick:T})]),default:_(()=>[g.value?(b(),y(x(me),{key:0,visible:!0,fullscreen:!1,text:"加载项目列表..."})):0===S.value.length?(b(),y(x(fe),{key:1,type:"no-data",description:"暂无进行中的项目"},{action:_(()=>[I(H,{type:"primary",onClick:$},{default:_(()=>[...N[7]||(N[7]=[ne("创建第一个项目",-1)])]),_:1})]),_:1})):(b(),f(B,{key:2},[I(R,{data:S.value,stripe:"",style:{width:"100%"}},{default:_(()=>[I(V,{prop:"name",label:"项目名称","min-width":"200"},{default:_(({row:e})=>[I(G,{type:"primary",onClick:a=>O(e)},{default:_(()=>[ne(h(e.name),1)]),_:2},1032,["onClick"])]),_:1}),I(V,{prop:"project_number",label:"项目编号",width:"150"}),I(V,{prop:"status",label:"状态",width:"120"},{default:_(({row:e})=>{return[I(Q,{type:(a=e.status,{pending:"info",in_progress:"warning",completed:"success",won:"success",lost:"danger",archived:"info"}[a]||"info")},{default:_(()=>[ne(h(L(e.status)),1)]),_:2},1032,["type"])];var a}),_:1}),I(V,{prop:"company_name",label:"关联企业",width:"200"}),I(V,{prop:"created_at",label:"创建时间",width:"180"},{default:_(({row:e})=>[ne(h(U(e.created_at)),1)]),_:1}),I(V,{label:"操作",width:"200",fixed:"right"},{default:_(({row:e})=>[I(x(ta),{icon:"bi-eye",type:"primary",tooltip:"查看详情",onClick:a=>O(e)},null,8,["onClick"]),I(x(ta),{icon:"bi-play-circle",type:"success",tooltip:"继续处理",onClick:a=>{return n=e,l.setCurrentProject(n),void t.push(`/tender-processing/${n.id}`);var n}},null,8,["onClick"]),I(x(ta),{icon:"bi-archive",type:"warning",tooltip:"归档",onClick:a=>async function(e){if(await p(`确定要归档项目"${e.name}"吗?`,"归档项目","归档后项目将不再显示在进行中列表"))try{await l.updateProject(e.id,{status:"archived"}),n("项目已归档"),await w()}catch(a){c("归档失败: "+a.message)}}(e)},null,8,["onClick"])]),_:1})]),_:1},8,["data"]),D("div",ra,[I(W,{"current-page":j.value,"onUpdate:currentPage":N[0]||(N[0]=e=>j.value=e),"page-size":C.value,"onUpdate:pageSize":N[1]||(N[1]=e=>C.value=e),total:P.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:q,onCurrentChange:A},null,8,["current-page","page-size","total"])])],64))]),_:1}),I(x(ye),{title:"最近活动",class:"activities-card"},{default:_(()=>[v.value?(b(),y(x(me),{key:0,visible:!0,fullscreen:!1,text:"加载活动记录..."})):0===k.value.length?(b(),y(x(fe),{key:1,type:"no-data",description:"暂无活动记录"})):(b(),y(Z,{key:2},{default:_(()=>[(b(!0),f(B,null,M(k.value,e=>{return b(),y(X,{key:e.id,timestamp:U(e.created_at),type:(a=e.type,{document_upload:"primary",business_response:"success",tech_proposal:"warning",project_won:"success",project_lost:"danger"}[a]||"primary"),placement:"top"},{default:_(()=>[D("div",oa,[D("i",{class:E([F(e.type),"activity-icon"])},null,2),D("span",null,h(e.description),1)])]),_:2},1032,["timestamp","type"]);var a}),128))]),_:1}))]),_:1})])}}}),[["__scopeId","data-v-3261048a"]]);export{ua as default};
