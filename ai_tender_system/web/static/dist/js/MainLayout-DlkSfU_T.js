import{d as e,u as a,m as l,r as n,n as t,p as o,q as i,c as s,s as u,e as c,v as r,x as d,g as v,w as p,i as m,j as b,E as f,y as h,o as y,F as g,z as k,t as w,l as _,A as x,B as C,C as I,D as L,G as S,H as E,I as B,h as T,J as q,T as z,K as j,L as V}from"./index.js";import{_ as A}from"./_plugin-vue_export-helper-BCo6x5W8.js";const F={class:"navbar-left"},M=["title"],P={key:0,class:"bi bi-lightbulb-fill brand-icon"},O={class:"navbar-right"},R={class:"model-option"},D={class:"user-info"},G={key:0,class:"user-name"},H={key:1,class:"bi bi-chevron-down dropdown-icon"},J=A(e({__name:"Navbar",props:{collapsed:{type:Boolean,default:!1}},emits:["toggle-sidebar"],setup(e,{emit:x}){const C=x,I=b(),L=a(),S=l(),E=n(!1),B=n(!1),T=t(()=>({"navbar--mobile":E.value,"navbar--fixed":!0})),q=t(()=>L.username||"未登录"),z=t(()=>L.avatar||""),j=t(()=>[{value:"yuanjing-deepseek-v3",label:"DeepSeek V3",icon:"bi-stars",recommended:!0,provider:"unicom"},{value:"yuanjing-qwen3-235b",label:"Qwen 2.5 235B",icon:"bi-lightning",recommended:!1,provider:"unicom"},{value:"yuanjing-glm-rumination",label:"GLM Rumination",icon:"bi-chat-dots",recommended:!1,provider:"unicom"},{value:"gpt-4o-mini",label:"GPT-4O Mini",icon:"bi-robot",recommended:!1,provider:"openai"}]),V=t({get:()=>localStorage.getItem("selectedModel")||"yuanjing-deepseek-v3",set:e=>{localStorage.setItem("selectedModel",e)}}),A=t(()=>S.unreadCount);function J(){C("toggle-sidebar")}function N(){I.push({name:"Home"})}function U(e){const a=j.value.find(a=>a.value===e);a&&(h.success(`已切换到 ${a.label} 模型`),window.dispatchEvent(new CustomEvent("ai-model-changed",{detail:{model:e}})))}function W(){document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),B.value=!1):(document.documentElement.requestFullscreen(),B.value=!0)}function Y(){h.info("通知中心功能开发中...")}async function K(e){switch(e){case"profile":I.push({name:"UserProfile"});break;case"settings":I.push({name:"Settings"});break;case"logout":try{await f.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await L.logout(),h.success("已退出登录"),I.push({name:"Login"})}catch(a){}}}function Q(){E.value=window.innerWidth<768}function X(){B.value=!!document.fullscreenElement}return o(()=>{Q(),window.addEventListener("resize",Q),document.addEventListener("fullscreenchange",X)}),i(()=>{window.removeEventListener("resize",Q),document.removeEventListener("fullscreenchange",X)}),(a,l)=>{const n=m("el-tag"),t=m("el-option"),o=m("el-select"),i=m("el-tooltip"),b=m("el-badge"),f=m("el-avatar"),h=m("el-dropdown-item"),x=m("el-dropdown-menu"),C=m("el-dropdown");return y(),s("header",{class:u(["navbar",T.value])},[c("div",F,[c("button",{class:u(["sidebar-toggle",{"is-active":!e.collapsed}]),onClick:J,title:e.collapsed?"展开侧边栏":"折叠侧边栏"},[...l[1]||(l[1]=[c("i",{class:"bi bi-list"},null,-1)])],10,M),c("div",{class:"navbar-brand",onClick:N},[E.value?r("",!0):(y(),s("i",P)),l[2]||(l[2]=c("span",{class:"brand-title"},"元景AI标书生成平台",-1))])]),c("div",O,[E.value?r("",!0):(y(),d(o,{key:0,modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=e=>V.value=e),class:"model-selector",placeholder:"选择AI模型",size:"default",onChange:U},{prefix:p(()=>[...l[3]||(l[3]=[c("i",{class:"bi bi-robot"},null,-1)])]),default:p(()=>[(y(!0),s(g,null,k(j.value,e=>(y(),d(t,{key:e.value,label:e.label,value:e.value},{default:p(()=>[c("span",R,[c("i",{class:u([e.icon,"model-icon"])},null,2),c("span",null,w(e.label),1),e.recommended?(y(),d(n,{key:0,type:"success",size:"small",class:"model-tag"},{default:p(()=>[...l[4]||(l[4]=[_(" 推荐 ",-1)])]),_:1})):r("",!0)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])),E.value?r("",!0):(y(),d(i,{key:1,content:"全屏",placement:"bottom"},{default:p(()=>[c("button",{class:"navbar-action",onClick:W},[c("i",{class:u([B.value?"bi-fullscreen-exit":"bi-fullscreen","bi"])},null,2)])]),_:1})),v(b,{value:A.value,hidden:0===A.value,class:"navbar-badge"},{default:p(()=>[v(i,{content:"通知",placement:"bottom"},{default:p(()=>[c("button",{class:"navbar-action",onClick:Y},[...l[5]||(l[5]=[c("i",{class:"bi bi-bell"},null,-1)])])]),_:1})]),_:1},8,["value","hidden"]),v(C,{trigger:"click",onCommand:K},{dropdown:p(()=>[v(x,null,{default:p(()=>[v(h,{command:"profile"},{default:p(()=>[...l[7]||(l[7]=[c("i",{class:"bi bi-person"},null,-1),c("span",null,"个人信息",-1)])]),_:1}),v(h,{command:"settings"},{default:p(()=>[...l[8]||(l[8]=[c("i",{class:"bi bi-gear"},null,-1),c("span",null,"系统设置",-1)])]),_:1}),v(h,{divided:"",command:"logout"},{default:p(()=>[...l[9]||(l[9]=[c("i",{class:"bi bi-box-arrow-right"},null,-1),c("span",null,"退出登录",-1)])]),_:1})]),_:1})]),default:p(()=>[c("div",D,[v(f,{size:32,src:z.value},{default:p(()=>[...l[6]||(l[6]=[c("i",{class:"bi bi-person-circle"},null,-1)])]),_:1},8,["src"]),E.value?r("",!0):(y(),s("span",G,w(q.value),1)),E.value?r("",!0):(y(),s("i",H))])]),_:1})])],2)}}}),[["__scopeId","data-v-fe8282f7"]]),N={key:0,class:"menu-group-title"},U={class:"group-label"},W={class:"menu-title"},Y={class:"menu-title"},K={key:0,class:"sidebar-footer"},Q=A(e({__name:"Sidebar",props:{collapsed:{type:Boolean,default:!1},uniqueOpened:{type:Boolean,default:!0},showCollapseButton:{type:Boolean,default:!0}},emits:["update:collapsed"],setup(e,{emit:a}){const l=e,n=a,o=C(),i=b(),f=t(()=>({"sidebar--collapsed":l.collapsed})),h=[{key:"workspace",label:"工作台",icon:"bi-house-fill"},{key:"project",label:"项目管理",icon:"bi-folder-fill"},{key:"ai-tools",label:"AI核心工具",icon:"bi-robot"},{key:"knowledge",label:"知识中心",icon:"bi-book-fill"}],_=t(()=>{const e=i.getRoutes();return x(e).filter(e=>{var a;return!1!==(null==(a=e.meta)?void 0:a.showInMenu)})}),L=t(()=>{const e={};return _.value.forEach(a=>{var l;const n=(null==(l=a.meta)?void 0:l.category)||"other";e[n]||(e[n]=[]),e[n].push(a)}),Object.keys(e).forEach(a=>{e[a].sort((e,a)=>(e.order||99)-(a.order||99))}),e}),S=t(()=>{const{path:e}=o;return e});function E(e){e!==o.path&&i.push(e)}function B(){n("update:collapsed",!l.collapsed)}return I(()=>o.path,()=>{}),(a,l)=>{const n=m("el-menu-item"),t=m("el-sub-menu"),o=m("el-divider"),i=m("el-menu"),b=m("el-scrollbar");return y(),s("aside",{class:u(["sidebar",f.value])},[v(b,{class:"sidebar-scrollbar"},{default:p(()=>[v(i,{"default-active":S.value,collapse:e.collapsed,"unique-opened":e.uniqueOpened,"collapse-transition":!1,class:"sidebar-menu",onSelect:E},{default:p(()=>[(y(),s(g,null,k(h,a=>(y(),s(g,{key:a.key},[L.value[a.key]&&L.value[a.key].length>0?(y(),s(g,{key:0},[e.collapsed?r("",!0):(y(),s("div",N,[c("i",{class:u([a.icon,"group-icon"])},null,2),c("span",U,w(a.label),1)])),(y(!0),s(g,null,k(L.value[a.key],e=>(y(),s(g,{key:e.path},[e.children&&0!==e.children.length?(y(),d(t,{key:1,index:e.path},{title:p(()=>[e.icon?(y(),s("i",{key:0,class:u([e.icon,"menu-icon"])},null,2)):r("",!0),c("span",Y,w(e.title),1)]),default:p(()=>[(y(!0),s(g,null,k(e.children,e=>(y(),s(g,{key:e.path},[e.children&&0!==e.children.length?(y(),d(t,{key:1,index:e.path},{title:p(()=>[e.icon?(y(),s("i",{key:0,class:u([e.icon,"submenu-icon"])},null,2)):r("",!0),c("span",null,w(e.title),1)]),default:p(()=>[(y(!0),s(g,null,k(e.children,e=>(y(),d(n,{key:e.path,index:e.path},{title:p(()=>[e.icon?(y(),s("i",{key:0,class:u([e.icon,"submenu-icon"])},null,2)):r("",!0),c("span",null,w(e.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(y(),d(n,{key:0,index:e.path},{title:p(()=>[e.icon?(y(),s("i",{key:0,class:u([e.icon,"submenu-icon"])},null,2)):r("",!0),c("span",null,w(e.title),1)]),_:2},1032,["index"]))],64))),128))]),_:2},1032,["index"])):(y(),d(n,{key:0,index:e.path},{title:p(()=>[e.icon?(y(),s("i",{key:0,class:u([e.icon,"menu-icon"])},null,2)):r("",!0),c("span",W,w(e.title),1)]),_:2},1032,["index"]))],64))),128)),e.collapsed?r("",!0):(y(),d(o,{key:1,class:"menu-group-divider"}))],64)):r("",!0)],64))),64))]),_:1},8,["default-active","collapse","unique-opened"])]),_:1}),e.showCollapseButton?(y(),s("div",K,[c("button",{class:"collapse-button",onClick:B},[c("i",{class:u([e.collapsed?"bi-chevron-right":"bi-chevron-left","bi"])},null,2)])])):r("",!0)],2)}}}),[["__scopeId","data-v-6da8f2d0"]]),X={key:0,class:"breadcrumb-wrapper"},$={class:"breadcrumb-item"},Z=A(e({__name:"Breadcrumb",props:{showIcon:{type:Boolean,default:!0}},setup(e){const a=C(),l=t(()=>L(a));return(a,n)=>{const t=m("el-breadcrumb-item"),o=m("el-breadcrumb");return l.value.length>0?(y(),s("div",X,[v(o,{separator:"/"},{default:p(()=>[(y(!0),s(g,null,k(l.value,(a,l)=>(y(),d(t,{key:l,to:a.path?{path:a.path}:void 0},{default:p(()=>[c("span",$,[a.icon&&e.showIcon?(y(),s("i",{key:0,class:u([a.icon,"breadcrumb-icon"])},null,2)):r("",!0),c("span",null,w(a.title),1)])]),_:2},1032,["to"]))),128))]),_:1})])):r("",!0)}}}),[["__scopeId","data-v-90d0759c"]]),ee={key:0,class:"tabs-view"},ae=["onClick","onContextmenu"],le={class:"tab-title"},ne=["onClick"],te=A(e({__name:"TabsView",setup(e){const a=C(),l=b(),t=n([]),d=n(null),f=n(!1),h=n(0),_=n(0),x=n(),L=n();function q(e){return e.path===a.path}function z(e){var a;if("Login"===e.name||(null==(a=e.meta)?void 0:a.hideTabs))return;t.value.some(a=>a.path===e.path)||t.value.push({name:e.name,path:e.path,fullPath:e.fullPath,query:e.query,params:e.params,meta:e.meta}),F()}function j(){f.value=!1,d.value&&l.replace({path:d.value.path,query:{_t:Date.now()}})}function V(){f.value=!1,d.value&&(t.value=t.value.filter(e=>{var a;return(null==(a=e.meta)?void 0:a.affix)||e.path===d.value.path}),F(),a.path!==d.value.path&&l.push(d.value.path))}function A(){f.value=!1,t.value=t.value.filter(e=>{var a;return null==(a=e.meta)?void 0:a.affix}),F();const e=t.value.find(e=>{var a;return null==(a=e.meta)?void 0:a.affix});e?l.push(e.path):l.push("/")}function F(){const e=t.value.map(e=>({name:e.name,path:e.path,fullPath:e.fullPath,query:e.query,params:e.params,meta:e.meta}));localStorage.setItem("visitedViews",JSON.stringify(e))}function M(){f.value=!1}return o(()=>{!function(){try{const e=localStorage.getItem("visitedViews");if(e){const a=JSON.parse(e);t.value=a}}catch(e){}}(),function(){const e=l.getRoutes().filter(e=>{var a;return null==(a=e.meta)?void 0:a.affix});for(const a of e)a.name&&z(a)}(),z(a),document.addEventListener("click",M)}),i(()=>{document.removeEventListener("click",M)}),I(()=>a.path,()=>{z(a)}),(e,a)=>{var n,o;const i=m("el-scrollbar");return t.value.length>0?(y(),s("div",ee,[v(i,{class:"tabs-scrollbar"},{default:p(()=>[c("div",{class:"tabs-container",ref_key:"tabsContainerRef",ref:x},[(y(!0),s(g,null,k(t.value,e=>{var a,n,o,i;return y(),s("div",{key:e.path,class:u(["tabs-item",{"is-active":q(e),"is-affix":null==(a=e.meta)?void 0:a.affix}]),onClick:a=>function(e){q(e)||l.push(e.path)}(e),onContextmenu:T(a=>function(e,a){d.value=e,f.value=!0,h.value=a.clientX,_.value=a.clientY}(e,a),["prevent"])},[(null==(n=e.meta)?void 0:n.icon)?(y(),s("i",{key:0,class:u([e.meta.icon,"tab-icon"])},null,2)):r("",!0),c("span",le,w((null==(o=e.meta)?void 0:o.title)||e.name),1),(null==(i=e.meta)?void 0:i.affix)?r("",!0):(y(),s("i",{key:1,class:"bi bi-x tab-close",onClick:T(a=>function(e){var a;if(null==(a=e.meta)?void 0:a.affix)return;const n=t.value.findIndex(a=>a.path===e.path);if(n>-1&&(t.value.splice(n,1),F(),q(e))){const e=t.value[t.value.length-1];e?l.push(e.path):l.push("/")}}(e),["stop"])},null,8,ne))],42,ae)}),128))],512)]),_:1}),S(c("div",{class:"context-menu",style:B({left:h.value+"px",top:_.value+"px"}),ref_key:"contextMenuRef",ref:L},[c("div",{class:"context-menu-item",onClick:j},[...a[0]||(a[0]=[c("i",{class:"bi bi-arrow-clockwise"},null,-1),c("span",null,"刷新",-1)])]),a[3]||(a[3]=c("div",{class:"context-menu-divider"},null,-1)),c("div",{class:u(["context-menu-item",{"is-disabled":null==(o=null==(n=d.value)?void 0:n.meta)?void 0:o.affix}]),onClick:V},[...a[1]||(a[1]=[c("i",{class:"bi bi-x-circle"},null,-1),c("span",null,"关闭其他",-1)])],2),c("div",{class:"context-menu-item",onClick:A},[...a[2]||(a[2]=[c("i",{class:"bi bi-x-octagon"},null,-1),c("span",null,"关闭所有",-1)])])],4),[[E,f.value]])])):r("",!0)}}}),[["__scopeId","data-v-ec710d5a"]]),oe={class:"footer-content"},ie={class:"footer-section footer-copyright"},se={key:0,class:"footer-divider"},ue={key:1,class:"footer-section footer-version"},ce={key:2,class:"footer-divider"},re={key:3,class:"footer-section footer-support"},de={key:4,class:"footer-divider"},ve={key:5,class:"footer-section footer-beian"},pe=["href"],me=A(e({__name:"Footer",props:{showVersion:{type:Boolean,default:!0},showTechSupport:{type:Boolean,default:!0},beian:{default:""},beianLink:{default:"https://beian.miit.gov.cn/"}},setup(e){const a=n(!1),l=t(()=>(new Date).getFullYear()),d=t(()=>"2.0.0"),v=t(()=>({"footer--mobile":a.value}));function p(){a.value=window.innerWidth<768}return o(()=>{p(),window.addEventListener("resize",p)}),i(()=>{window.removeEventListener("resize",p)}),(n,t)=>(y(),s("footer",{class:u(["app-footer",v.value])},[c("div",oe,[c("div",ie,[c("span",null,"© "+w(l.value)+" 元景AI. All rights reserved.",1)]),a.value?r("",!0):(y(),s("div",se,"|")),e.showVersion?(y(),s("div",ue,[c("span",null,"版本 "+w(d.value),1)])):r("",!0),!a.value&&e.showTechSupport?(y(),s("div",ce,"|")):r("",!0),e.showTechSupport?(y(),s("div",re,[...t[0]||(t[0]=[c("span",null,"技术支持：元景AI团队",-1)])])):r("",!0),!a.value&&e.beian?(y(),s("div",de,"|")):r("",!0),e.beian?(y(),s("div",ve,[c("a",{href:e.beianLink,target:"_blank",rel:"noopener noreferrer"},w(e.beian),9,pe)])):r("",!0)])],2))}}),[["__scopeId","data-v-c7ce98ec"]]),be={class:"layout-container"},fe=A(e({__name:"MainLayout",setup(e){const a=C(),l=q(),b=n(!1),f=n(!1),h=n(!1),g=n([]),k=t(()=>({"layout--mobile":f.value,"layout--tablet":h.value,"layout--sidebar-collapsed":b.value,"layout--fixed-header":l.fixedHeader,"layout--sidebar-hidden":!x.value})),w=t(()=>({"content--with-sidebar":x.value,"content--sidebar-collapsed":b.value,"content--full-width":!x.value})),_=t(()=>({"page-content--with-tabs":S.value,"page-content--with-breadcrumb":L.value,"page-content--padding":!a.meta.noPadding})),x=t(()=>"Login"!==a.name&&(!a.meta.hideSidebar&&l.showSidebar)),L=t(()=>"Login"!==a.name&&(!a.meta.hideBreadcrumb&&l.showBreadcrumb)),S=t(()=>"Login"!==a.name&&(!a.meta.hideTabs&&l.showTabs)),E=t(()=>"Login"!==a.name&&(!a.meta.hideFooter&&l.showFooter)),B=t(()=>l.pageTransition||"fade");function T(){b.value=!b.value}function A(e){b.value=e}function F(){const e=window.innerWidth;f.value=e<768,h.value=e>=768&&e<1024,f.value&&!b.value&&(b.value=!0)}return o(()=>{F(),window.addEventListener("resize",F);const e=localStorage.getItem("sidebarCollapsed");null!==e&&(b.value="true"===e)}),i(()=>{window.removeEventListener("resize",F)}),I(b,e=>{localStorage.setItem("sidebarCollapsed",String(e))}),I(()=>a.path,()=>{!function(){if(a.meta.keepAlive&&a.name){const e=a.name;g.value.includes(e)||g.value.push(e)}}(),f.value&&!b.value&&(b.value=!0)},{immediate:!0}),(e,a)=>{const l=m("router-view");return y(),s("div",{class:u(["main-layout",k.value])},[v(J,{collapsed:b.value,onToggleSidebar:T},null,8,["collapsed"]),c("div",be,[x.value?(y(),d(Q,{key:0,collapsed:b.value,"onUpdate:collapsed":A},null,8,["collapsed"])):r("",!0),c("div",{class:u(["main-content",w.value])},[L.value?(y(),d(Z,{key:0,class:"breadcrumb-container"})):r("",!0),S.value?(y(),d(te,{key:1,class:"tabs-container"})):r("",!0),c("div",{class:u(["page-content",_.value])},[v(l,null,{default:p(({Component:e,route:a})=>[v(z,{name:B.value,mode:"out-in"},{default:p(()=>[(y(),d(V,{include:g.value},[(y(),d(j(e),{key:a.path}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})],2),E.value?(y(),d(me,{key:2,class:"footer-container"})):r("",!0)],2)]),f.value&&!b.value?(y(),s("div",{key:0,class:"sidebar-overlay",onClick:T})):r("",!0)],2)}}}),[["__scopeId","data-v-5761fd2c"]]);export{fe as default};
