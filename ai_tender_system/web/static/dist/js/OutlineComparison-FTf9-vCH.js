import{I as ce,G as me,f as pe,q as ve,o as fe,Q as _e,D as ge,F as X,p as ye,M as be,a as he,_ as xe,d as we,i as Fe,a3 as Ve,aJ as Ce,aa as ze,A as ke,P as Ee,$ as Pe,k as x}from"./element-plus-IkZgpaz4.js";import{_ as Te}from"./index.js";import{u as Me}from"./useProjectDocuments-BId2nzjv.js";import{t as je}from"./tender-2TSD_jRl.js";import{bT as Be,bt as i,bu as De,bG as Ge,bU as k,bV as u,gj as Ue,bY as t,c8 as a,b$ as m,c3 as U,c0 as l,c7 as Z,cC as ee,bv as d,c6 as c,c5 as n,c1 as Ie}from"./vendor-CdA3MjAt.js";/* empty css                                                                          */import{D as Ne}from"./DocumentPreview-BbjmwCia.js";import"./umo-editor-BmhDOXHm.js";import{c as Se}from"./company-B1QhkZBS.js";import"./mermaid-e-fO57px.js";import"./onnxruntime-DkHy2lK3.js";import"./echarts-Cqw1j_Z-.js";import"./project-C4LB9E9r.js";/* empty css                                                                        */const Ae={class:"outline-comparison-wrapper"},Re={class:"main-content"},Le={style:{color:"var(--text-secondary)","font-size":"12px","margin-left":"8px"}},Oe={class:"document-item"},$e={class:"document-header"},qe={class:"document-info"},Je={class:"document-item"},Ke={class:"document-header"},Qe={class:"document-info"},Ye={class:"card-header"},He={class:"card-title"},We={class:"card-header"},Xe={class:"card-title"},Ze={class:"action-section"},el={class:"card-header"},ll={class:"result-section"},al={class:"result-title"},tl={class:"outline-content"},sl={key:0,class:"outline-text"},ol={class:"result-meta"},nl={class:"result-section"},il={class:"result-title"},ul={class:"outline-content"},rl={key:0,class:"outline-text"},dl={class:"result-meta"},cl=Be({__name:"OutlineComparison",setup(ml){const{projects:le,currentDocuments:p,loadProjects:ae,handleProjectChange:L}=Me(),O=le,$=i([]),w=i(null),_=i(null),F=i(!1),V=i(!1),I=i(!1),q=i(""),J=i(""),g=i("正在加载提示词配置..."),E=i(!0),C=i(""),P=i(""),T=i(!1),M=i(!1),j=i(""),B=i(""),N=i(""),S=i(""),K=De(()=>w.value&&_.value&&C.value&&P.value);function Q(s){if(s===0)return"未知大小";const e=1024,r=["B","KB","MB","GB"],y=Math.floor(Math.log(s)/Math.log(e));return Math.round(s/Math.pow(e,y)*100)/100+" "+r[y]}async function te(){await ae()}async function se(){try{const s=await Se.getCompanies();s.success&&s.data&&($.value=s.data)}catch(s){console.error("加载公司列表失败:",s),x.error("加载公司列表失败")}}async function oe(){E.value=!0;try{const s=await je.getOutlineGenerationPrompts();if(console.log("提示词API响应:",s),s.success&&s.data){const e=s.data.prompts||s.data;g.value=e.generate_outline||"未找到提示词配置",console.log("✓ 提示词已加载，长度:",g.value.length)}else g.value="未找到提示词配置"}catch(s){console.error("加载提示词配置失败:",s),x.error("加载提示词配置失败"),g.value="加载失败，请刷新页面重试"}finally{E.value=!1}}async function ne(s){if(F.value=!1,V.value=!1,!s){_.value=null,await L(null);return}await L(s,{onClear:()=>{F.value=!1,V.value=!1},onDocumentsLoaded:r=>{r.tenderFile&&(F.value=!0,console.log("✅ 标书文件已加载:",r.tenderFile.name)),r.technicalFile&&(V.value=!0,console.log("✅ 技术文件已加载:",r.technicalFile.name))}});const e=O.value.find(r=>r.id===s);e&&e.company_id&&(_.value=e.company_id)}async function ie(){if(!K.value){x.warning("请完整填写所有配置项");return}T.value=!0,M.value=!1;try{x.info("大纲生成功能开发中..."),setTimeout(()=>{j.value=`第一章 项目概述
1.1 项目背景
1.2 项目目标
第二章 技术方案
2.1 系统架构
2.2 技术选型`,B.value=`第一章 项目介绍
1.1 背景分析
1.2 目标设定
第二章 解决方案
2.1 架构设计
2.2 技术栈`,N.value="2.3秒",S.value="3.1秒",M.value=!0,T.value=!1},2e3)}catch(s){console.error("生成失败:",s),x.error("生成失败"),T.value=!1}}function ue(){w.value=null,_.value=null,C.value="",P.value="",M.value=!1,j.value="",B.value="",N.value="",S.value=""}function re(){if(!p.value.technicalFile){x.warning("技术文件不存在");return}q.value=p.value.technicalFile.url,J.value=p.value.technicalFile.name,I.value=!0}return Ge(()=>{te(),se(),oe()}),(s,e)=>{const r=fe,y=ve,b=pe,v=me,D=ce,z=_e,A=ge,h=ye,f=be,G=he,R=Fe,Y=we,H=Ee,W=ke,de=Ve;return u(),k("div",Ae,[e[25]||(e[25]=Ue('<div class="page-header" data-v-97b6cc04><div class="header-content" data-v-97b6cc04><div class="title-section" data-v-97b6cc04><i class="bi-diagram-3 header-icon" data-v-97b6cc04></i><div class="title-group" data-v-97b6cc04><h1 class="page-title" data-v-97b6cc04>大纲生成对比</h1><p class="page-description" data-v-97b6cc04>对比不同模型和提示词生成的技术方案大纲效果</p></div></div></div></div>',1)),t("div",Re,[a(z,{class:"selection-card"},{default:l(()=>[a(D,{gutter:16},{default:l(()=>[a(v,{xs:24,sm:12},{default:l(()=>[a(b,{label:"选择项目"},{default:l(()=>[a(y,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=o=>w.value=o),placeholder:"请选择项目",filterable:"",clearable:"",onChange:ne},{default:l(()=>[(u(!0),k(Z,null,ee(d(O),o=>(u(),m(r,{key:o.id,label:o.project_name,value:o.id},{default:l(()=>[t("span",null,c(o.project_name),1),t("span",Le,c(o.company_name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(v,{xs:24,sm:12},{default:l(()=>[a(b,{label:"应答公司"},{default:l(()=>[a(y,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=o=>_.value=o),placeholder:"请选择应答公司",filterable:"",clearable:""},{default:l(()=>[(u(!0),k(Z,null,ee($.value,o=>(u(),m(r,{key:o.company_id,label:o.company_name||o.name,value:o.company_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),w.value&&(F.value||V.value)?(u(),m(z,{key:0,class:"documents-card"},{header:l(()=>[...e[6]||(e[6]=[t("div",{class:"card-header"},[t("span",{class:"card-title"},[t("i",{class:"bi-folder2-open"}),n(" 项目文档 ")])],-1)])]),default:l(()=>[a(D,{gutter:16},{default:l(()=>[F.value&&d(p).tenderFile?(u(),m(v,{key:0,xs:24,sm:12},{default:l(()=>[t("div",Oe,[t("div",$e,[a(A,{class:"document-icon",color:"#409EFF"},{default:l(()=>[a(d(X))]),_:1}),e[7]||(e[7]=t("span",{class:"document-label"},"招标文档：",-1))]),t("div",qe,[a(h,{type:"info",size:"large"},{default:l(()=>[n(c(d(p).tenderFile.name),1)]),_:1}),a(f,{size:"small",type:"info",style:{"margin-left":"8px"}},{default:l(()=>[n(c(Q(d(p).tenderFile.size)),1)]),_:1})])])]),_:1})):U("",!0),V.value&&d(p).technicalFile?(u(),m(v,{key:1,xs:24,sm:12},{default:l(()=>[t("div",Je,[t("div",Ke,[a(A,{class:"document-icon",color:"#67C23A"},{default:l(()=>[a(d(X))]),_:1}),e[8]||(e[8]=t("span",{class:"document-label"},"技术需求文档：",-1))]),t("div",Qe,[a(h,{type:"success",size:"large"},{default:l(()=>[n(c(d(p).technicalFile.name),1)]),_:1}),a(f,{size:"small",type:"info",style:{"margin-left":"8px"}},{default:l(()=>[n(c(Q(d(p).technicalFile.size)),1)]),_:1}),a(G,{type:"primary",size:"small",plain:"",style:{"margin-left":"12px"},onClick:re},{default:l(()=>[a(A,{style:{"margin-right":"4px"}},{default:l(()=>[a(d(xe))]),_:1}),e[9]||(e[9]=n(" 预览 ",-1))]),_:1})])])]),_:1})):U("",!0)]),_:1})]),_:1})):U("",!0),a(D,{gutter:16,style:{"margin-top":"16px"}},{default:l(()=>[a(v,{xs:24,lg:12},{default:l(()=>[a(z,{class:"config-card"},{header:l(()=>[t("div",Ye,[t("span",He,[a(h,{type:"success",size:"small"},{default:l(()=>[...e[10]||(e[10]=[n("基准组",-1)])]),_:1}),e[11]||(e[11]=t("span",{style:{"margin-left":"8px"}},"当前配置",-1))])])]),default:l(()=>[a(Y,{"label-position":"top"},{default:l(()=>[a(b,{label:"模型"},{default:l(()=>[a(R,{value:"gpt-4o-mini",disabled:""},{prepend:l(()=>[...e[12]||(e[12]=[t("i",{class:"bi-robot"},null,-1)])]),_:1})]),_:1}),a(b,{label:"提示词"},{extra:l(()=>[E.value?(u(),m(f,{key:0,size:"small",type:"warning"},{default:l(()=>[...e[13]||(e[13]=[n(" 正在从后端加载真实提示词配置... ",-1)])]),_:1})):(u(),m(f,{key:1,size:"small",type:"success"},{default:l(()=>[...e[14]||(e[14]=[n(" ✓ 已加载系统提示词模板。实际使用时，{analysis} 占位符会被替换为标书的具体需求分析结果，确保每个标书的大纲都是个性化的。 ",-1)])]),_:1}))]),default:l(()=>[Ie(a(R,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=o=>g.value=o),type:"textarea",rows:12,placeholder:"当前使用的大纲生成提示词",disabled:""},null,8,["modelValue"]),[[de,E.value]])]),_:1})]),_:1})]),_:1})]),_:1}),a(v,{xs:24,lg:12},{default:l(()=>[a(z,{class:"config-card"},{header:l(()=>[t("div",We,[t("span",Xe,[a(h,{type:"warning",size:"small"},{default:l(()=>[...e[15]||(e[15]=[n("对比组",-1)])]),_:1}),e[16]||(e[16]=t("span",{style:{"margin-left":"8px"}},"自定义配置",-1))])])]),default:l(()=>[a(Y,{"label-position":"top"},{default:l(()=>[a(b,{label:"模型"},{default:l(()=>[a(y,{modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=o=>C.value=o),placeholder:"选择模型"},{default:l(()=>[a(r,{label:"GPT5（最强推理）",value:"shihuang-gpt5"}),a(r,{label:"Claude Sonnet 4.5（标书专用）",value:"shihuang-claude-sonnet-45"}),a(r,{label:"GPT4o Mini（推荐）",value:"shihuang-gpt4o-mini"})]),_:1},8,["modelValue"])]),_:1}),a(b,{label:"提示词"},{extra:l(()=>[a(f,{size:"small",type:"info"},{default:l(()=>[...e[17]||(e[17]=[n(" 自定义提示词，用于对比测试 ",-1)])]),_:1})]),default:l(()=>[a(R,{modelValue:P.value,"onUpdate:modelValue":e[4]||(e[4]=o=>P.value=o),type:"textarea",rows:12,placeholder:"输入自定义提示词..."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t("div",Ze,[a(G,{type:"primary",size:"large",icon:d(Ce),loading:T.value,disabled:!K.value,onClick:ie},{default:l(()=>[...e[18]||(e[18]=[n(" 开始生成对比 ",-1)])]),_:1},8,["icon","loading","disabled"]),a(G,{size:"large",icon:d(ze),onClick:ue},{default:l(()=>[...e[19]||(e[19]=[n(" 重置 ",-1)])]),_:1},8,["icon"])]),M.value?(u(),m(z,{key:1,class:"result-card"},{header:l(()=>[t("div",el,[e[21]||(e[21]=t("span",{class:"card-title"},[t("i",{class:"bi-bar-chart"}),n(" 生成结果对比 ")],-1)),a(G,{text:"",icon:d(Pe)},{default:l(()=>[...e[20]||(e[20]=[n("导出报告",-1)])]),_:1},8,["icon"])])]),default:l(()=>[a(D,{gutter:16},{default:l(()=>[a(v,{xs:24,lg:12},{default:l(()=>[t("div",ll,[t("h3",al,[a(h,{type:"success",size:"small"},{default:l(()=>[...e[22]||(e[22]=[n("基准组",-1)])]),_:1}),e[23]||(e[23]=n(" GPT-4o-mini ",-1))]),t("div",tl,[a(W,{"max-height":"600px"},{default:l(()=>[j.value?(u(),k("div",sl,c(j.value),1)):(u(),m(H,{key:1,description:"暂无结果"}))]),_:1})]),t("div",ol,[a(f,{size:"small",type:"info"},{default:l(()=>[n(" 生成时间: "+c(N.value||"-"),1)]),_:1})])])]),_:1}),a(v,{xs:24,lg:12},{default:l(()=>[t("div",nl,[t("h3",il,[a(h,{type:"warning",size:"small"},{default:l(()=>[...e[24]||(e[24]=[n("对比组",-1)])]),_:1}),n(" "+c(C.value||"未选择"),1)]),t("div",ul,[a(W,{"max-height":"600px"},{default:l(()=>[B.value?(u(),k("div",rl,c(B.value),1)):(u(),m(H,{key:1,description:"暂无结果"}))]),_:1})]),t("div",dl,[a(f,{size:"small",type:"info"},{default:l(()=>[n(" 生成时间: "+c(S.value||"-"),1)]),_:1})])])]),_:1})]),_:1})]),_:1})):U("",!0)]),a(d(Ne),{modelValue:I.value,"onUpdate:modelValue":e[5]||(e[5]=o=>I.value=o),"file-url":q.value,"file-name":J.value},null,8,["modelValue","file-url","file-name"])])}}}),kl=Te(cl,[["__scopeId","data-v-97b6cc04"]]);export{kl as default};
