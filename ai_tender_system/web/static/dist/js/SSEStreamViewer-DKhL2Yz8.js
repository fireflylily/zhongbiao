import{P as e,D as t,M as a,c as n,ad as s,ae as o,_ as r,a0 as c,k as i}from"./element-plus-ZLeSHaWT.js";import{bF as l}from"./vendor-ZqVwfHSb.js";import{v as d,r as u,c as p,w as m,x as y,H as f,O as _,I as v,F as g,B as k,u as w,E as S,K as b,y as h,n as j}from"./vue-core-CiAVTOOY.js";/* empty css                                                                          */import{_ as x}from"./index.js";const C=["innerHTML"],L={key:0,class:"streaming-indicator"},B={key:0,class:"stream-actions"},H=x(d({__name:"SSEStreamViewer",props:{content:{},isStreaming:{type:Boolean,default:!1},enableMarkdown:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0}},emits:["stop","regenerate"],setup(d,{emit:x}){const H=d,M=x,R=u(null),T=p(()=>{if(!H.content)return"";if(H.enableMarkdown)try{return l.parse(H.content)}catch(e){return H.content}return H.content.replace(/\n/g,"<br>")});m(()=>H.content,async()=>{H.autoScroll&&H.isStreaming&&(await j(),U())});const U=()=>{R.value&&(R.value.scrollTop=R.value.scrollHeight)},D=async()=>{try{await navigator.clipboard.writeText(H.content),i.success("内容已复制到剪贴板")}catch(e){i.error("复制失败，请手动复制")}},E=()=>{try{const e=new Blob([H.content],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`ai-content-${Date.now()}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t),i.success("文档下载成功")}catch(e){i.error("下载失败，请重试")}};return(i,l)=>{const u=t,p=e,m=n;return h(),y("div",{class:f(["sse-stream-viewer",{"is-loading":d.isStreaming}])},[_(p,{class:"stream-content",shadow:"never"},{default:g(()=>[k("div",{ref_key:"contentRef",ref:R,class:"content-wrapper",innerHTML:T.value},null,8,C),d.isStreaming?(h(),y("div",L,[_(u,{class:"is-loading"},{default:g(()=>[_(w(a))]),_:1}),l[2]||(l[2]=k("span",null,"正在生成中...",-1))])):v("",!0)]),_:1}),d.content?(h(),y("div",B,[d.isStreaming?(h(),S(m,{key:0,type:"warning",icon:w(s),onClick:l[0]||(l[0]=e=>M("stop"))},{default:g(()=>[...l[3]||(l[3]=[b(" 停止生成 ",-1)])]),_:1},8,["icon"])):(h(),S(m,{key:1,type:"primary",icon:w(o),onClick:D},{default:g(()=>[...l[4]||(l[4]=[b(" 复制内容 ",-1)])]),_:1},8,["icon"])),!d.isStreaming&&d.content?(h(),S(m,{key:2,type:"success",icon:w(r),onClick:E},{default:g(()=>[...l[5]||(l[5]=[b(" 下载文档 ",-1)])]),_:1},8,["icon"])):v("",!0),!d.isStreaming&&d.content?(h(),S(m,{key:3,icon:w(c),onClick:l[1]||(l[1]=e=>M("regenerate"))},{default:g(()=>[...l[6]||(l[6]=[b(" 重新生成 ",-1)])]),_:1},8,["icon"])):v("",!0)])):v("",!0)],2)}}}),[["__scopeId","data-v-1badfff5"]]);export{H as S};
