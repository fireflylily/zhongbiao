import{_ as e,T as o,a2 as n,aI as t,bO as l,b9 as r,U as a,bP as i,bQ as s,bR as d,aK as u,C as c,e as p,bS as f,aN as v,d as m,u as g,au as b,av as w,as as h,a_ as y,at as I,bT as C,bU as E,b1 as S,w as T}from"./index.js";import{E as F}from"./index-CcWeoNg9.js";import{am as _,aO as R,an as k,bO as B,aW as x,ay as O,aX as K,bP as M,ao as P,bV as D,cg as $,ap as A,aF as G,cb as N,aq as z,ar as L,as as H,ax as j,bW as U,ch as J,au as W,av as Y,bJ as q,aP as V,aB as Q,c3 as X,aw as Z,aT as ee,aU as oe,az as ne,aS as te}from"./editor-Dt4gYtYt.js";var le=e(_({inheritAttrs:!1}),[["render",function(e,o,n,t,l,r){return R(e.$slots,"default")}],["__file","collection.vue"]]);var re=e(_({name:"ElCollectionItem",inheritAttrs:!1}),[["render",function(e,o,n,t,l,r){return R(e.$slots,"default")}],["__file","collection-item.vue"]]);const ae="data-el-collection-item",ie=o({style:{type:n([String,Array,Object])},currentTabId:{type:n(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:n(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:se,ElCollectionItem:de,COLLECTION_INJECTION_KEY:ue,COLLECTION_ITEM_INJECTION_KEY:ce}=(e=>{const o=`El${e}Collection`,n=`${o}Item`,t=Symbol(o),l=Symbol(n),r={...le,name:o,setup(){const e=k(),o=new Map;M(t,{itemMap:o,getItems:()=>{const n=O(e);if(!n)return[];const t=Array.from(n.querySelectorAll(`[${ae}]`));return[...o.values()].sort((e,o)=>t.indexOf(e.ref)-t.indexOf(o.ref))},collectionRef:e})}},a={...re,name:n,setup(e,{attrs:o}){const n=k(),r=B(t,void 0);M(l,{collectionItemRef:n}),x(()=>{const e=O(n);e&&r.itemMap.set(e,{ref:e,...o})}),K(()=>{const e=O(n);r.itemMap.delete(e)})}};return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:l,ElCollection:r,ElCollectionItem:a}})("RovingFocusGroup"),pe=Symbol("elRovingFocusGroup"),fe=Symbol("elRovingFocusGroupItem"),ve={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},me=e=>{const{activeElement:o}=document;for(const n of e){if(n===o)return;if(n.focus(),o!==document.activeElement)return}},ge="currentTabIdChange",be="rovingFocusGroup.entryFocus",we={bubbles:!1,cancelable:!0},he=_({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:ie,emits:[ge,"entryFocus"],setup(e,{emit:o}){var n;const a=k(null!=(n=e.currentTabId||e.defaultCurrentTabId)?n:null),i=k(!1),s=k(!1),d=k(),{getItems:u}=B(ue,void 0),c=P(()=>[{outline:"none"},e.style]),p=l(o=>{var n;null==(n=e.onMousedown)||n.call(e,o)},()=>{s.value=!0}),f=l(o=>{var n;null==(n=e.onFocus)||n.call(e,o)},e=>{const o=!O(s),{target:n,currentTarget:t}=e;if(n===t&&o&&!O(i)){const e=new Event(be,we);if(null==t||t.dispatchEvent(e),!e.defaultPrevented){const e=u().filter(e=>e.focusable),o=[e.find(e=>e.active),e.find(e=>e.id===O(a)),...e].filter(Boolean).map(e=>e.ref);me(o)}}s.value=!1}),v=l(o=>{var n;null==(n=e.onBlur)||n.call(e,o)},()=>{i.value=!1});M(pe,{currentTabbedId:$(a),loop:D(e,"loop"),tabIndex:P(()=>O(i)?-1:0),rovingFocusGroupRef:d,rovingFocusGroupRootStyle:c,orientation:D(e,"orientation"),dir:D(e,"dir"),onItemFocus:e=>{o(ge,e)},onItemShiftTab:()=>{i.value=!0},onBlur:v,onFocus:f,onMousedown:p,onKeydown:o=>{const n=(e=>{const o=t(e);return ve[o]})(o);if(n){o.preventDefault();let t=u().filter(e=>e.focusable).map(e=>e.ref);switch(n){case"last":t.reverse();break;case"prev":case"next":{"prev"===n&&t.reverse();const a=t.indexOf(o.currentTarget);t=e.loop?(r=a+1,(l=t).map((e,o)=>l[(o+r)%l.length])):t.slice(a+1);break}}G(()=>{me(t)})}var l,r}}),A(()=>e.currentTabId,e=>{a.value=null!=e?e:null}),r(d,be,(...e)=>{o("entryFocus",...e)})}});var ye=e(_({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:se,ElRovingFocusGroupImpl:e(he,[["render",function(e,o,n,t,l,r){return R(e.$slots,"default")}],["__file","roving-focus-group-impl.vue"]])}}),[["render",function(e,o,n,t,l,r){const a=N("el-roving-focus-group-impl"),i=N("el-focus-group-collection");return L(),z(i,null,{default:H(()=>[j(a,U(J(e.$attrs)),{default:H(()=>[R(e.$slots,"default")]),_:3},16)]),_:3})}],["__file","roving-focus-group.vue"]]);const Ie=o({trigger:d.trigger,triggerKeys:{type:n(Array),default:()=>[u.enter,u.numpadEnter,u.space,u.down]},virtualTriggering:d.virtualTriggering,virtualRef:d.virtualRef,effect:{...i.effect,default:"light"},type:{type:n(String)},placement:{type:n(String),default:"bottom"},popperOptions:{type:n(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:n([Number,String]),default:0},maxHeight:{type:n([Number,String]),default:""},popperClass:i.popperClass,popperStyle:i.popperStyle,disabled:Boolean,role:{type:String,values:s,default:"menu"},buttonProps:{type:n(Object)},teleported:i.teleported,persistent:{type:Boolean,default:!0}}),Ce=o({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:a}}),Ee=o({onKeydown:{type:n(Function)}}),Se=Symbol("elDropdown"),Te="elDropdown",{ButtonGroup:Fe}=m;var _e=e(_({name:"ElDropdown",components:{ElButton:m,ElButtonGroup:Fe,ElScrollbar:F,ElTooltip:v,ElRovingFocusGroup:ye,ElOnlyChild:f,ElIcon:p,ArrowDown:c},props:Ie,emits:["visible-change","click","command"],setup(e,{emit:o}){const n=X(),t=g("dropdown"),{t:l}=b(),r=k(),a=k(),i=k(),s=k(),d=k(null),u=k(null),c=k(!1),p=P(()=>({maxHeight:w(e.maxHeight)})),f=P(()=>[t.m(S.value)]),v=P(()=>y(e.trigger)),m=I().value,C=P(()=>e.id||m);function E(){var e;null==(e=i.value)||e.onClose()}const S=h();M(Se,{contentRef:s,role:P(()=>e.role),triggerId:C,isUsingKeyboard:c,onItemEnter:function(){},onItemLeave:function(){const e=O(s);v.value.includes("hover")&&(null==e||e.focus({preventScroll:!0})),u.value=null},handleClose:E}),M(Te,{instance:n,dropdownSize:S,handleClick:function(){var e;null==(e=i.value)||e.onClose(void 0,0)},commandHandler:function(...e){o("command",...e)},trigger:D(e,"trigger"),hideOnClick:D(e,"hideOnClick")});return{t:l,ns:t,scrollbar:d,wrapStyle:p,dropdownTriggerKls:f,dropdownSize:S,triggerId:C,currentTabId:u,handleCurrentTabIdChange:function(e){u.value=e},handlerMainButtonClick:e=>{o("click",e)},handleClose:E,handleOpen:function(){var e;null==(e=i.value)||e.onOpen()},handleBeforeShowTooltip:function(){o("visible-change",!0)},handleShowTooltip:function(e){var o;c.value="keydown"===(null==e?void 0:e.type),null==(o=s.value)||o.focus()},handleBeforeHideTooltip:function(){o("visible-change",!1)},popperRef:i,contentRef:s,triggeringElementRef:r,referenceElementRef:a}}}),[["render",function(e,o,n,t,l,r){var a;const i=N("el-roving-focus-group"),s=N("el-scrollbar"),d=N("el-only-child"),u=N("el-tooltip"),c=N("el-button"),p=N("arrow-down"),f=N("el-icon"),v=N("el-button-group");return L(),W("div",{class:Q([e.ns.b(),e.ns.is("disabled",e.disabled)])},[j(u,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"popper-style":e.popperStyle,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-arrow":e.showArrow,"show-after":"hover"===e.trigger?e.showTimeout:0,"hide-after":"hover"===e.trigger?e.hideTimeout:0,"virtual-ref":null!=(a=e.virtualRef)?a:e.triggeringElementRef,"virtual-triggering":e.virtualTriggering||e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"","focus-on-target":"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},q({content:H(()=>[j(s,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:H(()=>[j(i,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange},{default:H(()=>[R(e.$slots,"dropdown")]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:H(()=>[j(d,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:H(()=>[R(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","placement","popper-class","popper-style","trigger","trigger-keys","trigger-target-el","show-arrow","show-after","hide-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(L(),z(v,{key:0},{default:H(()=>[j(c,V({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:H(()=>[R(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),j(c,V({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:H(()=>[j(f,{class:Q(e.ns.e("icon"))},{default:H(()=>[j(p)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Y("v-if",!0)],2)}],["__file","dropdown.vue"]]);var Re=e(_({components:{ElRovingFocusCollectionItem:de},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:n,onItemFocus:r,onItemShiftTab:a,onKeydown:i}=B(pe,void 0),s=I(),d=k(),c=l(e=>{o("mousedown",e)},o=>{e.focusable?r(O(s)):o.preventDefault()}),p=l(e=>{o("focus",e)},()=>{r(O(s))}),f=l(e=>{o("keydown",e)},e=>{const{shiftKey:o,target:n,currentTarget:l}=e;t(e)===u.tab&&o?a():n===l&&i(e)}),v=P(()=>n.value===O(s));return M(fe,{rovingFocusGroupItemRef:d,tabIndex:P(()=>O(v)?0:-1),handleMousedown:c,handleFocus:p,handleKeydown:f}),{id:s,handleKeydown:f,handleFocus:p,handleMousedown:c}}}),[["render",function(e,o,n,t,l,r){const a=N("el-roving-focus-collection-item");return L(),z(a,{id:e.id,focusable:e.focusable,active:e.active},{default:H(()=>[R(e.$slots,"default")]),_:3},8,["id","focusable","active"])}],["__file","roving-focus-item.vue"]]);const ke=_({name:"DropdownItemImpl",components:{ElIcon:p},props:Ce,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const n=g("dropdown"),{role:r}=B(Se,void 0),{collectionItemRef:a}=B(ce,void 0),{rovingFocusGroupItemRef:i,tabIndex:s,handleFocus:d,handleKeydown:c,handleMousedown:p}=B(fe,void 0),f=C(a,i),v=P(()=>"menu"===r.value?"menuitem":"navigation"===r.value?"link":"button"),m=l(e=>{const n=t(e);if([u.enter,u.numpadEnter,u.space].includes(n))return e.preventDefault(),e.stopImmediatePropagation(),o("clickimpl",e),!0},c);return{ns:n,itemRef:f,dataset:{[ae]:""},role:v,tabIndex:s,handleFocus:d,handleKeydown:m,handleMousedown:p}}});const Be=()=>{const e=B(Te,{}),o=P(()=>null==e?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}};var xe=e(_({name:"ElDropdownItem",components:{ElRovingFocusItem:Re,ElDropdownItemImpl:e(ke,[["render",function(e,o,n,t,l,r){const a=N("el-icon");return L(),W(ne,null,[e.divided?(L(),W("li",{key:0,role:"separator",class:Q(e.ns.bem("menu","item","divided"))},null,2)):Y("v-if",!0),Z("li",V({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o=>e.$emit("clickimpl",o),onFocus:e.handleFocus,onKeydown:oe(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:o=>e.$emit("pointermove",o),onPointerleave:o=>e.$emit("pointerleave",o)}),[e.icon?(L(),z(a,{key:0},{default:H(()=>[(L(),z(ee(e.icon)))]),_:1})):Y("v-if",!0),R(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}],["__file","dropdown-item-impl.vue"]])},inheritAttrs:!1,props:Ce,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:n}){const{elDropdown:t}=Be(),r=X(),{onItemEnter:a,onItemLeave:i}=B(Se,void 0),s=l(e=>(o("pointermove",e),e.defaultPrevented),E(o=>{if(e.disabled)return void i(o);const n=o.currentTarget;n===document.activeElement||n.contains(document.activeElement)||(a(o),o.defaultPrevented||null==n||n.focus({preventScroll:!0}))})),d=l(e=>(o("pointerleave",e),e.defaultPrevented),E(i));return{handleClick:l(n=>{if(!e.disabled)return o("click",n),"keydown"!==n.type&&n.defaultPrevented},o=>{var n,l,a;e.disabled?o.stopImmediatePropagation():((null==(n=null==t?void 0:t.hideOnClick)?void 0:n.value)&&(null==(l=t.handleClick)||l.call(t)),null==(a=t.commandHandler)||a.call(t,e.command,r,o))}),handlePointerMove:s,handlePointerLeave:d,propsAndAttrs:P(()=>({...e,...n}))}}}),[["render",function(e,o,n,t,l,r){const a=N("el-dropdown-item-impl"),i=N("el-roving-focus-item");return L(),z(i,{focusable:!e.disabled},{default:H(()=>[j(a,V(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:H(()=>[R(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])}],["__file","dropdown-item.vue"]]);var Oe=e(_({name:"ElDropdownMenu",props:Ee,setup(e){const o=g("dropdown"),{_elDropdownSize:n}=Be(),r=n.value,{contentRef:a,role:i,triggerId:s,isUsingKeyboard:d,handleClose:c}=B(Se,void 0),{rovingFocusGroupRef:p,rovingFocusGroupRootStyle:f,onBlur:v,onFocus:m,onKeydown:b,onMousedown:w}=B(pe,void 0),{collectionRef:h}=B(ue,void 0),y=P(()=>[o.b("menu"),o.bm("menu",null==r?void 0:r.value)]),I=C(a,p,h),E=l(o=>{var n;null==(n=e.onKeydown)||n.call(e,o)},e=>{const{currentTarget:o,target:n}=e,l=t(e);if(o.contains(n),u.tab===l)return c();b(e)});return{size:r,rovingFocusGroupRootStyle:f,dropdownKls:y,role:i,triggerId:s,dropdownListWrapperRef:I,handleKeydown:E,onBlur:v,handleFocus:function(e){d.value&&m(e)},onMousedown:w}}}),[["render",function(e,o,n,t,l,r){return L(),W("ul",{ref:e.dropdownListWrapperRef,class:Q(e.dropdownKls),style:te(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onFocusin:e.handleFocus,onFocusout:e.onBlur,onKeydown:oe(e.handleKeydown,["self"]),onMousedown:oe(e.onMousedown,["self"])},[R(e.$slots,"default")],46,["role","aria-labelledby","onFocusin","onFocusout","onKeydown","onMousedown"])}],["__file","dropdown-menu.vue"]]);const Ke=T(_e,{DropdownItem:xe,DropdownMenu:Oe}),Me=S(xe),Pe=S(Oe);export{Pe as E,Me as a,Ke as b};
