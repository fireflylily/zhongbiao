import{d as e,r as a,c as t,a_ as n,D as s,e as o,o as r,U as c,f as i,l,w as d,n as u,ad as p,h as m,ap as y,as as f,k as _,g,a$ as v,p as k,b0 as w,aE as S,aG as b,A as h,aK as x}from"./vendor-UMr2cBTC.js";/* empty css                                                                          */import{_ as C}from"./index.js";const L=["innerHTML"],j={key:0,class:"streaming-indicator"},R={key:0,class:"stream-actions"},U=C(e({__name:"SSEStreamViewer",props:{content:{},isStreaming:{type:Boolean,default:!1},enableMarkdown:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0}},emits:["stop","regenerate"],setup(e,{emit:C}){const U=e,B=C,H=a(null),M=t(()=>{if(!U.content)return"";if(U.enableMarkdown)try{return n.parse(U.content)}catch(e){return U.content}return U.content.replace(/\n/g,"<br>")});s(()=>U.content,async()=>{U.autoScroll&&U.isStreaming&&(await x(),T())});const T=()=>{H.value&&(H.value.scrollTop=H.value.scrollHeight)},E=async()=>{try{await navigator.clipboard.writeText(U.content),h.success("内容已复制到剪贴板")}catch(e){h.error("复制失败，请手动复制")}},D=()=>{try{const e=new Blob([U.content],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download=`ai-content-${Date.now()}.txt`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a),h.success("文档下载成功")}catch(e){h.error("下载失败，请重试")}};return(a,t)=>{const n=p,s=f,h=g;return r(),o("div",{class:c(["sse-stream-viewer",{"is-loading":e.isStreaming}])},[i(s,{class:"stream-content",shadow:"never"},{default:d(()=>[u("div",{ref_key:"contentRef",ref:H,class:"content-wrapper",innerHTML:M.value},null,8,L),e.isStreaming?(r(),o("div",j,[i(n,{class:"is-loading"},{default:d(()=>[i(m(y))]),_:1}),t[2]||(t[2]=u("span",null,"正在生成中...",-1))])):l("",!0)]),_:1}),e.content?(r(),o("div",R,[e.isStreaming?(r(),_(h,{key:0,type:"warning",icon:m(v),onClick:t[0]||(t[0]=e=>B("stop"))},{default:d(()=>[...t[3]||(t[3]=[k(" 停止生成 ",-1)])]),_:1},8,["icon"])):(r(),_(h,{key:1,type:"primary",icon:m(w),onClick:E},{default:d(()=>[...t[4]||(t[4]=[k(" 复制内容 ",-1)])]),_:1},8,["icon"])),!e.isStreaming&&e.content?(r(),_(h,{key:2,type:"success",icon:m(S),onClick:D},{default:d(()=>[...t[5]||(t[5]=[k(" 下载文档 ",-1)])]),_:1},8,["icon"])):l("",!0),!e.isStreaming&&e.content?(r(),_(h,{key:3,icon:m(b),onClick:t[1]||(t[1]=e=>B("regenerate"))},{default:d(()=>[...t[6]||(t[6]=[k(" 重新生成 ",-1)])]),_:1},8,["icon"])):l("",!0)])):l("",!0)],2)}}}),[["__scopeId","data-v-1badfff5"]]);export{U as S};
