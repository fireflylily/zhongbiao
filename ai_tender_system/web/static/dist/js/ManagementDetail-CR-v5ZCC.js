import{d as e,i as a,q as l,O as t,aO as i,E as s,e as n,p as c,bv as r,G as o,aU as u,K as d,P as _,N as p,aN as m}from"./index.js";/* empty css                */import{E as f}from"./el-divider-UNHlIbFi.js";import{E as v}from"./el-text-BywU1ZSY.js";/* empty css                                                        *//* empty css                */import{E as h,a as b}from"./el-tab-pane-xanmJnQz.js";/* empty css                             */import{E as y,P as g}from"./el-space-B82yhTYm.js";/* empty css                    *//* empty css                          */import{E as k}from"./el-input-number-6hXELlWr.js";/* empty css               */import{E as w,a as z}from"./el-select-2eEOxmwc.js";/* empty css                     */import{L as x}from"./Loading-CNHXo8pC.js";/* empty css                                                                            */import{am as j,ao as C,au as V,ar as q,aB as I,aw as S,av as U,aC as E,aD as A,ax as P,as as N,an as D,ap as T,aq as F,ay as $,aO as K,bt as O,aW as B,az as L,aA as W}from"./editor-zVZ1kHVk.js";import{_ as R}from"./DocumentPreview.vue_vue_type_script_setup_true_lang-D4KN3en7.js";/* empty css                   *//* empty css                */import{E as M}from"./el-tree-D487oswk.js";import{E as J}from"./strings-BE50mNvJ.js";import{E as Q}from"./index-ogmKdR8O.js";import{t as G}from"./tender-gPOyyWmM.js";import{E as H,a as X}from"./index-BiOBX4RZ.js";import{E as Y}from"./index-BMbtWNDi.js";import{E as Z}from"./index-fB22Rz4w.js";import{c as ee}from"./company-CHa0NuIL.js";import{k as ae}from"./knowledge-BR5smuxz.js";import{u as le}from"./project-BNGFfXpa.js";import{a as te,E as ie}from"./index-CfLDUDVX.js";import{E as se,a as ne}from"./index-DjyvXpKV.js";import"./raf-BZHcGSIv.js";import"./clamp-UCPavv6V.js";import"./toNumber-BpJiEHLP.js";import"./index-BiNV386k.js";import"./index-D1NGdGTb.js";import"./_baseIteratee-ZpxLkVXu.js";import"./index-_jYzz5Db.js";import"./directive-BVG3C7QE.js";import"./index-QszVrH1C.js";import"./cloneDeep-syPWYH98.js";const ce={class:"file-card__icon"},re={class:"file-card__info"},oe={class:"file-card__name"},ue={class:"file-card__meta"},de={key:0,class:"meta-item"},_e={key:0,class:"file-card__actions"},pe=l(j({__name:"FileCard",props:{fileUrl:{},fileName:{},fileSize:{},uploadTime:{},type:{default:"default"},showActions:{type:Boolean,default:!0}},emits:["preview"],setup(l,{emit:t}){const i=l,s=t,n=C(()=>{if(i.fileName)return i.fileName;const e=i.fileUrl.split("/");return e[e.length-1]||""}),c=C(()=>{var e;return{pdf:"bi-file-pdf",doc:"bi-file-word",docx:"bi-file-word",xls:"bi-file-excel",xlsx:"bi-file-excel",zip:"bi-file-zip",rar:"bi-file-zip"}[(null==(e=n.value.split(".").pop())?void 0:e.toLowerCase())||""]||"bi-file-earmark-text"}),r=C(()=>i.uploadTime?i.uploadTime.split(" ")[0]||i.uploadTime:""),o=e=>{if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/api/"))return e;let a=e;return a.startsWith("ai_tender_system/data/")&&(a=a.substring(22)),a.startsWith("outputs/")&&(a="download/"+a.substring(8)),`/api/files/serve/${a}`},u=()=>{const e=o(i.fileUrl),l=document.createElement("a");l.href=e+"?download=true",l.download=n.value,document.body.appendChild(l),l.click(),document.body.removeChild(l),a.success("æ–‡ä»¶ä¸‹è½½å·²å¼€å§‹")},d=()=>{let e="";if(n.value){const a=n.value.split(".");a.length>1&&(e=a[a.length-1].toLowerCase())}if(!e&&i.fileUrl){const a=i.fileUrl.split("?")[0].split(".");a.length>1&&(e=a[a.length-1].toLowerCase())}if("doc"===e||"docx"===e)s("preview",i.fileUrl,n.value);else{const e=o(i.fileUrl);window.open(e,"_blank")}};return(a,t)=>{const i=e;return q(),V("div",{class:I(["file-card",[`file-card--${l.type}`]])},[S("div",ce,[S("i",{class:I(c.value)},null,2)]),S("div",re,[S("div",oe,E(n.value),1),S("div",ue,[r.value?(q(),V("span",de,[t[0]||(t[0]=S("i",{class:"bi bi-calendar"},null,-1)),A(" "+E(r.value),1)])):U("",!0)])]),l.showActions?(q(),V("div",_e,[P(i,{size:"small",onClick:u},{default:N(()=>[...t[1]||(t[1]=[S("i",{class:"bi bi-download"},null,-1),A(" ä¸‹è½½ ",-1)])]),_:1}),P(i,{size:"small",onClick:d},{default:N(()=>[...t[2]||(t[2]=[S("i",{class:"bi bi-eye"},null,-1),A(" é¢„è§ˆ ",-1)])]),_:1})])):U("",!0)],2)}}}),[["__scopeId","data-v-010a89f5"]]),me={class:"chapter-tree"},fe={key:0,class:"chapter-search mb-3"},ve={class:"chapter-tree-container"},he={class:"chapter-tree-node"},be={class:"chapter-title"},ye={class:"chapter-meta"},ge={key:2,class:"word-count text-muted ms-2"},ke={key:3,class:"word-count text-muted ms-2"},we=l(j({__name:"ChapterTree",props:{chapters:{},showCheckbox:{type:Boolean,default:!0},showSearch:{type:Boolean,default:!0},defaultCheckedKeys:{default:()=>[]}},emits:["check","select"],setup(e,{expose:a,emit:l}){const s=e,n=l,c=D(),r=D(""),o=D([]),u={children:"children",label:"title"};o.value=s.chapters,T(()=>s.chapters,e=>{o.value=e,s.defaultCheckedKeys.length>0&&c.value&&c.value.setCheckedKeys(s.defaultCheckedKeys)},{immediate:!0});const d=()=>{if(!r.value.trim())return void(o.value=s.chapters);const e=r.value.toLowerCase();o.value=_(s.chapters,e)},_=(e,a)=>{const l=[];for(const t of e)if(t.title.toLowerCase().includes(a))l.push(t);else if(t.children&&t.children.length>0){const e=_(t.children,a);e.length>0&&l.push({...t,children:e})}return l},p=()=>{if(!c.value)return;const e=c.value.getCheckedKeys(),a=c.value.getCheckedNodes();n("check",e,a)},m=e=>({technical_spec:"success",business_response:"primary",contract_content:"warning"}[e||""]||"info"),f=e=>({technical_spec:"æŠ€æœ¯éœ€æ±‚",business_response:"å•†åŠ¡åº”ç­”",contract_content:"åˆåŒå†…å®¹"}[e||""]||"");return a({setCheckedKeys:e=>{var a;null==(a=c.value)||a.setCheckedKeys(e)},getCheckedKeys:()=>{var e;return null==(e=c.value)?void 0:e.getCheckedKeys()},getCheckedNodes:()=>{var e;return null==(e=c.value)?void 0:e.getCheckedNodes()}}),(a,l)=>{const s=t,n=i,_=J,v=M,h=Q;return q(),V("div",me,[e.showSearch?(q(),V("div",fe,[P(s,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),placeholder:"ğŸ” æœç´¢ç« èŠ‚...",clearable:"",onInput:d},{prefix:N(()=>[...l[1]||(l[1]=[S("i",{class:"bi bi-search"},null,-1)])]),_:1},8,["modelValue"])])):U("",!0),S("div",ve,[P(v,{ref_key:"treeRef",ref:c,data:o.value,props:u,"show-checkbox":e.showCheckbox,"check-strictly":!1,"default-expand-all":!1,"expand-on-click-node":!1,"node-key":"id",onCheck:p},{default:N(({node:e,data:a})=>{return[S("div",he,[S("span",be,[S("i",{class:I([(s=a,s.children&&s.children.length>0?"bi bi-folder":"bi bi-file-earmark-text"),"me-1"])},null,2),A(" "+E(a.title)+" ",1),a.has_table?(q(),F(n,{key:0,content:"åŒ…å«è¡¨æ ¼",placement:"top"},{default:N(()=>[...l[2]||(l[2]=[S("i",{class:"bi bi-table ms-1 table-indicator"},null,-1)])]),_:1})):U("",!0)]),S("span",ye,[(i=a.chapter_type,i&&["technical_spec","business_response","contract_content"].includes(i)?(q(),F(_,{key:0,type:m(a.chapter_type),size:"small",effect:"dark"},{default:N(()=>[A(E(f(a.chapter_type)),1)]),_:2},1032,["type"])):U("",!0)),a.level?(q(),F(_,{key:1,size:"small",type:"info"},{default:N(()=>{return[A(E((e=a.level,{1:"ä¸€çº§",2:"äºŒçº§",3:"ä¸‰çº§",4:"å››çº§",5:"äº”çº§"}[e]||`${e}çº§`)),1)];var e}),_:2},1024)):U("",!0),a.word_count&&a.word_count>0?(q(),V("span",ge,E((t=a.word_count,t>=1e4?`${(t/1e4).toFixed(1)}ä¸‡`:t.toLocaleString()))+"å­— ",1)):-1===a.word_count?(q(),V("span",ke,[...l[3]||(l[3]=[S("i",{class:"el-icon-loading"},null,-1),A(" ... ",-1)])])):U("",!0)])])];var t,i,s}),_:1},8,["data","show-checkbox"]),o.value&&0!==o.value.length?U("",!0):(q(),F(h,{key:0,description:"æš‚æ— ç« èŠ‚æ•°æ®","image-size":80}))])])}}}),[["__scopeId","data-v-51b80b29"]]),ze={class:"tender-document-processor"},xe={class:"card-header"},je={class:"upload-section"},Ce={key:0,class:"existing-document"},Ve={class:"d-flex align-items-center justify-content-between"},qe={class:"me-3"},Ie={key:1},Se={key:1,class:"selected-file-status"},Ue={class:"d-flex align-items-center justify-content-between"},Ee={key:0,class:"parsing-status mt-2"},Ae={class:"d-flex align-items-center text-info"},Pe={key:2,class:"quick-actions"},Ne={class:"selectors-area"},De={class:"action-buttons"},Te={key:0,class:"quick-action-item"},Fe={key:1,class:"quick-action-item"},$e={key:2,class:"quick-action-item"},Ke={class:"card-header"},Oe={class:"chapter-section"},Be={class:"stats-grid mb-3"},Le={class:"stat-card"},We={class:"stat-value"},Re={class:"stat-card"},Me={class:"stat-value text-success"},Je={class:"stat-card"},Qe={class:"stat-value text-info"},Ge={class:"batch-operations mb-3"},He={class:"save-actions mt-4"},Xe=l(j({__name:"TenderDocumentProcessor",props:{projectId:{},companyId:{},projectDetail:{},responseFileInfo:{},technicalFileInfo:{}},emits:["success","refresh","preview","parseComplete","start-business","start-p2p","start-proposal"],setup(l,{emit:t}){const i=l,u=t,d=D(),_=D(),p=D([]),m=D(null),f=D(!1),v=D("æ­£åœ¨è§£ææ–‡æ¡£ç»“æ„..."),h=D(!1),b=D(""),g=D(0),k=D([]),w=D([]),z=D([]),x=D(!1),j=D(!1),I=D(null),O=C(()=>{const e=a=>{let l=a.length;return a.forEach(a=>{a.children&&a.children.length>0&&(l+=e(a.children))}),l};return e(k.value)}),B=C(()=>w.value.length),L=C(()=>z.value.reduce((e,a)=>e+(a.word_count||0),0)),W=C(()=>null!==I.value),R=async e=>{if(!e.raw)return;const l=(e=>e.name.toLowerCase().endsWith(".docx")?e.size>52428800?{valid:!1,error:`æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 50MBï¼Œå½“å‰æ–‡ä»¶å¤§å°: ${(e.size/1024/1024).toFixed(2)}MB`}:{valid:!0}:{valid:!1,error:"ä»…æ”¯æŒ .docx æ ¼å¼çš„æ–‡ä»¶ï¼Œè¯·å…ˆå°† .doc æ–‡ä»¶å¦å­˜ä¸º .docx æ ¼å¼"})(e.raw);if(!l.valid)return a.error(l.error||"æ–‡ä»¶éªŒè¯å¤±è´¥"),m.value=null,void(p.value=[]);m.value=e.raw,p.value=[e],a.success({message:"æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼Œç³»ç»Ÿæ­£åœ¨è‡ªåŠ¨æå–é¡¹ç›®åŸºæœ¬ä¿¡æ¯",duration:2e3}),setTimeout(()=>{le()},500)},M=()=>{m.value=null,p.value=[],k.value=[],w.value=[]},Q=()=>{m.value=null,p.value=[]},ee=()=>{I.value&&u("preview",I.value.path,I.value.name)},ae=()=>{I.value=null,k.value=[],w.value=[]},le=async()=>{if(m.value){f.value=!0,v.value="æ­£åœ¨è¯†åˆ«æ–‡æ¡£ç›®å½•ï¼ˆAIåˆ†æä¸­ï¼‰...";try{const l=new FormData;l.append("file",m.value),l.append("company_id",i.companyId.toString()),l.append("project_id",i.projectId.toString());const t=await G.parseDocumentStructureQuick(l);if(!t.success)throw new Error(t.message||t.error||"è§£æå¤±è´¥");k.value=t.chapters||[],b.value=t.file_path||"",g.value=t.toc_end_idx||0,f.value=!1,h.value=!0,a.success({message:"ç›®å½•è¯†åˆ«å®Œæˆï¼ˆDeepSeek V3ï¼‰ï¼Œæ­£åœ¨åˆ†æå­—æ•°...",duration:2e3});try{const e=await G.enrichChapters({project_id:i.projectId,file_path:b.value,chapters:k.value,toc_end_idx:g.value});e.success?(k.value=e.chapters||k.value,a.success({message:"æ–‡æ¡£è§£æå®Œæˆ",duration:2e3})):a.warning("å­—æ•°ç»Ÿè®¡å¤±è´¥ï¼Œä½†ç›®å½•ç»“æ„å·²è¯†åˆ«")}catch(e){a.warning("å­—æ•°ç»Ÿè®¡å¤±è´¥ï¼Œä½†ç›®å½•ç»“æ„å·²è¯†åˆ«")}finally{h.value=!1}u("parseComplete"),u("refresh")}catch(l){f.value=!1,h.value=!1;const e=l instanceof Error?l.message:"æœªçŸ¥é”™è¯¯";e.includes(".doc")||e.includes("å¦å­˜ä¸º")||e.includes("docx")?o.alert(e,"ä¸æ”¯æŒ .doc æ ¼å¼",{confirmButtonText:"æˆ‘çŸ¥é“äº†",type:"warning",dangerouslyUseHTMLString:!1,customStyle:{width:"500px"}}):a.error(`è§£æå¤±è´¥: ${e}`)}finally{f.value=!1}}else a.warning("è¯·å…ˆä¸Šä¼ æ–‡æ¡£")},te=(e,a)=>{w.value=e,z.value=a},ie=()=>{var e;const a=re(k.value);null==(e=_.value)||e.setCheckedKeys(a)},se=()=>{var e;null==(e=_.value)||e.setCheckedKeys([])},ne=()=>{var e;const a=oe(k.value,["æŠ€æœ¯","æ–¹æ¡ˆ","å®æ–½","ç³»ç»Ÿ"]);null==(e=_.value)||e.setCheckedKeys(a)},ce=()=>{var e;const a=re(k.value),l=oe(k.value,["åˆåŒ","æ¡æ¬¾","åè®®"]),t=a.filter(e=>!l.includes(e));null==(e=_.value)||e.setCheckedKeys(t)},re=e=>{const a=[];return e.forEach(e=>{a.push(e.id),e.children&&e.children.length>0&&a.push(...re(e.children))}),a},oe=(e,a)=>{const l=[];return e.forEach(e=>{a.some(a=>e.title.includes(a))&&l.push(e.id),e.children&&e.children.length>0&&l.push(...oe(e.children,a))}),l},ue=async()=>{if(0!==B.value){x.value=!0;try{await G.saveResponseFile(i.projectId,w.value),u("success","response"),u("refresh")}catch(e){a.error(`ä¿å­˜å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{x.value=!1}}else a.warning("è¯·å…ˆé€‰æ‹©ç« èŠ‚")},de=async()=>{if(0!==B.value){j.value=!0;try{await G.saveTechnicalChapters(i.projectId,w.value),u("success","technical"),u("refresh")}catch(e){a.error(`ä¿å­˜å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{j.value=!1}}else a.warning("è¯·å…ˆé€‰æ‹©ç« èŠ‚")},_e=e=>{if(!e)return"æ‹›æ ‡æ–‡æ¡£";try{const a=e.replace(/\\/g,"/").split("/"),l=a[a.length-1];return decodeURIComponent(l)}catch(a){return"æ‹›æ ‡æ–‡æ¡£"}};return T(()=>i.projectDetail,()=>{(()=>{if(!i.projectDetail)return;let e=i.projectDetail.step1_data;if("string"==typeof e)try{e=JSON.parse(e)}catch(a){e=null}if(i.projectDetail.tender_document_path){const e=i.projectDetail.original_filename||_e(i.projectDetail.tender_document_path);I.value={path:i.projectDetail.tender_document_path,name:e,uploadedAt:i.projectDetail.created_at}}else if(null==e?void 0:e.file_path){const a=e.file_name||_e(e.file_path);I.value={path:e.file_path,name:a,uploadedAt:i.projectDetail.created_at}}(null==e?void 0:e.chapters)&&Array.isArray(e.chapters)&&e.chapters.length>0&&(k.value=e.chapters)})()},{immediate:!0}),(a,t)=>{const i=J,o=e,h=s,b=Z,g=n,w=Y,z=X,C=r,D=y,T=H;return q(),V("div",ze,[P(T,{gutter:20},{default:N(()=>[P(z,{xs:24,sm:24,md:10,lg:10},{default:N(()=>[P(w,{shadow:"hover",class:"step-card"},{header:N(()=>[S("div",xe,[t[4]||(t[4]=S("i",{class:"bi bi-upload me-2 text-primary"},null,-1)),t[5]||(t[5]=S("span",{class:"step-title"},"æ­¥éª¤1: ä¸Šä¼ æ‹›æ ‡æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰",-1)),m.value||W.value?(q(),F(i,{key:0,type:"success",size:"small",class:"ms-2"},{default:N(()=>[...t[3]||(t[3]=[A(" å·²ä¸Šä¼  ",-1)])]),_:1})):U("",!0)])]),default:N(()=>[S("div",je,[W.value?(q(),V("div",Ce,[P(h,{type:"success",closable:!1},{title:N(()=>[S("div",Ve,[S("div",null,[t[7]||(t[7]=S("i",{class:"bi bi-file-earmark-check-fill me-2"},null,-1)),S("span",qe,E(I.value.name),1),P(i,{size:"small",type:"success"},{default:N(()=>[...t[6]||(t[6]=[A("å·²ä¸Šä¼ ",-1)])]),_:1})]),S("div",null,[P(o,{size:"small",onClick:ee},{default:N(()=>[...t[8]||(t[8]=[S("i",{class:"bi bi-eye me-1"},null,-1),A(" é¢„è§ˆ ",-1)])]),_:1}),P(o,{size:"small",onClick:ae},{default:N(()=>[...t[9]||(t[9]=[S("i",{class:"bi bi-arrow-repeat me-1"},null,-1),A(" é‡æ–°ä¸Šä¼  ",-1)])]),_:1})])])]),_:1})])):(q(),V("div",Ie,[m.value?(q(),V("div",Se,[P(h,{type:"success",closable:!1},{title:N(()=>[S("div",Ue,[S("span",null,[t[13]||(t[13]=S("i",{class:"bi bi-check-circle-fill me-2"},null,-1)),A(" å·²é€‰æ‹©æ–‡ä»¶: "+E(m.value.name),1)]),P(o,{size:"small",onClick:Q},{default:N(()=>[...t[14]||(t[14]=[S("i",{class:"bi bi-arrow-repeat me-1"},null,-1),A(" é‡æ–°é€‰æ‹© ",-1)])]),_:1})])]),_:1}),f.value?(q(),V("div",Ee,[S("div",Ae,[P(g,{class:"is-loading me-2"},{default:N(()=>[P($(c))]),_:1}),S("span",null,E(v.value),1)])])):U("",!0)])):(q(),F(b,{key:0,ref_key:"uploadRef",ref:d,drag:"","auto-upload":!1,limit:1,accept:".docx","on-change":R,"on-remove":M,"file-list":p.value},{tip:N(()=>[...t[10]||(t[10]=[S("div",{class:"el-upload__tip"},[S("div",null,[A("æ¨èä½¿ç”¨ "),S("strong",null,".docx"),A(" æ ¼å¼ï¼ˆå…¼å®¹æ€§æ›´å¥½ï¼‰ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 50MB")]),S("div",{class:"text-warning",style:{"font-size":"12px","margin-top":"4px"}},[S("i",{class:"bi bi-exclamation-triangle-fill me-1"}),A(" æ³¨æ„ï¼šæ—§ç‰ˆ .doc æ ¼å¼æš‚ä¸æ”¯æŒç« èŠ‚è§£æï¼Œè¯·å…ˆè½¬æ¢ä¸º .docx ")])],-1)])]),default:N(()=>[t[11]||(t[11]=S("i",{class:"bi bi-cloud-upload",style:{"font-size":"36px",color:"var(--el-color-primary)"}},null,-1)),t[12]||(t[12]=S("div",{class:"el-upload__text"},[A(" æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„æˆ– "),S("em",null,"ç‚¹å‡»ä¸Šä¼ ")],-1))]),_:1},8,["file-list"]))])),W.value||l.responseFileInfo||l.technicalFileInfo?(q(),V("div",Pe,[S("div",Ne,[K(a.$slots,"selectors",{},void 0,!0)]),S("div",De,[l.responseFileInfo?(q(),V("div",Te,[P(o,{type:"primary",size:"large",onClick:t[0]||(t[0]=e=>u("start-business"))},{default:N(()=>[...t[15]||(t[15]=[S("i",{class:"bi bi-rocket-takeoff me-1"},null,-1),A(" å¼€å§‹å•†åŠ¡åº”ç­” ",-1)])]),_:1}),t[16]||(t[16]=S("span",{class:"action-hint"},"ç¡®è®¤å…¬å¸å’Œåº”ç­”æ–‡ä»¶æ¨¡æ¿åå¼€å§‹ã€‚",-1))])):U("",!0),l.technicalFileInfo?(q(),V("div",Fe,[P(o,{type:"primary",size:"large",onClick:t[1]||(t[1]=e=>u("start-p2p"))},{default:N(()=>[...t[17]||(t[17]=[S("i",{class:"bi bi-arrow-left-right me-1"},null,-1),A(" å¼€å§‹ç‚¹å¯¹ç‚¹åº”ç­” ",-1)])]),_:1}),t[18]||(t[18]=S("span",{class:"action-hint"},"æ ¹æ®æ ‡ä¹¦è¦æ±‚ï¼Œé€‰åšã€‚",-1))])):U("",!0),l.technicalFileInfo?(q(),V("div",$e,[P(o,{type:"primary",size:"large",onClick:t[2]||(t[2]=e=>u("start-proposal"))},{default:N(()=>[...t[19]||(t[19]=[S("i",{class:"bi bi-file-code me-1"},null,-1),A(" å¼€å§‹æŠ€æœ¯æ–¹æ¡ˆç¼–å†™ ",-1)])]),_:1}),t[20]||(t[20]=S("span",{class:"action-hint"},"å¼€å§‹åº”ç­”ã€‚",-1))])):U("",!0)])])):U("",!0)])]),_:3})]),_:3}),P(z,{xs:24,sm:24,md:14,lg:14},{default:N(()=>[k.value.length>0?(q(),F(w,{key:0,shadow:"hover",class:"step-card"},{header:N(()=>[S("div",Ke,[t[21]||(t[21]=S("i",{class:"bi bi-list-nested me-2 text-success"},null,-1)),t[22]||(t[22]=S("span",{class:"step-title"},"æ­¥éª¤2: é€‰æ‹©ç« èŠ‚",-1)),B.value>0?(q(),F(i,{key:0,type:"success",size:"small",class:"ms-2"},{default:N(()=>[A(" å·²é€‰ "+E(B.value)+" ä¸ª ",1)]),_:1})):U("",!0)])]),default:N(()=>{return[S("div",Oe,[S("div",Be,[S("div",Le,[t[23]||(t[23]=S("div",{class:"stat-label"},"æ€»ç« èŠ‚æ•°",-1)),S("div",We,E(O.value),1)]),S("div",Re,[t[24]||(t[24]=S("div",{class:"stat-label"},"å·²é€‰æ‹©",-1)),S("div",Me,E(B.value),1)]),S("div",Je,[t[25]||(t[25]=S("div",{class:"stat-label"},"é€‰ä¸­å­—æ•°",-1)),S("div",Qe,E((e=L.value,e>=1e4?`${(e/1e4).toFixed(1)}ä¸‡`:e.toLocaleString())),1)])]),S("div",Ge,[P(C,null,{default:N(()=>[P(o,{size:"small",onClick:ie},{default:N(()=>[...t[26]||(t[26]=[S("i",{class:"bi bi-check-all me-1"},null,-1),A(" å…¨é€‰ ",-1)])]),_:1}),P(o,{size:"small",onClick:se},{default:N(()=>[...t[27]||(t[27]=[S("i",{class:"bi bi-x me-1"},null,-1),A(" å…¨ä¸é€‰ ",-1)])]),_:1}),P(o,{size:"small",type:"success",onClick:ne},{default:N(()=>[...t[28]||(t[28]=[S("i",{class:"bi bi-cpu me-1"},null,-1),A(" ä»…é€‰æŠ€æœ¯ç« èŠ‚ ",-1)])]),_:1}),P(o,{size:"small",type:"warning",onClick:ce},{default:N(()=>[...t[29]||(t[29]=[S("i",{class:"bi bi-file-x me-1"},null,-1),A(" æ’é™¤åˆåŒæ¡æ¬¾ ",-1)])]),_:1})]),_:1})]),P(we,{ref_key:"chapterTreeRef",ref:_,chapters:k.value,onCheck:te},null,8,["chapters"]),S("div",He,[P(D,{size:16},{default:N(()=>[P(o,{type:"info",size:"large",disabled:0===B.value,loading:x.value,onClick:ue},{default:N(()=>[...t[30]||(t[30]=[S("i",{class:"bi bi-file-earmark-arrow-down me-1"},null,-1),A(" å¦å­˜ä¸ºåº”ç­”æ–‡ä»¶ ",-1)])]),_:1},8,["disabled","loading"]),P(o,{type:"success",size:"large",disabled:0===B.value,loading:j.value,onClick:de},{default:N(()=>[...t[31]||(t[31]=[S("i",{class:"bi bi-file-code me-1"},null,-1),A(" å¦å­˜ä¸ºæŠ€æœ¯éœ€æ±‚ ",-1)])]),_:1},8,["disabled","loading"])]),_:1})])])];var e}),_:1})):U("",!0)]),_:1})]),_:3})])}}}),[["__scopeId","data-v-5df3f84c"]]),Ye={class:"tender-management-detail"},Ze={class:"selector-item"},ea={class:"tab-content"},aa={class:"info-section"},la={class:"section-header",style:{"justify-content":"space-between"}},ta={key:0,class:"bi bi-magic me-1"},ia={style:{display:"flex","align-items":"center",gap:"10px"}},sa={key:0,class:"amount"},na={key:1},ca={key:1,class:"text-muted"},ra={key:1,class:"text-muted"},oa={class:"tab-content"},ua={class:"info-section"},da={class:"section-header"},_a={key:0,class:"bi bi-magic me-1"},pa={key:0,class:"requirements-list"},ma={class:"requirement-content"},fa={class:"requirement-text"},va={key:0},ha={key:1},ba={class:"requirement-status"},ya={class:"info-section"},ga={key:0,class:"requirements-list"},ka={class:"requirement-content"},wa={class:"requirement-text"},za={key:0},xa={key:1},ja={key:2},Ca={class:"requirement-status"},Va={class:"info-section"},qa={key:0,class:"requirements-list"},Ia={class:"requirement-content"},Sa={class:"requirement-text"},Ua={key:0},Ea={key:1},Aa={key:2},Pa={class:"requirement-status"},Na={class:"info-section"},Da={key:0,class:"financial-requirements"},Ta={class:"requirement-content"},Fa={class:"requirement-text"},$a={class:"tab-label"},Ka={class:"tab-content"},Oa={class:"file-section"},Ba={class:"section-header"},La={class:"file-section"},Wa={class:"section-header"},Ra={class:"action-area"},Ma={class:"tab-label"},Ja={class:"tab-content"},Qa={class:"file-section"},Ga={class:"section-header"},Ha={class:"file-section"},Xa={class:"section-header"},Ya={class:"file-section"},Za={class:"section-header"},el={class:"action-area"},al={class:"tab-label"},ll={class:"tab-content"},tl={class:"info-section"},il={class:"section-header"},sl={key:0,class:"documents-grid"},nl={class:"action-area"},cl={key:1,class:"info-section"},rl={class:"section-header"},ol=l(j({__name:"ManagementDetail",setup(l){const i=u(),n=d(),c=le(),r=D(!1),j=D(!1),I=D(!1),K=D(null),M=D("basic"),Z=D([]),ce=D(!1),re=D(!1),oe=D([]),ue=D([]),de=D([]),_e=D(!1),me=D(!1),fe=D(""),ve=D(""),he=O({name:"",number:"",company_id:null,tenderer:"",agency:"",bidding_method:"",bidding_location:"",bidding_time:"",budget_amount:null,business_contact_name:"",business_contact_phone:"",tenderer_contact_person:"",tenderer_contact_method:"",agency_contact_person:"",agency_contact_method:"",authorized_person_name:"",authorized_person_id:"",product_category_id:null,product_category_name:"",product_items:[]}),be={name:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}],number:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®ç¼–å·",trigger:"blur"}],company_id:[{required:!0,message:"è¯·é€‰æ‹©å…¬å¸",trigger:"change"}]},ye=C(()=>Number(i.params.id)),ge=C(()=>{var e;return(null==(e=K.value)?void 0:e.name)||"é¡¹ç›®è¯¦æƒ…"}),ke=C(()=>{const e=a=>{let l=a.length;return a.forEach(a=>{a.children&&a.children.length>0&&(l+=e(a.children))}),l};return e(de.value)}),ze=C(()=>{if(!he.product_category_id)return[];const e=ue.value.find(e=>e.category_id===he.product_category_id);return(null==e?void 0:e.items)||[]}),xe=e=>e?"string"==typeof e?{fileUrl:e,fileName:void 0,fileSize:void 0}:{fileUrl:e.file_url||e.download_url||e.file_path||"",fileName:e.filename||e.file_name,fileSize:e.file_size}:null,je=C(()=>{var e,a;return xe(null==(a=null==(e=K.value)?void 0:e.step1_data)?void 0:a.response_file_path)}),Ce=C(()=>{var e,a;return xe(null==(a=null==(e=K.value)?void 0:e.step1_data)?void 0:a.business_response_file)}),Ve=C(()=>{var e,a;return xe(null==(a=null==(e=K.value)?void 0:e.step1_data)?void 0:a.technical_file_path)}),qe=C(()=>{var e,a;return xe(null==(a=null==(e=K.value)?void 0:e.step1_data)?void 0:a.technical_point_to_point_file)}),Ie=C(()=>{var e,a;return xe(null==(a=null==(e=K.value)?void 0:e.step1_data)?void 0:a.technical_proposal_file)}),Se={business_license:"è¥ä¸šæ‰§ç…§ä¿¡æ¯",legal_id_front:"æ³•äººèº«ä»½è¯æ­£é¢",legal_id_back:"æ³•äººèº«ä»½è¯åé¢",auth_id_front:"è¢«æˆæƒäººèº«ä»½è¯æ­£é¢",auth_id_back:"è¢«æˆæƒäººèº«ä»½è¯åé¢",authorization_letter:"æ³•äººæˆæƒå§”æ‰˜ä¹¦",bank_permit:"å¼€æˆ·è®¸å¯è¯",iso9001:"ISO9001è´¨é‡ç®¡ç†ä½“ç³»è®¤è¯",iso20000:"ISO20000ä¿¡æ¯æŠ€æœ¯æœåŠ¡ç®¡ç†ä½“ç³»è®¤è¯",iso27001:"ISO27001ä¿¡æ¯å®‰å…¨ç®¡ç†ä½“ç³»è®¤è¯",cmmi:"CMMIèƒ½åŠ›æˆç†Ÿåº¦è®¤è¯",itss:"ITSSä¿¡æ¯æŠ€æœ¯æœåŠ¡æ ‡å‡†è®¤è¯",value_added_telecom_permit:"å¢å€¼ç”µä¿¡ä¸šåŠ¡è®¸å¯è¯",basic_telecom_permit:"åŸºç¡€ç”µä¿¡ä¸šåŠ¡è®¸å¯è¯",level_protection:"ç­‰çº§ä¿æŠ¤è®¤è¯",software_copyright:"è½¯ä»¶è‘—ä½œæƒ",patent_certificate:"ä¸“åˆ©è¯ä¹¦",safety_production:"å®‰å…¨ç”Ÿäº§è®¸å¯è¯",project_performance:"é¡¹ç›®ä¸šç»©è¦æ±‚",audit_report:"è´¢åŠ¡å®¡è®¡æŠ¥å‘Š",social_security:"ç¤¾ä¼šä¿é™©è¯æ˜",dishonest_executor:"å¤±ä¿¡è¢«æ‰§è¡Œäºº",tax_violation_check:"é‡å¤§ç¨æ”¶è¿æ³•",gov_procurement_creditchina:"æ”¿åºœé‡‡è´­ä¸¥é‡è¿æ³•å¤±ä¿¡è®°å½•ï¼ˆä¿¡ç”¨ä¸­å›½ï¼‰",gov_procurement_ccgp:"æ”¿åºœé‡‡è´­ä¸¥é‡è¿æ³•å¤±ä¿¡è®°å½•ï¼ˆæ”¿åºœé‡‡è´­ç½‘ï¼‰",tax_compliance:"ä¾æ³•çº³ç¨",commitment_letter:"æ‰¿è¯ºå‡½",property_certificate:"è¥ä¸šåŠå…¬åœºæ‰€æˆ¿äº§è¯æ˜",deposit_requirement:"ä¿è¯é‡‘è¦æ±‚",purchaser_blacklist:"é‡‡è´­äººé»‘åå•"},Ue=C(()=>{var e;const a=null==(e=K.value)?void 0:e.qualifications_data;return a&&"object"==typeof a&&Object.keys(a).length>0?(e=>{const a=[],l=[],t=[];let i=null;const s=["ä¸šç»©","é¡¹ç›®","æ¡ˆä¾‹","åˆåŒ","performance","project"],n=["äººå‘˜","é¡¹ç›®ç»ç†","æŠ€æœ¯è´Ÿè´£äºº","å·¥ç¨‹å¸ˆ","personnel","staff"],c=["è´¢åŠ¡","èµ„æœ¬","èµ„äº§","å®¡è®¡","é“¶è¡Œ","æ³¨å†Œèµ„é‡‘","è¥ä¸šé¢","audit","financial"],r={},o=new Set;return Object.entries(e).forEach(([a,l])=>{if(o.has(a))return;const t=a.endsWith("_front")||a.includes("_id_front"),i=a.endsWith("_back")||a.includes("_id_back");if(t){const t=a.replace("_front","_back"),i=e[t];if(i){const e=(l.qualification_name||a).replace("æ­£é¢","").replace("åé¢","").trim(),s=l.tender_description||"",n=i.tender_description||"";let c=s;n&&n!==s&&(c=`${s}\n${n}`),c=c?`ã€éœ€æä¾›æ­£åé¢ã€‘\n${c}`:"éœ€æä¾›æ­£åé¢",r[a.replace("_front","")]={...l,qualification_name:e,tender_description:c,required_by_tender:l.required_by_tender||i.required_by_tender,is_merged:!0,original_keys:[a,t]},o.add(a),o.add(t)}else r[a]=l,o.add(a)}else if(i){const t=a.replace("_back","_front");e[t]||(r[a]=l,o.add(a))}else r[a]=l,o.add(a)}),Object.entries(r).forEach(([e,r])=>{const o=1==r.required_by_tender||!0===r.required_by_tender||"mandatory"===r.constraint_type,u=r.tender_description||r.detail||"",d=r.qualification_name||r.summary||e,_=r.category||"";"è´¢åŠ¡è¦æ±‚"===_||_.includes("è´¢åŠ¡")||c.some(a=>e.includes(a)||_.includes(a))?(i||(i={description:[]}),i.description.push(`${d}: ${u}`)):"ä¸šç»©è¦æ±‚"===_||s.some(a=>e.includes(a)||_.includes(a))?l.push({description:d,detail:u,required:o}):_.includes("äººå‘˜")||n.some(a=>e.includes(a)||_.includes(a))?t.push({position:d,detail:u,required:o}):a.push({name:d,note:u,required:o,category:_})}),i&&i.description&&(i.description=i.description.join("ï¼›")),{certifications:a,performance:l,personnel:t,financial:i}})(a):{certifications:[],performance:[],personnel:[],financial:null}}),Ee=async()=>{if(ye.value){r.value=!0;try{const a=(await G.getProject(ye.value)).data;K.value={id:a.project_id,name:a.project_name,number:a.project_number,company_id:a.company_id,company_name:a.company_name,status:a.status,created_at:a.created_at,updated_at:a.updated_at,authorized_person_name:a.authorized_person_name,authorized_person_id:a.authorized_person_id,tenderer:a.tenderer,agency:a.agency,bidding_method:a.bidding_method,bidding_location:a.bidding_location,bidding_time:a.bidding_time,budget_amount:a.budget_amount,business_contact_name:a.business_contact_name,business_contact_phone:a.business_contact_phone,tenderer_contact_person:a.tenderer_contact_person,tenderer_contact_method:a.tenderer_contact_method,agency_contact_person:a.agency_contact_person,agency_contact_method:a.agency_contact_method,step1_data:a.step1_data,...a},he.name=K.value.name||"",he.number=K.value.number||"",he.company_id=K.value.company_id||null,he.tenderer=K.value.tenderer||"",he.agency=K.value.agency||"",he.bidding_method=K.value.bidding_method||"",he.bidding_location=K.value.bidding_location||"",he.bidding_time=K.value.bidding_time||"",he.budget_amount=K.value.budget_amount||null,he.business_contact_name=K.value.business_contact_name||"",he.business_contact_phone=K.value.business_contact_phone||"",he.tenderer_contact_person=K.value.tenderer_contact_person||"",he.tenderer_contact_method=K.value.tenderer_contact_method||"",he.agency_contact_person=K.value.agency_contact_person||"",he.agency_contact_method=K.value.agency_contact_method||"",he.authorized_person_name=K.value.authorized_person_name||"",he.authorized_person_id=K.value.authorized_person_id||"",he.product_category_id=K.value.product_category_id||null,he.product_category_name=K.value.product_category_name||"";const l=K.value.product_items;if("string"==typeof l)try{he.product_items=JSON.parse(l)||[]}catch{he.product_items=[]}else he.product_items=l||[];if(a.step1_data)try{const e="string"==typeof a.step1_data?JSON.parse(a.step1_data):a.step1_data;if(e.chapters&&Array.isArray(e.chapters)){const a=e=>e.filter(e=>!(e.para_start_idx>=e.para_end_idx)&&(0!==e.word_count&&(e.children&&Array.isArray(e.children)&&(e.children=a(e.children)),!0)));de.value=a(e.chapters).map(e=>({...e,children:[]})),de.value.length,e.chapters.length}const l=[];let t=1;if(a.tender_document_path&&l.push({id:t++,file_path:a.tender_document_path,file_url:a.tender_document_path,original_filename:"æ‹›æ ‡æ–‡æ¡£",document_type:"tender",uploaded_at:a.created_at}),e.response_file_path&&l.push({id:t++,file_path:e.response_file_path,file_url:e.response_file_path,original_filename:e.response_filename||"åº”ç­”æ–‡ä»¶æ¨¡æ¿",document_type:"response_template",file_size:e.response_file_size,uploaded_at:a.updated_at}),e.technical_file_path&&l.push({id:t++,file_path:e.technical_file_path,file_url:e.technical_file_path,original_filename:e.technical_filename||"æŠ€æœ¯éœ€æ±‚æ–‡ä»¶",document_type:"technical",file_size:e.technical_file_size,uploaded_at:a.updated_at}),e.business_response_file){const i="string"==typeof e.business_response_file?{file_path:e.business_response_file}:e.business_response_file;l.push({id:t++,file_path:i.file_path||i.file_url,file_url:i.file_url||i.file_path,original_filename:i.file_name||"å•†åŠ¡åº”ç­”å®Œæˆæ–‡ä»¶",document_type:"business_response",file_size:i.file_size,uploaded_at:a.updated_at})}if(e.technical_point_to_point_file){const i="string"==typeof e.technical_point_to_point_file?{file_path:e.technical_point_to_point_file}:e.technical_point_to_point_file;l.push({id:t++,file_path:i.file_path||i.file_url,file_url:i.file_url||i.file_path,original_filename:i.file_name||"æŠ€æœ¯ç‚¹å¯¹ç‚¹åº”ç­”æ–‡ä»¶",document_type:"technical_p2p",file_size:i.file_size,uploaded_at:a.updated_at})}if(e.technical_proposal_file){const i="string"==typeof e.technical_proposal_file?{file_path:e.technical_proposal_file}:e.technical_proposal_file;l.push({id:t++,file_path:i.file_path||i.file_url,file_url:i.file_url||i.file_path,original_filename:i.file_name||"æŠ€æœ¯æ–¹æ¡ˆæ–‡ä»¶",document_type:"technical_proposal",file_size:i.file_size,uploaded_at:a.updated_at})}oe.value=l}catch(e){}"æ–°é¡¹ç›®"!==K.value.name&&"draft"!==K.value.status||(I.value=!0),K.value&&c.setCurrentProject(K.value)}catch(l){a.error("åŠ è½½é¡¹ç›®è¯¦æƒ…å¤±è´¥")}finally{r.value=!1}}},Ae=e=>{if(!e)return he.product_category_name="",void(he.product_items=[]);const a=ue.value.find(a=>a.category_id===e);a&&(he.product_category_name=a.category_name,he.product_items=[])},Pe=e=>e.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}),Ne=e=>({active:"è¿›è¡Œä¸­",completed:"å·²å®Œæˆ",draft:"è‰ç¨¿"}[e]||e),De=()=>{Ee()},Te=()=>{I.value=!0},Fe=()=>{o.confirm("ç¡®å®šè¦å–æ¶ˆç¼–è¾‘å—ï¼Ÿæœªä¿å­˜çš„æ›´æ”¹å°†ä¸¢å¤±","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(()=>{Ee(),I.value=!1}).catch(()=>{})},$e=async()=>{var e,l;j.value=!0;try{const e={project_name:he.name,project_number:he.number,company_id:he.company_id,tenderer:he.tenderer,agency:he.agency,bidding_method:he.bidding_method,bidding_location:he.bidding_location,bidding_time:he.bidding_time,budget_amount:he.budget_amount,business_contact_name:he.business_contact_name,business_contact_phone:he.business_contact_phone,tenderer_contact_person:he.tenderer_contact_person,tenderer_contact_method:he.tenderer_contact_method,agency_contact_person:he.agency_contact_person,agency_contact_method:he.agency_contact_method,authorized_person_name:he.authorized_person_name,authorized_person_id:he.authorized_person_id,product_category_id:he.product_category_id,product_category_name:he.product_category_name,product_items:he.product_items,status:"active"};await G.updateProject(ye.value,e),a.success("ä¿å­˜æˆåŠŸ"),I.value=!1,_e.value=!1,await Ee()}catch(t){const i=(null==(l=null==(e=null==t?void 0:t.response)?void 0:e.data)?void 0:l.message)||(null==t?void 0:t.message)||"ä¿å­˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥é¡¹ç›®åç§°å’Œç¼–å·æ˜¯å¦ä¸å…¶ä»–é¡¹ç›®é‡å¤";a.error({message:i,duration:5e3,showClose:!0})}finally{j.value=!1}},Ke=async()=>{var e;if(!K.value)return;(null==(e=K.value.step1_data)?void 0:e.response_file_path)?(c.setCurrentProject(K.value),await n.push({name:"BusinessResponse"})):a.warning("æœªæ‰¾åˆ°åº”ç­”æ–‡ä»¶æ¨¡æ¿")},Oe=async()=>{var e;if(!K.value)return;(null==(e=K.value.step1_data)?void 0:e.technical_file_path)?(c.setCurrentProject(K.value),await n.push({name:"PointToPoint"})):a.warning("æœªæ‰¾åˆ°æŠ€æœ¯éœ€æ±‚æ–‡ä»¶")},Be=async()=>{var e;if(!K.value)return;(null==(e=K.value.step1_data)?void 0:e.technical_file_path)?(c.setCurrentProject(K.value),await n.push({name:"TechProposal"})):a.warning("æœªæ‰¾åˆ°æŠ€æœ¯éœ€æ±‚æ–‡ä»¶")},Le=async()=>{K.value&&(c.setCurrentProject(K.value),await n.push({name:"FinalTender"}))},We=async()=>{var e,l;await Ee();if(!(null==(e=K.value)?void 0:e.tenderer)&&!(null==(l=K.value)?void 0:l.qualifications_data)){a.info("å¼€å§‹è‡ªåŠ¨æ‰§è¡ŒAIæå–...");try{await Me(),await $e(),await Je(),a.success("AIè‡ªåŠ¨æå–å®Œæˆï¼")}catch(t){a.warning("è‡ªåŠ¨AIæå–å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®é‡è¯•")}}},Re=async e=>{await Ee(),"response"===e?(a.success("åº”ç­”æ–‡ä»¶å·²ä¿å­˜ï¼Œå¯ä»¥å¼€å§‹å•†åŠ¡åº”ç­”å¤„ç†"),M.value="business"):"technical"===e&&(a.success("æŠ€æœ¯éœ€æ±‚å·²ä¿å­˜ï¼Œå¯ä»¥å¼€å§‹æŠ€æœ¯æ–¹æ¡ˆç¼–å†™"),M.value="technical")},Me=async()=>{if(ye.value){ce.value=!0;try{const e=await G.extractBasicInfo(ye.value);if(!e.success||!e.data)throw new Error(e.error||"AIæå–å¤±è´¥");{const l=e.data,t=e=>{if(!e)return null;const a=String(e),l=a.match(/[\d.]+/);if(!l)return null;const t=parseFloat(l[0]);return isNaN(t)?null:a.includes("ä¸‡")?1e4*t:t};Object.assign(he,{name:l.project_name||he.name,number:l.project_number||he.number,tenderer:l.tender_party||he.tenderer,agency:l.tender_agent||he.agency,bidding_method:l.tender_method||he.bidding_method,bidding_location:l.tender_location||he.bidding_location,bidding_time:l.tender_deadline||he.bidding_time,budget_amount:t(l.budget_amount)||he.budget_amount,tenderer_contact_person:l.tenderer_contact_person||he.tenderer_contact_person,tenderer_contact_method:l.tenderer_contact_method||he.tenderer_contact_method,agency_contact_person:l.agency_contact_person||he.agency_contact_person,agency_contact_method:l.agency_contact_method||he.agency_contact_method}),K.value&&Object.assign(K.value,{name:l.project_name||K.value.name,number:l.project_number||K.value.number,tenderer:l.tender_party||K.value.tenderer,agency:l.tender_agent||K.value.agency,bidding_method:l.tender_method||K.value.bidding_method,bidding_location:l.tender_location||K.value.bidding_location,bidding_time:l.tender_deadline||K.value.bidding_time,budget_amount:l.budget_amount?parseFloat(String(l.budget_amount).replace(/[^\d.]/g,"")||"0"):K.value.budget_amount,tenderer_contact_person:l.tenderer_contact_person||K.value.tenderer_contact_person,tenderer_contact_method:l.tenderer_contact_method||K.value.tenderer_contact_method,agency_contact_person:l.agency_contact_person||K.value.agency_contact_person,agency_contact_method:l.agency_contact_method||K.value.agency_contact_method}),I.value||(I.value=!0),_e.value=!0,a.success({message:"AIæå–åŸºæœ¬ä¿¡æ¯æˆåŠŸï¼Œå·²è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œè¯·æ£€æŸ¥ä¿¡æ¯åæ‰‹åŠ¨ä¿å­˜",duration:5e3,showClose:!0}),setTimeout(()=>{const e=document.querySelector(".info-section");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},300)}}catch(e){a.error(`AIæå–å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{ce.value=!1}}else a.warning("è¯·å…ˆä¸Šä¼ å¹¶è§£ææ‹›æ ‡æ–‡æ¡£")},Je=async()=>{if(ye.value){re.value=!0;try{const e=await G.extractQualifications(ye.value);if(!e.success)throw new Error(e.error||"AIæå–å¤±è´¥");a.success("AIæå–èµ„æ ¼è¦æ±‚æˆåŠŸï¼Œæ­£åœ¨åˆ·æ–°æ•°æ®..."),await Ee(),a.success("èµ„æ ¼è¦æ±‚å·²æ›´æ–°")}catch(e){a.error(`AIæå–å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{re.value=!1}}else a.warning("è¯·å…ˆä¸Šä¼ å¹¶è§£ææ‹›æ ‡æ–‡æ¡£")},Qe=(e,a)=>{fe.value=e,ve.value=a,me.value=!0};return T(()=>he.company_id,e=>{if(e&&Z.value.length>0){const l=Z.value.find(a=>a.company_id===e);l&&(he.authorized_person_name=l.authorized_person_name||"",he.authorized_person_id=l.authorized_person_id||"",K.value&&(K.value.authorized_person_name=l.authorized_person_name||"",K.value.authorized_person_id=l.authorized_person_id||""),l.authorized_person_name&&a.success(`å·²è‡ªåŠ¨å¡«å……è¢«æˆæƒäººä¿¡æ¯: ${l.authorized_person_name}`))}}),T(()=>i.params.id,()=>{Ee()}),B(()=>{(async()=>{try{const e=await ee.getCompanies();Z.value=e.data||[]}catch(e){}})(),(async()=>{try{const e=await ae.getProductCategories();e.success&&(ue.value=e.data||[])}catch(e){}})(),Ee()}),(a,l)=>{const i=z,n=w,c=X,o=H,u=e,d=J,C=t,D=p,T=k,O=ie,B=te,G=_,ee=ne,ae=y,le=se,xe=b,Ge=Y,He=Q,ol=m,ul=v,dl=f,_l=s,pl=h;return q(),V("div",Ye,[P($(g),{title:ge.value,"show-back":!0,ghost:!0},null,8,["title"]),r.value?(q(),F($(x),{key:0,text:"åŠ è½½é¡¹ç›®è¯¦æƒ…..."})):K.value?(q(),V(L,{key:1},[P(Xe,{"project-id":ye.value,"company-id":K.value.company_id,"project-detail":K.value,"response-file-info":je.value,"technical-file-info":Ve.value,onSuccess:Re,onRefresh:Ee,onParseComplete:We,onPreview:Qe,onStartBusiness:Ke,onStartP2p:Oe,onStartProposal:Be},{selectors:N(()=>[P(o,{gutter:16},{default:N(()=>[P(c,{span:24},{default:N(()=>[S("div",Ze,[l[17]||(l[17]=S("span",{class:"selector-label"},"å…¬å¸ï¼š",-1)),P(n,{modelValue:he.company_id,"onUpdate:modelValue":l[0]||(l[0]=e=>he.company_id=e),placeholder:"è¯·é€‰æ‹©å…¬å¸",style:{width:"100%"}},{default:N(()=>[(q(!0),V(L,null,W(Z.value,e=>(q(),F(i,{key:e.company_id,label:e.name,value:e.company_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["project-id","company-id","project-detail","response-file-info","technical-file-info"]),P(Ge,{class:"tabs-card",shadow:"never"},{default:N(()=>[P(pl,{modelValue:M.value,"onUpdate:modelValue":l[15]||(l[15]=e=>M.value=e),class:"detail-tabs"},{default:N(()=>[P(xe,{name:"basic"},{label:N(()=>[...l[18]||(l[18]=[S("span",{class:"tab-label"},[S("i",{class:"bi bi-info-circle"}),A(" åŸºæœ¬ä¿¡æ¯ ")],-1)])]),default:N(()=>[S("div",ea,[S("section",aa,[S("div",la,[P(u,{size:"small",type:"primary",loading:ce.value,disabled:!ye.value||ce.value,onClick:Me},{default:N(()=>[ce.value?U("",!0):(q(),V("i",ta)),A(" "+E(ce.value?"AIæå–ä¸­...":"AIæå–åŸºæœ¬ä¿¡æ¯"),1)]),_:1},8,["loading","disabled"]),S("div",ia,[_e.value&&I.value?(q(),F(d,{key:0,type:"warning",size:"small"},{default:N(()=>[...l[19]||(l[19]=[S("i",{class:"bi bi-exclamation-triangle-fill"},null,-1),A(" æœ‰æœªä¿å­˜çš„æ›´æ”¹ ",-1)])]),_:1})):U("",!0),I.value?U("",!0):(q(),V(L,{key:1},[P(u,{size:"small",onClick:De},{default:N(()=>[...l[20]||(l[20]=[S("i",{class:"bi bi-arrow-clockwise"},null,-1),A(" åˆ·æ–° ",-1)])]),_:1}),P(u,{size:"small",type:"primary",onClick:Te},{default:N(()=>[...l[21]||(l[21]=[S("i",{class:"bi bi-pencil"},null,-1),A(" ç¼–è¾‘é¡¹ç›® ",-1)])]),_:1})],64)),I.value?(q(),V(L,{key:2},[P(u,{size:"small",onClick:Fe},{default:N(()=>[...l[22]||(l[22]=[S("i",{class:"bi bi-x-lg"},null,-1),A(" å–æ¶ˆ ",-1)])]),_:1}),P(u,{size:"small",type:"primary",loading:j.value,onClick:$e},{default:N(()=>[...l[23]||(l[23]=[S("i",{class:"bi bi-check-lg"},null,-1),A(" ä¿å­˜ ",-1)])]),_:1},8,["loading"])],64)):U("",!0)])]),I.value?(q(),F(G,{key:0,model:he,rules:be,"label-width":"120px",class:"edit-form"},{default:N(()=>[P(o,{gutter:20},{default:N(()=>[P(c,{span:12},{default:N(()=>[P(D,{label:"é¡¹ç›®åç§°",prop:"name"},{default:N(()=>[P(C,{modelValue:he.name,"onUpdate:modelValue":l[1]||(l[1]=e=>he.name=e),placeholder:"è¯·è¾“å…¥é¡¹ç›®åç§°"},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"é¡¹ç›®ç¼–å·",prop:"number"},{default:N(()=>[P(C,{modelValue:he.number,"onUpdate:modelValue":l[2]||(l[2]=e=>he.number=e),placeholder:"è¯·è¾“å…¥é¡¹ç›®ç¼–å·"},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"æ‹›æ ‡å•ä½"},{default:N(()=>[P(C,{modelValue:he.tenderer,"onUpdate:modelValue":l[3]||(l[3]=e=>he.tenderer=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡å•ä½"},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"æ‹›æ ‡ä»£ç†"},{default:N(()=>[P(C,{modelValue:he.agency,"onUpdate:modelValue":l[4]||(l[4]=e=>he.agency=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡ä»£ç†"},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"æ‹›æ ‡æ–¹å¼"},{default:N(()=>[P(C,{modelValue:he.bidding_method,"onUpdate:modelValue":l[5]||(l[5]=e=>he.bidding_method=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡æ–¹å¼"},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"å¼€æ ‡åœ°ç‚¹"},{default:N(()=>[P(C,{modelValue:he.bidding_location,"onUpdate:modelValue":l[6]||(l[6]=e=>he.bidding_location=e),placeholder:"è¯·è¾“å…¥å¼€æ ‡åœ°ç‚¹"},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"å¼€æ ‡æ—¶é—´"},{default:N(()=>[P(C,{modelValue:he.bidding_time,"onUpdate:modelValue":l[7]||(l[7]=e=>he.bidding_time=e),placeholder:"è¯·è¾“å…¥å¼€æ ‡æ—¶é—´"},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"é¢„ç®—é‡‘é¢"},{default:N(()=>[P(T,{modelValue:he.budget_amount,"onUpdate:modelValue":l[8]||(l[8]=e=>he.budget_amount=e),controls:!1,precision:2,placeholder:"è¯·è¾“å…¥é¢„ç®—é‡‘é¢",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"æ‹›æ ‡æ–¹è”ç³»äºº"},{default:N(()=>[P(C,{modelValue:he.tenderer_contact_person,"onUpdate:modelValue":l[9]||(l[9]=e=>he.tenderer_contact_person=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡æ–¹è”ç³»äºº"},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"æ‹›æ ‡æ–¹è”ç³»ç”µè¯"},{default:N(()=>[P(C,{modelValue:he.tenderer_contact_method,"onUpdate:modelValue":l[10]||(l[10]=e=>he.tenderer_contact_method=e),placeholder:"è¯·è¾“å…¥æ‹›æ ‡æ–¹è”ç³»ç”µè¯"},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"ä»£ç†æœºæ„è”ç³»äºº"},{default:N(()=>[P(C,{modelValue:he.agency_contact_person,"onUpdate:modelValue":l[11]||(l[11]=e=>he.agency_contact_person=e),placeholder:"è¯·è¾“å…¥ä»£ç†æœºæ„è”ç³»äºº"},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"ä»£ç†æœºæ„è”ç³»ç”µè¯"},{default:N(()=>[P(C,{modelValue:he.agency_contact_method,"onUpdate:modelValue":l[12]||(l[12]=e=>he.agency_contact_method=e),placeholder:"è¯·è¾“å…¥ä»£ç†æœºæ„è”ç³»ç”µè¯"},null,8,["modelValue"])]),_:1})]),_:1}),P(c,{span:12},{default:N(()=>[P(D,{label:"äº§å“åˆ†ç±»"},{default:N(()=>[P(n,{modelValue:he.product_category_id,"onUpdate:modelValue":l[13]||(l[13]=e=>he.product_category_id=e),placeholder:"é€‰æ‹©äº§å“åˆ†ç±»",clearable:"",style:{width:"100%"},onChange:Ae},{default:N(()=>[(q(!0),V(L,null,W(ue.value,e=>(q(),F(i,{key:e.category_id,label:e.category_name,value:e.category_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),ze.value.length>0?(q(),F(c,{key:0,span:12},{default:N(()=>[P(D,{label:"å…·ä½“äº§å“"},{default:N(()=>[P(B,{modelValue:he.product_items,"onUpdate:modelValue":l[14]||(l[14]=e=>he.product_items=e)},{default:N(()=>[(q(!0),V(L,null,W(ze.value,e=>(q(),F(O,{key:e.item_id,label:e.item_name},null,8,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):U("",!0)]),_:1})]),_:1},8,["model"])):(q(),F(le,{key:1,column:2,border:""},{default:N(()=>[P(ee,{label:"é¡¹ç›®åç§°",span:2},{default:N(()=>[S("strong",null,E(K.value.name),1)]),_:1}),P(ee,{label:"é¡¹ç›®ç¼–å·"},{default:N(()=>[A(E(K.value.number||"-"),1)]),_:1}),P(ee,{label:"åˆ›å»ºæ—¶é—´"},{default:N(()=>[A(E(K.value.created_at),1)]),_:1}),P(ee,{label:"æœ€åæ›´æ–°"},{default:N(()=>[A(E(K.value.updated_at||"-"),1)]),_:1}),P(ee,{label:"çŠ¶æ€"},{default:N(()=>{return[P(d,{type:(e=K.value.status,{active:"success",completed:"primary",draft:"info"}[e]||"info")},{default:N(()=>[A(E(Ne(K.value.status)),1)]),_:1},8,["type"])];var e}),_:1}),P(ee,{label:"æ‹›æ ‡å•ä½"},{default:N(()=>[A(E(K.value.tenderer||"-"),1)]),_:1}),P(ee,{label:"æ‹›æ ‡ä»£ç†"},{default:N(()=>[A(E(K.value.agency||"-"),1)]),_:1}),P(ee,{label:"æ‹›æ ‡æ–¹å¼"},{default:N(()=>[A(E(K.value.bidding_method||"-"),1)]),_:1}),P(ee,{label:"å¼€æ ‡åœ°ç‚¹"},{default:N(()=>[A(E(K.value.bidding_location||"-"),1)]),_:1}),P(ee,{label:"å¼€æ ‡æ—¶é—´"},{default:N(()=>[A(E(K.value.bidding_time||"-"),1)]),_:1}),P(ee,{label:"é¢„ç®—é‡‘é¢"},{default:N(()=>[K.value.budget_amount?(q(),V("span",sa," Â¥ "+E(Pe(K.value.budget_amount)),1)):(q(),V("span",na,"-"))]),_:1}),P(ee,{label:"æ‹›æ ‡æ–¹è”ç³»äºº"},{default:N(()=>[A(E(K.value.tenderer_contact_person||"-"),1)]),_:1}),P(ee,{label:"æ‹›æ ‡æ–¹è”ç³»ç”µè¯"},{default:N(()=>[A(E(K.value.tenderer_contact_method||"-"),1)]),_:1}),P(ee,{label:"ä»£ç†æœºæ„è”ç³»äºº"},{default:N(()=>[A(E(K.value.agency_contact_person||"-"),1)]),_:1}),P(ee,{label:"ä»£ç†æœºæ„è”ç³»ç”µè¯"},{default:N(()=>[A(E(K.value.agency_contact_method||"-"),1)]),_:1}),P(ee,{label:"äº§å“åˆ†ç±»"},{default:N(()=>[K.value.product_category_name?(q(),F(d,{key:0,type:"primary"},{default:N(()=>[A(E(K.value.product_category_name),1)]),_:1})):(q(),V("span",ca,"æœªé€‰æ‹©"))]),_:1}),P(ee,{label:"å…·ä½“äº§å“"},{default:N(()=>{var e;return[(null==(e=K.value.product_items)?void 0:e.length)?(q(),F(ae,{key:0,wrap:""},{default:N(()=>[(q(!0),V(L,null,W(K.value.product_items,e=>(q(),F(d,{key:e,size:"small"},{default:N(()=>[A(E(e),1)]),_:2},1024))),128))]),_:1})):(q(),V("span",ra,"-"))]}),_:1})]),_:1}))])])]),_:1}),P(xe,{name:"qualifications"},{label:N(()=>[...l[24]||(l[24]=[S("span",{class:"tab-label"},[S("i",{class:"bi bi-award"}),A(" èµ„æ ¼è¦æ±‚ ")],-1)])]),default:N(()=>[S("div",oa,[S("section",ua,[S("div",da,[l[25]||(l[25]=S("h3",null,[S("i",{class:"bi bi-patch-check"}),A(" èµ„è´¨è¦æ±‚")],-1)),P(u,{size:"small",type:"primary",loading:re.value,disabled:!ye.value||re.value,onClick:Je},{default:N(()=>[re.value?U("",!0):(q(),V("i",_a)),A(" "+E(re.value?"AIæå–ä¸­...":"AIæå–èµ„æ ¼è¦æ±‚"),1)]),_:1},8,["loading","disabled"])]),Ue.value.certifications.length>0?(q(),V("div",pa,[(q(!0),V(L,null,W(Ue.value.certifications,(e,a)=>(q(),F(Ge,{key:a,shadow:"never",class:"requirement-item"},{default:N(()=>{return[S("div",ma,[l[28]||(l[28]=S("div",{class:"requirement-icon"},[S("i",{class:"bi bi-shield-check"})],-1)),S("div",fa,[S("h4",null,E((a=e.name,Se[a]?Se[a]:a)),1),e.level?(q(),V("p",va,"ç­‰çº§è¦æ±‚: "+E(e.level),1)):U("",!0),e.note?(q(),V("p",ha,E(e.note),1)):U("",!0)]),S("div",ba,[e.required?(q(),F(d,{key:0,type:"danger",size:"small"},{default:N(()=>[...l[26]||(l[26]=[A(" å¿…éœ€ ",-1)])]),_:1})):(q(),F(d,{key:1,type:"info",size:"small"},{default:N(()=>[...l[27]||(l[27]=[A("å¯é€‰",-1)])]),_:1}))])])];var a}),_:2},1024))),128))])):(q(),F(He,{key:1,description:"æš‚æ— èµ„è´¨è¦æ±‚","image-size":80}))]),S("section",ya,[l[32]||(l[32]=S("div",{class:"section-header"},[S("h3",null,[S("i",{class:"bi bi-graph-up-arrow"}),A(" ä¸šç»©è¦æ±‚")])],-1)),Ue.value.performance.length>0?(q(),V("div",ga,[(q(!0),V(L,null,W(Ue.value.performance,(e,a)=>(q(),F(Ge,{key:a,shadow:"never",class:"requirement-item"},{default:N(()=>[S("div",ka,[l[31]||(l[31]=S("div",{class:"requirement-icon"},[S("i",{class:"bi bi-briefcase"})],-1)),S("div",wa,[S("h4",null,E(e.description),1),e.amount?(q(),V("p",za,"é‡‘é¢è¦æ±‚: â‰¥ Â¥"+E(Pe(e.amount)),1)):U("",!0),e.time_range?(q(),V("p",xa,"æ—¶é—´èŒƒå›´: "+E(e.time_range),1)):U("",!0),e.count?(q(),V("p",ja,"æ•°é‡è¦æ±‚: "+E(e.count)+" ä¸ª",1)):U("",!0)]),S("div",Ca,[e.required?(q(),F(d,{key:0,type:"danger",size:"small"},{default:N(()=>[...l[29]||(l[29]=[A(" å¿…éœ€ ",-1)])]),_:1})):(q(),F(d,{key:1,type:"info",size:"small"},{default:N(()=>[...l[30]||(l[30]=[A("å¯é€‰",-1)])]),_:1}))])])]),_:2},1024))),128))])):(q(),F(He,{key:1,description:"æš‚æ— ä¸šç»©è¦æ±‚","image-size":80}))]),S("section",Va,[l[36]||(l[36]=S("div",{class:"section-header"},[S("h3",null,[S("i",{class:"bi bi-people"}),A(" äººå‘˜é…ç½®è¦æ±‚")])],-1)),Ue.value.personnel.length>0?(q(),V("div",qa,[(q(!0),V(L,null,W(Ue.value.personnel,(e,a)=>(q(),F(Ge,{key:a,shadow:"never",class:"requirement-item"},{default:N(()=>[S("div",Ia,[l[35]||(l[35]=S("div",{class:"requirement-icon"},[S("i",{class:"bi bi-person-badge"})],-1)),S("div",Sa,[S("h4",null,E(e.position),1),e.count?(q(),V("p",Ua,"äººæ•°: "+E(e.count)+" äºº",1)):U("",!0),e.qualification?(q(),V("p",Ea,"èµ„æ ¼è¦æ±‚: "+E(e.qualification),1)):U("",!0),e.experience?(q(),V("p",Aa,"ç»éªŒè¦æ±‚: "+E(e.experience),1)):U("",!0)]),S("div",Pa,[e.required?(q(),F(d,{key:0,type:"danger",size:"small"},{default:N(()=>[...l[33]||(l[33]=[A(" å¿…éœ€ ",-1)])]),_:1})):(q(),F(d,{key:1,type:"info",size:"small"},{default:N(()=>[...l[34]||(l[34]=[A("å¯é€‰",-1)])]),_:1}))])])]),_:2},1024))),128))])):(q(),F(He,{key:1,description:"æš‚æ— äººå‘˜é…ç½®è¦æ±‚","image-size":80}))]),S("section",Na,[l[39]||(l[39]=S("div",{class:"section-header"},[S("h3",null,[S("i",{class:"bi bi-cash-stack"}),A(" è´¢åŠ¡è¦æ±‚")])],-1)),Ue.value.financial?(q(),V("div",Da,[P(Ge,{shadow:"never",class:"requirement-item"},{default:N(()=>[S("div",Ta,[l[38]||(l[38]=S("div",{class:"requirement-icon"},[S("i",{class:"bi bi-cash-stack"})],-1)),S("div",Fa,[l[37]||(l[37]=S("h4",null,"è´¢åŠ¡ç›¸å…³è¦æ±‚",-1)),S("p",null,E(Ue.value.financial.description),1)])])]),_:1})])):(q(),F(He,{key:1,description:"æš‚æ— è´¢åŠ¡è¦æ±‚","image-size":80}))])])]),_:1}),P(xe,{name:"business"},{label:N(()=>{var e;return[S("span",$a,[l[40]||(l[40]=S("i",{class:"bi bi-briefcase"},null,-1)),l[41]||(l[41]=A(" å•†åŠ¡åº”ç­” ",-1)),(null==(e=K.value.step1_data)?void 0:e.business_response_file)?(q(),F(ol,{key:0,"is-dot":"",type:"success"})):U("",!0)])]}),default:N(()=>[S("div",Ka,[S("section",Oa,[S("div",Ba,[l[43]||(l[43]=S("h3",null,[S("i",{class:"bi bi-file-earmark-text"}),A(" åº”ç­”æ–‡ä»¶æ¨¡æ¿")],-1)),P(d,{type:"info",size:"small"},{default:N(()=>[...l[42]||(l[42]=[A("AI è‡ªåŠ¨æå–",-1)])]),_:1})]),je.value?(q(),F(pe,{key:0,"file-url":je.value.fileUrl,"file-name":je.value.fileName,"file-size":je.value.fileSize,"show-actions":!0,onPreview:Qe},null,8,["file-url","file-name","file-size"])):(q(),F(He,{key:1,description:"æš‚æœªæå–åˆ°åº”ç­”æ–‡ä»¶æ¨¡æ¿","image-size":80},{extra:N(()=>[P(ul,{type:"info",size:"small"},{default:N(()=>[...l[44]||(l[44]=[A(" è¯·å…ˆä¸Šä¼ æ‹›æ ‡æ–‡ä»¶å¹¶è¿›è¡Œ AI è§£æ ",-1)])]),_:1})]),_:1}))]),P(dl),S("section",La,[S("div",Wa,[l[47]||(l[47]=S("h3",null,[S("i",{class:"bi bi-file-earmark-check"}),A(" å•†åŠ¡åº”ç­”å®Œæˆæ–‡ä»¶")],-1)),Ce.value?(q(),F(d,{key:0,type:"success",size:"small"},{default:N(()=>[...l[45]||(l[45]=[S("i",{class:"bi bi-check-circle-fill"},null,-1),A(" å·²ç”Ÿæˆ ",-1)])]),_:1})):(q(),F(d,{key:1,type:"info",size:"small"},{default:N(()=>[...l[46]||(l[46]=[A("æœªç”Ÿæˆ",-1)])]),_:1}))]),Ce.value?(q(),F(pe,{key:0,"file-url":Ce.value.fileUrl,"file-name":Ce.value.fileName,"file-size":Ce.value.fileSize,"show-actions":!0,type:"success",onPreview:Qe},null,8,["file-url","file-name","file-size"])):(q(),F(He,{key:1,description:"æš‚æœªç”Ÿæˆå•†åŠ¡åº”ç­”æ–‡ä»¶","image-size":80},{extra:N(()=>[P(ul,{type:"info",size:"small"},{default:N(()=>[...l[48]||(l[48]=[A(" ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹ç”Ÿæˆå•†åŠ¡åº”ç­” ",-1)])]),_:1})]),_:1}))]),S("div",Ra,[P(u,{type:"primary",size:"large",disabled:!je.value,onClick:Ke},{default:N(()=>[l[49]||(l[49]=S("i",{class:"bi bi-rocket-takeoff"},null,-1)),A(" "+E(Ce.value?"é‡æ–°ç”Ÿæˆ":"å¼€å§‹")+"å•†åŠ¡åº”ç­” ",1)]),_:1},8,["disabled"]),je.value?U("",!0):(q(),F(ul,{key:0,type:"warning",size:"small"},{default:N(()=>[...l[50]||(l[50]=[S("i",{class:"bi bi-exclamation-triangle"},null,-1),A(" è¯·å…ˆä¸Šä¼ æ‹›æ ‡æ–‡ä»¶å¹¶è¿›è¡Œ AI è§£æ ",-1)])]),_:1}))])])]),_:1}),P(xe,{name:"technical"},{label:N(()=>{var e,a;return[S("span",Ma,[l[51]||(l[51]=S("i",{class:"bi bi-cpu"},null,-1)),l[52]||(l[52]=A(" æŠ€æœ¯éœ€æ±‚ ",-1)),(null==(e=K.value.step1_data)?void 0:e.technical_point_to_point_file)||(null==(a=K.value.step1_data)?void 0:a.technical_proposal_file)?(q(),F(ol,{key:0,"is-dot":"",type:"success"})):U("",!0)])]}),default:N(()=>[S("div",Ja,[S("section",Qa,[S("div",Ga,[l[54]||(l[54]=S("h3",null,[S("i",{class:"bi bi-file-earmark-text"}),A(" æŠ€æœ¯éœ€æ±‚æ–‡ä»¶")],-1)),P(d,{type:"info",size:"small"},{default:N(()=>[...l[53]||(l[53]=[A("AI è‡ªåŠ¨æå–",-1)])]),_:1})]),Ve.value?(q(),F(pe,{key:0,"file-url":Ve.value.fileUrl,"file-name":Ve.value.fileName,"file-size":Ve.value.fileSize,"show-actions":!0,onPreview:Qe},null,8,["file-url","file-name","file-size"])):(q(),F(He,{key:1,description:"æš‚æœªæå–åˆ°æŠ€æœ¯éœ€æ±‚æ–‡ä»¶","image-size":80}))]),P(dl),S("section",Ha,[S("div",Xa,[l[57]||(l[57]=S("h3",null,[S("i",{class:"bi bi-arrow-left-right"}),A(" ç‚¹å¯¹ç‚¹åº”ç­”å®Œæˆæ–‡ä»¶")],-1)),qe.value?(q(),F(d,{key:0,type:"success",size:"small"},{default:N(()=>[...l[55]||(l[55]=[S("i",{class:"bi bi-check-circle-fill"},null,-1),A(" å·²ç”Ÿæˆ ",-1)])]),_:1})):(q(),F(d,{key:1,type:"info",size:"small"},{default:N(()=>[...l[56]||(l[56]=[A("æœªç”Ÿæˆ",-1)])]),_:1}))]),qe.value?(q(),F(pe,{key:0,"file-url":qe.value.fileUrl,"file-name":qe.value.fileName,"file-size":qe.value.fileSize,"show-actions":!0,type:"success",onPreview:Qe},null,8,["file-url","file-name","file-size"])):(q(),F(He,{key:1,description:"æš‚æœªç”Ÿæˆç‚¹å¯¹ç‚¹åº”ç­”æ–‡ä»¶","image-size":80}))]),P(dl),S("section",Ya,[S("div",Za,[l[60]||(l[60]=S("h3",null,[S("i",{class:"bi bi-file-code"}),A(" æŠ€æœ¯æ–¹æ¡ˆå®Œæˆæ–‡ä»¶")],-1)),Ie.value?(q(),F(d,{key:0,type:"success",size:"small"},{default:N(()=>[...l[58]||(l[58]=[S("i",{class:"bi bi-check-circle-fill"},null,-1),A(" å·²ç”Ÿæˆ ",-1)])]),_:1})):(q(),F(d,{key:1,type:"info",size:"small"},{default:N(()=>[...l[59]||(l[59]=[A("æœªç”Ÿæˆ",-1)])]),_:1}))]),Ie.value?(q(),F(pe,{key:0,"file-url":Ie.value.fileUrl,"file-name":Ie.value.fileName,"file-size":Ie.value.fileSize,"show-actions":!0,type:"success",onPreview:Qe},null,8,["file-url","file-name","file-size"])):(q(),F(He,{key:1,description:"æš‚æœªç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆæ–‡ä»¶","image-size":80}))]),S("div",el,[P(ae,{size:16},{default:N(()=>[P(u,{type:"primary",size:"large",disabled:!Ve.value,onClick:Oe},{default:N(()=>[l[61]||(l[61]=S("i",{class:"bi bi-arrow-left-right"},null,-1)),A(" "+E(qe.value?"é‡æ–°ç”Ÿæˆ":"å¼€å§‹")+"ç‚¹å¯¹ç‚¹åº”ç­” ",1)]),_:1},8,["disabled"]),P(u,{type:"primary",size:"large",disabled:!Ve.value,onClick:Be},{default:N(()=>[l[62]||(l[62]=S("i",{class:"bi bi-file-code"},null,-1)),A(" "+E(Ie.value?"é‡æ–°ç”Ÿæˆ":"å¼€å§‹")+"æŠ€æœ¯æ–¹æ¡ˆç¼–å†™ ",1)]),_:1},8,["disabled"])]),_:1}),Ve.value?U("",!0):(q(),F(_l,{key:0,type:"warning",closable:!1,class:"mt-3"},{title:N(()=>[...l[63]||(l[63]=[S("div",{style:{"font-size":"13px"}},[S("i",{class:"bi bi-info-circle-fill me-2"}),S("strong",null,"æ“ä½œæç¤ºï¼š"),A("éœ€è¦å…ˆä¿å­˜æŠ€æœ¯éœ€æ±‚æ–‡ä»¶ ")],-1)])]),default:N(()=>[l[64]||(l[64]=S("div",{style:{"font-size":"12px","line-height":"1.6","margin-top":"8px"}},[A(" è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š"),S("br"),A(" 1. åœ¨é¡µé¢é¡¶éƒ¨ä¸Šä¼ æ‹›æ ‡æ–‡æ¡£å¹¶è§£æ"),S("br"),A(" 2. é€‰æ‹©æŠ€æœ¯ç›¸å…³çš„ç« èŠ‚"),S("br"),A(' 3. ç‚¹å‡»"'),S("strong",null,"å¦å­˜ä¸ºæŠ€æœ¯éœ€æ±‚"),A('"æŒ‰é’®'),S("br"),A(" 4. ä¿å­˜æˆåŠŸåï¼Œæœ¬æŒ‰é’®å°†è‡ªåŠ¨å¯ç”¨ ")],-1))]),_:1}))])])]),_:1}),P(xe,{name:"documents"},{label:N(()=>[S("span",al,[l[65]||(l[65]=S("i",{class:"bi bi-files"},null,-1)),l[66]||(l[66]=A(" æ–‡æ¡£ä¸ç« èŠ‚ ",-1)),oe.value.length>0||de.value.length>0?(q(),F(ol,{key:0,value:oe.value.length,type:"success"},null,8,["value"])):U("",!0)])]),default:N(()=>[S("div",ll,[S("section",tl,[S("div",il,[l[67]||(l[67]=S("h3",null,[S("i",{class:"bi bi-file-earmark-text"}),A(" é¡¹ç›®æ–‡æ¡£")],-1)),oe.value.length>0?(q(),F(d,{key:0,type:"success",size:"small"},{default:N(()=>[A(" å…± "+E(oe.value.length)+" ä¸ªæ–‡ä»¶ ",1)]),_:1})):U("",!0)]),oe.value.length>0?(q(),V("div",sl,[(q(!0),V(L,null,W(oe.value,e=>(q(),F(pe,{key:e.id,"file-url":e.file_url||e.file_path,"file-name":e.original_filename,"file-size":e.file_size,"upload-time":e.uploaded_at,"show-actions":!0,onPreview:Qe},null,8,["file-url","file-name","file-size","upload-time"]))),128))])):(q(),F(He,{key:1,description:"æš‚æ— æ–‡æ¡£","image-size":80},{extra:N(()=>[P(ul,{type:"info",size:"small"},{default:N(()=>[...l[68]||(l[68]=[A(" è¯·åœ¨é¡µé¢é¡¶éƒ¨ä¸Šä¼ æ‹›æ ‡æ–‡æ¡£ ",-1)])]),_:1})]),_:1}))]),S("div",nl,[P(u,{type:"primary",size:"large",onClick:Le},{default:N(()=>[...l[69]||(l[69]=[S("i",{class:"bi bi-file-earmark-zip"},null,-1),A(" åˆæˆæœ€ç»ˆæ ‡ä¹¦ ",-1)])]),_:1})]),de.value.length>0?(q(),F(dl,{key:0})):U("",!0),de.value.length>0?(q(),V("section",cl,[S("div",rl,[l[70]||(l[70]=S("h3",null,[S("i",{class:"bi bi-list-nested"}),A(" å·²è¯†åˆ«ç« èŠ‚")],-1)),P(d,{type:"success",size:"small"},{default:N(()=>[A(" å…± "+E(ke.value)+" ä¸ªç« èŠ‚ ",1)]),_:1})]),P(we,{chapters:de.value,"show-checkbox":!1,"show-search":!0},null,8,["chapters"])])):U("",!0)])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)):(q(),F(He,{key:2,description:"é¡¹ç›®ä¸å­˜åœ¨æˆ–åŠ è½½å¤±è´¥"})),P($(R),{modelValue:me.value,"onUpdate:modelValue":l[16]||(l[16]=e=>me.value=e),"file-url":fe.value,"file-name":ve.value},null,8,["modelValue","file-url","file-name"])])}}}),[["__scopeId","data-v-2e3e322a"]]);export{ol as default};
