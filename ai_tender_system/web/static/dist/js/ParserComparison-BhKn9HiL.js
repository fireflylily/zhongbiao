import{e,g as a,t as l,v as t,bw as s,_ as r,q as u,ar as c,l as o,n as i,E as n,Q as d,y as p,a7 as v,J as m}from"./index.js";/* empty css                                                                          *//* empty css                             *//* empty css                    *//* empty css                     *//* empty css               *//* empty css                */import{C as _}from"./Card-I01x_nyd.js";/* empty css                                                                        *//* empty css                */import{aq as h,an as f,cb as y,aw as g,as as x,av as b,aK as k,aA as w,aR as z,ar as j,at as C,au as F,ay as V,aV as $,aW as R,az as T,am as A,aS as I,aX as E}from"./editor-DXll0Hem.js";/* empty css                   *//* empty css                */import{E as G}from"./index-DtcGpiaq.js";import{E as W}from"./index-B8i2o-55.js";import{E as S,a as D}from"./el-select-CodEO2tF.js";import{E as U}from"./index-CLrB1tvP.js";import{E as L}from"./index-_ThnxnOb.js";import{E as M,a as P}from"./index-DCqGfqcs.js";import{E as H,a as q}from"./index-mB33K0OK.js";import"./index-Dub1NZWM.js";import"./strings-BSMihvbA.js";import"./index-B7g7qGd9.js";import"./toNumber-C97Vx0Tx.js";import"./_baseFindIndex-BTqrMG7V.js";import"./_baseIteratee-BxfRPo3h.js";import"./index-HK50bpwn.js";import"./cloneDeep-syPWYH98.js";import"./flatMap-CSKNN2Mx.js";import"./map-Df5t2hs-.js";import"./_baseEach-C_Wm3RWw.js";import"./index-C6GBHpKB.js";import"./raf-B6jWGkGX.js";const B={uploadDocument:function(a){const l=new FormData;return l.append("file",a),e.post("/parser-debug/upload",l,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5})},getTestResult:function(a){return e.get(`/parser-debug/${a}`)},saveGroundTruth:function(a,l,t="user"){return e.post(`/parser-debug/${a}/ground-truth`,{chapters:l,annotator:t})},getHistory:function(a){return e.get("/parser-debug/history",{params:a})},deleteTest:function(a){return e.delete(`/parser-debug/${a}/delete`)},exportReport:function(a){return e.get(`/parser-debug/export/${a}`,{responseType:"blob"})},parseSingleMethod:function(a,l){return e.post(`/parser-debug/parse-single/${a}/${l}`,{},{timeout:3e5})}},Q={class:"chapter-title"},J={class:"chapter-info"},K={class:"word-count"},N={key:0,class:"children"},O=r(h({__name:"ChapterTreeItem",props:{chapter:{},groundTruth:{},level:{}},setup(e){const r=e,u=f(()=>{if(!r.groundTruth)return"unknown";const e=a=>{const l=[];for(const t of a)l.push(t),t.children&&t.children.length>0&&l.push(...e(t.children));return l},a=e(r.groundTruth),l=e=>e.replace(/^\d+\.\s*/,"").replace(/^\d+\.\d+\s*/,"").replace(/^ç¬¬[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å\d]+[ç« èŠ‚éƒ¨åˆ†]\s*/,"").replace(/\s+/g,"").toLowerCase(),t=l(r.chapter.title);return a.some(e=>l(e.title)===t)?"matched":"false_positive"}),c=f(()=>({"status-matched":"matched"===u.value,"status-false-positive":"false_positive"===u.value,"status-unknown":"unknown"===u.value}));return(r,o)=>{const i=a,n=y("ChapterTreeItem",!0);return x(),g("div",{class:"chapter-tree-item",style:T({paddingLeft:20*e.level+"px"})},[b("div",{class:w(["chapter-row",c.value])},[b("span",{class:w(["level-badge",`level-${e.chapter.level}`])}," L"+z(e.chapter.level),3),b("span",Q,z(e.chapter.title),1),b("span",J,[b("span",K,z(e.chapter.word_count)+"å­—",1),"matched"===u.value?(x(),j(i,{key:0,class:"match-icon success"},{default:C(()=>[F(V(l))]),_:1})):"missed"===u.value?(x(),j(i,{key:1,class:"match-icon error"},{default:C(()=>[F(V(t))]),_:1})):"false_positive"===u.value?(x(),j(i,{key:2,class:"match-icon warning"},{default:C(()=>[F(V(s))]),_:1})):k("",!0)])],2),e.chapter.children&&e.chapter.children.length>0?(x(),g("div",N,[(x(!0),g($,null,R(e.chapter.children,a=>(x(),j(n,{key:a.id,chapter:a,"ground-truth":e.groundTruth,level:e.level+1},null,8,["chapter","ground-truth","level"]))),128))])):k("",!0)],4)}}}),[["__scopeId","data-v-3e35c8e3"]]),X={class:"card-header"},Y={class:"card-body"},Z={key:0,class:"start-parse-section"},ee={key:1,class:"loading-section"},ae={class:"statistics"},le={class:"stat-item"},te={class:"value"},se={class:"stat-item"},re={class:"value"},ue={class:"stat-item"},ce={class:"value"},oe={key:0,class:"stat-item"},ie={class:"chapter-list"},ne={class:"chapter-list-header"},de={key:0,class:"error-message"},pe=r(h({__name:"MethodCard",props:{title:{},result:{},groundTruth:{},accuracy:{},color:{default:"#409EFF"},status:{default:"idle"}},emits:["start"],setup(e,{emit:l}){const t=e,s=l,r=A(!1),n=f(()=>"idle"===t.status?"info":"parsing"===t.status?"warning":"error"!==t.status&&t.result.success?t.accuracy?t.accuracy.f1_score>=.9?"success":t.accuracy.f1_score>=.7?"":t.accuracy.f1_score>=.5?"warning":"danger":"success":"danger"),d=f(()=>"idle"===t.status?"æœªå¼€å§‹":"parsing"===t.status?"è§£æä¸­...":"error"===t.status?"å¤±è´¥":t.result.success?t.accuracy?`F1: ${(100*t.accuracy.f1_score).toFixed(1)}%`:"æˆåŠŸ":"å¤±è´¥"),p=()=>{s("start")},v=()=>{r.value=!r.value};return(l,t)=>{const s=G,m=u,_=a,h=i,f=W;return x(),j(f,{class:"method-card","body-style":{padding:"0"}},{header:C(()=>[b("div",X,[b("span",{class:"method-title",style:T({color:e.color})},z(e.title),5),F(s,{type:n.value,size:"small"},{default:C(()=>[I(z(d.value),1)]),_:1},8,["type"])])]),default:C(()=>{var a,l,s,u,i;return[b("div",Y,["idle"===e.status?(x(),g("div",Z,[F(m,{type:"primary",onClick:p,icon:V(c)},{default:C(()=>[...t[0]||(t[0]=[I(" å¼€å§‹è§£æ ",-1)])]),_:1},8,["icon"]),t[1]||(t[1]=b("p",{class:"hint-text"},"ç‚¹å‡»æŒ‰é’®å¼€å§‹è¿è¡Œæ­¤æ–¹æ³•",-1))])):"parsing"===e.status?(x(),g("div",ee,[F(_,{class:"is-loading",size:32},{default:C(()=>[F(V(o))]),_:1}),t[2]||(t[2]=b("p",null,"è§£æä¸­ï¼Œè¯·ç¨å€™...",-1))])):(x(),g($,{key:2},[b("div",ae,[b("div",le,[t[3]||(t[3]=b("span",{class:"label"},"è¯†åˆ«ç« èŠ‚:",-1)),b("span",te,z((null==(a=e.result.chapters)?void 0:a.length)||0),1)]),b("div",se,[t[4]||(t[4]=b("span",{class:"label"},"æ€»å­—æ•°:",-1)),b("span",re,z((i=(null==(l=e.result.statistics)?void 0:l.total_words)||0,i>=1e4?`${(i/1e4).toFixed(1)}ä¸‡`:i.toString())),1)]),b("div",ue,[t[5]||(t[5]=b("span",{class:"label"},"è€—æ—¶:",-1)),b("span",ce,z((null==(s=e.result.performance)?void 0:s.elapsed_formatted)||"-"),1)]),e.accuracy?(x(),g("div",oe,[t[6]||(t[6]=b("span",{class:"label"},"F1åˆ†æ•°:",-1)),b("span",{class:w(["value f1-score",(u=e.accuracy.f1_score,u>=.9?"excellent":u>=.7?"good":u>=.5?"fair":"poor")])},z((100*e.accuracy.f1_score).toFixed(1))+"% ",3)])):k("",!0)]),b("div",ie,[b("div",ne,[t[7]||(t[7]=b("span",null,"ç« èŠ‚åˆ—è¡¨",-1)),F(m,{size:"small",text:"",onClick:v},{default:C(()=>[I(z(r.value?"æ”¶èµ·":"å±•å¼€å…¨éƒ¨"),1)]),_:1})]),e.result.success?(x(),g("div",{key:1,class:w(["chapters-container",{collapsed:!r.value}])},[(x(!0),g($,null,R(e.result.chapters,a=>(x(),j(O,{key:a.id,chapter:a,"ground-truth":e.groundTruth,level:0},null,8,["chapter","ground-truth"]))),128))],2)):(x(),g("div",de,[F(h,{title:e.result.error||"è§£æå¤±è´¥",type:"error",closable:!1},null,8,["title"])]))])],64))])]}),_:1})}}}),[["__scopeId","data-v-a93d47bb"]]),ve={class:"card-header"},me={key:1,class:"action-buttons"},_e={class:"card-body"},he={key:0,class:"empty-state"},fe={key:1,class:"editing-area"},ye={class:"template-selector mb-3"},ge={class:"editable-list"},xe={key:2,class:"display-area"},be={class:"chapter-count"},ke={class:"chapters-container"},we=r(h({__name:"GroundTruthCard",props:{modelValue:{},documentId:{},availableResults:{}},emits:["update:modelValue","save"],setup(e,{emit:a}){const l=e,t=a,s=A(!1),r=A([]),c=A(""),o=()=>{s.value=!0,l.modelValue?r.value=h(l.modelValue):r.value=[]},p=()=>{s.value=!1,r.value=[],c.value=""},v=()=>{if(0===r.value.length)return void n.warning("è¯·è‡³å°‘æ·»åŠ ä¸€ä¸ªç« èŠ‚");const e=r.value.map((e,a)=>({id:`gt_${a}`,level:e.level,title:e.title,para_start_idx:0,para_end_idx:0,word_count:0,preview_text:"",auto_selected:!1,skip_recommended:!1,children:[]}));t("update:modelValue",e),t("save",e),s.value=!1},m=e=>{if("manual"===e)return void(r.value=[]);if(!l.availableResults||!l.availableResults[e])return void n.warning("è¯¥æ–¹æ³•çš„ç»“æœä¸å¯ç”¨");const a=l.availableResults[e];a.success&&a.chapters?(r.value=h(a.chapters),n.success(`å·²åŠ è½½${a.method_name}çš„ç»“æœ`)):n.error("è¯¥æ–¹æ³•è§£æå¤±è´¥")},_=()=>{r.value.push({title:"",level:1})},h=e=>{const a=[],l=e=>{for(const t of e)a.push({title:t.title,level:t.level}),t.children&&t.children.length>0&&l(t.children)};return l(e),a},f=e=>{if(!e)return 0;let a=0;const l=e=>{for(const t of e)a++,t.children&&t.children.length>0&&l(t.children)};return l(e),a};return(a,l)=>{const t=u,n=U,h=i,y=D,w=S,V=d,T=W;return x(),j(T,{class:"ground-truth-card"},{header:C(()=>[b("div",ve,[l[3]||(l[3]=b("span",{class:"title"},"âœ… æ­£ç¡®ç­”æ¡ˆï¼ˆäººå·¥æ ‡æ³¨ï¼‰",-1)),s.value?(x(),g("div",me,[F(t,{size:"small",onClick:p},{default:C(()=>[...l[1]||(l[1]=[I("å–æ¶ˆ",-1)])]),_:1}),F(t,{size:"small",type:"success",onClick:v},{default:C(()=>[...l[2]||(l[2]=[I("ä¿å­˜",-1)])]),_:1})])):(x(),j(t,{key:0,size:"small",type:"primary",onClick:o},{default:C(()=>[I(z(e.modelValue?"ç¼–è¾‘æ ‡æ³¨":"å¼€å§‹æ ‡æ³¨"),1)]),_:1}))])]),default:C(()=>[b("div",_e,[e.modelValue||s.value?s.value?(x(),g("div",fe,[F(h,{title:"æ ‡æ³¨è¯´æ˜",type:"info",closable:!1,class:"mb-3"},{default:C(()=>[...l[5]||(l[5]=[b("p",null,"è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªæ–¹æ³•çš„ç»“æœä½œä¸ºåŸºç¡€ï¼Œç„¶åè°ƒæ•´ç« èŠ‚åˆ—è¡¨ã€‚",-1),b("p",null,"æ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹ç« èŠ‚ã€‚",-1)])]),_:1}),b("div",ye,[l[6]||(l[6]=b("span",null,"åŸºäºæ–¹æ³•ç»“æœ:",-1)),F(w,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value=e),placeholder:"é€‰æ‹©æ–¹æ³•",onChange:m},{default:C(()=>{var a,l;return[F(y,{label:"è¯­ä¹‰é”šç‚¹è§£æ",value:"semantic"}),F(y,{label:"æ—§ç›®å½•å®šä½",value:"old_toc"}),F(y,{label:"æ ·å¼è¯†åˆ«",value:"style"}),F(y,{label:"å¤§çº²çº§åˆ«è¯†åˆ«",value:"outline"}),(null==(l=null==(a=e.availableResults)?void 0:a.azure)?void 0:l.success)?(x(),j(y,{key:0,label:"Azure Form Recognizer",value:"azure"})):k("",!0),F(y,{label:"æ‰‹åŠ¨åˆ›å»º",value:"manual"})]}),_:1},8,["modelValue"])]),b("div",ge,[F(t,{size:"small",onClick:_,class:"mb-2"},{default:C(()=>[...l[7]||(l[7]=[I(" + æ·»åŠ ç« èŠ‚ ",-1)])]),_:1}),(x(!0),g($,null,R(r.value,(e,a)=>(x(),g("div",{key:a,class:"editable-chapter"},[F(V,{modelValue:e.title,"onUpdate:modelValue":a=>e.title=a,placeholder:"ç« èŠ‚æ ‡é¢˜",size:"small"},{prepend:C(()=>[F(w,{modelValue:e.level,"onUpdate:modelValue":a=>e.level=a,style:{width:"80px"},size:"small"},{default:C(()=>[F(y,{label:"L1",value:1}),F(y,{label:"L2",value:2}),F(y,{label:"L3",value:3})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),F(t,{size:"small",type:"danger",text:"",onClick:e=>(e=>{r.value.splice(e,1)})(a)},{default:C(()=>[...l[8]||(l[8]=[I(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])]))),128))])])):(x(),g("div",xe,[b("div",be," å…± "+z(f(e.modelValue))+" ä¸ªç« èŠ‚ ",1),b("div",ke,[(x(!0),g($,null,R(e.modelValue,e=>(x(),j(O,{key:e.id,chapter:e,level:0},null,8,["chapter"]))),128))])])):(x(),g("div",he,[F(n,{description:"å°šæœªæ ‡æ³¨æ­£ç¡®ç­”æ¡ˆ"},{default:C(()=>[F(t,{type:"primary",onClick:o},{default:C(()=>[...l[4]||(l[4]=[I("å¼€å§‹æ ‡æ³¨",-1)])]),_:1})]),_:1})]))])]),_:1})}}}),[["__scopeId","data-v-d2bcdc40"]]),ze={class:"parser-comparison"},je={class:"upload-section"},Ce={key:0,class:"selected-file"},Fe={key:0,class:"doc-info"},Ve={key:1,class:"comparison-grid"},$e={key:2,class:"accuracy-section"},Re={class:"best-method-summary"},Te={class:"history-section"},Ae={class:"section-header"},Ie={key:0},Ee={key:1,class:"text-muted"},Ge={key:1,class:"chapter-count"},We={key:3,class:"text-muted"},Se={key:1,class:"chapter-count"},De={key:3,class:"text-muted"},Ue={key:1,class:"chapter-count"},Le={key:3,class:"text-muted"},Me={key:1,class:"chapter-count"},Pe={key:3,class:"text-muted"},He={key:0},qe={style:{"font-size":"12px","margin-top":"4px",color:"#606266"}},Be={key:1,class:"text-muted"},Qe={key:0,class:"empty-state"},Je=r(h({__name:"ParserComparison",setup(e){const l=A(),t=A(null),s=A(!1),r=A(""),c=A(null),o=A(null),d=A(null),h=A(null),y=A(!1),$=A([]),R=A({gemini:"idle",docx_native:"idle",toc_exact:"idle",azure:"idle"}),T=e=>{t.value=e.raw},W=async()=>{var e,a;if(t.value){s.value=!0;try{const e=await B.uploadDocument(t.value),a=e.data||e;if(!a||!a.success)return n.error((null==a?void 0:a.error)||"æ–‡ä»¶ä¸Šä¼ å¤±è´¥"),void(s.value=!1);r.value=a.document_id,c.value=a.document_info,o.value={toc_exact:{success:!1,chapters:[],method_name:"ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)",performance:{elapsed:0,elapsed_formatted:"-"}},azure:{success:!1,chapters:[],method_name:"Azure Form Recognizer",performance:{elapsed:0,elapsed_formatted:"-"}},docx_native:{success:!1,chapters:[],method_name:"Wordå¤§çº²çº§åˆ«è¯†åˆ«",performance:{elapsed:0,elapsed_formatted:"-"}},gemini:{success:!1,chapters:[],method_name:"Gemini AIè§£æå™¨",performance:{elapsed:0,elapsed_formatted:"-"}}},R.value={gemini:"idle",docx_native:"idle",toc_exact:"idle",azure:"idle"},n.success('æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼è¯·ç‚¹å‡»å„æ–¹æ³•çš„"å¼€å§‹è§£æ"æŒ‰é’®'),s.value=!1}catch(l){n.error((null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.error)||l.message||"ä¸Šä¼ å¤±è´¥"),s.value=!1}}else n.warning("è¯·å…ˆé€‰æ‹©æ–‡ä»¶")},S=async e=>{var a,l;if(r.value){R.value[e]="parsing";try{const a=await B.parseSingleMethod(r.value,e),l=a.data||a;l.success&&l.result?(o.value&&(o.value[e]=l.result),R.value[e]=l.result.success?"success":"error",l.result.success?n.success(`${l.result.method_name} è§£æå®Œæˆï¼`):n.error(`${l.result.method_name} è§£æå¤±è´¥: ${l.result.error||"æœªçŸ¥é”™è¯¯"}`),Q()):(R.value[e]="error",n.error(`è§£æå¤±è´¥: ${l.error||"æœªçŸ¥é”™è¯¯"}`))}catch(t){R.value[e]="error",n.error((null==(l=null==(a=t.response)?void 0:a.data)?void 0:l.error)||t.message||"è§£æå¤±è´¥")}}else n.error("è¯·å…ˆä¸Šä¼ æ–‡ä»¶")},D=async e=>{if(r.value)try{const a=await B.saveGroundTruth(r.value,e,"user");a.success&&(h.value=a.accuracy,n.success("æ ‡æ³¨å·²ä¿å­˜ï¼Œå‡†ç¡®ç‡å·²è®¡ç®—"))}catch(a){n.error("ä¿å­˜å¤±è´¥")}else n.error("æ²¡æœ‰å½“å‰æ–‡æ¡£")},Q=async()=>{try{const e=await B.getHistory({limit:50});$.value=e.tests}catch(e){n.error("åŠ è½½å†å²è®°å½•å¤±è´¥")}},J=async()=>{await Q(),y.value=!0},K=f(()=>{if(!h.value||!o.value)return[];return[{key:"gemini",name:"Gemini AIè§£æå™¨"},{key:"docx_native",name:"Wordå¤§çº²çº§åˆ«è¯†åˆ«"},{key:"toc_exact",name:"ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)"},{key:"azure",name:"Azure Form Recognizer"}].filter(({key:e})=>o.value[e]).map(({key:e,name:a})=>{var l,t,s,r,u,c,i;return{method:a,precision:(null==(l=h.value[e])?void 0:l.precision)||0,recall:(null==(t=h.value[e])?void 0:t.recall)||0,f1:(null==(s=h.value[e])?void 0:s.f1_score)||0,detected:(null==(u=null==(r=o.value[e])?void 0:r.chapters)?void 0:u.length)||0,elapsed:(null==(i=null==(c=o.value[e])?void 0:c.performance)?void 0:i.elapsed_formatted)||"-",is_best:h.value.best_method===e}})}),N=e=>e>=.9?"score-excellent":e>=.7?"score-good":e>=.5?"score-fair":"score-poor",O=()=>{var e;return{toc_exact:"ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)",azure:"Azure Form Recognizer",docx_native:"Wordå¤§çº²çº§åˆ«è¯†åˆ«",gemini:"Gemini AIè§£æå™¨"}[null==(e=h.value)?void 0:e.best_method]||"æœªçŸ¥"};return E(async()=>{await Q()}),(e,f)=>{const A=u,E=L,X=P,Y=G,Z=M,ee=q,ae=H,le=i,te=U;return x(),g("div",ze,[F(V(_),{title:"ğŸ“Š ç›®å½•è§£ææ–¹æ³•å¯¹æ¯”å·¥å…·"},{extra:C(()=>[F(A,{onClick:J,type:"text"},{default:C(()=>[...f[5]||(f[5]=[I("å†å²è®°å½•",-1)])]),_:1})]),default:C(()=>{var e,u,i,_;return[b("div",je,[F(E,{ref_key:"uploadRef",ref:l,"auto-upload":!1,"on-change":T,"show-file-list":!1,accept:".docx"},{default:C(()=>[F(A,{type:"primary",icon:V(p)},{default:C(()=>[...f[6]||(f[6]=[I("é€‰æ‹©æ ‡ä¹¦æ–‡æ¡£ (.docx)",-1)])]),_:1},8,["icon"])]),_:1},512),t.value?(x(),g("span",Ce," å·²é€‰æ‹©: "+z(t.value.name),1)):k("",!0),F(A,{onClick:W,loading:s.value,disabled:!t.value,type:"success"},{default:C(()=>[...f[7]||(f[7]=[I(" å¼€å§‹è§£æå¯¹æ¯” ",-1)])]),_:1},8,["loading","disabled"])]),c.value?(x(),g("div",Fe,[F(Z,{column:4,border:""},{default:C(()=>[F(X,{label:"æ–‡ä»¶å"},{default:C(()=>[I(z(c.value.filename),1)]),_:1}),F(X,{label:"æ€»æ®µè½æ•°"},{default:C(()=>[I(z(c.value.total_paragraphs),1)]),_:1}),F(X,{label:"ç›®å½•æ£€æµ‹"},{default:C(()=>[F(Y,{type:c.value.has_toc?"success":"warning"},{default:C(()=>[I(z(c.value.has_toc?`âœ“ æ£€æµ‹åˆ° (${c.value.toc_items_count}é¡¹)`:"âœ— æœªæ£€æµ‹åˆ°"),1)]),_:1},8,["type"])]),_:1}),F(X,{label:"ä¸Šä¼ æ—¶é—´"},{default:C(()=>[I(z(c.value.upload_time||"-"),1)]),_:1})]),_:1})])):k("",!0),o.value?(x(),g("div",Ve,[o.value.gemini?(x(),j(pe,{key:0,title:"æ–¹æ³•1: Gemini AIè§£æå™¨",result:o.value.gemini,"ground-truth":d.value,accuracy:null==(e=h.value)?void 0:e.gemini,status:R.value.gemini,color:"#FF6D00",onStart:f[0]||(f[0]=e=>S("gemini"))},null,8,["result","ground-truth","accuracy","status"])):k("",!0),o.value.docx_native?(x(),j(pe,{key:1,title:"æ–¹æ³•2: Wordå¤§çº²çº§åˆ«è¯†åˆ«",result:o.value.docx_native,"ground-truth":d.value,accuracy:null==(u=h.value)?void 0:u.docx_native,status:R.value.docx_native,color:"#9C27B0",onStart:f[1]||(f[1]=e=>S("docx_native"))},null,8,["result","ground-truth","accuracy","status"])):k("",!0),o.value.toc_exact?(x(),j(pe,{key:2,title:"æ–¹æ³•3: ç²¾ç¡®åŒ¹é…(åŸºäºç›®å½•)",result:o.value.toc_exact,"ground-truth":d.value,accuracy:null==(i=h.value)?void 0:i.toc_exact,status:R.value.toc_exact,color:"#F56C6C",onStart:f[2]||(f[2]=e=>S("toc_exact"))},null,8,["result","ground-truth","accuracy","status"])):k("",!0),o.value.azure?(x(),j(pe,{key:3,title:"æ–¹æ³•4: Azure Form Recognizer",result:o.value.azure,"ground-truth":d.value,accuracy:null==(_=h.value)?void 0:_.azure,status:R.value.azure,color:"#00B7C3",onStart:f[3]||(f[3]=e=>S("azure"))},null,8,["result","ground-truth","accuracy","status"])):k("",!0),F(we,{modelValue:d.value,"onUpdate:modelValue":f[4]||(f[4]=e=>d.value=e),"document-id":r.value,"available-results":o.value,onSave:D},null,8,["modelValue","document-id","available-results"])])):k("",!0),h.value?(x(),g("div",$e,[f[9]||(f[9]=b("h3",null,"å‡†ç¡®ç‡å¯¹æ¯”",-1)),F(ae,{data:K.value,border:"",stripe:""},{default:C(()=>[F(ee,{prop:"method",label:"è§£ææ–¹æ³•",width:"180"}),F(ee,{prop:"precision",label:"ç²¾ç¡®ç‡ (P)",width:"120"},{default:C(({row:e})=>[b("span",{class:w(N(e.precision))},z((100*e.precision).toFixed(1))+"% ",3)]),_:1}),F(ee,{prop:"recall",label:"å¬å›ç‡ (R)",width:"120"},{default:C(({row:e})=>[b("span",{class:w(N(e.recall))},z((100*e.recall).toFixed(1))+"% ",3)]),_:1}),F(ee,{prop:"f1",label:"F1åˆ†æ•°",width:"120"},{default:C(({row:e})=>{return[F(Y,{type:(a=e.f1,a>=.9?"success":a>=.7?"":a>=.5?"warning":"danger"),effect:"dark"},{default:C(()=>[I(z((100*e.f1).toFixed(1))+"% ",1)]),_:2},1032,["type"])];var a}),_:1}),F(ee,{prop:"detected",label:"è¯†åˆ«æ•°é‡",width:"100"}),F(ee,{prop:"elapsed",label:"è€—æ—¶",width:"100"}),F(ee,{label:"çŠ¶æ€",width:"100"},{default:C(({row:e})=>[e.is_best?(x(),j(Y,{key:0,type:"success"},{default:C(()=>[...f[8]||(f[8]=[I("æœ€ä½³",-1)])]),_:1})):k("",!0)]),_:1})]),_:1},8,["data"]),b("div",Re,[F(le,{title:`æœ€ä½³æ–¹æ³•: ${O()} (F1åˆ†æ•°: ${(100*h.value.best_f1_score).toFixed(1)}%)`,type:"success",closable:!1},null,8,["title"])])])):k("",!0),b("div",Te,[b("div",Ae,[f[11]||(f[11]=b("h3",null,"ğŸ“‹ å†å²è§£æè®°å½•",-1)),F(A,{onClick:Q,icon:V(p),size:"small"},{default:C(()=>[...f[10]||(f[10]=[I(" åˆ·æ–°åˆ—è¡¨ ",-1)])]),_:1},8,["icon"])]),F(ae,{data:$.value,border:"",stripe:""},{default:C(()=>[F(ee,{label:"æ–‡ä»¶å","min-width":"200"},{default:C(({row:e})=>{return[(l=e.filename,!l||l.length<3||"docx"===l||".docx"===l||l.startsWith("-.")||l.startsWith("--")?(x(),g("span",Ee,[F(V(a),null,{default:C(()=>[F(V(v))]),_:1}),f[12]||(f[12]=I(" (æ–‡ä»¶åå·²æŸå) ",-1))])):(x(),g("span",Ie,z(e.filename),1)))];var l}),_:1}),F(ee,{prop:"upload_time",label:"è§£ææ—¶é—´",width:"180"}),F(ee,{label:"ç›®å½•æ£€æµ‹",width:"100",align:"center"},{default:C(({row:e})=>[F(Y,{type:e.has_toc?"success":"info",size:"small"},{default:C(()=>[I(z(e.has_toc?`âœ“ (${e.toc_items_count})`:"âœ—"),1)]),_:2},1032,["type"])]),_:1}),F(ee,{label:"ç²¾ç¡®åŒ¹é…",width:"110",align:"center"},{default:C(({row:e})=>[e.toc_exact_f1?(x(),g("div",{key:0,class:w(N(e.toc_exact_f1))},z((100*e.toc_exact_f1).toFixed(1))+"% ",3)):e.toc_exact_chapters_count>0?(x(),g("div",Ge,z(e.toc_exact_chapters_count)+"ç«  ",1)):void 0!==e.toc_exact_elapsed&&null!==e.toc_exact_elapsed?(x(),j(Y,{key:2,type:"danger",size:"small"},{default:C(()=>[...f[13]||(f[13]=[I("å¤±è´¥",-1)])]),_:1})):(x(),g("span",We,"-"))]),_:1}),F(ee,{label:"Azure",width:"110",align:"center"},{default:C(({row:e})=>[e.azure_f1?(x(),g("div",{key:0,class:w(N(e.azure_f1))},z((100*e.azure_f1).toFixed(1))+"% ",3)):e.azure_chapters_count>0?(x(),g("div",Se,z(e.azure_chapters_count)+"ç«  ",1)):void 0!==e.azure_elapsed&&null!==e.azure_elapsed?(x(),j(Y,{key:2,type:"danger",size:"small"},{default:C(()=>[...f[14]||(f[14]=[I("å¤±è´¥",-1)])]),_:1})):(x(),g("span",De,"-"))]),_:1}),F(ee,{label:"Wordå¤§çº²",width:"110",align:"center"},{default:C(({row:e})=>[e.docx_native_f1?(x(),g("div",{key:0,class:w(N(e.docx_native_f1))},z((100*e.docx_native_f1).toFixed(1))+"% ",3)):e.docx_native_chapters_count>0?(x(),g("div",Ue,z(e.docx_native_chapters_count)+"ç«  ",1)):void 0!==e.docx_native_elapsed&&null!==e.docx_native_elapsed?(x(),j(Y,{key:2,type:"danger",size:"small"},{default:C(()=>[...f[15]||(f[15]=[I("å¤±è´¥",-1)])]),_:1})):(x(),g("span",Le,"-"))]),_:1}),F(ee,{label:"Gemini AI",width:"110",align:"center"},{default:C(({row:e})=>[e.gemini_f1?(x(),g("div",{key:0,class:w(N(e.gemini_f1))},z((100*e.gemini_f1).toFixed(1))+"% ",3)):e.gemini_chapters_count>0?(x(),g("div",Me,z(e.gemini_chapters_count)+"ç«  ",1)):void 0!==e.gemini_elapsed&&null!==e.gemini_elapsed?(x(),j(Y,{key:2,type:"danger",size:"small"},{default:C(()=>[...f[16]||(f[16]=[I("å¤±è´¥",-1)])]),_:1})):(x(),g("span",Pe,"-"))]),_:1}),F(ee,{label:"æœ€ä½³æ–¹æ³•",width:"150",align:"center"},{default:C(({row:e})=>[e.best_method?(x(),g("div",He,[F(Y,{type:e.best_f1_score>=.9?"success":"primary",effect:"dark"},{default:C(()=>{return[I(z((a=e.best_method,{toc_exact:"ç²¾ç¡®åŒ¹é…",azure:"Azure",docx_native:"Wordå¤§çº²",gemini:"Gemini AI"}[a]||a)),1)];var a}),_:2},1032,["type"]),b("div",qe," F1: "+z((100*e.best_f1_score).toFixed(1))+"% ",1)])):(x(),g("span",Be,"æœªæ ‡æ³¨"))]),_:1}),F(ee,{label:"æ“ä½œ",width:"150",fixed:"right",align:"center"},{default:C(({row:e})=>[F(A,{size:"small",type:"primary",onClick:a=>(async e=>{var a,l,t,s,u,i,p,v,m,_,f,g;try{const x=await B.getTestResult(e);x.success&&(r.value=x.document_id,c.value=x.document_info,o.value=x.results,d.value=x.ground_truth||null,h.value=x.accuracy||null,R.value={gemini:(null==(l=null==(a=o.value)?void 0:a.gemini)?void 0:l.success)?"success":(null==(t=o.value)?void 0:t.gemini)?"error":"idle",docx_native:(null==(u=null==(s=o.value)?void 0:s.docx_native)?void 0:u.success)?"success":(null==(i=o.value)?void 0:i.docx_native)?"error":"idle",toc_exact:(null==(v=null==(p=o.value)?void 0:p.toc_exact)?void 0:v.success)?"success":(null==(m=o.value)?void 0:m.toc_exact)?"error":"idle",azure:(null==(f=null==(_=o.value)?void 0:_.azure)?void 0:f.success)?"success":(null==(g=o.value)?void 0:g.azure)?"error":"idle"},y.value=!1,n.success("æµ‹è¯•ç»“æœå·²åŠ è½½"))}catch(x){n.error("åŠ è½½å¤±è´¥")}})(e.document_id)},{default:C(()=>[...f[17]||(f[17]=[I(" æŸ¥çœ‹ ",-1)])]),_:1},8,["onClick"]),F(A,{size:"small",type:"danger",onClick:a=>(async e=>{try{await m.confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡æµ‹è¯•è®°å½•å—ï¼Ÿ","ç¡®è®¤åˆ é™¤",{type:"warning"}),await B.deleteTest(e),n.success("å·²åˆ é™¤"),J()}catch(a){}})(e.document_id)},{default:C(()=>[...f[18]||(f[18]=[I(" åˆ é™¤ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),0===$.value.length?(x(),g("div",Qe,[F(te,{description:"æš‚æ— å†å²è§£æè®°å½•"})])):k("",!0)])]}),_:1})])}}}),[["__scopeId","data-v-50a39236"]]);export{Je as default};
