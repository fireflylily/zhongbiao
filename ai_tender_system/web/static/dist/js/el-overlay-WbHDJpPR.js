import{m as e,p as l,_ as o,d as a,K as s,N as t,bL as n,x as r,bM as d,c as i,o as u,e as c,a0 as f,C as v,I as p,F as y,t as g,g as b,w as C,B as m,G as h,bN as w,H as k,D as A,aX as B,aV as I,n as S,O as x,bO as F,a5 as _,r as R,bP as $,bQ as D,z as L,an as P,am as E,aQ as M,bR as O,A as T,L as z,ak as N,bS as j,W as V,bt as q,aN as K,v as Q,a9 as U,a2 as G,ai as H,bT as J,bU as W,bV as X,a1 as Z,aj as Y,M as ee,J as le}from"./index.js";import{t as oe,g as ae}from"./el-scrollbar-CIZTQeWR.js";import{c as se}from"./refs-Cw5r5QN8.js";const te=Symbol("dialogInjectionKey"),ne="dialog-fade",re=e({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:l},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),de=a({name:"ElDialogContent"});var ie=o(a({...de,props:re,emits:{close:()=>!0},setup(e,{expose:l}){const o=e,{t:a}=s(),{Close:B}=w,{dialogRef:I,headerRef:S,bodyId:x,ns:F,style:_}=t(te),{focusTrapRef:R}=t(n),$=se(R,I),D=r(()=>!!o.draggable),L=r(()=>!!o.overflow),{resetPosition:P,updatePosition:E,isDragging:M}=d(I,S,D,L),O=r(()=>[F.b(),F.is("fullscreen",o.fullscreen),F.is("draggable",D.value),F.is("dragging",M.value),F.is("align-center",!!o.alignCenter),{[F.m("center")]:o.center}]);return l({resetPosition:P,updatePosition:E}),(e,l)=>(u(),i("div",{ref:y($),class:p(y(O)),style:A(y(_)),tabindex:"-1"},[c("header",{ref_key:"headerRef",ref:S,class:p([y(F).e("header"),e.headerClass,{"show-close":e.showClose}])},[v(e.$slots,"header",{},()=>[c("span",{role:"heading","aria-level":e.ariaLevel,class:p(y(F).e("title"))},g(e.title),11,["aria-level"])]),e.showClose?(u(),i("button",{key:0,"aria-label":y(a)("el.dialog.close"),class:p(y(F).e("headerbtn")),type:"button",onClick:l=>e.$emit("close")},[b(y(k),{class:p(y(F).e("close"))},{default:C(()=>[(u(),m(h(e.closeIcon||y(B))))]),_:1},8,["class"])],10,["aria-label","onClick"])):f("v-if",!0)],2),c("div",{id:y(x),class:p([y(F).e("body"),e.bodyClass])},[v(e.$slots,"default")],10,["id"]),e.$slots.footer?(u(),i("footer",{key:0,class:p([y(F).e("footer"),e.footerClass])},[v(e.$slots,"footer")],2)):f("v-if",!0)],6))}}),[["__file","dialog-content.vue"]]);const ue=e({...re,appendToBody:Boolean,appendTo:{type:oe.to.type,default:"body"},beforeClose:{type:S(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:S([String,Object]),default:void 0}}),ce={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[I]:e=>B(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},fe=a({name:"ElDialog",inheritAttrs:!1});const ve=le(o(a({...fe,props:ue,emits:ce,setup(e,{expose:l}){const o=e,a=q();K({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},r(()=>!!a.title));const s=Q("dialog"),t=R(),n=R(),d=R(),{visible:i,titleId:g,bodyId:h,style:w,overlayDialogStyle:k,rendered:B,transitionConfig:S,zIndex:le,_draggable:oe,_alignCenter:se,_overflow:re,handleClose:de,onModalClick:ue,onOpenAutoFocus:ce,onCloseAutoFocus:fe,onCloseRequested:ve,onFocusoutPrevented:pe}=((e,l)=>{var o;const a=x().emit,{nextZIndex:s}=F();let t="";const n=_(),d=_(),i=R(!1),u=R(!1),c=R(!1),f=R(null!=(o=e.zIndex)?o:s());let v,p;const y=$(),g=r(()=>{var e,l;return null!=(l=null==(e=y.value)?void 0:e.namespace)?l:D}),b=r(()=>{var e;return null==(e=y.value)?void 0:e.dialog}),C=r(()=>{const l={},o=`--${g.value}-dialog`;return e.fullscreen||(e.top&&(l[`${o}-margin-top`]=e.top),e.width&&(l[`${o}-width`]=L(e.width))),l}),m=r(()=>{var l,o,a;return null!=(a=null!=(o=e.draggable)?o:null==(l=b.value)?void 0:l.draggable)&&a&&!e.fullscreen}),h=r(()=>{var l,o,a;return null!=(a=null!=(o=e.alignCenter)?o:null==(l=b.value)?void 0:l.alignCenter)&&a}),w=r(()=>{var l,o,a;return null!=(a=null!=(o=e.overflow)?o:null==(l=b.value)?void 0:l.overflow)&&a}),k=r(()=>h.value?{display:"flex"}:{}),A=r(()=>{var l,o,a;const s=null!=(a=null!=(o=e.transition)?o:null==(l=b.value)?void 0:l.transition)?a:ne,t={name:s,onAfterEnter:B,onBeforeLeave:q,onAfterLeave:S};if(P(s)){const e={...s},l=(e,l)=>o=>{E(e)?e.forEach(e=>{M(e)&&e(o)}):M(e)&&e(o),l()};return e.onAfterEnter=l(e.onAfterEnter,B),e.onBeforeLeave=l(e.onBeforeLeave,q),e.onAfterLeave=l(e.onAfterLeave,S),e.name||(e.name=ne),e}return t});function B(){a("opened")}function S(){a("closed"),a(I,!1),e.destroyOnClose&&(c.value=!1)}function q(){a("close")}function K(){null==p||p(),null==v||v(),e.openDelay&&e.openDelay>0?({stop:v}=N(()=>G(),e.openDelay)):G()}function Q(){null==v||v(),null==p||p(),e.closeDelay&&e.closeDelay>0?({stop:p}=N(()=>H(),e.closeDelay)):H()}function U(){e.beforeClose?e.beforeClose(function(e){e||(u.value=!0,i.value=!1)}):Q()}function G(){j&&(i.value=!0)}function H(){i.value=!1}return e.lockScroll&&O(i),T(()=>e.zIndex,()=>{var l;f.value=null!=(l=e.zIndex)?l:s()}),T(()=>e.modelValue,o=>{var t;o?(u.value=!1,K(),c.value=!0,f.value=null!=(t=e.zIndex)?t:s(),V(()=>{a("open"),l.value&&(l.value.parentElement.scrollTop=0,l.value.parentElement.scrollLeft=0,l.value.scrollTop=0)})):i.value&&Q()}),T(()=>e.fullscreen,e=>{l.value&&(e?(t=l.value.style.transform,l.value.style.transform=""):l.value.style.transform=t)}),z(()=>{e.modelValue&&(i.value=!0,c.value=!0,K())}),{afterEnter:B,afterLeave:S,beforeLeave:q,handleClose:U,onModalClick:function(){e.closeOnClickModal&&U()},close:Q,doClose:H,onOpenAutoFocus:function(){a("openAutoFocus")},onCloseAutoFocus:function(){a("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&U()},onFocusoutPrevented:function(e){var l;"pointer"===(null==(l=e.detail)?void 0:l.focusReason)&&e.preventDefault()},titleId:n,bodyId:d,closed:u,style:C,overlayDialogStyle:k,rendered:c,visible:i,zIndex:f,transitionConfig:A,_draggable:m,_alignCenter:h,_overflow:w}})(o,t);ee(te,{dialogRef:t,headerRef:n,bodyId:h,ns:s,rendered:B,style:w});const ye=W(ue),ge=r(()=>o.modalPenetrable&&!o.modal&&!o.fullscreen);return l({visible:i,dialogContentRef:d,resetPosition:()=>{var e;null==(e=d.value)||e.resetPosition()},handleClose:de}),(e,l)=>(u(),m(y(ae),{to:e.appendTo,disabled:"body"===e.appendTo&&!e.appendToBody},{default:C(()=>[b(U,G(y(S),{persisted:""}),{default:C(()=>{var l;return[H(b(y(J),{"custom-mask-event":"",mask:e.modal,"overlay-class":[null!=(l=e.modalClass)?l:"",`${y(s).namespace.value}-modal-dialog`,y(s).is("penetrable",y(ge))],"z-index":y(le)},{default:C(()=>[c("div",{role:"dialog","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:y(g),"aria-describedby":y(h),class:p(`${y(s).namespace.value}-overlay-dialog`),style:A(y(k)),onClick:y(ye).onClick,onMousedown:y(ye).onMousedown,onMouseup:y(ye).onMouseup},[b(y(X),{loop:"",trapped:y(i),"focus-start-el":"container",onFocusAfterTrapped:y(ce),onFocusAfterReleased:y(fe),onFocusoutPrevented:y(pe),onReleaseRequested:y(ve)},{default:C(()=>[y(B)?(u(),m(ie,G({key:0,ref_key:"dialogContentRef",ref:d},e.$attrs,{center:e.center,"align-center":y(se),"close-icon":e.closeIcon,draggable:y(oe),overflow:y(re),fullscreen:e.fullscreen,"header-class":e.headerClass,"body-class":e.bodyClass,"footer-class":e.footerClass,"show-close":e.showClose,title:e.title,"aria-level":e.headerAriaLevel,onClose:y(de)}),Z({header:C(()=>[e.$slots.title?v(e.$slots,"title",{key:1}):v(e.$slots,"header",{key:0,close:y(de),titleId:y(g),titleClass:y(s).e("title")})]),default:C(()=>[v(e.$slots,"default")]),_:2},[e.$slots.footer?{name:"footer",fn:C(()=>[v(e.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):f("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Y,y(i)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}}),[["__file","dialog.vue"]]));export{ve as E};
