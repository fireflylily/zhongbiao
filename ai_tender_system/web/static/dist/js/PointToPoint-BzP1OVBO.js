import{_ as e}from"./_plugin-vue_export-helper-BZqs1yfm.js";import"./DocumentPreview.vue_vue_type_style_index_0_scoped_3e333bda_lang-DmpRfM6z.js";import"./HistoryFilesPanel.vue_vue_type_style_index_0_scoped_8037c805_lang-DZHVYQUE.js";/* empty css                             *//* empty css                 *//* empty css                    *//* empty css                   *//* empty css               *//* empty css                */import{E as a,a as l}from"./el-radio-BpDRfV2_.js";import{E as t}from"./el-divider-Dr_mtr9k.js";import"./el-form-item-CVdTmnJr.js";/* empty css                 */import{c as s,d as n}from"./el-select-BSk6f2dL.js";import{d as r,r as o,x as i,A as u,L as d,c,g as p,B as v,a0 as m,w as f,F as y,aA as g,o as h,a6 as _,aB as w,E as b,e as x,k as j,l as k,t as F,H as V,aY as q,aV as I,aU as C,aX as E,ai as S,aF as $,h as z}from"./index.js";import{S as U}from"./SSEStreamViewer-B_dDjhsA.js";import{D as L}from"./DocumentUploader-Bped4RWX.js";import{D as M,v as P}from"./DocumentPreview-DtQSW7TM.js";/* empty css                */import{u as D,a as H,H as T}from"./HitlFileAlert-DkebuoPV.js";import{t as O}from"./tender-lE9zOws1.js";import{d as A}from"./helpers-De3g06u1.js";import{E as R}from"./index-CnzisJd6.js";import{E as B}from"./index-Cjozyviu.js";import{E as G,a as N}from"./index-BsHaG_KP.js";import{E as W,a as J}from"./index-ZXEwf31d.js";import{E as K,a as X}from"./index-CLnWWCfK.js";import{E as Y}from"./index-DVu1qCus.js";import{a as Q,E as Z}from"./index-QKZXHMAQ.js";import{E as ee}from"./strings-DBU9TC1F.js";import{E as ae}from"./index-CNz3qB3a.js";import{E as le,a as te}from"./index-B6s8Nnm3.js";import{E as se}from"./index-BwsZcxV-.js";import"./_commonjsHelpers-lGe4XDVY.js";import"./omit-CX340h9Z.js";import"./_baseClone-BxWT40wp.js";import"./castArray-COSn9LfO.js";import"./index-C50U0V8Z.js";import"./project-BvI9efyp.js";import"./index-BgSxZtJR.js";import"./index-Csos-qsJ.js";import"./raf-D3yCAO_k.js";const ne={class:"point-to-point"},re={class:"card-header"},oe={class:"action-controls"},ie={class:"card-header"},ue={class:"card-header"},de={class:"header-actions"},ce={class:"requirement-text"},pe={class:"card-header"},ve={class:"card-header"},me={class:"header-actions"},fe={class:"collapse-title"},ye={class:"requirement-preview"},ge={class:"response-content"},he={class:"response-item"},_e={class:"requirement-detail"},we={class:"response-item"},be={key:0,class:"response-item"},xe={key:0,class:"response-dialog"},je={class:"dialog-section"},ke={class:"requirement-detail"},Fe={class:"dialog-section"},Ve={key:0,class:"dialog-section"},qe={class:"card-header"},Ie={class:"header-actions"},Ce={class:"current-file-content"},Ee={class:"collapse-header"},Se={class:"filename-cell"},$e=e(r({__name:"PointToPoint",setup(e){const{projects:r,selectedProject:$e,currentDocuments:ze,loadProjects:Ue,handleProjectChange:Le,restoreProjectFromStore:Me}=D(),{useHitlFile:Pe,hitlFileInfo:De,loadFromHITL:He,cancelHitlFile:Te,syncToHitl:Oe}=H({onFileLoaded:()=>{Ae.value.tenderFiles=[]}}),Ae=o({projectId:null,tenderFiles:[]}),Re=o({bidRole:"primary",responseFrequency:"every_paragraph",responseMode:"simple",aiModel:"shihuang-gpt4o-mini"}),Be=o(!1),Ge=o(0),Ne=o(""),We=o([]),Je=o([]),Ke=o(""),Xe=o(""),Ye=i(()=>{let e=We.value;return Ke.value&&(e=e.filter(e=>e.requirement.toLowerCase().includes(Ke.value.toLowerCase()))),Xe.value&&(e=e.filter(e=>e.category===Xe.value)),e}),Qe=o(!1),Ze=o(0),ea=o(""),aa=o(""),la=o(""),ta=o(null),sa=o(null),na=o([]),ra=o(!1),oa=o([]),ia=o(!1),ua=o(""),da=o(""),ca=i(()=>We.value.some(e=>e.response)),pa=o([]),va=o(!1),ma=o(null),fa=i(()=>Ae.value.projectId&&(Ae.value.tenderFiles.length>0||Pe.value)),ya=async e=>{var a;const{file:l,onSuccess:t,onError:s}=e;if(!Ae.value.projectId){return s(new Error("è¯·å…ˆé€‰æ‹©é¡¹ç›®")),void g.error("è¯·å…ˆé€‰æ‹©é¡¹ç›®")}if(!(null==(a=$e.value)?void 0:a.company_id)){return s(new Error("é¡¹ç›®æ²¡æœ‰å…³è”å…¬å¸")),void g.error("é¡¹ç›®æ²¡æœ‰å…³è”å…¬å¸")}try{const e=new FormData;e.append("file",l),e.append("company_id",$e.value.company_id.toString()),e.append("project_id",Ae.value.projectId.toString());const a=await O.parseDocumentStructure(e);if(!a.success)throw new Error(a.message||"ä¸Šä¼ å¤±è´¥");t(a.data),g.success("æ‹›æ ‡æ–‡æ¡£ä¸Šä¼ æˆåŠŸ")}catch(n){s(n),g.error(n.message||"æ‹›æ ‡æ–‡æ¡£ä¸Šä¼ å¤±è´¥")}},ga=async()=>{await Le(Ae.value.projectId,{onClear:()=>{Ae.value.tenderFiles=[],We.value=[],Je.value=[],sa.value=null,Pe.value&&Te()},onDocumentsLoaded:_a})},ha=()=>{g.success("æ–‡æ¡£ä¸Šä¼ æˆåŠŸ")},_a=e=>{const a=[];e.technicalFile?(He(e,"technicalFile"),a.push("æŠ€æœ¯éœ€æ±‚æ–‡æ¡£")):e.tenderFile&&(Ae.value.tenderFiles=[e.tenderFile],a.push("æ‹›æ ‡æ–‡æ¡£")),e.p2pResponseFile&&(sa.value=e.p2pResponseFile,a.push("åŽ†å²åº”ç­”æ–‡ä»¶")),a.length>0&&!e.technicalFile&&g.success(`å·²åŠ è½½ï¼š${a.join("ã€")}`)},wa=async()=>{Be.value=!0,Ge.value=0,Ne.value="",We.value=[];try{await ba(),g.success("æ‹›æ ‡è¦æ±‚æå–å®Œæˆ")}catch(e){g.error("æå–å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{Be.value=!1}},ba=async()=>new Promise(e=>{const a=[{progress:25,message:"æ­£åœ¨è§£æžæ‹›æ ‡æ–‡æ¡£..."},{progress:50,message:"æ­£åœ¨è¯†åˆ«æ‹›æ ‡è¦æ±‚..."},{progress:75,message:"æ­£åœ¨åˆ†ç±»æ•´ç†..."},{progress:100,message:"æå–å®Œæˆï¼"}];let l=0;const t=setInterval(()=>{if(l<a.length){const e=a[l];Ge.value=e.progress,Ne.value+=`\n[${e.progress}%] ${e.message}`,l++}else clearInterval(t),We.value=[{id:1,category:"technical",requirement:"ç³»ç»Ÿåº”æ”¯æŒä¸å°‘äºŽ10000ä¸ªå¹¶å‘ç”¨æˆ·åŒæ—¶åœ¨çº¿è®¿é—®",priority:"é«˜",status:"pending"},{id:2,category:"technical",requirement:"ç³»ç»Ÿå“åº”æ—¶é—´åº”ä¸è¶…è¿‡3ç§’",priority:"é«˜",status:"pending"},{id:3,category:"business",requirement:"é¡¹ç›®å®žæ–½å‘¨æœŸä¸è¶…è¿‡6ä¸ªæœˆ",priority:"é«˜",status:"pending"},{id:4,category:"qualification",requirement:"æŠ•æ ‡äººåº”å…·æœ‰ISO 9001è´¨é‡ç®¡ç†ä½“ç³»è®¤è¯",priority:"ä¸­",status:"pending"},{id:5,category:"qualification",requirement:"æŠ•æ ‡äººåº”å…·æœ‰ä¿¡æ¯å®‰å…¨ç­‰çº§ä¿æŠ¤ä¸‰çº§èµ„è´¨",priority:"ä¸­",status:"pending"},{id:6,category:"business",requirement:"è´¨ä¿æœŸä¸å°‘äºŽ2å¹´",priority:"ä¸­",status:"pending"},{id:7,category:"technical",requirement:"ç³»ç»Ÿåº”æ”¯æŒç§»åŠ¨ç«¯è®¿é—®ï¼ˆiOSå’ŒAndroidï¼‰",priority:"ä¸­",status:"pending"},{id:8,category:"other",requirement:"æŠ•æ ‡æ–‡ä»¶åº”åŒ…å«è¯¦ç»†çš„åŸ¹è®­è®¡åˆ’",priority:"ä½Ž",status:"pending"}],e()},600)}),xa=e=>{Je.value=e},ja=async()=>{if(0!==Je.value.length){Qe.value=!0,Ze.value=0,ea.value="";try{await ka(),g.success("ç‚¹å¯¹ç‚¹åº”ç­”ç”Ÿæˆå®Œæˆ")}catch(e){g.error("ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•")}finally{Qe.value=!1}}else g.warning("è¯·é€‰æ‹©è¦ç”Ÿæˆåº”ç­”çš„è¦æ±‚")},ka=async()=>new Promise(e=>{const a=Je.value.length;let l=0;const t=setInterval(()=>{if(l<a){const e=Je.value[l];Ze.value=Math.round((l+1)/a*100),ea.value+=`\n[${l+1}/${a}] æ­£åœ¨ç”Ÿæˆ"${e.requirement.substring(0,20)}..."çš„åº”ç­”`;const t=We.value.findIndex(a=>a.id===e.id);-1!==t&&(We.value[t]={...We.value[t],status:"generated",response:Va(e),compliance:Math.random()>.3?"å®Œå…¨ç¬¦åˆ":"éƒ¨åˆ†ç¬¦åˆ"}),l++}else clearInterval(t),e()},800)}),Fa=async()=>{if(Ae.value.projectId&&$e.value)if(Pe.value||0!==Ae.value.tenderFiles.length){Qe.value=!0,Ze.value=0;try{const e=new FormData;Pe.value&&De.value?(e.append("use_hitl_technical_file","true"),e.append("project_id",Ae.value.projectId.toString())):Ae.value.tenderFiles.length>0&&Ae.value.tenderFiles[0].raw&&e.append("file",Ae.value.tenderFiles[0].raw),e.append("companyId",$e.value.company_id.toString()),e.append("projectName",$e.value.project_name||""),e.append("responseFrequency",Re.value.responseFrequency),e.append("responseMode",Re.value.responseMode),e.append("aiModel",Re.value.aiModel);const a=await fetch("/api/process-point-to-point",{method:"POST",body:e}),l=await a.json();if(!l.success){let e="å¤„ç†å¤±è´¥";throw l.error?e="object"==typeof l.error&&l.error.message?l.error.message:"string"==typeof l.error?l.error:JSON.stringify(l.error):l.message&&(e=l.message),new Error(e)}{aa.value=l.output_file,la.value=l.download_url,ta.value=l.stats,g.success({message:"ç‚¹å¯¹ç‚¹åº”ç­”Wordæ–‡æ¡£ç”Ÿæˆå®Œæˆï¼",duration:3e3});const e=l.filename||"point-to-point-response.docx";A(l.download_url,e),l.output_file&&await Oe(Ae.value.projectId,l.output_file,"point_to_point"),await za()}}catch(e){let a="å¤„ç†å¤±è´¥ï¼Œè¯·é‡è¯•";"string"==typeof e?a=e:(null==e?void 0:e.message)?a=e.message:(null==e?void 0:e.error)?a=e.error:"object"==typeof e&&(a=JSON.stringify(e)),g.error({message:a,duration:5e3})}finally{Qe.value=!1}}else g.error("è¯·å…ˆä¸Šä¼ æ‹›æ ‡æ–‡æ¡£æˆ–é€‰æ‹©ä½¿ç”¨HITLæŠ€æœ¯æ–‡ä»¶");else g.error("è¯·å…ˆé€‰æ‹©é¡¹ç›®")},Va=e=>({technical:"## æŠ€æœ¯å“åº”\n\næˆ‘æ–¹ç³»ç»Ÿå®Œå…¨æ»¡è¶³è¯¥æŠ€æœ¯è¦æ±‚ï¼š\n\n### æ–¹æ¡ˆè¯´æ˜Ž\n1. é‡‡ç”¨xxxæž¶æž„è®¾è®¡ï¼Œæ”¯æŒé«˜å¹¶å‘è®¿é—®\n2. ç»è¿‡åŽ‹åŠ›æµ‹è¯•ï¼Œå¯æ”¯æŒxxxå¹¶å‘ç”¨æˆ·\n3. é…ç½®xxxæœåŠ¡å™¨é›†ç¾¤ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§\n\n### æŠ€æœ¯æŒ‡æ ‡\n- å¹¶å‘å¤„ç†èƒ½åŠ›ï¼šæ»¡è¶³è¦æ±‚\n- å“åº”æ—¶é—´ï¼šå¹³å‡2ç§’ä»¥å†…\n- ç³»ç»Ÿå¯ç”¨æ€§ï¼š99.9%\n\n### è¯æ˜Žææ–™\nè¯¦è§é™„ä»¶ã€ŠæŠ€æœ¯æ–¹æ¡ˆä¹¦ã€‹ç¬¬xxé¡µ",business:"## å•†åŠ¡å“åº”\n\næˆ‘æ–¹å®Œå…¨æŽ¥å—è¯¥å•†åŠ¡æ¡æ¬¾ï¼š\n\n### æ‰¿è¯ºå†…å®¹\n1. ä¸¥æ ¼æŒ‰ç…§è¦æ±‚æ‰§è¡Œ\n2. æä¾›ç›¸åº”çš„ä¿éšœæŽªæ–½\n3. ç¡®ä¿æŒ‰æ—¶å®Œæˆ\n\n### å…·ä½“å®‰æŽ’\n- é¡¹ç›®å‘¨æœŸï¼šç¬¦åˆè¦æ±‚\n- è´¨ä¿æœŸï¼šæ»¡è¶³è¦æ±‚\n- éªŒæ”¶æ ‡å‡†ï¼šæŒ‰ç…§æ‹›æ ‡æ–‡ä»¶æ‰§è¡Œ\n\n### æœåŠ¡ä¿éšœ\nè¯¦è§é™„ä»¶ã€Šå•†åŠ¡åº”ç­”ä¹¦ã€‹ç¬¬xxé¡µ",qualification:"## èµ„è´¨å“åº”\n\næˆ‘æ–¹å…·å¤‡è¯¥é¡¹èµ„è´¨è¦æ±‚ï¼š\n\n### èµ„è´¨è¯æ˜Ž\n1. æŒæœ‰xxxè¯ä¹¦ï¼Œè¯ä¹¦ç¼–å·ï¼šxxx\n2. è¯ä¹¦æœ‰æ•ˆæœŸï¼šxxxxå¹´xxæœˆè‡³xxxxå¹´xxæœˆ\n3. è®¤è¯èŒƒå›´ï¼šè¦†ç›–æœ¬é¡¹ç›®éœ€æ±‚\n\n### ç›¸å…³ä¸šç»©\n- è¿‘ä¸‰å¹´å®Œæˆç±»ä¼¼é¡¹ç›®xxä¸ª\n- é¡¹ç›®éªŒæ”¶åˆæ ¼çŽ‡100%\n\n### é™„ä»¶ææ–™\nè¯¦è§é™„ä»¶ã€Šèµ„è´¨è¯æ˜Žæ–‡ä»¶ã€‹",other:"## å…¶ä»–è¦æ±‚å“åº”\n\næˆ‘æ–¹æ‰¿è¯ºæ»¡è¶³è¯¥è¦æ±‚ï¼š\n\n### å…·ä½“å®‰æŽ’\n1. åˆ¶å®šè¯¦ç»†è®¡åˆ’\n2. é…å¤‡ä¸“ä¸šäººå‘˜\n3. æä¾›å®Œæ•´æ–‡æ¡£\n\n### æ‰§è¡Œæ ‡å‡†\n- ä¸¥æ ¼æŒ‰ç…§æ‹›æ ‡æ–‡ä»¶è¦æ±‚\n- ç¡®ä¿è´¨é‡å’Œè¿›åº¦\n\n### ç›¸å…³æ–‡ä»¶\nè¯¦è§é™„ä»¶ç›¸å…³ç« èŠ‚"}[e.category]||"æˆ‘æ–¹å®Œå…¨å“åº”è¯¥è¦æ±‚ã€‚"),qa=()=>{Qe.value=!1,g.info("å·²åœæ­¢ç”Ÿæˆ")},Ia=()=>{var e;const a=We.value.filter(e=>e.response).map((e,a)=>`${a+1}. ã€${Ca(e.category)}ã€‘${e.requirement}\n\n${e.response}\n\nç¬¦åˆæ€§ï¼š${e.compliance}\n\n---\n`).join("\n"),l=new Blob([`# ç‚¹å¯¹ç‚¹åº”ç­”æ–‡æ¡£\n\n${a}`],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(l),s=document.createElement("a");s.href=t,s.download=`ç‚¹å¯¹ç‚¹åº”ç­”-${(null==(e=$e.value)?void 0:e.project_name)||"export"}-${Date.now()}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t),g.success("å¯¼å‡ºæˆåŠŸ")},Ca=e=>({technical:"æŠ€æœ¯è¦æ±‚",business:"å•†åŠ¡è¦æ±‚",qualification:"èµ„è´¨è¦æ±‚",other:"å…¶ä»–è¦æ±‚"}[e]||e),Ea=e=>({technical:"primary",business:"success",qualification:"warning",other:"info"}[e]||""),Sa=e=>({pending:"å¾…ç”Ÿæˆ",generated:"å·²ç”Ÿæˆ",reviewed:"å·²å®¡æ ¸"}[e]||e),$a=e=>({pending:"info",generated:"success",reviewed:"primary"}[e]||""),za=async()=>{ra.value=!0;try{const e=await fetch("/api/point-to-point/files"),a=await e.json();if(!a.success)throw new Error(a.error||"åŠ è½½å¤±è´¥");na.value=a.data||[],g.success(`åŠ è½½äº† ${na.value.length} ä¸ªåŽ†å²æ–‡ä»¶`)}catch(e){g.error(e.message||"åŠ è½½åŽ†å²æ–‡ä»¶å¤±è´¥")}finally{ra.value=!1}},Ua=e=>{const a=["B","KB","MB","GB"];let l=e,t=0;for(;l>=1024&&t<a.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${a[t]}`},La=e=>{try{return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return e}},Ma=()=>{var e;sa.value&&(ua.value=sa.value.outputFile,da.value=`ç‚¹å¯¹ç‚¹åº”ç­”-${(null==(e=$e.value)?void 0:e.project_name)||"æ–‡æ¡£"}.docx`,ia.value=!0)},Pa=()=>{var e;if(sa.value)try{const a=`ç‚¹å¯¹ç‚¹åº”ç­”-${(null==(e=$e.value)?void 0:e.project_name)||"æ–‡æ¡£"}-${Date.now()}.docx`;A(sa.value.downloadUrl,a),g.success("æ–‡æ¡£ä¸‹è½½æˆåŠŸ")}catch(a){g.error("æ–‡æ¡£ä¸‹è½½å¤±è´¥ï¼Œè¯·é‡è¯•")}},Da=()=>{sa.value=null,g.info('è¯·é…ç½®å‚æ•°åŽç‚¹å‡»"ç›´æŽ¥ç”ŸæˆWordæ–‡æ¡£"æŒ‰é’®é‡æ–°ç”Ÿæˆ')};return u(oa,e=>{e.includes("history")&&0===na.value.length&&!ra.value&&za()}),d(async()=>{await Ue();const e=await Me({onClear:()=>{Ae.value.tenderFiles=[],We.value=[],Je.value=[],sa.value=null,Pe.value&&Te()},onDocumentsLoaded:_a});e&&(Ae.value.projectId=e)}),(e,o)=>{const i=n,u=s,d=J,D=X,H=b,O=K,Ue=W,Le=R,Me=k,Oe=t,aa=l,la=a,ta=Y,_a=V,ba=Q,ka=ee,Va=Z,Ha=N,Ta=G,Oa=B,Aa=ae,Ra=le,Ba=te,Ga=se,Na=P;return h(),c("div",ne,[p(Le,{class:"project-section",shadow:"never"},{header:f(()=>[...o[13]||(o[13]=[x("div",{class:"card-header"},[x("span",null,"Step 1: é€‰æ‹©é¡¹ç›®")],-1)])]),default:f(()=>[p(Ue,{model:Ae.value,"label-width":"100px"},{default:f(()=>[p(O,{gutter:20},{default:f(()=>[p(D,{span:12},{default:f(()=>[p(d,{label:"é¡¹ç›®"},{default:f(()=>[p(u,{modelValue:Ae.value.projectId,"onUpdate:modelValue":o[0]||(o[0]=e=>Ae.value.projectId=e),placeholder:"è¯·é€‰æ‹©é¡¹ç›®",filterable:"",onChange:ga,style:{width:"100%"}},{default:f(()=>[(h(!0),c(_,null,w(y(r),e=>(h(),v(i,{key:e.id,label:`${e.project_name} (${e.project_number||"-"})`,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),p(D,{span:12},{default:f(()=>[p(d,{label:"å…¬å¸"},{default:f(()=>{var e;return[p(H,{value:(null==(e=y($e))?void 0:e.company_name)||"-",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),Ae.value.projectId?(h(),v(Le,{key:0,class:"upload-section",shadow:"never"},{header:f(()=>[x("div",re,[o[15]||(o[15]=x("span",null,"Step 2: é€‰æ‹©æŠ€æœ¯éœ€æ±‚æ–‡æ¡£",-1)),y(ze).technicalFile&&!y(Pe)?(h(),v(Me,{key:0,type:"primary",size:"small",onClick:o[1]||(o[1]=e=>y(He)(y(ze),"technicalFile"))},{default:f(()=>[...o[14]||(o[14]=[j(" ä½¿ç”¨HITLæŠ€æœ¯éœ€æ±‚æ–‡ä»¶ ",-1)])]),_:1})):m("",!0)])]),default:f(()=>[y(Pe)?(h(),v(y(T),{key:0,"file-info":y(De),label:"ä½¿ç”¨HITLæŠ€æœ¯éœ€æ±‚æ–‡ä»¶:",onCancel:y(Te)},null,8,["file-info","onCancel"])):m("",!0),y(Pe)?m("",!0):(h(),v(y(L),{key:1,modelValue:Ae.value.tenderFiles,"onUpdate:modelValue":o[2]||(o[2]=e=>Ae.value.tenderFiles=e),"http-request":ya,accept:".pdf,.doc,.docx",limit:5,"max-size":50,drag:"","tip-text":"ä¸Šä¼ æŠ€æœ¯éœ€æ±‚æ–‡æ¡£ï¼Œæˆ–ä½¿ç”¨HITLæµç¨‹ä¸­æå–çš„æŠ€æœ¯éœ€æ±‚æ–‡ä»¶",onSuccess:ha},null,8,["modelValue"])),p(Oe,null,{default:f(()=>[...o[16]||(o[16]=[j("å¤„ç†é…ç½®",-1)])]),_:1}),p(Ue,{model:Re.value,"label-width":"100px",class:"config-form"},{default:f(()=>[p(O,{gutter:20},{default:f(()=>[p(D,{span:12},{default:f(()=>[p(d,{label:"æŠ•æ ‡è§’è‰²"},{default:f(()=>[p(la,{modelValue:Re.value.bidRole,"onUpdate:modelValue":o[3]||(o[3]=e=>Re.value.bidRole=e)},{default:f(()=>[p(aa,{label:"primary"},{default:f(()=>[...o[17]||(o[17]=[j("åº”æ ‡",-1)])]),_:1}),p(aa,{label:"secondary"},{default:f(()=>[...o[18]||(o[18]=[j("é™ªæ ‡",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),p(D,{span:12},{default:f(()=>[p(d,{label:"åº”ç­”é¢‘çŽ‡"},{default:f(()=>[p(u,{modelValue:Re.value.responseFrequency,"onUpdate:modelValue":o[4]||(o[4]=e=>Re.value.responseFrequency=e),style:{width:"100%"}},{default:f(()=>[p(i,{label:"æ¯æ®µåº”ç­”",value:"every_paragraph"}),p(i,{label:"æ¯é¡µåº”ç­”",value:"every_page"}),p(i,{label:"æ¯ç« èŠ‚åº”ç­”",value:"every_section"}),p(i,{label:"æ–‡æ¡£æœ«å°¾ç»Ÿä¸€åº”ç­”",value:"end_of_document"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),p(O,{gutter:20},{default:f(()=>[p(D,{span:12},{default:f(()=>[p(d,{label:"åº”ç­”æ–¹å¼"},{default:f(()=>[p(la,{modelValue:Re.value.responseMode,"onUpdate:modelValue":o[5]||(o[5]=e=>Re.value.responseMode=e)},{default:f(()=>[p(aa,{label:"simple"},{default:f(()=>[...o[19]||(o[19]=[j("ç®€å•æ¨¡æ¿åº”ç­”",-1)])]),_:1}),p(aa,{label:"ai"},{default:f(()=>[...o[20]||(o[20]=[j("AIæ™ºèƒ½åº”ç­”",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),"ai"===Re.value.responseMode?(h(),v(D,{key:0,span:12},{default:f(()=>[p(d,{label:"AIæ¨¡åž‹"},{default:f(()=>[p(u,{modelValue:Re.value.aiModel,"onUpdate:modelValue":o[6]||(o[6]=e=>Re.value.aiModel=e),style:{width:"100%"}},{default:f(()=>[p(i,{label:"å§‹çš‡-GPT4oè¿·ä½ ç‰ˆï¼ˆå¿«é€Ÿé«˜æ•ˆï¼‰",value:"shihuang-gpt4o-mini"}),p(i,{label:"å§‹çš‡-GPT4ä¸“ä¸šç‰ˆï¼ˆæ·±åº¦åˆ†æžï¼‰",value:"shihuang-gpt4"}),p(i,{label:"GPT-4O Miniï¼ˆæŽ¨èï¼‰",value:"gpt-4o-mini"}),p(i,{label:"GPT-4Oï¼ˆé«˜è´¨é‡ï¼‰",value:"gpt-4o"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1},8,["model"]),x("div",oe,[p(Me,{type:"primary",size:"large",disabled:!fa.value,loading:Be.value,onClick:wa},{default:f(()=>[...o[21]||(o[21]=[j(" æå–æ‹›æ ‡è¦æ±‚ ",-1)])]),_:1},8,["disabled","loading"]),p(Me,{type:"success",size:"large",disabled:!fa.value,loading:Qe.value,onClick:Fa},{default:f(()=>[...o[22]||(o[22]=[j(" ç›´æŽ¥ç”ŸæˆWordæ–‡æ¡£ ",-1)])]),_:1},8,["disabled","loading"])])]),_:1})):m("",!0),Be.value?(h(),v(Le,{key:1,class:"extracting-section",shadow:"never"},{header:f(()=>[x("div",ie,[o[23]||(o[23]=x("span",null,"æ­£åœ¨æå–æ‹›æ ‡è¦æ±‚...",-1)),p(ta,{percentage:Ge.value,status:100===Ge.value?"success":void 0,style:{width:"300px"}},null,8,["percentage","status"])])]),default:f(()=>[p(y(U),{content:Ne.value,"is-streaming":Be.value},null,8,["content","is-streaming"])]),_:1})):m("",!0),We.value.length>0?(h(),v(Le,{key:2,class:"requirements-section",shadow:"never"},{header:f(()=>[x("div",ue,[x("span",null,"æ‹›æ ‡è¦æ±‚åˆ—è¡¨ (å…± "+F(We.value.length)+" æ¡)",1),x("div",de,[p(H,{modelValue:Ke.value,"onUpdate:modelValue":o[7]||(o[7]=e=>Ke.value=e),placeholder:"æœç´¢è¦æ±‚...",clearable:"",style:{width:"200px"}},{prefix:f(()=>[p(_a,null,{default:f(()=>[p(y(q))]),_:1})]),_:1},8,["modelValue"]),p(u,{modelValue:Xe.value,"onUpdate:modelValue":o[8]||(o[8]=e=>Xe.value=e),placeholder:"ç­›é€‰åˆ†ç±»",clearable:"",style:{width:"150px"}},{default:f(()=>[p(i,{label:"å…¨éƒ¨",value:""}),p(i,{label:"æŠ€æœ¯è¦æ±‚",value:"technical"}),p(i,{label:"å•†åŠ¡è¦æ±‚",value:"business"}),p(i,{label:"èµ„è´¨è¦æ±‚",value:"qualification"}),p(i,{label:"å…¶ä»–è¦æ±‚",value:"other"})]),_:1},8,["modelValue"]),p(Me,{type:"primary",disabled:0===Je.value.length,loading:Qe.value,onClick:ja},{default:f(()=>[j(" ç”Ÿæˆåº”ç­” ("+F(Je.value.length)+") ",1)]),_:1},8,["disabled","loading"])])])]),default:f(()=>[p(Va,{data:Ye.value,border:"",onSelectionChange:xa,"max-height":"500"},{default:f(()=>[p(ba,{type:"selection",width:"55"}),p(ba,{type:"index",label:"åºå·",width:"60"}),p(ba,{prop:"category",label:"åˆ†ç±»",width:"100"},{default:f(({row:e})=>[p(ka,{type:Ea(e.category),size:"small"},{default:f(()=>[j(F(Ca(e.category)),1)]),_:2},1032,["type"])]),_:1}),p(ba,{prop:"requirement",label:"æ‹›æ ‡è¦æ±‚","min-width":"300"},{default:f(({row:e})=>[x("div",ce,F(e.requirement),1)]),_:1}),p(ba,{prop:"priority",label:"ä¼˜å…ˆçº§",width:"100"},{default:f(({row:e})=>{return[p(ka,{type:(a=e.priority,{"é«˜":"danger","ä¸­":"warning","ä½Ž":"info"}[a]||""),size:"small"},{default:f(()=>[j(F(e.priority),1)]),_:2},1032,["type"])];var a}),_:1}),p(ba,{prop:"status",label:"åº”ç­”çŠ¶æ€",width:"100"},{default:f(({row:e})=>[p(ka,{type:$a(e.status),size:"small"},{default:f(()=>[j(F(Sa(e.status)),1)]),_:2},1032,["type"])]),_:1}),p(ba,{label:"æ“ä½œ",width:"100",fixed:"right"},{default:f(({row:e})=>[e.response?(h(),v(Me,{key:0,type:"primary",size:"small",text:"",onClick:a=>{return l=e,ma.value=l,void(va.value=!0);var l}},{default:f(()=>[...o[24]||(o[24]=[j(" æŸ¥çœ‹ ",-1)])]),_:1},8,["onClick"])):m("",!0)]),_:1})]),_:1},8,["data"])]),_:1})):m("",!0),Qe.value?(h(),v(Le,{key:3,class:"generation-output",shadow:"never"},{header:f(()=>[x("div",pe,[o[25]||(o[25]=x("span",null,"AIæ­£åœ¨ç”Ÿæˆç‚¹å¯¹ç‚¹åº”ç­”...",-1)),p(ta,{percentage:Ze.value,status:100===Ze.value?"success":void 0,style:{width:"300px"}},null,8,["percentage","status"])])]),default:f(()=>[p(y(U),{content:ea.value,"is-streaming":Qe.value,onStop:qa},null,8,["content","is-streaming"])]),_:1})):m("",!0),ca.value?(h(),v(Le,{key:4,class:"responses-section",shadow:"never"},{header:f(()=>[x("div",ve,[o[27]||(o[27]=x("span",null,"ç‚¹å¯¹ç‚¹åº”ç­”ç»“æžœ",-1)),x("div",me,[p(Me,{type:"success",icon:y(I),onClick:Ia},{default:f(()=>[...o[26]||(o[26]=[j(" å¯¼å‡ºåº”ç­”æ–‡æ¡£ ",-1)])]),_:1},8,["icon"])])])]),default:f(()=>[p(Ta,{modelValue:pa.value,"onUpdate:modelValue":o[9]||(o[9]=e=>pa.value=e),accordion:""},{default:f(()=>[(h(!0),c(_,null,w(We.value.filter(e=>e.response),e=>(h(),v(Ha,{key:e.id,name:e.id},{title:f(()=>[x("div",fe,[p(ka,{type:Ea(e.category),size:"small"},{default:f(()=>[j(F(Ca(e.category)),1)]),_:2},1032,["type"]),x("span",ye,F(e.requirement),1),p(ka,{type:$a(e.status),size:"small"},{default:f(()=>[j(F(Sa(e.status)),1)]),_:2},1032,["type"])])]),default:f(()=>[x("div",ge,[x("div",he,[o[28]||(o[28]=x("h4",null,"æ‹›æ ‡è¦æ±‚",-1)),x("div",_e,F(e.requirement),1)]),x("div",we,[o[29]||(o[29]=x("h4",null,"æˆ‘æ–¹åº”ç­”",-1)),p(y(U),{content:e.response||"","is-streaming":!1,"enable-markdown":!0},null,8,["content"])]),e.compliance?(h(),c("div",be,[o[30]||(o[30]=x("h4",null,"ç¬¦åˆæ€§è¯´æ˜Ž",-1)),p(ka,{type:"å®Œå…¨ç¬¦åˆ"===e.compliance?"success":"warning",size:"large"},{default:f(()=>[j(F(e.compliance),1)]),_:2},1032,["type"])])):m("",!0)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1})):m("",!0),p(Oa,{modelValue:va.value,"onUpdate:modelValue":o[10]||(o[10]=e=>va.value=e),title:"åº”ç­”è¯¦æƒ…",width:"800px","destroy-on-close":""},{default:f(()=>[ma.value?(h(),c("div",xe,[x("div",je,[o[31]||(o[31]=x("h4",null,"æ‹›æ ‡è¦æ±‚",-1)),x("div",ke,F(ma.value.requirement),1)]),x("div",Fe,[o[32]||(o[32]=x("h4",null,"æˆ‘æ–¹åº”ç­”",-1)),p(y(U),{content:ma.value.response||"","is-streaming":!1,"enable-markdown":!0},null,8,["content"])]),ma.value.compliance?(h(),c("div",Ve,[o[33]||(o[33]=x("h4",null,"ç¬¦åˆæ€§",-1)),p(ka,{type:"å®Œå…¨ç¬¦åˆ"===ma.value.compliance?"success":"warning"},{default:f(()=>[j(F(ma.value.compliance),1)]),_:1},8,["type"])])):m("",!0)])):m("",!0)]),_:1},8,["modelValue"]),sa.value?(h(),v(Le,{key:5,class:"current-file-section",shadow:"never"},{header:f(()=>[x("div",qe,[o[37]||(o[37]=x("span",null,"ðŸ“„ è¯¥é¡¹ç›®çš„ç‚¹å¯¹ç‚¹åº”ç­”æ–‡ä»¶",-1)),x("div",Ie,[p(Me,{type:"primary",icon:y(C),onClick:Ma},{default:f(()=>[...o[34]||(o[34]=[j(" é¢„è§ˆæ–‡æ¡£ ",-1)])]),_:1},8,["icon"]),p(Me,{type:"success",icon:y(I),onClick:Pa},{default:f(()=>[...o[35]||(o[35]=[j(" ä¸‹è½½æ–‡æ¡£ ",-1)])]),_:1},8,["icon"]),p(Me,{type:"info",icon:y(E),onClick:Da},{default:f(()=>[...o[36]||(o[36]=[j(" é‡æ–°ç”Ÿæˆ ",-1)])]),_:1},8,["icon"])])])]),default:f(()=>[x("div",Ce,[p(Aa,{type:"info",title:sa.value.message||"è¯¥é¡¹ç›®å·²æœ‰ç‚¹å¯¹ç‚¹åº”ç­”æ–‡ä»¶",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},null,8,["title"]),p(Ba,{column:2,border:""},{default:f(()=>[p(Ra,{label:"æ–‡ä»¶è·¯å¾„"},{default:f(()=>[j(F(sa.value.outputFile),1)]),_:1}),sa.value.generated_at?(h(),v(Ra,{key:0,label:"ç”Ÿæˆæ—¶é—´"},{default:f(()=>[j(F(La(sa.value.generated_at)),1)]),_:1})):m("",!0),sa.value.stats?(h(),v(Ra,{key:1,label:"ç»Ÿè®¡ä¿¡æ¯",span:2},{default:f(()=>[(h(!0),c(_,null,w(sa.value.stats,(e,a)=>(h(),v(ka,{key:a,style:{"margin-right":"8px"}},{default:f(()=>[j(F(a)+": "+F(e),1)]),_:2},1024))),128))]),_:1})):m("",!0)]),_:1})])]),_:1})):m("",!0),p(Ta,{modelValue:oa.value,"onUpdate:modelValue":o[11]||(o[11]=e=>oa.value=e),class:"history-collapse"},{default:f(()=>[p(Ha,{name:"history"},{title:f(()=>[x("div",Ee,[x("span",null,"ðŸ“‚ æŸ¥çœ‹æ‰€æœ‰åŽ†å²å¤„ç†æ–‡ä»¶ ("+F(na.value.length)+")",1),oa.value?(h(),v(Me,{key:0,type:"primary",size:"small",loading:ra.value,onClick:z(za,["stop"]),style:{"margin-left":"16px"}},{default:f(()=>[...o[38]||(o[38]=[j(" åˆ·æ–°åˆ—è¡¨ ",-1)])]),_:1},8,["loading"])):m("",!0)])]),default:f(()=>[p(Le,{shadow:"never",style:{border:"none"}},{default:f(()=>[S((h(),v(Va,{data:na.value,border:"",stripe:"","max-height":"400"},{default:f(()=>[p(ba,{type:"index",label:"åºå·",width:"60"}),p(ba,{prop:"filename",label:"æ–‡ä»¶å","min-width":"300"},{default:f(({row:e})=>[x("div",Se,[p(_a,null,{default:f(()=>[p(y($))]),_:1}),x("span",null,F(e.filename),1)])]),_:1}),p(ba,{prop:"size",label:"æ–‡ä»¶å¤§å°",width:"120"},{default:f(({row:e})=>[j(F(Ua(e.size)),1)]),_:1}),p(ba,{prop:"process_time",label:"å¤„ç†æ—¶é—´",width:"180"},{default:f(({row:e})=>[j(F(La(e.process_time)),1)]),_:1}),p(ba,{label:"æ“ä½œ",width:"200",fixed:"right"},{default:f(({row:e})=>[p(Me,{type:"primary",size:"small",onClick:a=>{var l;(l=e).file_path?(ua.value=l.file_path,da.value=l.filename,ia.value=!0):g.warning("æ— æ³•èŽ·å–æ–‡ä»¶ä¿¡æ¯")}},{default:f(()=>[...o[39]||(o[39]=[j(" é¢„è§ˆ ",-1)])]),_:1},8,["onClick"]),p(Me,{type:"success",size:"small",onClick:a=>y(A)(e)},{default:f(()=>[...o[40]||(o[40]=[j(" ä¸‹è½½ ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Na,ra.value]]),ra.value||0!==na.value.length?m("",!0):(h(),v(Ga,{key:0,description:"æš‚æ— åŽ†å²æ–‡ä»¶","image-size":100}))]),_:1})]),_:1})]),_:1},8,["modelValue"]),p(y(M),{modelValue:ia.value,"onUpdate:modelValue":o[12]||(o[12]=e=>ia.value=e),"file-url":ua.value,"file-name":da.value},null,8,["modelValue","file-url","file-name"])])}}}),[["__scopeId","data-v-6544fabe"]]);export{$e as default};
