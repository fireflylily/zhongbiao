import{_ as e}from"./_plugin-vue_export-helper-BZqs1yfm.js";import"./DocumentUploader.vue_vue_type_style_index_0_scoped_1530a3ce_lang-kpO4p46J.js";/* empty css                */import{d as a,r as s,x as t,c as l,o,g as r,a2 as i,w as u,C as d,e as p,B as c,a0 as n,H as m,F as f,a$ as x,t as g,b0 as _,b1 as v,k as y,b2 as b,l as h,b3 as k,b4 as B,aA as $}from"./index.js";import{E as w}from"./index-C1e8Wm8f.js";import{E as z}from"./index-2qkNUAPG.js";const V={class:"document-uploader"},j={key:1,class:"upload-drag-area"},F={key:0,class:"upload-hint"},D={key:0,class:"upload-tip"},S={class:"upload-file-item"},T={class:"file-name"},L={class:"file-size"},U=e(a({__name:"DocumentUploader",props:{uploadUrl:{default:"/api/upload"},uploadHeaders:{},uploadData:{},accept:{default:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx"},limit:{default:10},maxSize:{default:50},multiple:{type:Boolean,default:!1},drag:{type:Boolean,default:!1},showFileList:{type:Boolean,default:!0},triggerText:{default:"选择文件"},tipText:{default:""},modelValue:{}},emits:["update:modelValue","success","error","exceed","remove"],setup(e,{expose:a,emit:U}){const C=e,H=U,E=s(),K=t({get:()=>C.modelValue||[],set:e=>H("update:modelValue",e)}),M=e=>{var a;if(C.maxSize&&e.size/1024/1024>C.maxSize)return $.error(`文件大小不能超过 ${C.maxSize}MB`),!1;if(C.accept){const s=C.accept.split(",").map(e=>e.trim()),t="."+(null==(a=e.name.split(".").pop())?void 0:a.toLowerCase());if(!s.some(e=>t===e.toLowerCase()))return $.error(`不支持的文件格式：${t}`),!1}return!0},A=(e,a,s)=>{},G=(e,a,s)=>{$.success("文件上传成功"),H("success",a,s),H("update:modelValue",s)},I=(e,a,s)=>{$.error("文件上传失败："+e.message),H("error",e,a,s)},J=(e,a)=>{$.warning(`最多只能上传 ${C.limit} 个文件`),H("exceed",e,a)},N=(e,a)=>{H("remove",e,a),H("update:modelValue",a)},R=e=>{if(!e)return"0 B";const a=["B","KB","MB","GB"];let s=0,t=e;for(;t>=1024&&s<a.length-1;)t/=1024,s++;return`${t.toFixed(2)} ${a[s]}`};return a({clearFiles:()=>{var e;null==(e=E.value)||e.clearFiles(),H("update:modelValue",[])},submit:()=>{var e;null==(e=E.value)||e.submit()},abort:e=>{var a;null==(a=E.value)||a.abort(e)}}),(a,s)=>{const t=h,$=m,U=z,C=w;return o(),l("div",V,[r(C,i({ref_key:"uploadRef",ref:E,action:e.uploadUrl,headers:e.uploadHeaders,data:e.uploadData,accept:e.accept,limit:e.limit,multiple:e.multiple,drag:e.drag,"show-file-list":e.showFileList,"before-upload":M,"on-progress":A,"on-success":G,"on-error":I,"on-exceed":J,"on-remove":N,"file-list":K.value},a.$attrs),{default:u(()=>[d(a.$slots,"trigger",{},()=>[e.drag?(o(),l("div",j,[r($,{class:"upload-icon"},{default:u(()=>[r(f(B))]),_:1}),s[0]||(s[0]=p("div",{class:"upload-text"},[y(" 将文件拖到此处，或"),p("em",null,"点击上传")],-1)),e.accept?(o(),l("div",F," 支持的文件格式："+g(e.accept),1)):n("",!0)])):(o(),c(t,{key:0,type:"primary",icon:f(k)},{default:u(()=>[y(g(e.triggerText),1)]),_:1},8,["icon"]))],!0)]),tip:u(()=>[d(a.$slots,"tip",{},()=>[e.tipText?(o(),l("div",D,[r($,null,{default:u(()=>[r(f(b))]),_:1}),y(" "+g(e.tipText),1)])):n("",!0)],!0)]),file:u(({file:e})=>[d(a.$slots,"file",{file:e},()=>[p("div",S,[r($,{class:"file-icon"},{default:u(()=>[r(f(x))]),_:1}),p("span",T,g(e.name),1),p("span",L,g(R(e.size)),1),"uploading"===e.status?(o(),c(U,{key:0,percentage:e.percentage,"stroke-width":2},null,8,["percentage"])):n("",!0),"success"===e.status?(o(),c($,{key:1,class:"status-icon success"},{default:u(()=>[r(f(_))]),_:1})):n("",!0),"fail"===e.status?(o(),c($,{key:2,class:"status-icon error"},{default:u(()=>[r(f(v))]),_:1})):n("",!0)])],!0)]),_:3},16,["action","headers","data","accept","limit","multiple","drag","show-file-list","file-list"])])}}}),[["__scopeId","data-v-1530a3ce"]]);export{U as D};
