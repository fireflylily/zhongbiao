import{u as e,bm as a,aE as l,bn as t,aD as s,bo as i,l as o,t as d,w as r,O as n,N as u,e as c,bp as p,ax as v,x as f,d as m,ah as _,ai as y,aS as h,bq as g,Q as b,U as k,D as C,R as w,P as x,h as j,_ as V}from"./index.js";/* empty css               */import{E,a as N,s as K}from"./el-select-CEg_eSdx.js";/* empty css                     *//* empty css                             */import{E as O}from"./el-tree-D9CV_W4I.js";/* empty css                    */import"./el-text-w_Ia2Do6.js";import{E as S}from"./el-pagination-Bqdl1fQI.js";/* empty css                */import{ap as z,ao as U,bA as $,aF as M,am as A,c4 as P,bH as T,aH as D,bQ as L,an as H,bu as R,aX as q,bB as I,au as F,ar as J,aw as Q,ax as B,as as G,ay as X,aC as Z,aq as W,aV as Y,aD as ee,av as ae,bw as le,az as te,aA as se}from"./editor-DtHwR8yc.js";import{L as ie}from"./Loading-CEvPa6xQ.js";import{E as oe}from"./Empty-CGgUzHTC.js";/* empty css                */import{C as de}from"./Card-LFFlZQNZ.js";/* empty css                                                        *//* empty css                                                                          *//* empty css                   *//* empty css                */import{E as re}from"./index-DYtF0M78.js";import{E as ne,a as ue}from"./index-BFjCVuqR.js";import{E as ce,a as pe}from"./index-2X3NYXDr.js";import{E as ve}from"./index-BkIdrdH2.js";import{E as fe}from"./index-B1D0B4Gf.js";import{e as me}from"./strings-BND1Cqg8.js";import{E as _e,a as ye}from"./index-CE7xJF-F.js";import"./index-BCSTGAKU.js";import"./index-CzeRX9sj.js";import"./toNumber-D7Yc6kTN.js";import"./_baseFindIndex-BTqrMG7V.js";import"./_baseIteratee-ByQT0QPi.js";import"./index-CEDA0eDv.js";import"./index-DL_Xf39J.js";import"./flatMap-BdIFri63.js";import"./map-l56HRvAj.js";import"./_baseEach-Dq22CNAR.js";import"./raf-BZHcGSIv.js";const he=A({extends:N,setup(e,a){const l=N.setup(e,a);delete l.selectOptionClick;const t=P().proxy;return M(()=>{l.select.states.cachedOptions.get(t.value)||l.select.onOptionCreate(t)}),z(()=>a.attrs.visible,e=>{M(()=>{l.states.visible=e})},{immediate:!0}),l},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function ge(e){return e||0===e}function be(e){return T(e)&&e.length}function ke(e){return T(e)?e:ge(e)?[e]:[]}function Ce(e,a,l,t,s){for(let i=0;i<e.length;i++){const o=e[i];if(a(o,i,e,s))return t?t(o,i,e,s):o;{const e=l(o);if(be(e)){const s=Ce(e,a,l,t,o);if(s)return s}}}}function we(e,a,l,t){for(let s=0;s<e.length;s++){const i=e[s];a(i,s,e,t);const o=l(i);be(o)&&we(o,a,l,i)}}var xe=A({props:{data:{type:Array,default:()=>[]}},setup(e){const a=L(K);return z(()=>e.data,()=>{var l;e.data.forEach(e=>{a.states.cachedOptions.has(e.value)||a.states.cachedOptions.set(e.value,e)});const t=(null==(l=a.selectRef)?void 0:l.querySelectorAll("input"))||[];o&&!Array.from(t).includes(document.activeElement)&&a.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const je=r(d(A({name:"ElTreeSelect",inheritAttrs:!1,props:{...E.props,...O.props,cacheData:{type:Array,default:()=>[]}},setup(o,d){const{slots:r,expose:n}=d,u=H(),c=H(),p=U(()=>o.nodeKey||o.valueKey||"value"),v=((t,{attrs:s,emit:i},{select:o,tree:d,key:r})=>{const n=e("tree-select");return z(()=>t.data,()=>{t.filterable&&M(()=>{var e,a;null==(a=d.value)||a.filter(null==(e=o.value)?void 0:e.states.inputValue)})},{flush:"post"}),{...a($(t),Object.keys(E.props)),...s,class:U(()=>s.class),style:U(()=>s.style),"onUpdate:modelValue":e=>i(l,e),valueKey:r,popperClass:U(()=>{const e=[n.e("popper")];return t.popperClass&&e.push(t.popperClass),e.join(" ")}),filterMethod:(e="")=>{var a;t.filterMethod?t.filterMethod(e):t.remoteMethod?t.remoteMethod(e):null==(a=d.value)||a.filter(e)}}})(o,d,{select:u,tree:c,key:p}),{cacheOptions:f,...m}=((e,{attrs:o,slots:d,emit:r},{select:n,tree:u,key:c})=>{z([()=>e.modelValue,u],()=>{e.showCheckbox&&M(()=>{const a=u.value;a&&!i(a.getCheckedKeys(),ke(e.modelValue))&&a.setCheckedKeys(ke(e.modelValue))})},{immediate:!0,deep:!0});const p=U(()=>({value:c.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props})),v=(e,a)=>{var l;const t=p.value[e];return D(t)?t(a,null==(l=u.value)?void 0:l.getNode(v("value",a))):a[t]},f=ke(e.modelValue).map(a=>Ce(e.data||[],e=>v("value",e)===a,e=>v("children",e),(e,a,l,t)=>t&&v("value",t))).filter(e=>ge(e)),m=U(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const a=[];return we(e.data.concat(e.cacheData),e=>{const l=v("value",e);a.push({value:l,currentLabel:v("label",e),isDisabled:v("disabled",e)})},e=>v("children",e)),a}),_=()=>{var e;return null==(e=u.value)?void 0:e.getCheckedKeys().filter(e=>{var a;const l=null==(a=u.value)?void 0:a.getNode(e);return!s(l)&&t(l.childNodes)})};return{...a($(e),Object.keys(O.props)),...o,nodeKey:c,expandOnClickNode:U(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:U(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(f):f),renderContent:(a,{node:l,data:t,store:s})=>a(he,{value:v("value",t),label:v("label",t),disabled:v("disabled",t),visible:l.visible},e.renderContent?()=>e.renderContent(a,{node:l,data:t,store:s}):d.default?()=>d.default({node:l,data:t,store:s}):void 0),filterNodeMethod:(a,l,t)=>e.filterNodeMethod?e.filterNodeMethod(a,l,t):!a||new RegExp(me(a),"i").test(v("label",l)||""),onNodeClick:(a,l,t)=>{var s,i,d,r;if(null==(s=o.onNodeClick)||s.call(o,a,l,t),!e.showCheckbox||!e.checkOnClickNode){if(e.showCheckbox||!e.checkStrictly&&!l.isLeaf)e.expandOnClickNode&&t.proxy.handleExpandIconClick();else if(!v("disabled",a)){const e=null==(i=n.value)?void 0:i.states.options.get(v("value",a));null==(d=n.value)||d.handleOptionSelect(e)}null==(r=n.value)||r.focus()}},onCheck:(a,t)=>{var s;if(!e.showCheckbox)return;const i=v("value",a),d={};we([u.value.store.root],e=>d[e.key]=e,e=>e.childNodes);const c=t.checkedKeys,p=e.multiple?ke(e.modelValue).filter(e=>!(e in d)&&!c.includes(e)):[],f=p.concat(c);if(e.checkStrictly)r(l,e.multiple?f:f.includes(i)?i:void 0);else if(e.multiple){const e=_();r(l,p.concat(e))}else{const t=Ce([a],e=>!be(v("children",e))&&!v("disabled",e),e=>v("children",e)),s=t?v("value",t):void 0,i=ge(e.modelValue)&&!!Ce([a],a=>v("value",a)===e.modelValue,e=>v("children",e));r(l,s===e.modelValue||i?void 0:s)}M(()=>{var l;const t=ke(e.modelValue);u.value.setCheckedKeys(t),null==(l=o.onCheck)||l.call(o,a,{checkedKeys:u.value.getCheckedKeys(),checkedNodes:u.value.getCheckedNodes(),halfCheckedKeys:u.value.getHalfCheckedKeys(),halfCheckedNodes:u.value.getHalfCheckedNodes()})}),null==(s=n.value)||s.focus()},onNodeExpand:(a,t,s)=>{var i;null==(i=o.onNodeExpand)||i.call(o,a,t,s),M(()=>{if(!e.checkStrictly&&e.lazy&&e.multiple&&t.checked){const a={},t=u.value.getCheckedKeys();we([u.value.store.root],e=>a[e.key]=e,e=>e.childNodes);const s=ke(e.modelValue).filter(e=>!(e in a)&&!t.includes(e)),i=_();r(l,s.concat(i))}})},cacheOptions:m}})(o,d,{select:u,tree:c,key:p}),_=R({});return n(_),q(()=>{Object.assign(_,{...a(c.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...a(u.value,["focus","blur","selectedLabel"]),treeRef:c.value,selectRef:u.value})}),()=>I(E,R({...v,ref:e=>u.value=e}),{...r,default:()=>[I(xe,{data:f.value}),I(O,R({...m,ref:e=>c.value=e}))]})}}),[["__file","tree-select.vue"]])),Ve={class:"capability-management"},Ee={class:"stats-bar"},Ne={class:"stat-content"},Ke={class:"stat-icon tags"},Oe={class:"stat-info"},Se={class:"stat-value"},ze={class:"stat-content"},Ue={class:"stat-icon capabilities"},$e={class:"stat-info"},Me={class:"stat-value"},Ae={class:"stat-content"},Pe={class:"stat-icon verified"},Te={class:"stat-info"},De={class:"stat-value"},Le={class:"tree-node"},He={class:"node-label"},Re={class:"node-actions"},qe={class:"capabilities-toolbar"},Ie={key:3,class:"pagination-wrapper"},Fe={class:"original-text"},Je="/api/capability",Qe=V(A({__name:"CapabilityManagement",setup(e){const{success:a,error:l}=n(),t=u(),s=U(()=>t.currentCompanyId||1),i=R({tagCount:0,capabilityCount:0,verifiedCount:0}),o=H(!1),d=H([]),r={label:"tag_name",children:"children"},V=H(null),K=H(""),$=H(!1),M=H([]),A=H(""),P=H(1),T=H(20),D=H(0),L=H(!1),I=H("create"),me=H({tag_id:null,tag_name:"",tag_code:"",parent_tag_id:null,description:"",example_keywords:""}),he=H(),ge={tag_name:[{required:!0,message:"请输入标签名称",trigger:"blur"}],tag_code:[{required:!0,message:"请输入标签代码",trigger:"blur"}]},be=H(!1),ke=H(!1),Ce=H(null),we=H(!1),xe=R({doc_ids:[],tag_id:null}),Qe=H([]),Be=H(!1),Ge=async()=>{o.value=!0;try{const e=await fetch(`${Je}/tags?company_id=${s.value}`),a=await e.json();a.success?(d.value=a.data||[],i.tagCount=Xe(d.value)):l("加载失败",a.error||"未知错误")}catch(e){l("加载失败",e instanceof Error?e.message:"未知错误")}finally{o.value=!1}},Xe=e=>e.reduce((e,a)=>e+1+(a.children?Xe(a.children):0),0),Ze=async()=>{$.value=!0;try{const e=new URLSearchParams({company_id:String(s.value),page:String(P.value),page_size:String(T.value)});V.value&&e.append("tag_id",String(V.value)),A.value&&e.append("keyword",A.value);const a=await fetch(`${Je}/capabilities?${e}`),t=await a.json();t.success?(M.value=t.data||[],D.value=t.total||0,i.capabilityCount=D.value,i.verifiedCount=M.value.filter(e=>e.verified).length):l("加载失败",t.error||"未知错误")}catch(e){l("加载失败",e instanceof Error?e.message:"未知错误")}finally{$.value=!1}},We=()=>{P.value=1,Ze()},Ye=e=>{V.value=e.tag_id,K.value=e.tag_name,P.value=1,Ze()},ea=()=>{I.value="create",me.value={tag_id:null,tag_name:"",tag_code:"",parent_tag_id:null,description:"",example_keywords:""},L.value=!0},aa=async()=>{he.value&&await he.value.validate(async e=>{if(e){be.value=!0;try{const e="edit"===I.value,t=e?`${Je}/tags/${me.value.tag_id}`:`${Je}/tags`,i={...me.value,company_id:s.value},o=await fetch(t,{method:e?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),d=await o.json();d.success?(a(e?"更新成功":"创建成功"),L.value=!1,await Ge()):l(e?"更新失败":"创建失败",d.error||"未知错误")}catch(t){l("保存失败",t instanceof Error?t.message:"未知错误")}finally{be.value=!1}}})},la=async e=>{try{const t=await fetch(`${Je}/capabilities/${e.capability_id}/verify`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({verified:!e.verified})}),s=await t.json();s.success?(e.verified=!e.verified,a(e.verified?"已验证":"已取消验证")):l("操作失败",s.error||"未知错误")}catch(t){l("操作失败",t instanceof Error?t.message:"未知错误")}},ta=async()=>{Ce.value&&await la(Ce.value)},sa=async()=>{xe.doc_ids=[],xe.tag_id=V.value;try{const e=await fetch(`/api/documents?company_id=${s.value}&limit=100`),a=await e.json();a.success&&(Qe.value=a.data||[])}catch(e){}we.value=!0},ia=async()=>{Be.value=!0;try{const e=await fetch(`${Je}/extract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_id:s.value,doc_ids:xe.doc_ids,tag_id:xe.tag_id})}),t=await e.json();t.success?(a("提取完成",`成功提取 ${t.extracted_count||0} 个能力`),we.value=!1,Ze()):l("提取失败",t.error||"未知错误")}catch(e){l("提取失败",e instanceof Error?e.message:"未知错误")}finally{Be.value=!1}};return q(()=>{Ge(),Ze()}),z(s,()=>{Ge(),Ze()}),(e,t)=>{const s=c,n=re,u=m,z=O,U=ne,H=b,R=pe,q=ve,Xe=fe,oa=ce,da=S,ra=ue,na=x,ua=je,ca=w,pa=j,va=ye,fa=_e,ma=N,_a=E;return J(),F("div",Ve,[Q("div",Ee,[B(n,{class:"stat-card"},{default:G(()=>[Q("div",Ne,[Q("div",Ke,[B(s,{size:32,color:"#409eff"},{default:G(()=>[B(X(p))]),_:1})]),Q("div",Oe,[t[16]||(t[16]=Q("div",{class:"stat-label"},"能力标签",-1)),Q("div",Se,Z(i.tagCount),1)])])]),_:1}),B(n,{class:"stat-card"},{default:G(()=>[Q("div",ze,[Q("div",Ue,[B(s,{size:32,color:"#67c23a"},{default:G(()=>[B(X(v))]),_:1})]),Q("div",$e,[t[17]||(t[17]=Q("div",{class:"stat-label"},"能力条目",-1)),Q("div",Me,Z(i.capabilityCount),1)])])]),_:1}),B(n,{class:"stat-card"},{default:G(()=>[Q("div",Ae,[Q("div",Pe,[B(s,{size:32,color:"#e6a23c"},{default:G(()=>[B(X(f))]),_:1})]),Q("div",Te,[t[18]||(t[18]=Q("div",{class:"stat-label"},"已验证",-1)),Q("div",De,Z(i.verifiedCount),1)])])]),_:1})]),B(ra,{gutter:20},{default:G(()=>[B(U,{span:8},{default:G(()=>[B(X(de),{title:"能力标签"},{extra:G(()=>[B(u,{type:"primary",size:"small",onClick:ea},{default:G(()=>[B(s,null,{default:G(()=>[B(X(_))]),_:1}),t[19]||(t[19]=ee(" 新建标签 ",-1))]),_:1})]),default:G(()=>[o.value?(J(),W(X(ie),{key:0,text:"加载中..."})):d.value.length?(J(),W(z,{key:2,data:d.value,props:r,"node-key":"tag_id","default-expand-all":"","highlight-current":"",onNodeClick:Ye},{default:G(({node:e,data:t})=>[Q("div",Le,[Q("span",He,Z(e.label),1),Q("span",Re,[B(u,{link:"",type:"primary",size:"small",onClick:Y(e=>{return a=t,I.value="create",me.value={tag_id:null,tag_name:"",tag_code:"",parent_tag_id:a.tag_id,description:"",example_keywords:""},void(L.value=!0);var a},["stop"])},{default:G(()=>[B(s,null,{default:G(()=>[B(X(_))]),_:1})]),_:1},8,["onClick"]),B(u,{link:"",type:"warning",size:"small",onClick:Y(e=>{return a=t,I.value="edit",me.value={tag_id:a.tag_id,tag_name:a.tag_name,tag_code:a.tag_code,parent_tag_id:a.parent_tag_id,description:a.description||"",example_keywords:a.example_keywords||""},void(L.value=!0);var a},["stop"])},{default:G(()=>[B(s,null,{default:G(()=>[B(X(y))]),_:1})]),_:1},8,["onClick"]),B(u,{link:"",type:"danger",size:"small",onClick:Y(e=>(async e=>{if(confirm(`确定要删除标签 "${e.tag_name}" 吗？`))try{const t=await fetch(`${Je}/tags/${e.tag_id}`,{method:"DELETE"}),s=await t.json();s.success?(a("删除成功"),await Ge(),V.value===e.tag_id&&(V.value=null,K.value="",Ze())):l("删除失败",s.error||"未知错误")}catch(t){l("删除失败",t instanceof Error?t.message:"未知错误")}})(t),["stop"])},{default:G(()=>[B(s,null,{default:G(()=>[B(X(h))]),_:1})]),_:1},8,["onClick"])])])]),_:1},8,["data"])):(J(),W(X(oe),{key:1,type:"no-data",description:"暂无标签"}))]),_:1})]),_:1}),B(U,{span:16},{default:G(()=>[B(X(de),{title:K.value?`${K.value} - 能力列表`:"全部能力"},{extra:G(()=>[Q("div",qe,[B(H,{modelValue:A.value,"onUpdate:modelValue":t[0]||(t[0]=e=>A.value=e),placeholder:"搜索能力名称...",clearable:"",style:{width:"200px"},onKeyup:le(We,["enter"])},{prefix:G(()=>[B(s,null,{default:G(()=>[B(X(k))]),_:1})]),_:1},8,["modelValue"]),B(u,{type:"primary",onClick:sa},{default:G(()=>[B(s,null,{default:G(()=>[B(X(C))]),_:1}),t[20]||(t[20]=ee(" 从文档提取 ",-1))]),_:1})])]),default:G(()=>[$.value?(J(),W(X(ie),{key:0,text:"加载中..."})):M.value.length?(J(),W(oa,{key:2,data:M.value,stripe:"","max-height":"500"},{default:G(()=>[B(R,{prop:"capability_name",label:"能力名称",width:"180","show-overflow-tooltip":""}),B(R,{prop:"capability_type",label:"类型",width:"100"},{default:G(({row:e})=>{return[B(q,{type:(a=e.capability_type,{"功能":"primary","接口":"success","服务":"warning","支持能力":"info"}[a]||"info"),size:"small"},{default:G(()=>[ee(Z(e.capability_type||"未分类"),1)]),_:2},1032,["type"])];var a}),_:1}),B(R,{prop:"capability_description",label:"描述","show-overflow-tooltip":""}),B(R,{prop:"doc_name",label:"来源文档",width:"150","show-overflow-tooltip":""}),B(R,{prop:"confidence_score",label:"置信度",width:"80",align:"center"},{default:G(({row:e})=>{return[B(Xe,{percentage:Math.round(100*(e.confidence_score||0)),"stroke-width":6,"show-text":!1,color:(a=e.confidence_score,a>=.8?"#67c23a":a>=.6?"#e6a23c":"#f56c6c")},null,8,["percentage","color"])];var a}),_:1}),B(R,{prop:"verified",label:"验证",width:"70",align:"center"},{default:G(({row:e})=>[e.verified?(J(),W(s,{key:0,color:"#67c23a"},{default:G(()=>[B(X(f))]),_:1})):(J(),W(s,{key:1,color:"#909399"},{default:G(()=>[B(X(g))]),_:1}))]),_:1}),B(R,{label:"操作",width:"150",fixed:"right"},{default:G(({row:e})=>[B(u,{link:"",type:"primary",size:"small",onClick:a=>{return l=e,Ce.value=l,void(ke.value=!0);var l}},{default:G(()=>[...t[21]||(t[21]=[ee(" 详情 ",-1)])]),_:1},8,["onClick"]),B(u,{link:"",type:e.verified?"warning":"success",size:"small",onClick:a=>la(e)},{default:G(()=>[ee(Z(e.verified?"取消验证":"验证"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data"])):(J(),W(X(oe),{key:1,type:"no-data",description:"暂无能力数据"})),D.value>T.value?(J(),F("div",Ie,[B(da,{"current-page":P.value,"onUpdate:currentPage":t[1]||(t[1]=e=>P.value=e),"page-size":T.value,"onUpdate:pageSize":t[2]||(t[2]=e=>T.value=e),total:D.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",onSizeChange:Ze,onCurrentChange:Ze},null,8,["current-page","page-size","total"])])):ae("",!0)]),_:1},8,["title"])]),_:1})]),_:1}),B(pa,{modelValue:L.value,"onUpdate:modelValue":t[9]||(t[9]=e=>L.value=e),title:"create"===I.value?"新建标签":"编辑标签",width:"500px"},{footer:G(()=>[B(u,{onClick:t[8]||(t[8]=e=>L.value=!1)},{default:G(()=>[...t[22]||(t[22]=[ee("取消",-1)])]),_:1}),B(u,{type:"primary",onClick:aa,loading:be.value},{default:G(()=>[...t[23]||(t[23]=[ee(" 保存 ",-1)])]),_:1},8,["loading"])]),default:G(()=>[B(ca,{model:me.value,rules:ge,ref_key:"tagFormRef",ref:he,"label-width":"100px"},{default:G(()=>[B(na,{label:"标签名称",prop:"tag_name"},{default:G(()=>[B(H,{modelValue:me.value.tag_name,"onUpdate:modelValue":t[3]||(t[3]=e=>me.value.tag_name=e),placeholder:"如：风控产品、实修能力"},null,8,["modelValue"])]),_:1}),B(na,{label:"标签代码",prop:"tag_code"},{default:G(()=>[B(H,{modelValue:me.value.tag_code,"onUpdate:modelValue":t[4]||(t[4]=e=>me.value.tag_code=e),placeholder:"英文代码，如: risk_control",disabled:"edit"===I.value},null,8,["modelValue","disabled"])]),_:1}),B(na,{label:"父级标签",prop:"parent_tag_id"},{default:G(()=>[B(ua,{modelValue:me.value.parent_tag_id,"onUpdate:modelValue":t[5]||(t[5]=e=>me.value.parent_tag_id=e),data:d.value,props:{label:"tag_name",value:"tag_id",children:"children"},placeholder:"选择父级标签（可选）","check-strictly":"",clearable:"",style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),B(na,{label:"描述",prop:"description"},{default:G(()=>[B(H,{modelValue:me.value.description,"onUpdate:modelValue":t[6]||(t[6]=e=>me.value.description=e),type:"textarea",rows:3,placeholder:"标签的详细描述"},null,8,["modelValue"])]),_:1}),B(na,{label:"示例关键词",prop:"example_keywords"},{default:G(()=>[B(H,{modelValue:me.value.example_keywords,"onUpdate:modelValue":t[7]||(t[7]=e=>me.value.example_keywords=e),type:"textarea",rows:2,placeholder:"逗号分隔的关键词，用于AI匹配"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),B(pa,{modelValue:ke.value,"onUpdate:modelValue":t[11]||(t[11]=e=>ke.value=e),title:"能力详情",width:"600px"},{footer:G(()=>{var e;return[B(u,{onClick:t[10]||(t[10]=e=>ke.value=!1)},{default:G(()=>[...t[24]||(t[24]=[ee("关闭",-1)])]),_:1}),B(u,{type:(null==(e=Ce.value)?void 0:e.verified)?"warning":"success",onClick:ta},{default:G(()=>{var e;return[ee(Z((null==(e=Ce.value)?void 0:e.verified)?"取消验证":"标记为已验证"),1)]}),_:1},8,["type"])]}),default:G(()=>[Ce.value?(J(),W(fa,{key:0,column:2,border:""},{default:G(()=>[B(va,{label:"能力名称",span:2},{default:G(()=>[ee(Z(Ce.value.capability_name),1)]),_:1}),B(va,{label:"能力类型"},{default:G(()=>[ee(Z(Ce.value.capability_type||"未分类"),1)]),_:1}),B(va,{label:"置信度"},{default:G(()=>[ee(Z(Math.round(100*(Ce.value.confidence_score||0)))+"% ",1)]),_:1}),B(va,{label:"关联标签"},{default:G(()=>[ee(Z(Ce.value.tag_name||"无"),1)]),_:1}),B(va,{label:"验证状态"},{default:G(()=>[B(q,{type:Ce.value.verified?"success":"info"},{default:G(()=>[ee(Z(Ce.value.verified?"已验证":"待验证"),1)]),_:1},8,["type"])]),_:1}),B(va,{label:"来源文档",span:2},{default:G(()=>[ee(Z(Ce.value.doc_name||"未知"),1)]),_:1}),B(va,{label:"能力描述",span:2},{default:G(()=>[ee(Z(Ce.value.capability_description||"无描述"),1)]),_:1}),B(va,{label:"原文摘录",span:2},{default:G(()=>[Q("div",Fe,Z(Ce.value.original_text||"无"),1)]),_:1})]),_:1})):ae("",!0)]),_:1},8,["modelValue"]),B(pa,{modelValue:we.value,"onUpdate:modelValue":t[15]||(t[15]=e=>we.value=e),title:"从文档提取能力",width:"600px"},{footer:G(()=>[B(u,{onClick:t[14]||(t[14]=e=>we.value=!1)},{default:G(()=>[...t[25]||(t[25]=[ee("取消",-1)])]),_:1}),B(u,{type:"primary",onClick:ia,loading:Be.value,disabled:!xe.doc_ids.length},{default:G(()=>[...t[26]||(t[26]=[ee(" 开始提取 ",-1)])]),_:1},8,["loading","disabled"])]),default:G(()=>[B(ca,{"label-width":"100px"},{default:G(()=>[B(na,{label:"选择文档"},{default:G(()=>[B(_a,{modelValue:xe.doc_ids,"onUpdate:modelValue":t[12]||(t[12]=e=>xe.doc_ids=e),multiple:"",filterable:"",placeholder:"选择要提取能力的文档",style:{width:"100%"}},{default:G(()=>[(J(!0),F(te,null,se(Qe.value,e=>(J(),W(ma,{key:e.doc_id,label:e.doc_name,value:e.doc_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),B(na,{label:"关联标签"},{default:G(()=>[B(ua,{modelValue:xe.tag_id,"onUpdate:modelValue":t[13]||(t[13]=e=>xe.tag_id=e),data:d.value,props:{label:"tag_name",value:"tag_id",children:"children"},placeholder:"选择要关联的标签（可选）","check-strictly":"",clearable:"",style:{width:"100%"}},null,8,["modelValue","data"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-20e406ed"]]);export{Qe as default};
