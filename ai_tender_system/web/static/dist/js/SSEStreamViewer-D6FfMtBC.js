import{C as e,M as t,a,j as n}from"./vendor-element-plus-CEQaQHNc.js";import{ez as s,d0 as o,eA as r,eB as c,er as i,et as l}from"./vendor-other-CxXkF0Pk.js";import{d,r as u,a as p,w as m,P as y,M as f,W as v,c as _,Q as g,N as k,O as w,I as S,L as b,H as h,q as j}from"./vendor-vue-DnBj6vzG.js";/* empty css                                                                          */import{_ as C}from"./index.js";const L=["innerHTML"],x={key:0,class:"streaming-indicator"},M={key:0,class:"stream-actions"},B=C(d({__name:"SSEStreamViewer",props:{content:{},isStreaming:{type:Boolean,default:!1},enableMarkdown:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0}},emits:["stop","regenerate"],setup(d,{emit:C}){const B=d,H=C,R=u(null),T=p(()=>{if(!B.content)return"";if(B.enableMarkdown)try{return s.parse(B.content)}catch(e){return B.content}return B.content.replace(/\n/g,"<br>")});m(()=>B.content,async()=>{B.autoScroll&&B.isStreaming&&(await j(),U())});const U=()=>{R.value&&(R.value.scrollTop=R.value.scrollHeight)},O=async()=>{try{await navigator.clipboard.writeText(B.content),n.success("内容已复制到剪贴板")}catch(e){n.error("复制失败，请手动复制")}},E=()=>{try{const e=new Blob([B.content],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`ai-content-${Date.now()}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t),n.success("文档下载成功")}catch(e){n.error("下载失败，请重试")}};return(n,s)=>{const u=e,p=t,m=a;return f(),y("div",{class:v(["sse-stream-viewer",{"is-loading":d.isStreaming}])},[_(p,{class:"stream-content",shadow:"never"},{default:k(()=>[w("div",{ref_key:"contentRef",ref:R,class:"content-wrapper",innerHTML:T.value},null,8,L),d.isStreaming?(f(),y("div",x,[_(u,{class:"is-loading"},{default:k(()=>[_(S(o))]),_:1}),s[2]||(s[2]=w("span",null,"正在生成中...",-1))])):g("",!0)]),_:1}),d.content?(f(),y("div",M,[d.isStreaming?(f(),b(m,{key:0,type:"warning",icon:S(r),onClick:s[0]||(s[0]=e=>H("stop"))},{default:k(()=>[...s[3]||(s[3]=[h(" 停止生成 ",-1)])]),_:1},8,["icon"])):(f(),b(m,{key:1,type:"primary",icon:S(c),onClick:O},{default:k(()=>[...s[4]||(s[4]=[h(" 复制内容 ",-1)])]),_:1},8,["icon"])),!d.isStreaming&&d.content?(f(),b(m,{key:2,type:"success",icon:S(i),onClick:E},{default:k(()=>[...s[5]||(s[5]=[h(" 下载文档 ",-1)])]),_:1},8,["icon"])):g("",!0),!d.isStreaming&&d.content?(f(),b(m,{key:3,icon:S(l),onClick:s[1]||(s[1]=e=>H("regenerate"))},{default:k(()=>[...s[6]||(s[6]=[h(" 重新生成 ",-1)])]),_:1},8,["icon"])):g("",!0)])):g("",!0)],2)}}}),[["__scopeId","data-v-cba4d568"]]);export{B as S};
