import{d as e,r as a,c as l,S as t,e as s,o as u,N as n,n as i,f as d,k as c,l as o,w as r,ak as v,ai as m,s as p,Y as f,F as _,V as y,h as g,W as h,t as b,as as x,ad as z,ae as V,X as w,p as k,aB as j,g as F,aD as C,q as P,y as D,aa as M,aJ as U,bt as B,aT as G,a7 as T,ar as A,aE as E,A as H}from"./vendor-UMr2cBTC.js";import{_ as O}from"./index.js";import{u as S}from"./useProjectDocuments-V2iiB3g0.js";import{t as q}from"./tender-ZYcn_VXM.js";/* empty css                                                                          */import{D as I}from"./DocumentPreview-T-9M55_P.js";import{c as J}from"./company-DX6fQVXW.js";import"./project-ByeBFM8-.js";/* empty css                                                                        */const K={class:"outline-comparison-wrapper"},L={class:"main-content"},N={style:{color:"var(--text-secondary)","font-size":"12px","margin-left":"8px"}},W={class:"document-item"},X={class:"document-header"},Y={class:"document-info"},Q={class:"document-item"},R={class:"document-header"},Z={class:"document-info"},$={class:"card-header"},ee={class:"card-title"},ae={class:"card-header"},le={class:"card-title"},te={class:"action-section"},se={class:"card-header"},ue={class:"result-section"},ne={class:"result-title"},ie={class:"outline-content"},de={key:0,class:"outline-text"},ce={class:"result-meta"},oe={class:"result-section"},re={class:"result-title"},ve={class:"outline-content"},me={key:0,class:"outline-text"},pe={class:"result-meta"},fe=O(e({__name:"OutlineComparison",setup(e){const{projects:O,currentDocuments:fe,loadProjects:_e,handleProjectChange:ye}=S(),ge=O,he=a([]),be=a(null),xe=a(null),ze=a(!1),Ve=a(!1),we=a(!1),ke=a(""),je=a(""),Fe=a("正在加载提示词配置..."),Ce=a(!0),Pe=a(""),De=a(""),Me=a(!1),Ue=a(!1),Be=a(""),Ge=a(""),Te=a(""),Ae=a(""),Ee=l(()=>be.value&&xe.value&&Pe.value&&De.value);function He(e){if(0===e)return"未知大小";const a=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,a)*100)/100+" "+["B","KB","MB","GB"][a]}async function Oe(e){if(ze.value=!1,Ve.value=!1,!e)return xe.value=null,void(await ye(null));await ye(e,{onClear:()=>{ze.value=!1,Ve.value=!1},onDocumentsLoaded:e=>{e.tenderFile&&(ze.value=!0),e.technicalFile&&(Ve.value=!0)}});const a=ge.value.find(a=>a.id===e);a&&a.company_id&&(xe.value=a.company_id)}async function Se(){if(Ee.value){Me.value=!0,Ue.value=!1;try{H.info("大纲生成功能开发中..."),setTimeout(()=>{Be.value="第一章 项目概述\n1.1 项目背景\n1.2 项目目标\n第二章 技术方案\n2.1 系统架构\n2.2 技术选型",Ge.value="第一章 项目介绍\n1.1 背景分析\n1.2 目标设定\n第二章 解决方案\n2.1 架构设计\n2.2 技术栈",Te.value="2.3秒",Ae.value="3.1秒",Ue.value=!0,Me.value=!1},2e3)}catch(e){H.error("生成失败"),Me.value=!1}}else H.warning("请完整填写所有配置项")}function qe(){be.value=null,xe.value=null,Pe.value="",De.value="",Ue.value=!1,Be.value="",Ge.value="",Te.value="",Ae.value=""}function Ie(){fe.value.technicalFile?(ke.value=fe.value.technicalFile.url,je.value=fe.value.technicalFile.name,we.value=!0):H.warning("技术文件不存在")}return t(()=>{!async function(){await _e()}(),async function(){try{const e=await J.getCompanies();e.success&&e.data&&(he.value=e.data)}catch(e){H.error("加载公司列表失败")}}(),async function(){Ce.value=!0;try{const e=await q.getOutlineGenerationPrompts();if(e.success&&e.data){const a=e.data.prompts||e.data;Fe.value=a.generate_outline||"未找到提示词配置"}else Fe.value="未找到提示词配置"}catch(e){H.error("加载提示词配置失败"),Fe.value="加载失败，请刷新页面重试"}finally{Ce.value=!1}}()}),(e,a)=>{const l=h,t=f,H=p,O=m,S=v,q=x,J=z,_e=w,ye=j,Je=F,Ke=D,Le=P,Ne=A,We=T,Xe=U;return u(),s("div",K,[a[25]||(a[25]=n('<div class="page-header" data-v-97b6cc04><div class="header-content" data-v-97b6cc04><div class="title-section" data-v-97b6cc04><i class="bi-diagram-3 header-icon" data-v-97b6cc04></i><div class="title-group" data-v-97b6cc04><h1 class="page-title" data-v-97b6cc04>大纲生成对比</h1><p class="page-description" data-v-97b6cc04>对比不同模型和提示词生成的技术方案大纲效果</p></div></div></div></div>',1)),i("div",L,[d(q,{class:"selection-card"},{default:r(()=>[d(S,{gutter:16},{default:r(()=>[d(O,{xs:24,sm:12},{default:r(()=>[d(H,{label:"选择项目"},{default:r(()=>[d(t,{modelValue:be.value,"onUpdate:modelValue":a[0]||(a[0]=e=>be.value=e),placeholder:"请选择项目",filterable:"",clearable:"",onChange:Oe},{default:r(()=>[(u(!0),s(_,null,y(g(ge),e=>(u(),c(l,{key:e.id,label:e.project_name,value:e.id},{default:r(()=>[i("span",null,b(e.project_name),1),i("span",N,b(e.company_name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),d(O,{xs:24,sm:12},{default:r(()=>[d(H,{label:"应答公司"},{default:r(()=>[d(t,{modelValue:xe.value,"onUpdate:modelValue":a[1]||(a[1]=e=>xe.value=e),placeholder:"请选择应答公司",filterable:"",clearable:""},{default:r(()=>[(u(!0),s(_,null,y(he.value,e=>(u(),c(l,{key:e.company_id,label:e.company_name||e.name,value:e.company_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),be.value&&(ze.value||Ve.value)?(u(),c(q,{key:0,class:"documents-card"},{header:r(()=>[...a[6]||(a[6]=[i("div",{class:"card-header"},[i("span",{class:"card-title"},[i("i",{class:"bi-folder2-open"}),k(" 项目文档 ")])],-1)])]),default:r(()=>[d(S,{gutter:16},{default:r(()=>[ze.value&&g(fe).tenderFile?(u(),c(O,{key:0,xs:24,sm:12},{default:r(()=>[i("div",W,[i("div",X,[d(J,{class:"document-icon",color:"#409EFF"},{default:r(()=>[d(g(V))]),_:1}),a[7]||(a[7]=i("span",{class:"document-label"},"招标文档：",-1))]),i("div",Y,[d(_e,{type:"info",size:"large"},{default:r(()=>[k(b(g(fe).tenderFile.name),1)]),_:1}),d(ye,{size:"small",type:"info",style:{"margin-left":"8px"}},{default:r(()=>[k(b(He(g(fe).tenderFile.size)),1)]),_:1})])])]),_:1})):o("",!0),Ve.value&&g(fe).technicalFile?(u(),c(O,{key:1,xs:24,sm:12},{default:r(()=>[i("div",Q,[i("div",R,[d(J,{class:"document-icon",color:"#67C23A"},{default:r(()=>[d(g(V))]),_:1}),a[8]||(a[8]=i("span",{class:"document-label"},"技术需求文档：",-1))]),i("div",Z,[d(_e,{type:"success",size:"large"},{default:r(()=>[k(b(g(fe).technicalFile.name),1)]),_:1}),d(ye,{size:"small",type:"info",style:{"margin-left":"8px"}},{default:r(()=>[k(b(He(g(fe).technicalFile.size)),1)]),_:1}),d(Je,{type:"primary",size:"small",plain:"",style:{"margin-left":"12px"},onClick:Ie},{default:r(()=>[d(J,{style:{"margin-right":"4px"}},{default:r(()=>[d(g(C))]),_:1}),a[9]||(a[9]=k(" 预览 ",-1))]),_:1})])])]),_:1})):o("",!0)]),_:1})]),_:1})):o("",!0),d(S,{gutter:16,style:{"margin-top":"16px"}},{default:r(()=>[d(O,{xs:24,lg:12},{default:r(()=>[d(q,{class:"config-card"},{header:r(()=>[i("div",$,[i("span",ee,[d(_e,{type:"success",size:"small"},{default:r(()=>[...a[10]||(a[10]=[k("基准组",-1)])]),_:1}),a[11]||(a[11]=i("span",{style:{"margin-left":"8px"}},"当前配置",-1))])])]),default:r(()=>[d(Le,{"label-position":"top"},{default:r(()=>[d(H,{label:"模型"},{default:r(()=>[d(Ke,{value:"gpt-4o-mini",disabled:""},{prepend:r(()=>[...a[12]||(a[12]=[i("i",{class:"bi-robot"},null,-1)])]),_:1})]),_:1}),d(H,{label:"提示词"},{extra:r(()=>[Ce.value?(u(),c(ye,{key:0,size:"small",type:"warning"},{default:r(()=>[...a[13]||(a[13]=[k(" 正在从后端加载真实提示词配置... ",-1)])]),_:1})):(u(),c(ye,{key:1,size:"small",type:"success"},{default:r(()=>[...a[14]||(a[14]=[k(" ✓ 已加载系统提示词模板。实际使用时，{analysis} 占位符会被替换为标书的具体需求分析结果，确保每个标书的大纲都是个性化的。 ",-1)])]),_:1}))]),default:r(()=>[M(d(Ke,{modelValue:Fe.value,"onUpdate:modelValue":a[2]||(a[2]=e=>Fe.value=e),type:"textarea",rows:12,placeholder:"当前使用的大纲生成提示词",disabled:""},null,8,["modelValue"]),[[Xe,Ce.value]])]),_:1})]),_:1})]),_:1})]),_:1}),d(O,{xs:24,lg:12},{default:r(()=>[d(q,{class:"config-card"},{header:r(()=>[i("div",ae,[i("span",le,[d(_e,{type:"warning",size:"small"},{default:r(()=>[...a[15]||(a[15]=[k("对比组",-1)])]),_:1}),a[16]||(a[16]=i("span",{style:{"margin-left":"8px"}},"自定义配置",-1))])])]),default:r(()=>[d(Le,{"label-position":"top"},{default:r(()=>[d(H,{label:"模型"},{default:r(()=>[d(t,{modelValue:Pe.value,"onUpdate:modelValue":a[3]||(a[3]=e=>Pe.value=e),placeholder:"选择模型"},{default:r(()=>[d(l,{label:"GPT5（最强推理）",value:"shihuang-gpt5"}),d(l,{label:"Claude Sonnet 4.5（标书专用）",value:"shihuang-claude-sonnet-45"}),d(l,{label:"GPT4o Mini（推荐）",value:"shihuang-gpt4o-mini"})]),_:1},8,["modelValue"])]),_:1}),d(H,{label:"提示词"},{extra:r(()=>[d(ye,{size:"small",type:"info"},{default:r(()=>[...a[17]||(a[17]=[k(" 自定义提示词，用于对比测试 ",-1)])]),_:1})]),default:r(()=>[d(Ke,{modelValue:De.value,"onUpdate:modelValue":a[4]||(a[4]=e=>De.value=e),type:"textarea",rows:12,placeholder:"输入自定义提示词..."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),i("div",te,[d(Je,{type:"primary",size:"large",icon:g(B),loading:Me.value,disabled:!Ee.value,onClick:Se},{default:r(()=>[...a[18]||(a[18]=[k(" 开始生成对比 ",-1)])]),_:1},8,["icon","loading","disabled"]),d(Je,{size:"large",icon:g(G),onClick:qe},{default:r(()=>[...a[19]||(a[19]=[k(" 重置 ",-1)])]),_:1},8,["icon"])]),Ue.value?(u(),c(q,{key:1,class:"result-card"},{header:r(()=>[i("div",se,[a[21]||(a[21]=i("span",{class:"card-title"},[i("i",{class:"bi-bar-chart"}),k(" 生成结果对比 ")],-1)),d(Je,{text:"",icon:g(E)},{default:r(()=>[...a[20]||(a[20]=[k("导出报告",-1)])]),_:1},8,["icon"])])]),default:r(()=>[d(S,{gutter:16},{default:r(()=>[d(O,{xs:24,lg:12},{default:r(()=>[i("div",ue,[i("h3",ne,[d(_e,{type:"success",size:"small"},{default:r(()=>[...a[22]||(a[22]=[k("基准组",-1)])]),_:1}),a[23]||(a[23]=k(" GPT-4o-mini ",-1))]),i("div",ie,[d(We,{"max-height":"600px"},{default:r(()=>[Be.value?(u(),s("div",de,b(Be.value),1)):(u(),c(Ne,{key:1,description:"暂无结果"}))]),_:1})]),i("div",ce,[d(ye,{size:"small",type:"info"},{default:r(()=>[k(" 生成时间: "+b(Te.value||"-"),1)]),_:1})])])]),_:1}),d(O,{xs:24,lg:12},{default:r(()=>[i("div",oe,[i("h3",re,[d(_e,{type:"warning",size:"small"},{default:r(()=>[...a[24]||(a[24]=[k("对比组",-1)])]),_:1}),k(" "+b(Pe.value||"未选择"),1)]),i("div",ve,[d(We,{"max-height":"600px"},{default:r(()=>[Ge.value?(u(),s("div",me,b(Ge.value),1)):(u(),c(Ne,{key:1,description:"暂无结果"}))]),_:1})]),i("div",pe,[d(ye,{size:"small",type:"info"},{default:r(()=>[k(" 生成时间: "+b(Ae.value||"-"),1)]),_:1})])])]),_:1})]),_:1})]),_:1})):o("",!0)]),d(g(I),{modelValue:we.value,"onUpdate:modelValue":a[5]||(a[5]=e=>we.value=e),"file-url":ke.value,"file-name":je.value},null,8,["modelValue","file-url","file-name"])])}}}),[["__scopeId","data-v-97b6cc04"]]);export{fe as default};
