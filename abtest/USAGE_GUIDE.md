# ABTest ç”¨æˆ·ç®¡ç†æ¨¡å— - ä½¿ç”¨æŒ‡å—

## ğŸ‰ åŠŸèƒ½å·²å®Œæˆ

ABTest ç”¨æˆ·ç®¡ç†æ¨¡å—å·²æˆåŠŸé›†æˆåˆ°é¡¹ç›®ä¸­,æä¾›äº†å®Œæ•´çš„ç”¨æˆ·å’Œè§’è‰²ç®¡ç†åŠŸèƒ½ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
abtest/
â”œâ”€â”€ __init__.py                      # æ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”œâ”€â”€ README.md                        # è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ USAGE_GUIDE.md                   # æœ¬ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ test_user_management.py          # è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
â”œâ”€â”€ blueprints/                      # Flaskè“å›¾
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ user_management_bp.py        # ç”¨æˆ·ç®¡ç†API (787è¡Œä»£ç )
â””â”€â”€ templates/                       # HTMLæ¨¡æ¿
    â””â”€â”€ user_management.html         # ç”¨æˆ·ç®¡ç†å‰ç«¯é¡µé¢ (å®Œæ•´çš„å•é¡µåº”ç”¨)
```

## âœ… æµ‹è¯•ç»“æœ

æ‰€æœ‰åŠŸèƒ½å·²é€šè¿‡æµ‹è¯•:

### 1. è§’è‰²ç®¡ç† API âœ…
```bash
# è·å–è§’è‰²åˆ—è¡¨
curl http://localhost:8110/abtest/roles

# å“åº”ç¤ºä¾‹:
{
  "code": 0,
  "message": "è·å–æˆåŠŸ",
  "data": [
    {
      "role_id": 1,
      "role_name": "æ™®é€šç”¨æˆ·",
      "role_description": "åªèƒ½è®¿é—®å…¬å¼€æ–‡æ¡£",
      "privacy_level_access": 1,
      "can_upload": 0,
      "can_delete": 0,
      "can_modify_privacy": 0,
      "can_manage_users": 0,
      "user_count": 0
    }
    ...
  ]
}
```

### 2. ç”¨æˆ·ç®¡ç† API âœ…
```bash
# è·å–ç”¨æˆ·åˆ—è¡¨
curl http://localhost:8110/abtest/users

# åˆ›å»ºç”¨æˆ·
curl -X POST http://localhost:8110/abtest/users \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","email":"test@test.com","role_id":2}'

# æ›´æ–°ç”¨æˆ·
curl -X PUT http://localhost:8110/abtest/users/7 \
  -H "Content-Type: application/json" \
  -d '{"email":"updated@test.com","is_active":false}'

# åˆ é™¤ç”¨æˆ·
curl -X DELETE http://localhost:8110/abtest/users/7
```

### 3. ç»Ÿè®¡ä¿¡æ¯ API âœ…
```bash
# è·å–ç»Ÿè®¡æ•°æ®
curl http://localhost:8110/abtest/stats

# å“åº”ç¤ºä¾‹:
{
  "code": 0,
  "data": {
    "total_users": 5,
    "active_users": 5,
    "inactive_users": 0,
    "role_stats": [...],
    "recent_logins": [...]
  }
}
```

### 4. å‰ç«¯é¡µé¢ âœ…
è®¿é—®åœ°å€: `http://localhost:8110/abtest/`

å‰ç«¯é¡µé¢åŒ…å«:
- ç”¨æˆ·ç®¡ç†è¡¨æ ¼ (æ”¯æŒæœç´¢ã€åˆ†é¡µ)
- è§’è‰²ç®¡ç†è¡¨æ ¼
- ç»Ÿè®¡ä¿¡æ¯å±•ç¤º
- åˆ›å»º/ç¼–è¾‘ç”¨æˆ·æ¨¡æ€æ¡†
- åˆ›å»º/ç¼–è¾‘è§’è‰²æ¨¡æ€æ¡†
- å®Œæ•´çš„è¡¨å•éªŒè¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨åº”ç”¨
```bash
# æ–¹å¼1: é»˜è®¤ç«¯å£(5000)
python3 -m ai_tender_system.web.app

# æ–¹å¼2: æŒ‡å®šç«¯å£
FLASK_RUN_PORT=8110 python3 -m ai_tender_system.web.app
```

### 2. è®¿é—®ç”¨æˆ·ç®¡ç†é¡µé¢
åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€:
```
http://localhost:8110/abtest/
```

### 3. ä½¿ç”¨ API
å‚è€ƒ README.md ä¸­çš„å®Œæ•´ API æ–‡æ¡£

## ğŸ“Š å½“å‰æ•°æ®

ç³»ç»Ÿå·²åŒ…å«ä»¥ä¸‹é»˜è®¤æ•°æ®:

**è§’è‰² (4ä¸ª):**
1. æ™®é€šç”¨æˆ· (éšç§çº§åˆ«1)
2. å†…éƒ¨å‘˜å·¥ (éšç§çº§åˆ«2)
3. é¡¹ç›®ç»ç† (éšç§çº§åˆ«3)
4. é«˜çº§ç®¡ç† (éšç§çº§åˆ«4)

**ç”¨æˆ· (5ä¸ª):**
- chenyy (å†…éƒ¨å‘˜å·¥)
- zhangsan (å†…éƒ¨å‘˜å·¥)
- admin (é«˜çº§ç®¡ç†)
- lvhe (å†…éƒ¨å‘˜å·¥)
- huangjf (å†…éƒ¨å‘˜å·¥)

## ğŸ”§ æµ‹è¯•è„šæœ¬

è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•:
```bash
python3 abtest/test_user_management.py
```

æµ‹è¯•è„šæœ¬ä¼šè‡ªåŠ¨:
- æµ‹è¯•è§’è‰² CRUD æ“ä½œ
- æµ‹è¯•ç”¨æˆ· CRUD æ“ä½œ
- æµ‹è¯•ç»Ÿè®¡ä¿¡æ¯
- æ¸…ç†æµ‹è¯•æ•°æ®

## ğŸ“ API å“åº”æ ¼å¼

### æˆåŠŸå“åº”
```json
{
  "code": 0,
  "message": "æ“ä½œæˆåŠŸ",
  "data": { ... }
}
```

### é”™è¯¯å“åº”
```json
{
  "code": -1,
  "message": "é”™è¯¯æè¿°"
}
```

## ğŸ¨ å‰ç«¯ç‰¹æ€§

ç”¨æˆ·ç®¡ç†é¡µé¢æä¾›:

1. **å“åº”å¼è®¾è®¡** - é€‚é…å„ç§å±å¹•å°ºå¯¸
2. **å®æ—¶æœç´¢** - æ”¯æŒç”¨æˆ·åå’Œé‚®ç®±æœç´¢
3. **åˆ†é¡µæ˜¾ç¤º** - æ¯é¡µ10æ¡è®°å½•
4. **æ¨¡æ€æ¡†ç¼–è¾‘** - å‹å¥½çš„ç”¨æˆ·äº¤äº’
5. **çŠ¶æ€å¾½ç« ** - æ¸…æ™°çš„è§†è§‰åé¦ˆ
6. **è¡¨å•éªŒè¯** - å‰ç«¯æ•°æ®éªŒè¯
7. **é”™è¯¯å¤„ç†** - å®Œå–„çš„é”™è¯¯æç¤º

## ğŸ” æƒé™ç³»ç»Ÿ

### éšç§çº§åˆ«
- **çº§åˆ« 1** ğŸŒ å…¬å¼€
- **çº§åˆ« 2** ğŸ¢ å†…éƒ¨
- **çº§åˆ« 3** ğŸ”’ æœºå¯†
- **çº§åˆ« 4** ğŸš« ç»å¯†

### è§’è‰²æƒé™
- `can_upload` - ä¸Šä¼ æƒé™
- `can_delete` - åˆ é™¤æƒé™
- `can_modify_privacy` - ä¿®æ”¹éšç§çº§åˆ«æƒé™
- `can_manage_users` - ç®¡ç†ç”¨æˆ·æƒé™

## ğŸ’¡ ä½¿ç”¨æç¤º

1. **åˆ›å»ºç”¨æˆ·å‰å…ˆåˆ›å»ºè§’è‰²** - ç”¨æˆ·å¿…é¡»å…³è”åˆ°ä¸€ä¸ªè§’è‰²
2. **åˆ é™¤è§’è‰²å‰æ£€æŸ¥ç”¨æˆ·** - ç³»ç»Ÿä¼šé˜»æ­¢åˆ é™¤æ­£åœ¨ä½¿ç”¨çš„è§’è‰²
3. **ç”¨æˆ·åå¿…é¡»å”¯ä¸€** - ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥é‡å¤
4. **é‚®ç®±æ˜¯å¯é€‰çš„** - åˆ›å»ºç”¨æˆ·æ—¶é‚®ç®±å­—æ®µå¯ä»¥ä¸ºç©º
5. **æ”¯æŒå…¬å¸å…³è”** - å¯ä»¥å°†ç”¨æˆ·å…³è”åˆ°ç‰¹å®šå…¬å¸

## ğŸ› é—®é¢˜æ’æŸ¥

å¦‚æœé‡åˆ°é—®é¢˜:

1. **æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶**
   ```bash
   ls -la ai_tender_system/data/knowledge_base.db
   ```

2. **æŸ¥çœ‹æ—¥å¿—**
   ```bash
   # å¯åŠ¨æ—¥å¿—ä¼šæ˜¾ç¤º: "ABTestç”¨æˆ·ç®¡ç†è“å›¾æ³¨å†ŒæˆåŠŸ"
   ```

3. **æµ‹è¯• API**
   ```bash
   curl http://localhost:8110/abtest/roles
   ```

## ğŸ“¦ æ•°æ®åº“è¡¨

è¯¥æ¨¡å—ä½¿ç”¨ä»¥ä¸‹è¡¨:
- `users` - ç”¨æˆ·è¡¨
- `user_roles` - è§’è‰²è¡¨
- `companies` - å…¬å¸è¡¨(å…³è”)

## ğŸ¯ ä¸‹ä¸€æ­¥

å¯ä»¥æ‰©å±•çš„åŠŸèƒ½:
1. æ·»åŠ ç”¨æˆ·å¯†ç ç®¡ç†
2. æ·»åŠ ç”¨æˆ·å¤´åƒä¸Šä¼ 
3. æ·»åŠ è§’è‰²æƒé™æ›´ç»†ç²’åº¦æ§åˆ¶
4. æ·»åŠ ç”¨æˆ·æ´»åŠ¨æ—¥å¿—
5. æ·»åŠ ç”¨æˆ·ç»„ç®¡ç†
6. æ·»åŠ æ‰¹é‡æ“ä½œåŠŸèƒ½

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹:
- README.md - å®Œæ•´æ–‡æ¡£
- test_user_management.py - æµ‹è¯•ç¤ºä¾‹
- blueprints/user_management_bp.py - API æºç 
- templates/user_management.html - å‰ç«¯æºç 

---

**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶æµ‹è¯•é€šè¿‡
**ç‰ˆæœ¬**: 1.0.0
**æœ€åæ›´æ–°**: 2025-11-17
